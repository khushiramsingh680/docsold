[
  {
    "anchor": "hands-on-labs",
    "content": " Create AWS free Account Walk through AWS Console Understand IAM Account (Identity and Access Management) Create users and role Download and Install aws cli Configure Aws cli Configure Aws resources using aws Cli Using Profile with Aws cli Creating AWS ec2 instance from Aws console Creating ssh key and try to access using key NOTE: Above topics can be skipped if the participants are comfortable with them.\n",
    "fullLink": "/docs/terraform/terraform-with-aws/#hands-on-labs",
    "heading": "Hands-on Labs",
    "level": 4,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-aws/Terraform with AWS",
    "permalink": "/docs/terraform/terraform-with-aws/",
    "title": "Terraform with AWS",
    "truncatedContent": " Create AWS free Account Walk through AWS Console Understand IAM …"
  },
  {
    "anchor": "compulsory-tasks-to-do",
    "content": " Install vscode on your Laptop using below click Click here to download vscode Install gitbash on your Laptop Click here to download gitbash Install Terraform on your Laptop Click here to download Terraform ",
    "fullLink": "/docs/terraform/terraform-with-aws/#compulsory-tasks-to-do",
    "heading": "Compulsory tasks to do",
    "level": 3,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-aws/Terraform with AWS",
    "permalink": "/docs/terraform/terraform-with-aws/",
    "title": "Terraform with AWS",
    "truncatedContent": " Install vscode on your Laptop using below click Click here to …"
  },
  {
    "anchor": "configure-authentication-to-get-started-with-terraform",
    "content": " Configure Authentication with Roles on Ec2 Instance Configure Authentication with static Credentials provider \"aws\" {\rregion = \"us-west-2\"\raccess_key = \"my-access-key\"\rsecret_key = \"my-secret-key\"\r} Configure Authentication with Environment variable export AWS_ACCESS_KEY_ID=\"anaccesskey\"\rexport AWS_SECRET_ACCESS_KEY=\"asecretkey\"\rexport AWS_DEFAULT_REGION=\"us-west-2\" Configure Authentication with Shared Credentials File provider \"aws\" {\rregion = \"us-west-2\"\rshared_credentials_file = \"/Users/tf_user/.aws/creds\"\rprofile = \"customprofile\"\r} Create terraform block terraform {\rrequired_providers {\raws = {\rsource = \"hashicorp/aws\"\rversion = \"3.63.0\"\r}\r}\r} ",
    "fullLink": "/docs/terraform/terraform-with-aws/#configure-authentication-to-get-started-with-terraform",
    "heading": "Configure Authentication to get started with Terraform",
    "level": 3,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-aws/Terraform with AWS",
    "permalink": "/docs/terraform/terraform-with-aws/",
    "title": "Terraform with AWS",
    "truncatedContent": " Configure Authentication with Roles on Ec2 Instance Configure …"
  },
  {
    "anchor": "random-provider",
    "content": " Define random provider terraform {\rrequired_providers {\rrandom = {\rsource = \"hashicorp/random\"\rversion = \"2.3.0\"\r}\r}\r} Random String resource \"random_string\" \"resource_code\" {\rlength = 5\rspecial = false\rupper = false\r}\routput \"resource_code\" {\rvalue = random_string.resource_code.result\r} Random Id resource \"random_id\" \"my_id\" {\rbyte_length = 8\r}\r# full object\routput \"my_id\" {\rvalue = random_id.my_id\r} Random Integer resource \"random_integer\" \"my_integer\" {\rmin = 1\rmax = 100\r}\routput \"my_integer\" {\rvalue = random_integer.my_integer.result\r} Random Password resource \"random_password\" \"my_password\" {\rlength = 12\rspecial = true\r}\routput \"my_password\" {\rvalue = random_password.my_password.result\r} Random Pet resource \"random_pet\" \"my_name\" {\rlength = 2\r}\routput \"my_name\" {\rvalue = random_pet.my_name.id\r} Random UUID resource \"random_uuid\" \"my_uuid\" { }\routput \"my_uuid\" {\rvalue = random_uuid.my_uuid.result\r} Random Shuffle resource \"random_shuffle\" \"my_numbers\" {\rinput = [\"one\", \"two\", \"three\", \"four\"]\r}\routput \"my_numbers\" {\rvalue = random_shuffle.my_numbers.result\r} Create Terraform Provider file provider \"aws\" {\r# Configuration options\r} Create a tf file for ec2 instance resource \"aws_instance\" \"web\" {\rami = ",
    "fullLink": "/docs/terraform/terraform-with-aws/#random-provider",
    "heading": "Random Provider",
    "level": 4,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-aws/Terraform with AWS",
    "permalink": "/docs/terraform/terraform-with-aws/",
    "title": "Terraform with AWS",
    "truncatedContent": " Define random provider terraform {\rrequired_providers {\rrandom = { …"
  },
  {
    "anchor": "data-sources-examples",
    "content": " Example1 fetch the ami info data \"aws_ami\" \"app_ami\" {\rmost_recent = true\rowners = [\"self\"]\rfilter {\rname = \"name\"\rvalues = [\"HelloWorld\"]\r}\r}\rresource \"aws_instance\" \"app\" {\rami = \"${data.aws_ami.app_ami.id}\"\rinstance_type = \"t2.micro\"\r} Example1 fetch Instance info data \"aws_instance\" \"myawsinstance\" {\rfilter {\rname = \"tag:Name\"\rvalues = [\"Terraform EC2\"]\r}\rdepends_on = [\r\"aws_instance.ec2_example\"\r]\r} Example1 fetch the ami data \"aws_ami\" \"myAmi\" {\rowners = [\"099720109477\"]\rmost_recent = true\rfilter {\rname = \"description\"\rvalues = [\"Canonical, Ubuntu, 20.04 LTS*\"]\r}\rfilter {\rname = \"architecture\"\rvalues = [\"x86_64\"]\r} Subnet data \"aws_subnet\" \"get-subnet-id\" {\rfilter {\rname = \"tag:Name\"\rvalues = [\"public-1\"]\r}\r} Print the subnet fetched from data source output \"aws_subnet_id\" {\rvalue = data.aws_subnet.get-subnet-id.id\r}\rvariable \"vpc_id\" {}\rdata \"aws_vpc\" \"selected\" {\rid = var.vpc_id\r}\rresource \"aws_subnet\" \"example\" {\rvpc_id = data.aws_vpc.selected.id\ravailability_zone = \"us-west-2a\"\rcidr_block = cidrsubnet(data.aws_vpc.selected.cidr_block, 4, 1)\r} Data Source ec2 instance provider \"aws\" {\rregion = \"eu-central-1\"\raccess_key = \"AKIATQ37NXB2JMXVGYPG\"\rsecret_key = \"ockvEN1DzYynDuKIh56BVQv/tMqmzvKnYB8FttSp\"\r}\rresource \"aws_instance\" \"ec2_example\" {\rami = \"ami-0767046d1677be5a0\"\rinstance_type = \"t2.micro\"\rtags = {\rName = \"Terraform EC2\"\r}\r}\rdata \"aws_instance\" \"myawsinstance\" {\rfilter {\rname = \"tag:Name\"\rvalues = [\"Terraform EC2\"]\r}\rdepends_on = [\r\"aws_instance.ec2_example\"\r]\r}\routput \"fetched_info_from_aws\" {\rvalue = data.aws_instance.myawsinstance.public_ip\r} ",
    "fullLink": "/docs/terraform/terraform-with-aws/#data-sources-examples",
    "heading": "Data Sources Examples",
    "level": 4,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-aws/Terraform with AWS",
    "permalink": "/docs/terraform/terraform-with-aws/",
    "title": "Terraform with AWS",
    "truncatedContent": " Example1 fetch the ami info data \u0026#34;aws_ami\u0026#34; \u0026#34;app_ami\u0026#34; {\rmost_recent = …"
  },
  {
    "anchor": "terraform-meta-arguments",
    "content": "Terraform Meta Arguments",
    "fullLink": "/docs/terraform/terraform-with-aws/#terraform-meta-arguments",
    "heading": "Terraform Meta Arguments",
    "level": 4,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-aws/Terraform with AWS",
    "permalink": "/docs/terraform/terraform-with-aws/",
    "title": "Terraform with AWS",
    "truncatedContent": "Terraform Meta Arguments"
  },
  {
    "anchor": "depends_on",
    "content": " Depends_on Example 1 resource \"aws_s3_bucket\" \"example\" {\racl = \"private\"\r}\rresource \"aws_instance\" \"example_c\" {\rami = data.aws_ami.amazon_linux.id\rinstance_type = \"t2.micro\"\rdepends_on = [aws_s3_bucket.example]\r} ",
    "fullLink": "/docs/terraform/terraform-with-aws/#depends_on",
    "heading": "Depends_on",
    "level": 5,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-aws/Terraform with AWS",
    "permalink": "/docs/terraform/terraform-with-aws/",
    "title": "Terraform with AWS",
    "truncatedContent": " Depends_on Example 1 resource \u0026#34;aws_s3_bucket\u0026#34; \u0026#34;example\u0026#34; {\racl = …"
  },
  {
    "anchor": "lifecycle",
    "content": " Example 1 resource \"aws_instance\" \"example\" {\r# ...\rlifecycle {\rignore_changes = [\r# Ignore changes to tags, e.g. because a management agent\r# updates these based on some ruleset managed elsewhere.\rtags,\r]\r}\r} Example 2 resource \"aws_instance\" \"example\" {\r# ...\rlifecycle {\rcreate_before_destroy = true\r}\r} Example 3 resource \"azurerm_resource_group\" \"example\" {\r# ...\rlifecycle {\rprevent_destroy = true\r}\r} ",
    "fullLink": "/docs/terraform/terraform-with-aws/#lifecycle",
    "heading": "LifeCycle",
    "level": 5,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-aws/Terraform with AWS",
    "permalink": "/docs/terraform/terraform-with-aws/",
    "title": "Terraform with AWS",
    "truncatedContent": " Example 1 resource \u0026#34;aws_instance\u0026#34; \u0026#34;example\u0026#34; {\r# ...\rlifecycle { …"
  },
  {
    "anchor": "aws-instance-with-security-group-and-eip-association",
    "content": "provider \"aws\" {\rregion = \"us-west-2\"\raccess_key = \"PUT-YOUR-ACCESS-KEY-HERE\"\rsecret_key = \"PUT-YOUR-SECRET-KEY-HERE\"\r}\rresource \"aws_instance\" \"myec2\" {\rami = \"ami-082b5a644766e0e6f\"\rinstance_type = \"t2.micro\"\r}\rresource \"aws_eip\" \"lb\" {\rvpc = true\r}\rresource \"aws_eip_association\" \"eip_assoc\" {\rinstance_id = aws_instance.myec2.id\rallocation_id = aws_eip.lb.id\r}\rresource \"aws_security_group\" \"allow_tls\" {\rname = \"test-security-group\"\ringress {\rfrom_port = 443\rto_port = 443\rprotocol = \"tcp\"\rcidr_blocks = [\"${aws_eip.lb.public_ip}/32\"]\r# cidr_blocks = [aws_eip.lb.public_ip/32]\r}\r} Click here to download and Install graphviz ",
    "fullLink": "/docs/terraform/terraform-with-aws/#aws-instance-with-security-group-and-eip-association",
    "heading": "AWS instance with Security group and EIP association",
    "level": 6,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-aws/Terraform with AWS",
    "permalink": "/docs/terraform/terraform-with-aws/",
    "title": "Terraform with AWS",
    "truncatedContent": "provider \u0026#34;aws\u0026#34; {\rregion = \u0026#34;us-west-2\u0026#34;\raccess_key = …"
  },
  {
    "anchor": "topics-to-be-covered",
    "content": " Meta Arguments Variables Locals Dynamic Blocks Functions ",
    "fullLink": "/docs/terraform/terraform-with-aws/#topics-to-be-covered",
    "heading": "Topics to be covered",
    "level": 3,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-aws/Terraform with AWS",
    "permalink": "/docs/terraform/terraform-with-aws/",
    "title": "Terraform with AWS",
    "truncatedContent": " Meta Arguments Variables Locals Dynamic Blocks Functions "
  },
  {
    "anchor": "variables",
    "content": " Parameterized variables\nParameters with default values\nTerraform values from tfvars files\nTerraform variables from TF vars\nOverride variable value on runtime\nCheck variable value using output\nDefine Locals\nCheck local values using output\nDefine a Prompt Variable\nvariable \"variable_name\" {} Value at apply terraform apply -var variable_name=\"value\" Access Variables var. String(Data Type) Variables variable \"var1\" {\rtype = string\rdefault = \"01000000-0000-4000-8000-000030080200\"\r} List variable variable \"users\" {\rtype = list\rdefault = [\"root\", \"user1\", \"user2\"]\r} Map variables variable \"plans\" {\rtype = map\rdefault = {\r\"5USD\" = \"1xCPU-1GB\"\r\"10USD\" = \"1xCPU-2GB\"\r\"20USD\" = \"2xCPU-4GB\"\r}\r} Access varible from map plan = var.plans[\"5USD\"] Map Example variable \"storage_sizes\" {\rtype = map\rdefault = {\r\"1xCPU-1GB\" = \"25\"\r\"1xCPU-2GB\" = \"50\"\r\"2xCPU-4GB\" = \"80\"\r}\r} Use lookup (real example region and ami) size = lookup(var.storage_sizes, var.plans[\"5USD\"]) Boolean variable \"set_password\" {\rdefault = false\r} Access Boolean Variables create_password = var.set_password Pass the value at apply end terraform apply -var set_password=\"true\" ",
    "fullLink": "/docs/terraform/terraform-with-aws/#variables",
    "heading": "Variables",
    "level": 4,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-aws/Terraform with AWS",
    "permalink": "/docs/terraform/terraform-with-aws/",
    "title": "Terraform with AWS",
    "truncatedContent": " Parameterized variables\nParameters with default values\nTerraform …"
  },
  {
    "anchor": "loading-variables-automatically",
    "content": " Files named exactly terraform.tfvars or terraform.tfvars.json.\nAny files with names ending in .auto.tfvars or .auto.tfvars.json.\nDefine variable into a files\nvi terraform.tfvars\rset_password = \"true\"\rusers = [\"root\", \"admin\"]\rplan = \"20USD\"\rtemplates = {\"ubuntu20\":\"01000000-0000-4000-8000-000030080200\", \"centos8\":\"01000000-0000-4000-8000-000050010300\"}\rtemplate = \"ubuntu20\" Json way {\r\"set_password\": \"true\",\r\"users\": [\"root\", \"admin\"],\r\"plan\": \"20USD\"\r\"templates\": {\"ubuntu20\":\"01000000-0000-4000-8000-000030200200\", \"centos8\":\"01000000-0000-4000-8000-000050010400\"},\r\"template\": \"ubuntu20\"\r} Using tfvar file other than terrafom.tfvars terraform apply -var-file=dev.tfvars ",
    "fullLink": "/docs/terraform/terraform-with-aws/#loading-variables-automatically",
    "heading": "Loading variables automatically",
    "level": 4,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-aws/Terraform with AWS",
    "permalink": "/docs/terraform/terraform-with-aws/",
    "title": "Terraform with AWS",
    "truncatedContent": " Files named exactly terraform.tfvars or terraform.tfvars.json.\nAny …"
  },
  {
    "anchor": "how-to-use-terraform-resource-meta-arguments",
    "content": " You can create multiple aws_resource using the count\nfor_each can be used for iteration and can also help you to create multiple aws_resource using the same block\nprovider is used for overriding terraform default behavior using the alias\nWith lifecycle you can prevent destroy, create resource after destroy and ignore changes to be saved inside tstate\ncount\nfor_each\nprovider\nlifecycle\nCount Example\nresource \"aws_instance\" \"ec2_example\" {\rcount = 2 ami = \"ami-0767046d1677be5a0\"\rinstance_type = \"t2.micro\"\rtags = {\rName = \"Terraform EC2\"\r}\r} For each example resource \"aws_instance\" \"ec2_example\" {\rfor_each = {\rinstance1 = \"t2.micro\"\rinstance2 = \"t2.micro\" }\rami = \"ami-0767046d1677be5a0\"\rinstance_type = each.value\rtags = {\rName = \"Terraform ${each.key}\"\r}\r} lifecycle resource \"aws_instance\" \"ec2_example\" {\rcount = 2 ami = \"ami-0767046d1677be5a0\"\rinstance_type = \"t2.micro\"\rtags = {\rName = \"Terraform EC2\"\r}\rlifecycle {\rcreate_before_destroy = true\r#prevent_destroy = true\r#ignore_changes = [tags]\r}\r} ",
    "fullLink": "/docs/terraform/terraform-with-aws/#how-to-use-terraform-resource-meta-arguments",
    "heading": "How to use Terraform resource meta arguments?",
    "level": 5,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-aws/Terraform with AWS",
    "permalink": "/docs/terraform/terraform-with-aws/",
    "title": "Terraform with AWS",
    "truncatedContent": " You can create multiple aws_resource using the count\nfor_each can be …"
  },
  {
    "anchor": "table-of-content",
    "content": " Loops with count\nLoops with for_each\nfor loop\nList Variable\nvariable \"user_names\" {\rdescription = \"IAM usernames\"\rtype = list(string)\rdefault = [\"user1\", \"user2\", \"user3\"]\r} Count resource \"aws_iam_user\" \"example\" {\rcount = length(var.user_names)\rname = var.user_names[count.index]\r} Loops with for_each\nNote : - It can only be used on set(string) or map(string).\nThe reason why for_each does not work on list(string) is because a list can contain duplicate values but if you are using set(string) or map(string) then it does not support duplicate values.\nDefine variable\nvariable \"user_names\" {\rdescription = \"IAM usernames\"\rtype = set(string)\rdefault = [\"user1\", \"user2\", \"user3s\"]\r} Use for each now resource \"aws_iam_user\" \"example\" {\rfor_each = var.user_names\rname = each.value\r} for loop variable \"user_names\" {\rdescription = \"IAM usernames\"\rtype = list(string)\rdefault = [\"user1\", \"user2\", \"user3\"]\r} Test output \"print_the_names\" {\rvalue = [for name in var.user_names : name]\r} For loop with map variable \"iam_users\" {\rdescription = \"map\"\rtype = map(string)\rdefault = {\ruser1 = \"normal user\"\ruser2 = \"admin user\"\ruser3 = \"root user\"\r}\r} Perform a test output \"user_with_roles\" {\rvalue = [for name, role in var.iam_users : \"${name} is the ${role}\"]\r} ",
    "fullLink": "/docs/terraform/terraform-with-aws/#table-of-content",
    "heading": "Table of Content",
    "level": 3,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-aws/Terraform with AWS",
    "permalink": "/docs/terraform/terraform-with-aws/",
    "title": "Terraform with AWS",
    "truncatedContent": " Loops with count\nLoops with for_each\nfor loop\nList Variable\nvariable …"
  },
  {
    "anchor": "how-to-use-terraform-locals",
    "content": " Define Local locals {\rstaging_env = \"staging\"\r} Use local variable resource \"aws_instance\" \"ec2_example\" {\rami = \"ami-0767046d1677be5a0\"\rinstance_type = \"t2.micro\"\rsubnet_id = aws_subnet.staging-subnet.id\rtags = {\rName = \"${local.staging_env} - Terraform EC2\"\r}\r} Local can also use variable locals {\rserver_details = \"${var.location}-${var.server_name}\"\r} ",
    "fullLink": "/docs/terraform/terraform-with-aws/#how-to-use-terraform-locals",
    "heading": "How to use Terraform locals?",
    "level": 5,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-aws/Terraform with AWS",
    "permalink": "/docs/terraform/terraform-with-aws/",
    "title": "Terraform with AWS",
    "truncatedContent": " Define Local locals {\rstaging_env = \u0026#34;staging\u0026#34;\r} Use local variable …"
  },
  {
    "anchor": "conditions",
    "content": " Use below condition based on env variable env {}\rtfvars\renv = \"prod\"\rmain.tf\rcount = var.env == \"prod\" ? 5 : 2 How to download the plugin for provider terraform init How to create a infra terraform apply How to delete all resources created by Terraform terraform destroy How to destroy one specific resource which is created with terraform terraform destroy -target=resource_type.resource_name check state file terraform show Terraform state related commands Subcommands:\rlist List resources in the state\rmv Move an item in the state\rpull Pull current state and output to stdout\rpush Update remote state from a local state file\rreplace-provider Replace provider in the state\rrm Remove instances from the state\rshow Show a resource in the state list Resources in state file terraform state list Filtering by Resource terraform state list aws_instance.bar Remove from state file terraform state rm aws_instance.web check specific resource in state file terraform state show 'aws_vpc.my_vpc' ",
    "fullLink": "/docs/terraform/terraform-with-aws/#conditions",
    "heading": "Conditions",
    "level": 3,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-aws/Terraform with AWS",
    "permalink": "/docs/terraform/terraform-with-aws/",
    "title": "Terraform with AWS",
    "truncatedContent": " Use below condition based on env variable env {}\rtfvars\renv = \u0026#34;prod\u0026#34; …"
  },
  {
    "anchor": "terraform-output",
    "content": " The terraform output command is used to extract the value of an output variable from the state file. ** Examples**\noutput \"instance_ips\" {\rvalue = aws_instance.web.*.public_ip\r}\routput \"lb_address\" {\rvalue = aws_alb.web.public_dns\r}\routput \"password\" {\rsensitive = true\rvalue = var.secret_password\r} to list output terraform output\rinstance_ips = [\r\"54.43.114.12\",\r\"52.122.13.4\",\r\"52.4.116.53\"\r]\rlb_address = \"my-app-alb-1657023003.us-east-1.elb.amazonaws.com\"\rpassword = Rename a resource in state file terraform state mv packet_device.worker packet_device.helper Pull state file terraform state pull Remove some resource from state file terraform state rm 'module.foo.packet_device.worker' How to define remote state file terraform {\rbackend \"s3\" {\rbucket = \"terraform121\"\rregion = \"us-west-2\"\r}\r} ",
    "fullLink": "/docs/terraform/terraform-with-aws/#terraform-output",
    "heading": "Terraform Output:",
    "level": 3,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-aws/Terraform with AWS",
    "permalink": "/docs/terraform/terraform-with-aws/",
    "title": "Terraform with AWS",
    "truncatedContent": " The terraform output command is used to extract the value of an …"
  },
  {
    "anchor": "terraform-workspace",
    "content": "Terraform maintains separate file for each environment\nCheck terraform workspace terraform workspace list Create a new workspace terraform workspace new dev see current workspace terraform workspace show Reconfigure state file terraform init \"-reconfigure\" Switch to each workspace and check state resource terraform workspace select default\rterraform state list\rterraform workspace select dev\rterraform state list ",
    "fullLink": "/docs/terraform/terraform-with-aws/#terraform-workspace",
    "heading": "Terraform Workspace",
    "level": 3,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-aws/Terraform with AWS",
    "permalink": "/docs/terraform/terraform-with-aws/",
    "title": "Terraform with AWS",
    "truncatedContent": "Terraform maintains separate file for each environment\nCheck terraform …"
  },
  {
    "anchor": "terraform-provisioner",
    "content": "Terraform Provisioner",
    "fullLink": "/docs/terraform/terraform-with-aws/#terraform-provisioner",
    "heading": "Terraform Provisioner",
    "level": 3,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-aws/Terraform with AWS",
    "permalink": "/docs/terraform/terraform-with-aws/",
    "title": "Terraform with AWS",
    "truncatedContent": "Terraform Provisioner"
  },
  {
    "anchor": "local-exec",
    "content": " Does not require any connection\nExample for local-exec\nresource \"aws_instance\" \"web\" {\rami = \"ami-0c2d06d50ce30b442\"\rinstance_type = \"t2.micro\"\rtags = {\rName = \"HelloWorld\"\r}\rprovisioner \"local-exec\" {\rcommand = \"echo The server's IP address is ${self.private_ip}\"\r}\r} Example 2 resource \"aws_instance\" \"web\" {\rami = \"ami-0c2d06d50ce30b442\"\rinstance_type = \"t2.micro\"\rtags = {\rName = \"HelloWorld\"\r}\rprovisioner \"local-exec\" {\rcommand = \"echo ${aws_instance.web.public_ip} \u003e\u003e/tmp/ip.txt\"\r}\r} Creating a file when destroy resource \"aws_instance\" \"web\" {\rami = \"ami-0c2d06d50ce30b442\"\rinstance_type = \"t2.micro\"\rtags = {\rName = \"HelloWorld\"\r}\rprovisioner \"local-exec\" {\rwhen = destroy\rcommand = \"echo ${self.public_ip} destroy! \u003e/tmp/ip.txt\"\r}\r} On failure fail resource \"aws_instance\" \"web\" {\rami = \"ami-0c2d06d50ce30b442\"\rinstance_type = \"t2.micro\"\rtags = {\rName = \"HelloWorld\"\r}\rprovisioner \"local-exec\" {\ron_failure = fail\rcommand = \"echo ${self.public_ip} destroy! \u003e/tmp/ip.txt\"\r}\r} On failure continue resource \"aws_instance\" \"web\" {\rami = \"ami-0c2d06d50ce30b442\"\rinstance_type = \"t2.micro\"\rtags = {\rName = \"HelloWorld\"\r}\rprovisioner \"local-exec\" {\ron_failure = continue\rcommand = \"echo ${self.public_ip} destroy! \u003e/tmp/ip.txt\"\r}\r} ",
    "fullLink": "/docs/terraform/terraform-with-aws/#local-exec",
    "heading": "Local Exec",
    "level": 4,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-aws/Terraform with AWS",
    "permalink": "/docs/terraform/terraform-with-aws/",
    "title": "Terraform with AWS",
    "truncatedContent": " Does not require any connection\nExample for local-exec\nresource …"
  },
  {
    "anchor": "terraform-provisioner-1",
    "content": "Terraform Provisioner",
    "fullLink": "/docs/terraform/terraform-with-aws/#terraform-provisioner-1",
    "heading": "Terraform Provisioner",
    "level": 3,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-aws/Terraform with AWS",
    "permalink": "/docs/terraform/terraform-with-aws/",
    "title": "Terraform with AWS",
    "truncatedContent": "Terraform Provisioner"
  },
  {
    "anchor": "remote-exec",
    "content": " Requires Conection block Example 1 resource \"aws_instance\" \"web\" {\rami = \"ami-0c2d06d50ce30b442\"\rinstance_type = \"t2.micro\"\rkey_name = \"mykey\"\rvpc_security_group_ids = [aws_security_group.main.id]\rtags = {\rName = \"Terraform\"\r}\rprovisioner \"remote-exec\" {\rinline = [\"echo $(hostname -i) \u003e\u003e /tmp/new.txt\"]\r}\rconnection {\rtype = \"ssh\"\rhost = self.public_ip\ruser = \"ec2-user\"\rprivate_key = file(\"/home/ec2-user/mykey.pem\")\r}\r}\rresource \"aws_security_group\" \"main\" {\regress = [\r{\rcidr_blocks = [ \"0.0.0.0/0\", ]\rdescription = \"\"\rfrom_port = 0\ripv6_cidr_blocks = []\rprefix_list_ids = []\rprotocol = \"-1\"\rsecurity_groups = []\rself = false\rto_port = 0\r}\r]\ringress = [\r{\rcidr_blocks = [ \"0.0.0.0/0\", ]\rdescription = \"\"\rfrom_port = 22\ripv6_cidr_blocks = []\rprefix_list_ids = []\rprotocol = \"tcp\"\rsecurity_groups = []\rself = false\rto_port = 22\r}\r]\r} Terraform Logs export TF_LOG_PATH=/tmp/terraform.log Test the file created ssh -i /home/ec2-user/mykey.pem ec2-user@34.220.203.9 ",
    "fullLink": "/docs/terraform/terraform-with-aws/#remote-exec",
    "heading": "Remote Exec",
    "level": 4,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-aws/Terraform with AWS",
    "permalink": "/docs/terraform/terraform-with-aws/",
    "title": "Terraform with AWS",
    "truncatedContent": " Requires Conection block Example 1 resource \u0026#34;aws_instance\u0026#34; \u0026#34;web\u0026#34; { …"
  },
  {
    "anchor": "-dynamic-blocks",
    "content": " Without Dynamic Blocks resource \"aws_security_group\" \"main\" {\rname = \"resource_without_dynamic_block\"\rvpc_id = data.aws_vpc.main.id\ringress {\rdescription = \"ingress_rule_1\"\rfrom_port = 443\rto_port = 443\rprotocol = \"tcp\"\rcidr_blocks = [\"0.0.0.0/0\"]\r}\ringress {\rdescription = \"ingress_rule_2\"\rfrom_port = 80\rto_port = 80\rprotocol = \"tcp\"\rcidr_blocks = [\"0.0.0.0/0\"]\r}\rtags = {\rName = \"AWS security group non-dynamic block\"\r}\r} With Local values locals {\ringress_rules = [{\rport = 443\rdescription = \"Ingress rules for port 443\"\r},\r{\rport = 80\rdescription = \"Ingree rules for port 80\"\r}]\r}\rresource \"aws_security_group\" \"main\" {\rname = \"resource_with_dynamic_block\"\rvpc_id = data.aws_vpc.main.id\rdynamic \"ingress\" {\rfor_each = local.ingress_rules\rcontent {\rdescription = ingress.value.description\rfrom_port = ingress.value.port\rto_port = ingress.value.port\rprotocol = \"tcp\"\rcidr_blocks = [\"0.0.0.0/0\"]\r}\r}\rtags = {\rName = \"AWS security group dynamic block\"\r}\r} ",
    "fullLink": "/docs/terraform/terraform-with-aws/#-dynamic-blocks",
    "heading": "##### Dynamic Blocks",
    "level": 3,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-aws/Terraform with AWS",
    "permalink": "/docs/terraform/terraform-with-aws/",
    "title": "Terraform with AWS",
    "truncatedContent": " Without Dynamic Blocks resource \u0026#34;aws_security_group\u0026#34; \u0026#34;main\u0026#34; {\rname = …"
  },
  {
    "anchor": "testing-with-null-resoures",
    "content": " Example 1 count resource \"null_resource\" \"simple\" {\rcount = 2\r}\routput \"simple\" {\rvalue = null_resource.simple\r} Example List locals {\rnames = [\"bob\", \"kevin\", \"stewart\"]\r}\rresource \"null_resource\" \"names\" {\rcount = length(local.names)\rtriggers = {\rname = local.names[count.index]\r}\r}\routput \"names\" {\rvalue = null_resource.names\r} For Each: Simple List Example locals {\rminions = [\"bob\", \"kevin\", \"stewart\"]\r}\rresource \"null_resource\" \"minions\" {\rfor_each = toset(local.minions)\rtriggers = {\rname = each.value\r}\r}\routput \"minions\" {\rvalue = null_resource.minions\r} For each map locals {\rheights = {\rbob = \"short\"\rkevin = \"tall\"\rstewart = \"medium\"\r}\r}\rresource \"null_resource\" \"heights\" {\rfor_each = local.heights\rtriggers = {\rname = each.key\rheight = each.value\r}\r}\routput \"heights\" {\rvalue = null_resource.heights\r} Another Example locals {\rheights = {\rbob = \"short\"\rstewart = \"medium\"\r}\r}\rresource \"null_resource\" \"heights\" {\rfor_each = local.heights\rtriggers = {\rname = each.key\rheight = each.value\r}\r}\routput \"heights\" {\rvalue = null_resource.heights\r} ",
    "fullLink": "/docs/terraform/terraform-with-aws/#testing-with-null-resoures",
    "heading": "Testing with null resoures",
    "level": 4,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-aws/Terraform with AWS",
    "permalink": "/docs/terraform/terraform-with-aws/",
    "title": "Terraform with AWS",
    "truncatedContent": " Example 1 count resource \u0026#34;null_resource\u0026#34; \u0026#34;simple\u0026#34; {\rcount = 2\r} …"
  },
  {
    "anchor": "conditions-1",
    "content": " [ ] Example 1 output \"a1\" {\rvalue = true ? \"is true\" : \"is false\"\r}\routput \"a2\" {\rvalue = false ? \"is true\" : \"is false\"\r}\routput \"a3\" {\rvalue = 1 == 2 ? \"is true\" : \"is false\"\r} ",
    "fullLink": "/docs/terraform/terraform-with-aws/#conditions-1",
    "heading": "Conditions",
    "level": 5,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-aws/Terraform with AWS",
    "permalink": "/docs/terraform/terraform-with-aws/",
    "title": "Terraform with AWS",
    "truncatedContent": " [ ] Example 1 output \u0026#34;a1\u0026#34; {\rvalue = true ? \u0026#34;is true\u0026#34; : \u0026#34;is false\u0026#34;\r} …"
  },
  {
    "anchor": "transformation",
    "content": " Example 1 locals {\rlist = [\"a\",\"b\",\"c\"]\r}\routput \"list\" {\rvalue = [for s in local.list : upper(s)]\r} Map List locals {\rlist = {a = 1, b = 2, c = 3}\r}\routput \"result1\" {\rvalue = [for k,v in local.list : \"${k}-${v}\" ]\r}\routput \"result2\" {\rvalue = [for k in local.list : k ]\r} Terraform Provisioner Terraform State file Terraform Lock Terraform Cloud Terraform Gitlab CICD EKS with eksctl Connect with EKS and deploy application EKS with Terraform\n",
    "fullLink": "/docs/terraform/terraform-with-aws/#transformation",
    "heading": "Transformation",
    "level": 4,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-aws/Terraform with AWS",
    "permalink": "/docs/terraform/terraform-with-aws/",
    "title": "Terraform with AWS",
    "truncatedContent": " Example 1 locals {\rlist = [\u0026#34;a\u0026#34;,\u0026#34;b\u0026#34;,\u0026#34;c\u0026#34;]\r}\routput \u0026#34;list\u0026#34; {\rvalue = …"
  },
  {
    "anchor": "local-exec-1",
    "content": " Does not reqire any connection\nExample for local-exec\nresource \"aws_instance\" \"web\" {\rami = \"ami-0c2d06d50ce30b442\"\rinstance_type = \"t2.micro\"\rtags = {\rName = \"HelloWorld\"\r}\rprovisioner \"local-exec\" {\rcommand = \"echo The server's IP address is ${self.private_ip}\"\r}\r} Example 2 resource \"aws_instance\" \"web\" {\rami = \"ami-0c2d06d50ce30b442\"\rinstance_type = \"t2.micro\"\rtags = {\rName = \"HelloWorld\"\r}\rprovisioner \"local-exec\" {\rcommand = \"echo ${aws_instance.web.public_ip} \u003e\u003e/tmp/ip.txt\"\r}\r} Creating a file when destroy resource \"aws_instance\" \"web\" {\rami = \"ami-0c2d06d50ce30b442\"\rinstance_type = \"t2.micro\"\rtags = {\rName = \"HelloWorld\"\r}\rprovisioner \"local-exec\" {\rwhen = destroy\rcommand = \"echo ${self.public_ip} destroy! \u003e/tmp/ip.txt\"\r}\r} On failure fail resource \"aws_instance\" \"web\" {\rami = \"ami-0c2d06d50ce30b442\"\rinstance_type = \"t2.micro\"\rtags = {\rName = \"HelloWorld\"\r}\rprovisioner \"local-exec\" {\ron_failure = fail\rcommand = \"echo ${self.public_ip} destroy! \u003e/tmp/ip.txt\"\r}\r} On failure continue resource \"aws_instance\" \"web\" {\rami = \"ami-0c2d06d50ce30b442\"\rinstance_type = \"t2.micro\"\rtags = {\rName = \"HelloWorld\"\r}\rprovisioner \"local-exec\" {\ron_failure = continue\rcommand = \"echo ${self.public_ip} destroy! \u003e/tmp/ip.txt\"\r}\r} ",
    "fullLink": "/docs/terraform/terraform-with-aws/#local-exec-1",
    "heading": "Local Exec",
    "level": 5,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-aws/Terraform with AWS",
    "permalink": "/docs/terraform/terraform-with-aws/",
    "title": "Terraform with AWS",
    "truncatedContent": " Does not reqire any connection\nExample for local-exec\nresource …"
  },
  {
    "anchor": "terraform-provisioner-2",
    "content": "Terraform Provisioner",
    "fullLink": "/docs/terraform/terraform-with-aws/#terraform-provisioner-2",
    "heading": "Terraform Provisioner",
    "level": 3,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-aws/Terraform with AWS",
    "permalink": "/docs/terraform/terraform-with-aws/",
    "title": "Terraform with AWS",
    "truncatedContent": "Terraform Provisioner"
  },
  {
    "anchor": "remote-exec-1",
    "content": " Requires Conection block Example 1 resource \"aws_instance\" \"web\" {\rami = \"ami-0c2d06d50ce30b442\"\rinstance_type = \"t2.micro\"\rkey_name = \"mykey\"\rvpc_security_group_ids = [aws_security_group.main.id]\rtags = {\rName = \"Terraform\"\r}\rprovisioner \"remote-exec\" {\rinline = [\"echo $(hostname -i) \u003e\u003e /tmp/new.txt\"]\r}\rconnection {\rtype = \"ssh\"\rhost = self.public_ip\ruser = \"ec2-user\"\rprivate_key = file(\"/home/ec2-user/mykey.pem\")\r}\r}\rresource \"aws_security_group\" \"main\" {\regress = [\r{\rcidr_blocks = [ \"0.0.0.0/0\", ]\rdescription = \"\"\rfrom_port = 0\ripv6_cidr_blocks = []\rprefix_list_ids = []\rprotocol = \"-1\"\rsecurity_groups = []\rself = false\rto_port = 0\r}\r]\ringress = [\r{\rcidr_blocks = [ \"0.0.0.0/0\", ]\rdescription = \"\"\rfrom_port = 22\ripv6_cidr_blocks = []\rprefix_list_ids = []\rprotocol = \"tcp\"\rsecurity_groups = []\rself = false\rto_port = 22\r}\r]\r} Terraform Logs export TF_LOG_PATH=/tmp/terraform.log Test the file created ssh -i /home/ec2-user/mykey.pem ec2-user@34.220.203.9 File Provisoner Example resource \"aws_instance\" \"web\" {\rami = \"ami-02e136e904f3da870\"\rinstance_type = \"t2.micro\"\rkey_name = \"news\"\rvpc_security_group_ids = [aws_security_group.main.id]\rtags = {\rName = \"Terraform\"\r}\rprovisioner \"file\" {\rsource = \"n/tree.txt\"\rdestination = \"/tmp/rajveer/\"\r}\rconnection {\rtype = \"ssh\"\rhost = self.public_ip\ruser = \"ec2-user\"\rprivate_key = file(\"${path.module}/news.pem\")\r}\r}\rresource \"aws_security_group\" \"main\" {\regress = [\r{\rcidr_blocks = [ \"0.0.0.0/0\", ]\rdescription = \"\"\rfrom_port = 0\ripv6_cidr_blocks = []\rprefix_list_ids = []\rprotocol = \"-1\"\rsecurity_groups = []\rself = false\rto_port = 0\r}\r]\ringress = [\r{\rcidr_blocks = [ \"0.0.0.0/0\", ]\rdescription = \"\"\rfrom_port = 22\ripv6_cidr_blocks = []\rprefix_list_ids = []\rprotocol = \"tcp\"\rsecurity_groups = []\rself = false\rto_port = 22\r}\r]\r}\routput \"web\" {\rvalue = aws_instance.web.public_ip\r} Click Here to know more about failure Click Here for Terraform Cloud-pricing ",
    "fullLink": "/docs/terraform/terraform-with-aws/#remote-exec-1",
    "heading": "Remote Exec",
    "level": 4,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-aws/Terraform with AWS",
    "permalink": "/docs/terraform/terraform-with-aws/",
    "title": "Terraform with AWS",
    "truncatedContent": " Requires Conection block Example 1 resource \u0026#34;aws_instance\u0026#34; \u0026#34;web\u0026#34; { …"
  },
  {
    "anchor": "module-1---getting-started--setting-up-labs",
    "content": " Choosing a right Infrastructure as Code tool Terraform Overview Installing Terraform - Windows Users Difference between Terraform and Ansible Setting up Azure Account Introduction to Azure CLI Authenticate Azure with Terraform Terraform init, plan and apply ",
    "fullLink": "/docs/terraform/terraform-with-azure/#module-1---getting-started--setting-up-labs",
    "heading": "Module 1 - Getting Started \u0026 Setting Up Labs",
    "level": 3,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-azure/Terraform with Azure",
    "permalink": "/docs/terraform/terraform-with-azure/",
    "title": "Terraform with Azure",
    "truncatedContent": " Choosing a right Infrastructure as Code tool Terraform Overview …"
  },
  {
    "anchor": "module-2--building-cloud-infrastructure-with-terraform",
    "content": " Introduction to Terraform with Azure Create Resource Group Terraform Destroy Azure Virtual Networks Azure Subnet Azure Public IP Azure Network Interface Create Windows and Linux VM Azure Storage Security Groups Load Balancers Understanding Terraform State files Understanding Desired \u0026 Current States Terraform Provider Versioning Types of Terraform Providers Methods to define Terraform provider Version ",
    "fullLink": "/docs/terraform/terraform-with-azure/#module-2--building-cloud-infrastructure-with-terraform",
    "heading": "Module 2 – Building Cloud Infrastructure with Terraform",
    "level": 3,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-azure/Terraform with Azure",
    "permalink": "/docs/terraform/terraform-with-azure/",
    "title": "Terraform with Azure",
    "truncatedContent": " Introduction to Terraform with Azure Create Resource Group Terraform …"
  },
  {
    "anchor": "tasks-to-do",
    "content": "Tasks to do",
    "fullLink": "/docs/terraform/terraform-with-azure/#tasks-to-do",
    "heading": "Tasks to do",
    "level": 4,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-azure/Terraform with Azure",
    "permalink": "/docs/terraform/terraform-with-azure/",
    "title": "Terraform with Azure",
    "truncatedContent": "Tasks to do"
  },
  {
    "anchor": "prerequisites",
    "content": " Create Azure Account Walk through Azure console (UI) Configure Az Cli Create a resource group and Vm using Az cli Query the resources on Azure using az cli Set up default subscription using az cli Create service principal using az cli Login with Service principal using az cli Download and Install visual studio code Install az extension in visual studio code Download and install terraform Download and install Gitbash to run linux commands Create your account on Gitlab Perform some tasks using git commands like clone repo,commit, push etc. Create a branch and push to gitlabsh create a merge request and get the approve. ",
    "fullLink": "/docs/terraform/terraform-with-azure/#prerequisites",
    "heading": "Prerequisites",
    "level": 4,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-azure/Terraform with Azure",
    "permalink": "/docs/terraform/terraform-with-azure/",
    "title": "Terraform with Azure",
    "truncatedContent": " Create Azure Account Walk through Azure console (UI) Configure Az Cli …"
  },
  {
    "anchor": "terraform-and-azure-cloud",
    "content": " Install terraform extension with visual studio code\nConfigure authentication with provider block.\nconfigure multiple provider configuration\nConfigure different ways of authentication\nconfigure local provider\nconfigure random provider\nconfigure azure provider\nconfigure gcp provider\nconfigure aws provider\nInitalize a provider using below command\nCheck the provider available with current directory\nCreate a resource group using below tf file.\ncreate a vm\ncheck the resource created\nDestroy the resource created\ndestroy only single resources\nUse some arguments along with azure resource\nuse the attributes associated to resource.\nUse output variable to print the attributes information\nAzure Virtual Networks\nAzure Subnet\nAzure Public IP\nAzure Network Interface\nCreate Windows and Linux VM\nHow to configure ssh key for Linux vm\nHow to attach a disk to vm\nAzure Storage\nSecurity Groups\nLoad Balancers\nUnderstanding Terraform State files\nUnderstanding Desired \u0026 Current States\nUse the data source to fetch the information of resources available on azure.\nData source while creating other resources with terraform.\nCommit all the files\nCreate a new branch with Day 1 and push the branch to gitlab.\nClick Here to install Az cli Click Here to download and install visual studio code\nClick Here to download and Install gitbash\nLogin to Azure Account\naz login Check all subscription details az account list Set the default subscription if you have many az account set --subscription=\"SUBSCRIPTION_ID\" Create a service principal az ad sp create-for-rbac --role=\"Contributor\" --scopes=\"/subscriptions/SUBSCRIPTION_ID\" Login with Service Principal az login --service-principal -u CLIENT_ID -p CLIENT_SECRET --tenant TENANT_ID Az command example az vm list-sizes --location westus Log out from Azure account az logout ",
    "fullLink": "/docs/terraform/terraform-with-azure/#terraform-and-azure-cloud",
    "heading": "Terraform and Azure cloud.",
    "level": 5,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-azure/Terraform with Azure",
    "permalink": "/docs/terraform/terraform-with-azure/",
    "title": "Terraform with Azure",
    "truncatedContent": " Install terraform extension with visual studio code\nConfigure …"
  },
  {
    "anchor": "environment-variable",
    "content": " Use environment variable to work with terraform and and Az client_id: export ARM_CLIENT_ID=\"00000000-0000-0000-0000-000000000000\"\rexport ARM_CLIENT_SECRET=\"00000000-0000-0000-0000-000000000000\"\rexport ARM_SUBSCRIPTION_ID=\"00000000-0000-0000-0000-000000000000\"\rexport ARM_TENANT_ID=\"00000000-0000-0000-0000-000000000000\"\ruse below example to mention in provider file In Provider file\rprovider \"azurerm\" {\rfeatures {}\rsubscription_id = \"00000000-0000-0000-0000-000000000000\"\rclient_id = \"00000000-0000-0000-0000-000000000000\"\rclient_secret = var.client_secret\rtenant_id = \"00000000-0000-0000-0000-000000000000\"\r} ",
    "fullLink": "/docs/terraform/terraform-with-azure/#environment-variable",
    "heading": "Environment Variable",
    "level": 4,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-azure/Terraform with Azure",
    "permalink": "/docs/terraform/terraform-with-azure/",
    "title": "Terraform with Azure",
    "truncatedContent": " Use environment variable to work with terraform and and Az client_id: …"
  },
  {
    "anchor": "configuring-a-vm-to-use-a-system-assigned-managed-identity",
    "content": " Click Here to know more about managed identity and use this for authentication against terraform Login with Managed Identity\naz login --identity check few commands az group create --name myResourceGroup --location eastus\raz vm create \\\r--resource-group myResourceGroup \\\r--name myVM \\\r--image Win2019Datacenter \\\r--public-ip-sku Standard \\\r--admin-username azureuser Provider file contents terraform {\rrequired_providers {\razurerm = {\rsource = \"hashicorp/azurerm\"\rversion = \"2.81.0\"\r}\r}\r}\rprovider \"azurerm\" {\r# Configuration options\r} ",
    "fullLink": "/docs/terraform/terraform-with-azure/#configuring-a-vm-to-use-a-system-assigned-managed-identity",
    "heading": "Configuring a VM to use a system-assigned managed identity",
    "level": 4,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-azure/Terraform with Azure",
    "permalink": "/docs/terraform/terraform-with-azure/",
    "title": "Terraform with Azure",
    "truncatedContent": " Click Here to know more about managed identity and use this for …"
  },
  {
    "anchor": "module-3---read-generate-modify-configurations",
    "content": " Understanding Attributes and Output Values in Terraform Terraform Variables Methods to Define Variables Data Types for Variables Fetching Data from Maps and List in Variable Count and Count Index For_each Create multiple VMs with Terraform Conditional Expressions Local Values Splat Expressions Terraform Functions Lookup Function Element Function Zipmap Function Data Sources Debugging in Terraform Terraform Format Validating Terraform Configuration FilesLoad Order \u0026 Semantics Dynamic Blocks Tainting Resources Terraform Graph Saving Terraform Plan to File ",
    "fullLink": "/docs/terraform/terraform-with-azure/#module-3---read-generate-modify-configurations",
    "heading": "Module 3 - Read, Generate, Modify Configurations",
    "level": 3,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-azure/Terraform with Azure",
    "permalink": "/docs/terraform/terraform-with-azure/",
    "title": "Terraform with Azure",
    "truncatedContent": " Understanding Attributes and Output Values in Terraform Terraform …"
  },
  {
    "anchor": "module-4---terraform-provisioners",
    "content": " Understanding Provisioners in Terraform Types of Provisioners Implementing remote-exec provisioners Implementing local-exec provisioners ",
    "fullLink": "/docs/terraform/terraform-with-azure/#module-4---terraform-provisioners",
    "heading": "Module 4 - Terraform Provisioners",
    "level": 3,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-azure/Terraform with Azure",
    "permalink": "/docs/terraform/terraform-with-azure/",
    "title": "Terraform with Azure",
    "truncatedContent": " Understanding Provisioners in Terraform Types of Provisioners …"
  },
  {
    "anchor": "variable-definition-precedence",
    "content": "Terraform loads variables in the following order, with later sources taking precedence over earlier ones:\nEnvironment variables The terraform.tfvars file, if present. The terraform.tfvars.json file, if present. Any *.auto.tfvars or *.auto.tfvars.json files, processed in lexical order of their filenames. Any -var and -var-file options on the command line, in the order they are provided. (This includes variables set by a Terraform Cloud workspace.) ",
    "fullLink": "/docs/terraform/terraform-with-azure/#variable-definition-precedence",
    "heading": "Variable Definition Precedence",
    "level": 4,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-azure/Terraform with Azure",
    "permalink": "/docs/terraform/terraform-with-azure/",
    "title": "Terraform with Azure",
    "truncatedContent": "Terraform loads variables in the following order, with later sources …"
  },
  {
    "anchor": "multiple-provider-configurations",
    "content": " Use alias to make this possible # Provider-1 for EastUS (Default Provider)\rprovider \"azurerm\" {\rfeatures {}\r}\r# Provider-2 for WestUS Region\rprovider \"azurerm\" {\rfeatures {\rvirtual_machine {\rdelete_os_disk_on_deletion = false\r}\r}\ralias = \"provider2-westus\"\r#client_id = \"XXXX\"\r#client_secret = \"YYY\"\r#environment = \"german\"\r#subscription_id = \"JJJJ\"\r} How to reference the non-default provider configuration in a resource resource \"azurerm_resource_group\" \"myrg2\" {\rname = \"myrg-2\"\rlocation = \"West US\"\r#.\rprovider = azurerm.provider2-westus\r} Create Azure Storage Account Resource-1: Azure Resource Group\rresource \"azurerm_resource_group\" \"myrg1\" {\rname = \"myrg-1\"\rlocation = \"East US\"\r}\r# Resource-2: Random String resource \"random_string\" \"myrandom\" {\rlength = 16\rupper = false special = false\r}\r# Resource-3: Azure Storage Account resource \"azurerm_storage_account\" \"mysa\" {\rname = \"mysa${random_string.myrandom.id}\"\rresource_group_name = azurerm_resource_group.myrg1.name\rlocation = azurerm_resource_group.myrg1.location\raccount_tier = \"Standard\"\raccount_replication_type = \"GRS\"\raccount_encryption_source = \"Microsoft.Storage\"\rtags = {\renvironment = \"staging\"\r}\r} ",
    "fullLink": "/docs/terraform/terraform-with-azure/#multiple-provider-configurations",
    "heading": "Multiple Provider Configurations",
    "level": 3,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-azure/Terraform with Azure",
    "permalink": "/docs/terraform/terraform-with-azure/",
    "title": "Terraform with Azure",
    "truncatedContent": " Use alias to make this possible # Provider-1 for EastUS (Default …"
  },
  {
    "anchor": "description-learn-concepts-like-terraform-resource-syntax-behavior-and-state",
    "content": "title: Terraform Resource Syntax, Behavior and State description: Learn concepts like Terraform Resource Syntax, Behavior and State",
    "fullLink": "/docs/terraform/terraform-with-azure/#description-learn-concepts-like-terraform-resource-syntax-behavior-and-state",
    "heading": "title: Terraform Resource Syntax, Behavior and State\\ndescription: Learn concepts like Terraform Resource Syntax, Behavior and State",
    "level": 2,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-azure/Terraform with Azure",
    "permalink": "/docs/terraform/terraform-with-azure/",
    "title": "Terraform with Azure",
    "truncatedContent": "title: Terraform Resource Syntax, Behavior and State description: …"
  },
  {
    "anchor": "step-01-introduction",
    "content": " Understand Resource Syntax Understand Resource Behavior Understanding Terraform State File terraform.tfstate Understanding Desired and Current States (High Level Only) ",
    "fullLink": "/docs/terraform/terraform-with-azure/#step-01-introduction",
    "heading": "Step-01: Introduction",
    "level": 2,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-azure/Terraform with Azure",
    "permalink": "/docs/terraform/terraform-with-azure/",
    "title": "Terraform with Azure",
    "truncatedContent": " Understand Resource Syntax Understand Resource Behavior Understanding …"
  },
  {
    "anchor": "step-02-understand-resource-syntax",
    "content": " We are going to understand about below concepts from Resource Syntax perspective Resource Block Resource Type Resource Local Name Resource Arguments Resource Meta-Arguments ",
    "fullLink": "/docs/terraform/terraform-with-azure/#step-02-understand-resource-syntax",
    "heading": "Step-02: Understand Resource Syntax",
    "level": 2,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-azure/Terraform with Azure",
    "permalink": "/docs/terraform/terraform-with-azure/",
    "title": "Terraform with Azure",
    "truncatedContent": " We are going to understand about below concepts from Resource Syntax …"
  },
  {
    "anchor": "step-03-c1-versionstf",
    "content": "# Terraform Block terraform { required_version = \"\u003e= 1.0.0\" required_providers { azurerm = { source = \"hashicorp/azurerm\" version = \"\u003e= 2.0\" } } } # Provider Block provider \"azurerm\" { features {} } ",
    "fullLink": "/docs/terraform/terraform-with-azure/#step-03-c1-versionstf",
    "heading": "Step-03: c1-versions.tf",
    "level": 2,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-azure/Terraform with Azure",
    "permalink": "/docs/terraform/terraform-with-azure/",
    "title": "Terraform with Azure",
    "truncatedContent": "# Terraform Block terraform { required_version = \u0026#34;\u0026gt;= 1.0.0\u0026#34; …"
  },
  {
    "anchor": "step-04-c2-resource-grouptf",
    "content": "# Resource-1: Azure Resource Group resource \"azurerm_resource_group\" \"myrg\" { name = \"myrg-1\" location = \"East US\" } ",
    "fullLink": "/docs/terraform/terraform-with-azure/#step-04-c2-resource-grouptf",
    "heading": "Step-04: c2-resource-group.tf",
    "level": 2,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-azure/Terraform with Azure",
    "permalink": "/docs/terraform/terraform-with-azure/",
    "title": "Terraform with Azure",
    "truncatedContent": "# Resource-1: Azure Resource Group resource \u0026#34;azurerm_resource_group\u0026#34; …"
  },
  {
    "anchor": "step-05-c3-virtual-networktf",
    "content": " Resource-2: Create Virtual Network Resource-3: Create Subnet Resource-4: Create Public IP Address Resource-5: Create Network Interface # Resource-2: Create Virtual Network resource \"azurerm_virtual_network\" \"myvnet\" { name = \"myvnet-1\" address_space = [\"10.0.0.0/16\"] location = azurerm_resource_group.myrg.location resource_group_name = azurerm_resource_group.myrg.name } # Resource-3: Create Subnet resource \"azurerm_subnet\" \"mysubnet\" { name = \"mysubnet-1\" resource_group_name = azurerm_resource_group.myrg.name virtual_network_name = azurerm_virtual_network.myvnet.name address_prefixes = [\"10.0.2.0/24\"] } # Resource-4: Create Public IP Address resource \"azurerm_public_ip\" \"mypublicip\" { name = \"mypublicip-1\" resource_group_name = azurerm_resource_group.myrg.name location = azurerm_resource_group.myrg.location allocation_method = \"Static\" tags = { environment = \"Dev\" } } # Resource-5: Create Network Interface resource \"azurerm_network_interface\" \"myvm1nic\" { name = \"vm1-nic\" location = azurerm_resource_group.myrg.location resource_group_name = azurerm_resource_group.myrg.name ip_configuration { name = \"internal\" subnet_id = azurerm_subnet.mysubnet.id private_ip_address_allocation = \"Dynamic\" public_ip_address_id = azurerm_public_ip.mypublicip.id } } ",
    "fullLink": "/docs/terraform/terraform-with-azure/#step-05-c3-virtual-networktf",
    "heading": "Step-05: c3-virtual-network.tf",
    "level": 2,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-azure/Terraform with Azure",
    "permalink": "/docs/terraform/terraform-with-azure/",
    "title": "Terraform with Azure",
    "truncatedContent": " Resource-2: Create Virtual Network Resource-3: Create Subnet …"
  },
  {
    "anchor": "step-06-understand-resource-behavior",
    "content": " We are going to understand resource behavior in combination with Terraform State Create Resource Update in-place Resources Destroy and Re-create Resources Destroy Resource ",
    "fullLink": "/docs/terraform/terraform-with-azure/#step-06-understand-resource-behavior",
    "heading": "Step-06: Understand Resource Behavior",
    "level": 2,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-azure/Terraform with Azure",
    "permalink": "/docs/terraform/terraform-with-azure/",
    "title": "Terraform with Azure",
    "truncatedContent": " We are going to understand resource behavior in combination with …"
  },
  {
    "anchor": "step-07-resource-create-resources",
    "content": "# Initialize Terraform terraform init Observation: 1) Successfully downloaded providers in .terraform folder 2) Created lock file named \".terraform.lock.hcl\" # Validate Terraform configuration files terraform validate Observation: No files changed / added in current working directory # Format Terraform configuration files terraform fmt Observations: *.tf files will change to format them if any format changes exists # Review the terraform plan terraform plan Observation-1: Nothing happens during the first run from terraform state perspective Observation-2: From Resource Behavior perspective you can see \"+ create\", we are creating # Create Resources terraform apply -auto-approve Observation: 1) Creates terraform.tfstate file in local working directory 2) Creates actual resource in Azure Cloud Important Note: Here we have seen example for Create Resource ",
    "fullLink": "/docs/terraform/terraform-with-azure/#step-07-resource-create-resources",
    "heading": "Step-07: Resource: Create Resources",
    "level": 2,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-azure/Terraform with Azure",
    "permalink": "/docs/terraform/terraform-with-azure/",
    "title": "Terraform with Azure",
    "truncatedContent": "# Initialize Terraform terraform init Observation: 1) Successfully …"
  },
  {
    "anchor": "step-08-understanding-terraform-state-file",
    "content": " What is Terraform State ? It is the primary core thing for terraform to function In a short way, its the underlying database containing the resources information which are provisioning using Terraform Primary Purpose: To store bindings between objects in a remote system and resource instances declared in your configuration. When Terraform creates a remote object in response to a change of configuration, it will record the identity of that remote object against a particular resource instance, and then potentially update or delete that object in response to future configuration changes. Terraform state file created when we first run the terraform apply Terraform state file is created locally in working directory. If required, we can confiure the backend block in terraform block which will allow us to store state file remotely. Storing remotely is recommended option which we will see in the next section of the course. ",
    "fullLink": "/docs/terraform/terraform-with-azure/#step-08-understanding-terraform-state-file",
    "heading": "Step-08: Understanding Terraform State File",
    "level": 2,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-azure/Terraform with Azure",
    "permalink": "/docs/terraform/terraform-with-azure/",
    "title": "Terraform with Azure",
    "truncatedContent": " What is Terraform State ? It is the primary core thing for terraform …"
  },
  {
    "anchor": "step-09-review-terraformtfstate-file",
    "content": " Terraform State files are JSON based Manual editing of Terraform state files is highly not recommended Review terraform.tfstate file step by step ",
    "fullLink": "/docs/terraform/terraform-with-azure/#step-09-review-terraformtfstate-file",
    "heading": "Step-09: Review terraform.tfstate file",
    "level": 2,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-azure/Terraform with Azure",
    "permalink": "/docs/terraform/terraform-with-azure/",
    "title": "Terraform with Azure",
    "truncatedContent": " Terraform State files are JSON based Manual editing of Terraform …"
  },
  {
    "anchor": "step-10-resource-update-in-place-make-changes-by-adding-new-tag-to-virtual-network-resource",
    "content": " Add a new tag in azurerm_virtual_network resource # Add this for Virtual Network Resource \"Environment\" = \"Dev\" Review Terraform Plan # Review the terraform plan terraform plan Observation: You should see \"~ update in-place\" \"Plan: 0 to add, 1 to change, 0 to destroy.\" # Create / Update Resources terraform apply -auto-approve Observation: \"Apply complete! Resources: 0 added, 1 changed, 0 destroyed.\" Important Note: Here we have seen example for update in-place ",
    "fullLink": "/docs/terraform/terraform-with-azure/#step-10-resource-update-in-place-make-changes-by-adding-new-tag-to-virtual-network-resource",
    "heading": "Step-10: Resource: Update In-Place: Make changes by adding new tag to Virtual Network Resource",
    "level": 2,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-azure/Terraform with Azure",
    "permalink": "/docs/terraform/terraform-with-azure/",
    "title": "Terraform with Azure",
    "truncatedContent": " Add a new tag in azurerm_virtual_network resource # Add this for …"
  },
  {
    "anchor": "step-11-resource-destroy-and-re-create-resources-update-virtual-network-name",
    "content": " This will destroy the Virtual Network, Subnet and Recreate them. # Before name = \"vm1-nic\" # After name = \"vm1-nic1\" Execute Terraform Commands # Review the terraform plan terraform plan Observation: 1) -/+ destroy and then create replacement 2) -/+ resource \"azurerm_network_interface\" \"myvm1nic\" { 3) -/+ resource \"azurerm_network_interface\" \"myvm1nic\" { 4) Plan: 2 to add, 0 to change, 2 to destroy. # Create / Update Resources terraform apply -auto-approve Observation: 1. Apply complete! Resources: 2 added, 0 changed, 2 destroyed. ",
    "fullLink": "/docs/terraform/terraform-with-azure/#step-11-resource-destroy-and-re-create-resources-update-virtual-network-name",
    "heading": "Step-11: Resource: Destroy and Re-create Resources: Update Virtual Network Name",
    "level": 2,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-azure/Terraform with Azure",
    "permalink": "/docs/terraform/terraform-with-azure/",
    "title": "Terraform with Azure",
    "truncatedContent": " This will destroy the Virtual Network, Subnet and Recreate them. # …"
  },
  {
    "anchor": "step-12-resource-destroy-resource",
    "content": "# Destroy Resource terraform destroy Observation: 1) - destroy 2) All 7 resources will be destroyed 3) Plan: 0 to add, 0 to change, 7 to destroy. 4) Destroy complete! Resources: 7 destroyed. ",
    "fullLink": "/docs/terraform/terraform-with-azure/#step-12-resource-destroy-resource",
    "heading": "Step-12: Resource: Destroy Resource",
    "level": 2,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-azure/Terraform with Azure",
    "permalink": "/docs/terraform/terraform-with-azure/",
    "title": "Terraform with Azure",
    "truncatedContent": "# Destroy Resource terraform destroy Observation: 1) - destroy 2) All …"
  },
  {
    "anchor": "step-13-understand-desired-and-current-states-high-level-only",
    "content": " Desired State: Local Terraform Manifest (All *.tf files) Current State: Real Resources present in your cloud ",
    "fullLink": "/docs/terraform/terraform-with-azure/#step-13-understand-desired-and-current-states-high-level-only",
    "heading": "Step-13: Understand Desired and Current States (High-Level Only)",
    "level": 2,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-azure/Terraform with Azure",
    "permalink": "/docs/terraform/terraform-with-azure/",
    "title": "Terraform with Azure",
    "truncatedContent": " Desired State: Local Terraform Manifest (All *.tf files) Current …"
  },
  {
    "anchor": "step-14-clean-up",
    "content": "# Destroy Resource terraform destroy -auto-approve # Remove Terraform Files rm -rf .terraform* rm -rf terraform.tfstate* ",
    "fullLink": "/docs/terraform/terraform-with-azure/#step-14-clean-up",
    "heading": "Step-14: Clean-Up",
    "level": 2,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-azure/Terraform with Azure",
    "permalink": "/docs/terraform/terraform-with-azure/",
    "title": "Terraform with Azure",
    "truncatedContent": "# Destroy Resource terraform destroy -auto-approve # Remove Terraform …"
  },
  {
    "anchor": "step-15-revert-files-to-demo-state-for-students",
    "content": "# Change-1: Comment in azurerm_virtual_network #\"Environment\" = \"Dev\" # Uncomment during Step-10 # Change-2: Revert name back in azurerm_network_interface Resource name = \"vm1-nic\" ",
    "fullLink": "/docs/terraform/terraform-with-azure/#step-15-revert-files-to-demo-state-for-students",
    "heading": "Step-15: Revert files to Demo State for Students",
    "level": 2,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-azure/Terraform with Azure",
    "permalink": "/docs/terraform/terraform-with-azure/",
    "title": "Terraform with Azure",
    "truncatedContent": "# Change-1: Comment in azurerm_virtual_network #\u0026#34;Environment\u0026#34; = \u0026#34;Dev\u0026#34; …"
  },
  {
    "anchor": "references",
    "content": " Terraform State Manipulating Terraform State ",
    "fullLink": "/docs/terraform/terraform-with-azure/#references",
    "heading": "References",
    "level": 2,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-azure/Terraform with Azure",
    "permalink": "/docs/terraform/terraform-with-azure/",
    "title": "Terraform with Azure",
    "truncatedContent": " Terraform State Manipulating Terraform State "
  },
  {
    "anchor": "module-5---terraform-modules--workspaces",
    "content": " Understanding DRY principle Variables and Terraform Modules Terraform Registry Terraform Workspace Implementing Terraform Workspace ",
    "fullLink": "/docs/terraform/terraform-with-azure/#module-5---terraform-modules--workspaces",
    "heading": "Module 5 - Terraform Modules \u0026 Workspaces",
    "level": 3,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-azure/Terraform with Azure",
    "permalink": "/docs/terraform/terraform-with-azure/",
    "title": "Terraform with Azure",
    "truncatedContent": " Understanding DRY principle Variables and Terraform Modules Terraform …"
  },
  {
    "anchor": "module-6---remote-state-management",
    "content": " Integrating with GIT for team management Git Initialize Git Commit Git Push Git Tagging Git Branching Security Challenges in Committing TFState to GIT Remote State Management with Terraform Terraform State Management Importing Existing Resources with Terraform Import ",
    "fullLink": "/docs/terraform/terraform-with-azure/#module-6---remote-state-management",
    "heading": "Module 6 - Remote State Management",
    "level": 3,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-azure/Terraform with Azure",
    "permalink": "/docs/terraform/terraform-with-azure/",
    "title": "Terraform with Azure",
    "truncatedContent": " Integrating with GIT for team management Git Initialize Git Commit …"
  },
  {
    "anchor": "module-7--terraform-cloud-and-enterprise-overview",
    "content": " Introduction to Terraform Cloud Creating Infrastructure with Terraform Cloud Overview of Sentinel Security Introduction to Local and Remote Backends Implementing Remote Backend in Terraform Cloud ",
    "fullLink": "/docs/terraform/terraform-with-azure/#module-7--terraform-cloud-and-enterprise-overview",
    "heading": "Module 7 – Terraform Cloud and Enterprise Overview",
    "level": 3,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-azure/Terraform with Azure",
    "permalink": "/docs/terraform/terraform-with-azure/",
    "title": "Terraform with Azure",
    "truncatedContent": " Introduction to Terraform Cloud Creating Infrastructure with …"
  },
  {
    "anchor": "terraform-best-practices",
    "content": " Follow right Terraform folder structure Storing Terraform state in cloud storage Terraform variables for parameterizing configuration files Terraform modules for re-useable code Least privilege access for the service principal associated with Terraform ",
    "fullLink": "/docs/terraform/terraform-with-azure/#terraform-best-practices",
    "heading": "Terraform Best Practices.",
    "level": 3,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-azure/Terraform with Azure",
    "permalink": "/docs/terraform/terraform-with-azure/",
    "title": "Terraform with Azure",
    "truncatedContent": " Follow right Terraform folder structure Storing Terraform state in …"
  },
  {
    "anchor": "terraform-all-supported-extensions",
    "content": "Terraform all supported extensions",
    "fullLink": "/docs/terraform/terraform-with-azure/#terraform-all-supported-extensions",
    "heading": "Terraform all supported extensions",
    "level": 4,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-azure/Terraform with Azure",
    "permalink": "/docs/terraform/terraform-with-azure/",
    "title": "Terraform with Azure",
    "truncatedContent": "Terraform all supported extensions"
  },
  {
    "anchor": "terraform-files-name-can-be",
    "content": " .tf\r.tf.json ",
    "fullLink": "/docs/terraform/terraform-with-azure/#terraform-files-name-can-be",
    "heading": "Terraform files name can be:",
    "level": 3,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-azure/Terraform with Azure",
    "permalink": "/docs/terraform/terraform-with-azure/",
    "title": "Terraform with Azure",
    "truncatedContent": " .tf\r.tf.json "
  },
  {
    "anchor": "terraform-overrider-files-name-can-be-",
    "content": "override.tf override.tf.json temp_override.tf ",
    "fullLink": "/docs/terraform/terraform-with-azure/#terraform-overrider-files-name-can-be-",
    "heading": "Terraform Overrider files name can be :",
    "level": 4,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-azure/Terraform with Azure",
    "permalink": "/docs/terraform/terraform-with-azure/",
    "title": "Terraform with Azure",
    "truncatedContent": "override.tf override.tf.json temp_override.tf "
  },
  {
    "anchor": "terraform-variable-file-names-can-be-",
    "content": ".tfvars variables definitions\rtfvars.json\rFiles named exactly terraform.tfvars or terraform.tfvars.json\rAny files with names ending in .auto.tfvars or .auto.tfvars.json ",
    "fullLink": "/docs/terraform/terraform-with-azure/#terraform-variable-file-names-can-be-",
    "heading": "Terraform variable file names can be :",
    "level": 3,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-azure/Terraform with Azure",
    "permalink": "/docs/terraform/terraform-with-azure/",
    "title": "Terraform with Azure",
    "truncatedContent": ".tfvars variables definitions\rtfvars.json\rFiles named exactly …"
  },
  {
    "anchor": "variable-definition-precedence-1",
    "content": " Environment variables The terraform.tfvars file, if present. The terraform.tfvars.json file, if present. Any *.auto.tfvars or *.auto.tfvars.json files, processed in lexical order of their filenames. Any -var and -var-file options on the command line, in the order they are provided. (This includes variables set by a Terraform Cloud workspace.) ",
    "fullLink": "/docs/terraform/terraform-with-azure/#variable-definition-precedence-1",
    "heading": "Variable Definition Precedence",
    "level": 3,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-azure/Terraform with Azure",
    "permalink": "/docs/terraform/terraform-with-azure/",
    "title": "Terraform with Azure",
    "truncatedContent": " Environment variables The terraform.tfvars file, if present. The …"
  },
  {
    "anchor": "google-cloud-overview-2-hrs",
    "content": "Google Cloud Overview: 2 Hrs",
    "fullLink": "/docs/terraform/terraform-with-gcp/#google-cloud-overview-2-hrs",
    "heading": "Google Cloud Overview: 2 Hrs",
    "level": 2,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-gcp/Terraform with Google Cloud",
    "permalink": "/docs/terraform/terraform-with-gcp/",
    "title": "Terraform with Google Cloud",
    "truncatedContent": "Google Cloud Overview: 2 Hrs"
  },
  {
    "anchor": "introduction-to-infrastructure-as-a-code-1hr",
    "content": " Overview of infrastructure as code (Iac) Infrastructure provisioning tools - Terraform and its benefits ",
    "fullLink": "/docs/terraform/terraform-with-gcp/#introduction-to-infrastructure-as-a-code-1hr",
    "heading": "Introduction to Infrastructure as a code 1hr",
    "level": 3,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-gcp/Terraform with Google Cloud",
    "permalink": "/docs/terraform/terraform-with-gcp/",
    "title": "Terraform with Google Cloud",
    "truncatedContent": " Overview of infrastructure as code (Iac) Infrastructure provisioning …"
  },
  {
    "anchor": "getting-started--setting-up-labs-1hr",
    "content": " Terraform installation Gitbash installation (ide) Vscode installation and setup Install Terraform plugins in Vscode Setting up google cloud account ",
    "fullLink": "/docs/terraform/terraform-with-gcp/#getting-started--setting-up-labs-1hr",
    "heading": "Getting started \u0026 Setting Up Labs 1hr",
    "level": 3,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-gcp/Terraform with Google Cloud",
    "permalink": "/docs/terraform/terraform-with-gcp/",
    "title": "Terraform with Google Cloud",
    "truncatedContent": " Terraform installation Gitbash installation (ide) Vscode installation …"
  },
  {
    "anchor": "read-generate--modify-configuration-2-hrs",
    "content": " Hashicorp configuration language (Hcl) Terraform configure files Terraform state file Start to build code ",
    "fullLink": "/docs/terraform/terraform-with-gcp/#read-generate--modify-configuration-2-hrs",
    "heading": "READ, GENERATE \u0026 MODIFY CONFIGURATION 2 hrs",
    "level": 3,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-gcp/Terraform with Google Cloud",
    "permalink": "/docs/terraform/terraform-with-gcp/",
    "title": "Terraform with Google Cloud",
    "truncatedContent": " Hashicorp configuration language (Hcl) Terraform configure files …"
  },
  {
    "anchor": "know-terraform-providers-2-hrs",
    "content": " Local Google Cloud Random AWS Azurerm ",
    "fullLink": "/docs/terraform/terraform-with-gcp/#know-terraform-providers-2-hrs",
    "heading": "Know Terraform Providers 2 hrs",
    "level": 3,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-gcp/Terraform with Google Cloud",
    "permalink": "/docs/terraform/terraform-with-gcp/",
    "title": "Terraform with Google Cloud",
    "truncatedContent": " Local Google Cloud Random AWS Azurerm "
  },
  {
    "anchor": "terraform-providers-and-datasources-2hrs",
    "content": " Arguments and Attributes ",
    "fullLink": "/docs/terraform/terraform-with-gcp/#terraform-providers-and-datasources-2hrs",
    "heading": "Terraform Providers and Datasources 2hrs",
    "level": 3,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-gcp/Terraform with Google Cloud",
    "permalink": "/docs/terraform/terraform-with-gcp/",
    "title": "Terraform with Google Cloud",
    "truncatedContent": " Arguments and Attributes "
  },
  {
    "anchor": "google-cloud-overview",
    "content": " Create Google Cloud Free Account Create Project Assign access to the newly created project. Download and Install Vscode Click Here Download and Install terraform Click Here Download and Install Gitbash Create Account on Gitlab Walk through Google Cloud IAM Create VM on GCP Create a Firewall rule Create a service Account and assign permission. Configure Google Cloud cli Steps to Create a virtual Machine\nprovider Code terraform {\rrequired_providers {\rgoogle = {\rsource = \"hashicorp/google\"\rversion = \"4.20.0\"\r}\r}\r}\rprovider \"google\" {\r# Configuration options\rproject = \"quiet-fusion-348804\"\rregion = \"us-central1\"\rzone = \"us-central1-c\"\rcredentials = file(\"admin.json\")\r} Vm code resource \"google_compute_instance\" \"default\" {\rname = \"test\"\rmachine_type = \"e2-medium\"\rzone = \"us-central1-a\"\rtags = [\"foo\", \"bar\"]\rboot_disk {\rinitialize_params {\rimage = \"debian-11-bullseye-v20220406\"\r}\r}\rnetwork_interface {\rnetwork = \"default\"\raccess_config {\r// Ephemeral public IP\r}\r}\rmetadata = {\rfoo = \"bar\"\r}\r} Code for Metadata (ssh keys) resource \"google_compute_project_metadata\" \"my_ssh_key\" {\rmetadata = {\rssh-keys = \u003c",
    "fullLink": "/docs/terraform/terraform-with-gcp/#google-cloud-overview",
    "heading": "Google Cloud Overview",
    "level": 3,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-gcp/Terraform with Google Cloud",
    "permalink": "/docs/terraform/terraform-with-gcp/",
    "title": "Terraform with Google Cloud",
    "truncatedContent": " Create Google Cloud Free Account Create Project Assign access to the …"
  },
  {
    "anchor": "documents-from-gooogle-cloud",
    "content": " Terraform Best practices Terraform Best Practices Export your Google Cloud resources into Terraform format\nList Project id gcloud config list project registry.terraform.io/hashicorp/google.\nCreate a network resource \"google_compute_network\" \"vpc_network\" {\rname = \"terraform-network\"\r} Use the newly create network with vm resource \"google_compute_instance\" \"vm_instance\" {\rname = \"terraform-instance\"\rmachine_type = \"f1-micro\"\rboot_disk {\rinitialize_params {\rimage = \"debian-cloud/debian-9\"\r}\r}\rnetwork_interface {\rnetwork = google_compute_network.vpc_network.name\raccess_config {\r}\r}\r} Create a static ip resource \"google_compute_address\" \"vm_static_ip\" {\rname = \"terraform-static-ip\"\r} Update vm with static ip network_interface {\rnetwork = google_compute_network.vpc_network.self_link\raccess_config {\rnat_ip = google_compute_address.vm_static_ip.address\r}\r} Dependency with bucket # New resource for the storage bucket our application will use.\rresource \"google_storage_bucket\" \"example_bucket\" {\rname = \"\"\rlocation = \"US\"\rwebsite {\rmain_page_suffix = \"index.html\"\rnot_found_page = \"404.html\"\r}\r}\r# Create a new instance that uses the bucket\rresource \"google_compute_instance\" \"another_instance\" {\r# Tells Terraform that this VM instance must be created only after the\r# storage bucket has been created.\rdepends_on = [google_storage_bucket.example_bucket]\rname = \"terraform-instance-2\"\rmachine_type = \"f1-micro\"\rboot_disk {\rinitialize_params {\rimage = \"cos-cloud/cos-stable\"\r}\r}\rnetwork_interface {\rnetwork = google_compute_network.vpc_network.self_link\raccess_config {\r}\r}\r} ",
    "fullLink": "/docs/terraform/terraform-with-gcp/#documents-from-gooogle-cloud",
    "heading": "Documents from Gooogle Cloud",
    "level": 4,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-gcp/Terraform with Google Cloud",
    "permalink": "/docs/terraform/terraform-with-gcp/",
    "title": "Terraform with Google Cloud",
    "truncatedContent": " Terraform Best practices Terraform Best Practices Export your Google …"
  },
  {
    "anchor": "datasources",
    "content": "data \"google_project\" \"project\" {\r}\routput \"project\" {\rvalue = data.google_project.project.name\r}\routput \"hhh\" {\rvalue = \"hello world\"\r}\rdata \"google_compute_network\" \"my-network\" {\rname = \"default-us-east1\"\r}\routput \"network\" {\rvalue = data.google_compute_network.my-network.name\r}\rdata \"google_compute_regions\" \"available\" {\r}\routput \"region\" {\rvalue = data.google_compute_regions.available.names\r} Google Cloud Compute Zone data \"google_compute_zones\" \"available\" {\r}\rresource \"google_compute_instance_group_manager\" \"foo\" {\rcount = length(data.google_compute_zones.available.names)\rname = \"terraform-test-${count.index}\"\rinstance_template = google_compute_instance_template.foobar.self_link\rbase_instance_name = \"foobar-${count.index}\"\rzone = data.google_compute_zones.available.names[count.index]\rtarget_size = 1\r} Create vm as per the availablity zone resource \"google_compute_instance\" \"default\" {\rname = \"foobar${count.index}\"\rmachine_type = \"e2-medium\"\rzone = data.google_compute_zones.available.names[count.index]\rtags = [\"jenkins\"]\rcount = length(data.google_compute_zones.available.names)\rboot_disk {\rinitialize_params {\rimage = \"debian-11-bullseye-v20220406\"\r}\r}\rnetwork_interface {\rnetwork = \"default\"\raccess_config {\r// Ephemeral public IP\r}\r}\rmetadata = {\rfoo = \"bar\"\r}\r} For each resource \"google_compute_instance\" \"default\" {\rfor_each = toset(var.each)\rname = \"foobar${each.key}\"\rmachine_type = \"e2-medium\"\rzone = \"${each.value}\"\rtags = [\"jenkins\"]\rboot_disk {\rinitialize_params {\rimage = \"debian-11-bullseye-v20220406\"\r}\r}\rnetwork_interface {\rsubnetwork = google_compute_subnetwork.default.self_link\raccess_config {\r// Ephemeral public IP\r}\r}\rmetadata = {\rfoo = \"bar\"\r}\r}\r### Learn for for each\rvariable \"each\" {\rdefault = [\"us-central1-a\",\"us-central1-b\",\"us-central1-c\"]\r}\rList the active account name gcloud auth list List the project ID gcloud config list project Create a new instance using Gcloud shell gcloud compute instances create [INSTANCE_NAME] --machine-type n1-standard-2 --zone [ZONE_NAME] SSH in to the machine gcloud compute ssh [INSTANCE_NAME] --zone [YOUR_ZONE] RDP a windows server gcloud compute instances get-serial-port-output [INSTANCE_NAME] --zone [ZONE_NAME] Command to check whether the server is ready for an RDP connection gcloud compute instances get-serial-port-output Create a Storage bucket gsutil mb gs://[BUCKET_NAME] Copy a file in to the bucket gsutil cp [FILE_NAME] gs://[BUCKET_NAME] Setting up default compute zone gcloud config set compute/zone [ZONE_NAME] Set the default region: gcloud config set compute/region [REGION_NAME] List the compute engine instances created:\rgcloud compute instances list Create Kubernetes Cluster\rgcloud container clusters create [CLUSTER-NAME] Get authentication credentials for the cluster gcloud container clusters get-credentials [CLUSTER-NAME] Stop a vm gcloud compute instances stop [INSTANCE-NAME] Terraform Version Constraints\n",
    "fullLink": "/docs/terraform/terraform-with-gcp/#datasources",
    "heading": "Datasources",
    "level": 5,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-gcp/Terraform with Google Cloud",
    "permalink": "/docs/terraform/terraform-with-gcp/",
    "title": "Terraform with Google Cloud",
    "truncatedContent": "data \u0026#34;google_project\u0026#34; \u0026#34;project\u0026#34; {\r}\routput \u0026#34;project\u0026#34; {\rvalue = …"
  },
  {
    "anchor": "day2",
    "content": " Variables Meta Arguments Google Cloud Networking Conditions Local Values Terraform taint and untaint Terraform refresh commands ",
    "fullLink": "/docs/terraform/terraform-with-gcp/#day2",
    "heading": "Day2:",
    "level": 2,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-gcp/Terraform with Google Cloud",
    "permalink": "/docs/terraform/terraform-with-gcp/",
    "title": "Terraform with Google Cloud",
    "truncatedContent": " Variables Meta Arguments Google Cloud Networking Conditions Local …"
  },
  {
    "anchor": "terraform-variables-2-hrs",
    "content": " Variable Block Approaches for Variable Assignment Datatypes for variables Fetching data from Map and List Count and Count Index Conditional Expressions Local Values Terraform Functions ",
    "fullLink": "/docs/terraform/terraform-with-gcp/#terraform-variables-2-hrs",
    "heading": "Terraform Variables 2 hrs",
    "level": 3,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-gcp/Terraform with Google Cloud",
    "permalink": "/docs/terraform/terraform-with-gcp/",
    "title": "Terraform with Google Cloud",
    "truncatedContent": " Variable Block Approaches for Variable Assignment Datatypes for …"
  },
  {
    "anchor": "terraform-provisioner-2-hrs",
    "content": " Understanding Provisioners in Terraform\nTypes of Provisioners\nImplementing remote-exec provisioners\nImplementing local-exec provisioners\nCreation-Time \u0026 Destroy-Time Provisioners\nFailure Behavior for Provisioners\n",
    "fullLink": "/docs/terraform/terraform-with-gcp/#terraform-provisioner-2-hrs",
    "heading": "TERRAFORM PROVISIONER 2 hrs",
    "level": 3,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-gcp/Terraform with Google Cloud",
    "permalink": "/docs/terraform/terraform-with-gcp/",
    "title": "Terraform with Google Cloud",
    "truncatedContent": " Understanding Provisioners in Terraform\nTypes of Provisioners …"
  },
  {
    "anchor": "terraform-modules--workspaces-2-hrs",
    "content": " Understand DRY principle Creating modules for Google Cloud vm Creating modules for Google Cloud VPC Creating modules for google storage Terraform Registry Terraform Workspace Implementing Terraform workspace ",
    "fullLink": "/docs/terraform/terraform-with-gcp/#terraform-modules--workspaces-2-hrs",
    "heading": "Terraform Modules \u0026 Workspaces 2 hrs",
    "level": 3,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-gcp/Terraform with Google Cloud",
    "permalink": "/docs/terraform/terraform-with-gcp/",
    "title": "Terraform with Google Cloud",
    "truncatedContent": " Understand DRY principle Creating modules for Google Cloud vm …"
  },
  {
    "anchor": "remote-state-management-2-hrs",
    "content": " Integrating with GIT for team management Security Challenges in Commiting TFState to GIT Module Sources in Terraform Terraform .gitignore and .terraform Remote State Management with Terraform Implementing google storage Backend Challenges with State File locking Terraform State Management Importing Existing Resources with Terraform Import Document - Remote State Management Terraform state pull Terraform refresh on state https://blog.boltops.com/2020/10/03/terraform-hcl-conditional-logic/\nUnderstand conditions output \"a1\" {\rvalue = true ? \"is true\" : \"is false\"\r}\routput \"a2\" {\rvalue = false ? \"is true\" : \"is false\"\r}\routput \"a3\" {\rvalue = 1 == 2 ? \"is true\" : \"is false\"\r} More Examples output \"b1\" {\rvalue = contains([\"a\",\"b\",\"c\"], \"d\") ? \"is true\" : \"is false\"\r}\routput \"b2\" {\rvalue = keys({a: 1, b: 2, c: 3}) == [\"a\",\"b\",\"c\"] ? \"is true\" : \"is false\"\r}\routput \"b3\" {\rvalue = contains(keys({a: 1, b: 2, c: 3}), \"b\") ? \"is true\" : \"is false\"\r} Dynamic Blocks examples resource \"aws_security_group\" \"simple\" {\rname = \"demo-simple\"\rdescription = \"demo-simple\"\ringress {\rdescription = \"description 0\"\rfrom_port = 80\rto_port = 80\rprotocol = \"tcp\"\rcidr_blocks = [\"0.0.0.0/0\"]\r}\ringress {\rdescription = \"description 1\"\rfrom_port = 81\rto_port = 81\rprotocol = \"tcp\"\rcidr_blocks = [\"0.0.0.0/0\"]\r}\r} locals {\rports = [80, 81]\r}\rresource \"aws_security_group\" \"dynamic\" {\rname = \"demo-dynamic\"\rdescription = \"demo-dynamic\"\rdynamic \"ingress\" {\rfor_each = local.ports\rcontent {\rdescription = \"description ${ingress.key}\"\rfrom_port = ingress.value\rto_port = ingress.value\rprotocol = \"tcp\"\rcidr_blocks = [\"0.0.0.0/0\"]\r}\r}\r} Terraform: Variable validation with samples variable \"my_var\" {\rtype = number\rdefault = 0\rvalidation {\rcondition = var.my_var \u003e= 0\rerror_message = \"Please set my_var to a positive number or 0.\"\r}\r} Validating the length of a string # file: variables.tf\rvariable \"hetzner_api_token\" {\rtype = string\rdescription = \"Hetzner API token\"\rvalidation {\rcondition = length(var.hetzner_api_token) == 64\rerror_message = \"Must be a 64 character long Hetzner API token.\"\r}\r} more example variable \"resource_name\" {\rtype = string\rdescription = \"Input name of the resource.\"\rvalidation {\rcondition = length(var.resource_name) \u003e 5\rerror_message = \"The resource_name must be greater than 5 characters in length.\"\r}\r} variable \"string_may_not_contain\" {\rtype = string\rdefault = \"test\"\rvalidation {\rerror_message = \"Value cannot contain a \\\"/\\\".\"\rcondition = !can(regex(\"/\", var.string_may_not_contain))\r}\r} variable \"string_only_valid_options\" {\rtype = string\rdefault = \"approved\"\r# using regex\rvalidation {\rcondition = can(regex(\"^(approved|disapproved)$\", var.string_only_valid_options))\rerror_message = \"Invalid input, options: \\\"approved\\\", \\\"disapproved\\\".\"\r}\r# using contains()\rvalidation {\rcondition = contains([\"approved\", \"disapproved\"], var.string_only_valid_options)\rerror_message = \"Invalid input, options: \\\"approved\\\", \\\"disapproved\\\".\"\r}\r} variable \"string_like_aws_region\" {\rtype = string\rdefault = \"us-east-1\"\rvalidation {\rcondition = can(regex(\"[a-z][a-z]-[a-z]+-[1-9]\", var.string_like_aws_region))\rerror_message = \"Must be valid AWS Region names.\"\r} variable \"num_in_range\" {\rtype = number\rdefault = 1\rvalidation {\rcondition = var.num_in_range \u003e= 1 \u0026\u0026 var.num_in_range \u003c= 16 \u0026\u0026 floor(var.num_in_range) == var.num_in_range\rerror_message = \"Accepted values: 1-16.\"\r}\r} Code for VPC peering resource \"google_compute_network_peering\" \"peering1\" {\rname = \"peering1\"\rnetwork = google_compute_network.default.self_link\rpeer_network = google_compute_network.other.self_link\r}\rresource \"google_compute_network_peering\" \"peering2\" {\rname = \"peering2\"\rnetwork = google_compute_network.other.self_link\rpeer_network = google_compute_network.default.self_link\r}\rresource \"google_compute_network\" \"default\" {\rname = \"foobar\"\rauto_create_subnetworks = \"false\"\r}\rresource \"google_compute_network\" \"other\" {\rname = \"other\"\rauto_create_subnetworks = \"false\"\r} Used code for session ### Create a vpc\rresource \"google_compute_network\" \"vpc_network\" {\rname = \"vnet01\"\rauto_create_subnetworks = false\rmtu = 1460\r}\r#### Create a subnet\rresource \"google_compute_subnetwork\" \"default\" {\rname = \"test-subnetwork\"\rip_cidr_range = \"192.168.1.0/24\"\rregion = \"us-central1\"\rnetwork = google_compute_network.vpc_network.self_link\r}\r### Create a firewall rule for ssh allow\rresource \"google_compute_firewall\" \"ssh\" {\rname = \"allow-ssh-vnet01\"\rallow {\rports = [\"22\",\"80\"]\rprotocol = \"tcp\"\r}\rdirection = \"INGRESS\"\rnetwork = \"vnet01\"\rpriority = 1001\rsource_ranges = [\"0.0.0.0/0\"]\r}\rresource \"google_compute_network\" \"vpc_network1\" {\rname = \"vnet02\"\rauto_create_subnetworks = false\rmtu = 1460\r}\r#### Create a subnet\rresource \"google_compute_subnetwork\" \"default1\" {\rname = \"test-subnetwork\"\rip_cidr_range = \"192.168.2.0/24\"\rregion = \"us-west1\"\rnetwork = google_compute_network.vpc_network1.self_link\r}\rresource \"google_compute_firewall\" \"ssh-vnet02\" {\rname = \"allow-ssh-vnet02\"\rallow {\rports = [\"22\",\"80\"]\rprotocol = \"tcp\"\r}\rdirection = \"INGRESS\"\rnetwork = \"vnet02\"\rpriority = 1002\rsource_ranges = [\"0.0.0.0/0\"]\r}\r##### VPC Peering for vnet01 and vnet02\rresource \"google_compute_network_peering\" \"peering1\" {\rname = \"peering1\"\rnetwork = google_compute_network.vpc_network.self_link\rpeer_network = google_compute_network.vpc_network1.self_link\r}\rresource \"google_compute_network_peering\" \"peering2\" {\rname = \"peering2\"\rnetwork = google_compute_network.vpc_network1.self_link\rpeer_network = google_compute_network.vpc_network.self_link\r} ",
    "fullLink": "/docs/terraform/terraform-with-gcp/#remote-state-management-2-hrs",
    "heading": "REMOTE STATE MANAGEMENT 2 hrs",
    "level": 3,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-gcp/Terraform with Google Cloud",
    "permalink": "/docs/terraform/terraform-with-gcp/",
    "title": "Terraform with Google Cloud",
    "truncatedContent": " Integrating with GIT for team management Security Challenges in …"
  },
  {
    "anchor": "day3",
    "content": " Terraform State Management Terraform Workspace Terraform Provisioner Terraform Troubleshooting Terraform Logging Terrform Meta Argument for_each Terrform conditinal expressions Terraform functions Terraform Module ",
    "fullLink": "/docs/terraform/terraform-with-gcp/#day3",
    "heading": "Day3:",
    "level": 2,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-gcp/Terraform with Google Cloud",
    "permalink": "/docs/terraform/terraform-with-gcp/",
    "title": "Terraform with Google Cloud",
    "truncatedContent": " Terraform State Management Terraform Workspace Terraform Provisioner …"
  },
  {
    "anchor": "terraform-cloud--enterprise-capabilities-2hrs",
    "content": " Terraform cloud enterprise Terraform cloud Terraform cloud workflow Terraform enterprise Terraform registry Terraform best practices ",
    "fullLink": "/docs/terraform/terraform-with-gcp/#terraform-cloud--enterprise-capabilities-2hrs",
    "heading": "TERRAFORM CLOUD \u0026 ENTERPRISE CAPABILITIES 2hrs",
    "level": 3,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-gcp/Terraform with Google Cloud",
    "permalink": "/docs/terraform/terraform-with-gcp/",
    "title": "Terraform with Google Cloud",
    "truncatedContent": " Terraform cloud enterprise Terraform cloud Terraform cloud workflow …"
  },
  {
    "anchor": "infrastructure-as-code-with-terraform-and-gitlab-2-hrs",
    "content": " GitLab CI - Introduction GitLab - CI/CD GitLab - CI/CD Variables GitLab CI - Permissions Configuring GitLab Runners Terraform and Gitlab Integration ",
    "fullLink": "/docs/terraform/terraform-with-gcp/#infrastructure-as-code-with-terraform-and-gitlab-2-hrs",
    "heading": "Infrastructure as Code with Terraform and GitLab 2 hrs",
    "level": 3,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-gcp/Terraform with Google Cloud",
    "permalink": "/docs/terraform/terraform-with-gcp/",
    "title": "Terraform with Google Cloud",
    "truncatedContent": " GitLab CI - Introduction GitLab - CI/CD GitLab - CI/CD Variables …"
  },
  {
    "anchor": "infrastructure-as-code-with-terraform-and-jenkins-2-hrs",
    "content": " Introduction to Jenkins\nJenkins - CI/CD Variables\nJenkins Plugins\nJenkins Pipelines\nJenkins Triggers\nJenkins Upstream and Downstream jobs\nConfiguring Jenkins Agents\nExecute Terraform with Jenkins Pipeline\n",
    "fullLink": "/docs/terraform/terraform-with-gcp/#infrastructure-as-code-with-terraform-and-jenkins-2-hrs",
    "heading": "Infrastructure as Code with Terraform and Jenkins 2 hrs",
    "level": 3,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-gcp/Terraform with Google Cloud",
    "permalink": "/docs/terraform/terraform-with-gcp/",
    "title": "Terraform with Google Cloud",
    "truncatedContent": " Introduction to Jenkins\nJenkins - CI/CD Variables\nJenkins Plugins …"
  },
  {
    "anchor": "install-terraform-plugin",
    "content": "Go to Manage Jenkins \u003e Manage Plugins \u003eAvailable \u003e search Terraform. ",
    "fullLink": "/docs/terraform/terraform-with-gcp/#install-terraform-plugin",
    "heading": "Install Terraform plugin",
    "level": 3,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-gcp/Terraform with Google Cloud",
    "permalink": "/docs/terraform/terraform-with-gcp/",
    "title": "Terraform with Google Cloud",
    "truncatedContent": "Go to Manage Jenkins \u0026gt; Manage Plugins \u0026gt;Available \u0026gt; search Terraform. "
  },
  {
    "anchor": "configure-terraform",
    "content": "Go to Manage Jenkins \u003e Global Tool Configuration \u003e It will display Terraform on the list. For_Each Example resource \"google_compute_instance\" \"default\" {\rfor_each = toset(var.each)\rname = \"foobar${each.key}\"\rmachine_type = \"e2-medium\"\rzone = \"${each.value}\"\rtags = [\"jenkins\"]\rboot_disk {\rinitialize_params {\rimage = \"debian-11-bullseye-v20220406\"\r}\r}\rnetwork_interface {\rnetwork = \"default\"\raccess_config {\r// Ephemeral public IP\r}\r}\rmetadata = {\rfoo = \"bar\"\r}\r}\r### Learn for for each\rvariable \"each\" {\rdefault = [\"us-central1-a\",\"us-central1-b\",\"us-central1-c\"]\r}\rresource \"google_compute_instance\" \"default\" {\rfor_each = toset(var.each)\rname = \"foobar${each.key}\"\rmachine_type = \"e2-medium\"\rzone = \"${each.value}\"\rtags = [\"jenkins\"]\rboot_disk {\rinitialize_params {\rimage = \"debian-11-bullseye-v20220406\"\r}\r}\rnetwork_interface {\rnetwork = \"default\"\raccess_config {\r// Ephemeral public IP\r}\r}\rmetadata = {\rfoo = \"bar\"\r}\r}\r### Learn for for each\rvariable \"each\" {\rdefault = [\"us-central1-a\",\"us-central1-b\",\"us-central1-c\"]\r}\rAdd ssh key to login resource \"google_compute_project_metadata\" \"my_ssh_key\" {\rmetadata = {\rssh-keys = \u003c",
    "fullLink": "/docs/terraform/terraform-with-gcp/#configure-terraform",
    "heading": "Configure Terraform",
    "level": 3,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-gcp/Terraform with Google Cloud",
    "permalink": "/docs/terraform/terraform-with-gcp/",
    "title": "Terraform with Google Cloud",
    "truncatedContent": "Go to Manage Jenkins \u0026gt; Global Tool Configuration \u0026gt; It will display …"
  },
  {
    "anchor": "terraform-authentication-with-google-cloud-2-hrs",
    "content": " Google Cloud Free Trial Account Google Cloud Project - Service Account Google Provider \u0026 version Connect Terraform with GCP - I (username/password) Connect Terraform with GCP - II (Cloud Shell VM) Connect Terraform with GCP - III (Service Account) Approach to Resource Provision ",
    "fullLink": "/docs/terraform/terraform-with-gcp/#terraform-authentication-with-google-cloud-2-hrs",
    "heading": "Terraform Authentication with Google Cloud 2 hrs",
    "level": 3,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-gcp/Terraform with Google Cloud",
    "permalink": "/docs/terraform/terraform-with-gcp/",
    "title": "Terraform with Google Cloud",
    "truncatedContent": " Google Cloud Free Trial Account Google Cloud Project - Service …"
  },
  {
    "anchor": "terraform-for-google-storage-2-hrs",
    "content": " [Hands-on] Getting started with Cloud Storage [Hands-on] Google Cloud Storage with Terraform - I [Hands-on] Google Cloud Storage with Terraform - II [Hands-on] Google Cloud Storage with Terraform - III ",
    "fullLink": "/docs/terraform/terraform-with-gcp/#terraform-for-google-storage-2-hrs",
    "heading": "Terraform for Google Storage 2 hrs",
    "level": 3,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-gcp/Terraform with Google Cloud",
    "permalink": "/docs/terraform/terraform-with-gcp/",
    "title": "Terraform with Google Cloud",
    "truncatedContent": " [Hands-on] Getting started with Cloud Storage [Hands-on] Google Cloud …"
  },
  {
    "anchor": "terraform-for-google-network-2hrs",
    "content": " [Hands-on] Create VPC from Console [Hands-on] Create VPC with Terraform Script [Hands-on] Create VPC peering [Hands-on] Configure DNS with Terraform [Hands-on] Create Subnet - Terraform [Hands-on] Create Firewall Rule – Terraform ",
    "fullLink": "/docs/terraform/terraform-with-gcp/#terraform-for-google-network-2hrs",
    "heading": "Terraform for Google Network 2hrs",
    "level": 3,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-gcp/Terraform with Google Cloud",
    "permalink": "/docs/terraform/terraform-with-gcp/",
    "title": "Terraform with Google Cloud",
    "truncatedContent": " [Hands-on] Create VPC from Console [Hands-on] Create VPC with …"
  },
  {
    "anchor": "terraform-for-compute-engine-2-hrs",
    "content": " [Hands-on] Create Compute Engine - Console [Hands-on] Compute Engine - Terraform - I [Hands-on] Compute Engine - Terraform - II Update Compute Engine parameter - Tearraform [Hands-on] Service Account - Terraform [Hands-on] Attach Disk - Terraform Destroy GCE resources ",
    "fullLink": "/docs/terraform/terraform-with-gcp/#terraform-for-compute-engine-2-hrs",
    "heading": "Terraform for Compute Engine 2 hrs",
    "level": 3,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-gcp/Terraform with Google Cloud",
    "permalink": "/docs/terraform/terraform-with-gcp/",
    "title": "Terraform with Google Cloud",
    "truncatedContent": " [Hands-on] Create Compute Engine - Console [Hands-on] Compute Engine …"
  },
  {
    "anchor": "terraform-for-google-container-and-kubernetes-2hrs",
    "content": " Setting up Kubernetes standard cluster\nSetting up Kubernetes cluster(Autopilot)\nJenkins pipeline example\npipeline {\ragent { label 'agnt' }\rstages {\rstage('Hello') {\rsteps {\recho 'Hello World'\r}\r}\r}\r} # Terraform\r### .Gitlab-ci.yaml file stages:\ntest dev prd destroy Terraform-version: stage: test script: terraform version Terraform-Initialize: stage: test script: terraform init Define-variables: stage: prd script: export AWS_ACCESS_KEY_ID=$AWS_ACCESS_KEY_ID export AWS_SECRET_ACCESS_KEY=$AWS_SECRET_ACCESS_KEY Testing-varibale: stage: test script: - echo $AWS_ACCESS_KEY_ID Create-a-vm: stage: dev before_script: - terraform init –reconfigure script: - terraform apply –auto-approve destroy: stage: destroy script: - terraform destroy –auto-approve when: manual only: - main\n#### Terraform Sentinel\r[GitHub Link for Terraform Sentinel Policy](https://github.com/hashicorp/terraform-guides/tree/master/governance)\r[Terraform Sentinel Docs](https://www.terraform.io/cloud-docs/sentinel/import)\r- [ ] Enable Terraform Trial - [ ] Create GitHub repo all policies\r- [ ] Enable Sentinel policy on Terraform cloud\r- [ ] Login to Terraform using Terraform login command\r- [ ] Run terraform command from your local system.\r### More References Team and Governance for Terraform\nhttps://github.com/hashicorp/terraform-guides/tree/master/governance\nhttps://www.terraform.io/cloud-docs/sentinel https://www.terraform.io/cloud-docs/sentinel/import\nsentinel.hcl advisory soft-mandatory hard-mandatory\nSentinel Policies and sentinel.hcl\nallowed-providers.sentinel enforce-mandatory-tags.sentinel limit-proposed-monthly-cost.sentinel restrict-vm-publisher.sentinel restrict-vm-size.sentinel sentinel.hcl\nTerraform refresh\r# Terrafrom Trace Log Settings\rexport TF_LOG=TRACE\rexport TF_LOG_PATH=\"terraform-trace.log\"\recho $TF_LOG\recho $TF_LOG_PATH\r# Linux Bash\rcd $HOME\rvi .bashrc\r# Terraform log settings\rexport TF_LOG=TRACE\rexport TF_LOG_PATH=\"terraform-trace.log\"\r# Verify after saving the file in new terminal $ echo $TF_LOG\rTRACE\r$ echo $TF_LOG_PATH\rterraform-trace.log\r- [ ] Jenkinsfile example pipeline { agent { label ‘agent’ }\nstages {\rstage('checkout the code') {\rsteps {\rsh 'git clone https://github.com/monbostest/terraform-google-myvm.git'\r}\r}\rstage('change the workspace') {\rsteps {\rsh 'cd $WORKSPACE'\r}\r}\rstage('Init') {\rsteps {\rsh 'terraform init'\r}\r}\rstage('Apply') {\rsteps {\rsh 'terraform apply --auto-approve'\r}\r}\r}\r}\n",
    "fullLink": "/docs/terraform/terraform-with-gcp/#terraform-for-google-container-and-kubernetes-2hrs",
    "heading": "Terraform for Google Container and Kubernetes 2hrs",
    "level": 3,
    "linkIfNotFAQ": "/docs/terraform/terraform-with-gcp/Terraform with Google Cloud",
    "permalink": "/docs/terraform/terraform-with-gcp/",
    "title": "Terraform with Google Cloud",
    "truncatedContent": " Setting up Kubernetes standard cluster\nSetting up Kubernetes …"
  },
  {
    "anchor": "openshift-cluster-installation-upgradation-and-management",
    "content": "Openshift Cluster Installation ,Upgradation and Management.",
    "fullLink": "/docs/openshift/day01/#openshift-cluster-installation-upgradation-and-management",
    "heading": "Openshift Cluster Installation ,Upgradation and Management.",
    "level": 3,
    "linkIfNotFAQ": "/docs/openshift/day01/Day01",
    "permalink": "/docs/openshift/day01/",
    "title": "Day01",
    "truncatedContent": "Openshift Cluster Installation ,Upgradation and Management."
  },
  {
    "anchor": "prequisites",
    "content": " Login to AWS Cloud Create a Virtual Machine\nCreate a admin role and assign to the ec2 instance.\nCreate your account on Cloud.redhat.com Download Installer and Pull secret\nFollow the Redhat document for Installation\nConfigure AWS Account using link\nGet Domain from Freenom.com\nKnow AWS account Limit Create one Ec2 instance\nConfigure AWS Cli with Admin access on newly created ec2 instance.\nMake a test using below command\naws s3 ls List the OpenShift Container Platform web console route: oc get routes -n openshift-console | grep 'console-openshift' Login to Opeshift Cluster. oc login -u -p Login to Openshift using kubeconfig Login to OpenShift using Token oc login --token= --server= Verifying the Health of OpenShift Nodes oc get nodes Check the cpu and memory usage of each node oc adm top nodes Check more information about a node oc describe node my-node-name Check Openshift cluster Version oc get clusterversion\roc describe clusterversion Check Cluster Operator oc get co Displaying the Logs of OpenShift Nodes oc adm node-logs -u crio my-node-name Check the logs for kubelet Service oc adm node-logs -u kubelet my-node-name check all type of logs for a node oc adm node-logs my-node-name Login to Cluster node using below command and check kubelet service oc debug node/my-node-name\rsystemctl is-active kubelet Display the currently authenticated user oc whoami Check the openshift URL oc whoami --show-console Check openshift Api using below command oc whoami --show-server Check the token used by user oc whoami --show-token ",
    "fullLink": "/docs/openshift/day01/#prequisites",
    "heading": "Prequisites:",
    "level": 3,
    "linkIfNotFAQ": "/docs/openshift/day01/Day01",
    "permalink": "/docs/openshift/day01/",
    "title": "Day01",
    "truncatedContent": " Login to AWS Cloud Create a Virtual Machine\nCreate a admin role and …"
  },
  {
    "anchor": "debugging-openshift--nodes-with-crictl",
    "content": "https://kubernetes.io/docs/tasks/debug/debug-cluster/crictl/\n",
    "fullLink": "/docs/openshift/day01/#debugging-openshift--nodes-with-crictl",
    "heading": "Debugging Openshift  nodes with crictl",
    "level": 3,
    "linkIfNotFAQ": "/docs/openshift/day01/Day01",
    "permalink": "/docs/openshift/day01/",
    "title": "Day01",
    "truncatedContent": "https://kubernetes.io/docs/tasks/debug/debug-cluster/crictl/\n"
  },
  {
    "anchor": "openshift-4-installation-on-aws",
    "content": "Openshift 4 installation on AWS",
    "fullLink": "/docs/openshift/day01/#openshift-4-installation-on-aws",
    "heading": "Openshift 4 installation on AWS",
    "level": 1,
    "linkIfNotFAQ": "/docs/openshift/day01/Day01",
    "permalink": "/docs/openshift/day01/",
    "title": "Day01",
    "truncatedContent": "Openshift 4 installation on AWS"
  },
  {
    "anchor": "description",
    "content": "This document describes the installation of OCP4 on the AWS\n",
    "fullLink": "/docs/openshift/day01/#description",
    "heading": "Description",
    "level": 2,
    "linkIfNotFAQ": "/docs/openshift/day01/Day01",
    "permalink": "/docs/openshift/day01/",
    "title": "Day01",
    "truncatedContent": "This document describes the installation of OCP4 on the AWS\n"
  },
  {
    "anchor": "rbac-required-to-manage-the-installation",
    "content": "Be sure to be able to access to :\nthe dedicated AWS environment as Admin for that cluster. the Redhat Account. to Azure account as Admin to create service Principles. Bastion environment. ",
    "fullLink": "/docs/openshift/day01/#rbac-required-to-manage-the-installation",
    "heading": "RBAC required to manage the installation",
    "level": 2,
    "linkIfNotFAQ": "/docs/openshift/day01/Day01",
    "permalink": "/docs/openshift/day01/",
    "title": "Day01",
    "truncatedContent": "Be sure to be able to access to :\nthe dedicated AWS environment as …"
  },
  {
    "anchor": "informations-about-dns",
    "content": "There should be existing Public Hosted Zone in Route53. In case of stratus, we were having “stratus.soprasteria.com” as Hosted Zone.\n",
    "fullLink": "/docs/openshift/day01/#informations-about-dns",
    "heading": "Informations about DNS",
    "level": 2,
    "linkIfNotFAQ": "/docs/openshift/day01/Day01",
    "permalink": "/docs/openshift/day01/",
    "title": "Day01",
    "truncatedContent": "There should be existing Public Hosted Zone in Route53. In case of …"
  },
  {
    "anchor": "steps-to-be-performed-prior-to-installation",
    "content": "Create a SSH key\nFor production OpenShift Container Platform clusters on which you want to perform installation debugging or disaster recovery, you must provide an SSH key that your ssh-agent process uses to the installer. You can use this key to access the bootstrap machine in a public cluster to troubleshoot installation issues.\n",
    "fullLink": "/docs/openshift/day01/#steps-to-be-performed-prior-to-installation",
    "heading": "Steps To be Performed Prior to Installation",
    "level": 2,
    "linkIfNotFAQ": "/docs/openshift/day01/Day01",
    "permalink": "/docs/openshift/day01/",
    "title": "Day01",
    "truncatedContent": "Create a SSH key\nFor production OpenShift Container Platform clusters …"
  },
  {
    "anchor": "steps-to-generate-ssh-key",
    "content": " Generate the ssh-key through below command. ssh-keygen Start the ssh-agent process as a background task eval \"$(ssh-agent -s)\" Add SSH private key to the ssh-agent ssh-add /root/.ssh/id_rsa ",
    "fullLink": "/docs/openshift/day01/#steps-to-generate-ssh-key",
    "heading": "Steps to Generate SSH Key",
    "level": 2,
    "linkIfNotFAQ": "/docs/openshift/day01/Day01",
    "permalink": "/docs/openshift/day01/",
    "title": "Day01",
    "truncatedContent": " Generate the ssh-key through below command. ssh-keygen Start the …"
  },
  {
    "anchor": "example-of-install-configyaml",
    "content": "[root@ip-172-31-32-217 ec2-user]# ssh-keygen\rGenerating public/private rsa key pair.\rEnter file in which to save the key (/root/.ssh/id_rsa):\rEnter passphrase (empty for no passphrase):\rEnter same passphrase again:\rYour identification has been saved in /root/.ssh/id_rsa.\rYour public key has been saved in /root/.ssh/id_rsa.pub.\rThe key fingerprint is:\rSHA256:vr+aWqjvwNJCkqS7ZSdZWzJjt0N1uSAqukjilRd4I/I root@ip-172-31-32-217.eu-west-3.compute.internal\rThe key's randomart image is:\r+---[RSA 3072]----+\r| |\r| . |\r| . . o o |\r|o. .. o o . |\r|+.ooB++ S . |\r| =oB+Oo+ |\r|+.BE*.+ o |\r|==.=.o o o |\r|+. .o+.+oo. |\r+----[SHA256]-----+\r[root@ip-172-31-32-217 ec2-user]# eval \"$(ssh-agent -s)\"\rAgent pid 13802\r[root@ip-172-31-32-217 ec2-user]# ssh-add /root/.ssh/id_rsa\rIdentity added: /root/.ssh/id_rsa (root@ip-172-31-32-217.eu-west-3.compute.internal) ",
    "fullLink": "/docs/openshift/day01/#example-of-install-configyaml",
    "heading": "Example of install-config.yaml",
    "level": 2,
    "linkIfNotFAQ": "/docs/openshift/day01/Day01",
    "permalink": "/docs/openshift/day01/",
    "title": "Day01",
    "truncatedContent": "[root@ip-172-31-32-217 ec2-user]# ssh-keygen\rGenerating public/private …"
  },
  {
    "anchor": "obtaining-the-installation-program",
    "content": " Access the Infrastructure Provider page on the OpenShift Cluster Manager site and Login to the Redhat Account. Select your infrastructure provider. Navigate to the page for your installation type, download the installation program for your operating system, and place the file in the directory where you will store the installation configuration files. wget https://mirror.openshift.com/pub/openshift-v4/x86_64/clients/ocp/stable/openshift-install-linux.tar.gz Extract the installation program tar xvf openshift-install-linux.tar.gz Also download the pull secret from the Red Hat OpenShift Cluster Manager. ",
    "fullLink": "/docs/openshift/day01/#obtaining-the-installation-program",
    "heading": "Obtaining the installation program",
    "level": 2,
    "linkIfNotFAQ": "/docs/openshift/day01/Day01",
    "permalink": "/docs/openshift/day01/",
    "title": "Day01",
    "truncatedContent": " Access the Infrastructure Provider page on the OpenShift Cluster …"
  },
  {
    "anchor": "deploying-the-cluster",
    "content": " Login to the Bastion server.\nRun the below command to generate the Installation Config file.\n./openshift-install create install-config --dir install-new --log-level=debug NOTE :- As soon as you run the above command, it will ask for basic information like you need to select the Hosted zone, name of the cluster, Zone where you want your VM’s to run, ssh key and Pull secret.\nThis will create the Install config file. Example for the Installation Config file shown below.\napiVersion: v1 data: install-config: | apiVersion: v1 baseDomain: compute: - architecture: amd64 hyperthreading: Enabled name: worker platform: {} replicas: 3 controlPlane: architecture: amd64 hyperthreading: Enabled name: master platform: {} replicas: 3 metadata: creationTimestamp: null name: newname networking: clusterNetwork: - cidr: 10.128.0.0/14 hostPrefix: 23 machineNetwork: - cidr: 10.0.0.0/16 networkType: OpenShiftSDN serviceNetwork: - 172.30.0.0/16 platform: aws: region: eu-west-3 publish: External pullSecret: \"\" sshKey: | ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDeRsMvsXUxzVsnn70zziGkmoCMGwS7A7gswhlvcCoswq1/q3j9yrh91Q8gF0aiKFJmsm45uD1r1DrXc10v+61fmdWcf862YldDBEKF34VN+SJT0wYEy8y3zso8hJ0csi2IB49ywXdw9OZaNk3UrCPbgVhhVZgP4g/thPGNjpJsI10ksuMIE+0Z4cQUbNPR8D1UbOrzPe45ziE1eKYsrRLj0tnQ2Zf8dBRF1NbnmpsfThoQhsQ8e/MGPIaD61BgRr6a/iFHDLYtn1TqyRaUqBrGM1r5hX4Kh6+zI8J1cPmgtNcJhoKvY38npkuKoJYqfhcuvxgKC7k3F43haTwR+5Sz ec2-user@ip-172-31-45-81.eu-west-3.compute.internal NOTE :- Verify the Install config file to check if you have the desired cluster configuration.\nNow run the below command to start the Cluster creation Process ./openshift-install create cluster --dir --log-level=debug Now, wait for the around 40-50 mins for the setup of the cluster where you will get the output similar to below one which will have kube-admin details as well as API cluster link.\n...\rINFO Install complete!\rINFO To access the cluster as the system:admin user when using 'oc', run 'export KUBECONFIG=/home/myuser/install_dir/auth/kubeconfig'\rINFO Access the OpenShift web-console here: https://console-openshift-console.apps.mycluster.example.com\rINFO Login to the console with user: \"kubeadmin\", and password: \"4vYBz-Ee6gm-ymBZj-Wt5AL\"\rINFO Time elapsed: 36m22s ",
    "fullLink": "/docs/openshift/day01/#deploying-the-cluster",
    "heading": "Deploying the cluster",
    "level": 2,
    "linkIfNotFAQ": "/docs/openshift/day01/Day01",
    "permalink": "/docs/openshift/day01/",
    "title": "Day01",
    "truncatedContent": " Login to the Bastion server.\nRun the below command to generate the …"
  },
  {
    "anchor": "important-links",
    "content": " Openshift on AWS Installation Link. https://docs.openshift.com/container-platform/4.7/installing/installing_aws/installing-aws-default.html\nInstallation Program Link. https://mirror.openshift.com/pub/openshift-v4/x86_64/clients/ocp/\novnkube resource containers from the nodes (Optional)\nfor i in $(oc get node | grep master | awk {'print $1'}); do echo $i; oc debug node/${i} -- chroot /host sh -c \"mkdir /tmp/ovnlogs \u0026\u0026 cp /var/log/containers/ovnkube*.log /tmp/ovnlogs\"; done Test Api server if any issue occurs oc exec -it apiserver-xxx -c openshift-apiserver -n openshift-apiserver sh\rcurl -v 10.131.34.32:8443 Simultaneously we collected tcpdump on all master nodes: $ tcpdump -nn -i any -w /tmp/$(hostname)-$(date +\"%Y-%m-%d-%H-%M-%S\").pcap if Api server is not reachanble from outside ,login to one of the master node and try below command curl -k https://{IP}:8443/readyz` to all openshift-apiserver pods How to collect the inspect information for all co https://access.redhat.com/solutions/6995290\roc adm inspect co --request-timeout=30m Collect the inspect report for a single project oc adm ns inspect ns/openshift-apiserver you get the below message once the installation is completed. INFO export KUBECONFIG=/home/ec2-user/auth/kubeconfig\rINFO Access the OpenShift web-console here: https://console-openshift-console.apps.myapp.openshift.gq\rINFO Login to the console with user: \"kubeadmin\", and password: \"479aZ-Z2QZy-UdCQy-9d9VN\" If you have lost all the password like kubeadmin password and kubeconfig file as well you can still run the command. cd /etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/node-kubeconfigs/\rexport KUBECONFIG=$(pwd)/localhost.kubeconfig\roc whoami ",
    "fullLink": "/docs/openshift/day01/#important-links",
    "heading": "Important Links",
    "level": 2,
    "linkIfNotFAQ": "/docs/openshift/day01/Day01",
    "permalink": "/docs/openshift/day01/",
    "title": "Day01",
    "truncatedContent": " Openshift on AWS Installation Link. …"
  },
  {
    "anchor": "crictl-command-line-tool-for-managing-cri-o-based-containers-and-images",
    "content": " pull ubuntu image sudo crictl pull ubuntu List Images sudo crictl images Delete an image sudo crictl rmi 08d22c0ceb150 Print information about specific containers crictl inspect [container_id1 container_id2 ...] Open a specific shell inside a running container crictl exec -it [container_id] [sh] Pull a specific image from a registry crictl pull [image:tag] Print and [f]ollow logs of a specific container crictl logs -f [container_id] Remove one or more images crictl rmi [image_id1 image_id2 ...] ",
    "fullLink": "/docs/openshift/day01/#crictl-command-line-tool-for-managing-cri-o-based-containers-and-images",
    "heading": "Crictl (Command line tool for managing cri-o based containers and images)",
    "level": 2,
    "linkIfNotFAQ": "/docs/openshift/day01/Day01",
    "permalink": "/docs/openshift/day01/",
    "title": "Day01",
    "truncatedContent": " pull ubuntu image sudo crictl pull ubuntu List Images sudo crictl …"
  },
  {
    "anchor": "project",
    "content": " How to create a project oc new-project myapp Check all the project you have got access to oc get projects Check your current project oc project Give access to Project from UI How to create a pod oc run --image=nginx Another example vi pod.yanl\rapiVersion: v1\rkind: Pod\rmetadata:\rname: firstpod\rspec:\rcontainers:\r- name: firstcontainer\rimage: nginx How to check all pods oc get pods How to check all pods in all namespaces oc get pods -A How to check the name of all pods oc get pods -o name How to check the labels of all pods running oc get pods --show-lables How to login to a pods oc exec -it podname sh How to check the logs of a pods oc logs podname How to login to a pod oc exec -it podname sh How to delete a pod oc delete pod How to delete a pod forcefully oc delete pod --force --grace-period=0 How to delete multiple pod in one go for i in $(oc get pods -o name ); do oc delete pod $i ;done How to check the logs for a specific container oc logs podname -c How to login to specific container oc exec -it podname -c ",
    "fullLink": "/docs/openshift/day02/#project",
    "heading": "Project####",
    "level": 4,
    "linkIfNotFAQ": "/docs/openshift/day02/Day02",
    "permalink": "/docs/openshift/day02/",
    "title": "Day02",
    "truncatedContent": " How to create a project oc new-project myapp Check all the project …"
  },
  {
    "anchor": "service",
    "content": " How to check all services oc get svc How to create a service oc expose pod/deployment deployment/myapp --port=80 Service with yaml manifest apiVersion: v1\rkind: Service\rmetadata:\rname: my-service\rspec:\rselector:\rapp: MyApp\rports:\r- protocol: TCP\rport: 80\rtargetPort: 9376 How to check the labels where the service is forwarding requests oc describe svc How to check the endpoints of a service oc get ep ",
    "fullLink": "/docs/openshift/day02/#service",
    "heading": "Service",
    "level": 4,
    "linkIfNotFAQ": "/docs/openshift/day02/Day02",
    "permalink": "/docs/openshift/day02/",
    "title": "Day02",
    "truncatedContent": " How to check all services oc get svc How to create a service oc …"
  },
  {
    "anchor": "deployments",
    "content": " How to create a deployment oc create deployment myapp --image=nginx ",
    "fullLink": "/docs/openshift/day02/#deployments",
    "heading": "Deployments",
    "level": 5,
    "linkIfNotFAQ": "/docs/openshift/day02/Day02",
    "permalink": "/docs/openshift/day02/",
    "title": "Day02",
    "truncatedContent": " How to create a deployment oc create deployment myapp --image=nginx "
  },
  {
    "anchor": "rolling-update-www-containers-of-frontend-deployment-updating-the-image",
    "content": " oc set image deployment/frontend www=image:v2 ",
    "fullLink": "/docs/openshift/day02/#rolling-update-www-containers-of-frontend-deployment-updating-the-image",
    "heading": "Rolling update “www” containers of “frontend” deployment, updating the image",
    "level": 1,
    "linkIfNotFAQ": "/docs/openshift/day02/Day02",
    "permalink": "/docs/openshift/day02/",
    "title": "Day02",
    "truncatedContent": " oc set image deployment/frontend www=image:v2 "
  },
  {
    "anchor": "check-the-history-of-deployments-including-the-revision",
    "content": " oc rollout history deployment/frontend ",
    "fullLink": "/docs/openshift/day02/#check-the-history-of-deployments-including-the-revision",
    "heading": "Check the history of deployments including the revision",
    "level": 1,
    "linkIfNotFAQ": "/docs/openshift/day02/Day02",
    "permalink": "/docs/openshift/day02/",
    "title": "Day02",
    "truncatedContent": " oc rollout history deployment/frontend "
  },
  {
    "anchor": "rollback-to-the-previous-deployment",
    "content": " oc rollout undo deployment/frontend ",
    "fullLink": "/docs/openshift/day02/#rollback-to-the-previous-deployment",
    "heading": "Rollback to the previous deployment",
    "level": 1,
    "linkIfNotFAQ": "/docs/openshift/day02/Day02",
    "permalink": "/docs/openshift/day02/",
    "title": "Day02",
    "truncatedContent": " oc rollout undo deployment/frontend "
  },
  {
    "anchor": "rollback-to-a-specific-revision",
    "content": " oc rollout undo deployment/frontend --to-revision=2 ",
    "fullLink": "/docs/openshift/day02/#rollback-to-a-specific-revision",
    "heading": "Rollback to a specific revision",
    "level": 1,
    "linkIfNotFAQ": "/docs/openshift/day02/Day02",
    "permalink": "/docs/openshift/day02/",
    "title": "Day02",
    "truncatedContent": " oc rollout undo deployment/frontend --to-revision=2 "
  },
  {
    "anchor": "watch-rolling-update-status-of-frontend-deployment-until-completion",
    "content": " oc rollout status -w deployment/frontend ",
    "fullLink": "/docs/openshift/day02/#watch-rolling-update-status-of-frontend-deployment-until-completion",
    "heading": "Watch rolling update status of “frontend” deployment until completion",
    "level": 1,
    "linkIfNotFAQ": "/docs/openshift/day02/Day02",
    "permalink": "/docs/openshift/day02/",
    "title": "Day02",
    "truncatedContent": " oc rollout status -w deployment/frontend "
  },
  {
    "anchor": "rolling-restart-of-the-frontend-deployment",
    "content": " oc rollout restart deployment/frontend ",
    "fullLink": "/docs/openshift/day02/#rolling-restart-of-the-frontend-deployment",
    "heading": "Rolling restart of the “frontend” deployment",
    "level": 1,
    "linkIfNotFAQ": "/docs/openshift/day02/Day02",
    "permalink": "/docs/openshift/day02/",
    "title": "Day02",
    "truncatedContent": " oc rollout restart deployment/frontend "
  },
  {
    "anchor": "secrets",
    "content": " Check all secrets oc get secrets How to create secret oc create secret tls my-tls-secret \\\r--cert=path/to/cert/file \\\r--key=path/to/key/file Create Secret for username and password oc create secret generic creds --from-literal=name=nippy --from=literal=pass=123 List the environment variables defined on all pods oc set env pods --all --list ",
    "fullLink": "/docs/openshift/day02/#secrets",
    "heading": "Secrets",
    "level": 4,
    "linkIfNotFAQ": "/docs/openshift/day02/Day02",
    "permalink": "/docs/openshift/day02/",
    "title": "Day02",
    "truncatedContent": " Check all secrets oc get secrets How to create secret oc create …"
  },
  {
    "anchor": "import-environment-from-a-secret",
    "content": " oc set env --from=secret/mysecret dc/myapp ",
    "fullLink": "/docs/openshift/day02/#import-environment-from-a-secret",
    "heading": "Import environment from a secret",
    "level": 1,
    "linkIfNotFAQ": "/docs/openshift/day02/Day02",
    "permalink": "/docs/openshift/day02/",
    "title": "Day02",
    "truncatedContent": " oc set env --from=secret/mysecret dc/myapp "
  },
  {
    "anchor": "import-environment-from-a-config-map-with-a-prefix",
    "content": " oc set env --from=configmap/myconfigmap --prefix=MYSQL_ dc/myapp ",
    "fullLink": "/docs/openshift/day02/#import-environment-from-a-config-map-with-a-prefix",
    "heading": "Import environment from a config map with a prefix",
    "level": 1,
    "linkIfNotFAQ": "/docs/openshift/day02/Day02",
    "permalink": "/docs/openshift/day02/",
    "title": "Day02",
    "truncatedContent": " oc set env --from=configmap/myconfigmap --prefix=MYSQL_ dc/myapp "
  },
  {
    "anchor": "remove-the-environment-variable-env-from-container-c1-in-all-deployment-configs",
    "content": " oc set env deployments --all --containers=\"c1\" ENV- ",
    "fullLink": "/docs/openshift/day02/#remove-the-environment-variable-env-from-container-c1-in-all-deployment-configs",
    "heading": "Remove the environment variable ENV from container ‘c1’ in all deployment configs",
    "level": 1,
    "linkIfNotFAQ": "/docs/openshift/day02/Day02",
    "permalink": "/docs/openshift/day02/",
    "title": "Day02",
    "truncatedContent": " oc set env deployments --all --containers=\u0026#34;c1\u0026#34; ENV- "
  },
  {
    "anchor": "configmaps",
    "content": " List all configmaps oc get cm Create a new configmap oc create configmap game-config --from-file=configure-pod-container Get the yaml file for the configmap oc get configmaps game-config -o yaml Use configmap as a volume in pod apiVersion: v1\rkind: Pod\rmetadata:\rname: dapi-test-pod\rspec:\rcontainers:\r- name: test-container\rimage: k8s.gcr.io/busybox\rcommand: [ \"/bin/sh\", \"-c\", \"ls /etc/config/\" ]\rvolumeMounts:\r- name: config-volume\rmountPath: /etc/config\rvolumes:\r- name: config-volume\rconfigMap:\r# Provide the name of the ConfigMap containing the files you want\r# to add to the container\rname: special-config\rrestartPolicy: Never ",
    "fullLink": "/docs/openshift/day02/#configmaps",
    "heading": "ConfigMaps",
    "level": 4,
    "linkIfNotFAQ": "/docs/openshift/day02/Day02",
    "permalink": "/docs/openshift/day02/",
    "title": "Day02",
    "truncatedContent": " List all configmaps oc get cm Create a new configmap oc create …"
  },
  {
    "anchor": "volumes",
    "content": " emptyDir Example apiVersion: v1\rkind: Pod\rmetadata:\rname: test-pd\rspec:\rcontainers:\r- image: registry.k8s.io/test-webserver\rname: test-container\rvolumeMounts:\r- mountPath: /cache\rname: cache-volume\rvolumes:\r- name: cache-volume\remptyDir:\rsizeLimit: 500Mi Check all pvcs oc get pvc Create a pvc apiVersion: v1\rkind: PersistentVolume\rmetadata:\rname: pv0001 spec:\rcapacity:\rstorage: 5Gi accessModes:\r- ReadWriteOnce use pvc inside a pod kind: Pod\rapiVersion: v1\rmetadata:\rname: mypod\rspec:\rcontainers:\r- name: myfrontend\rimage: dockerfile/nginx\rvolumeMounts:\r- mountPath: \"/var/www/html\" name: mypd volumes:\r- name: mypd\rpersistentVolumeClaim:\rclaimName: myclaim ",
    "fullLink": "/docs/openshift/day02/#volumes",
    "heading": "Volumes",
    "level": 4,
    "linkIfNotFAQ": "/docs/openshift/day02/Day02",
    "permalink": "/docs/openshift/day02/",
    "title": "Day02",
    "truncatedContent": " emptyDir Example apiVersion: v1\rkind: Pod\rmetadata:\rname: test-pd …"
  },
  {
    "anchor": "kubernetes-trobleshooting",
    "content": " Check the nodes status oc get nodes Check the status of pods oc get pods Check the pods where are they scheduled oc get pod -o wide check the events for a particular namepsace oc get events Look for any error in pod oc logs podname Describe pod if the pod status is pending oc describe pod podname How to login to private image registry docker login Create a secret for imagePull secret oc create secret generic regcred \\\r--from-file=.dockerconfigjson= \\\r--type=kubernetes.io/dockerconfigjson Use Imagepull secret in pod apiVersion: v1\rkind: Pod\rmetadata:\rname: private-reg\rspec:\rcontainers:\r- name: private-reg-container\rimage: imagePullSecrets:\r- name: regcred Check the ip address of pod with specifice label oc get pods -l app=hostnames \\\r-o go-template='{{range .items}}{{.status.podIP}}{{\"\\n\"}}{{end}}' Try to check the connectivity from a pod for ep in 10.244.0.5:9376 10.244.0.6:9376 10.244.0.7:9376; do\rwget -qO- $ep\rdone ",
    "fullLink": "/docs/openshift/day02/#kubernetes-trobleshooting",
    "heading": "Kubernetes Trobleshooting",
    "level": 4,
    "linkIfNotFAQ": "/docs/openshift/day02/Day02",
    "permalink": "/docs/openshift/day02/",
    "title": "Day02",
    "truncatedContent": " Check the nodes status oc get nodes Check the status of pods oc get …"
  },
  {
    "anchor": "use-and-configure-openid-connect-with-azure-ad",
    "content": "Use and configure OpenID connect with Azure AD",
    "fullLink": "/docs/openshift/openid-azuread/#use-and-configure-openid-connect-with-azure-ad",
    "heading": "Use and configure OpenID connect with Azure AD",
    "level": 1,
    "linkIfNotFAQ": "/docs/openshift/openid-azuread/Use and configure OpenID connect with Azure AD",
    "permalink": "/docs/openshift/openid-azuread/",
    "title": "Use and configure OpenID connect with Azure AD",
    "truncatedContent": "Use and configure OpenID connect with Azure AD"
  },
  {
    "anchor": "required-informations",
    "content": " key env value service principal staging “RedHat - Openshift / (auth)” () ",
    "fullLink": "/docs/openshift/openid-azuread/#required-informations",
    "heading": "Required informations",
    "level": 2,
    "linkIfNotFAQ": "/docs/openshift/openid-azuread/Use and configure OpenID connect with Azure AD",
    "permalink": "/docs/openshift/openid-azuread/",
    "title": "Use and configure OpenID connect with Azure AD",
    "truncatedContent": " key env value service principal staging “RedHat - Openshift / (auth)” …"
  },
  {
    "anchor": "azure-ad-service-principal-requirements",
    "content": " Ensure the service principal has the following API permissions Microsoft Graph / \"User.Read\"\nEnsure it has been “Granted for, .\nEnsure it has been promoted as Enterprise Application, otherwise raise an internal IT request to get this requirement. It could allow to restrict the access to a group of users that is very useful.\nEnsure the redirect URI is properly set, it must match the following pattern: https://oauth-openshift.apps./oauth2callback/azuread. Of course substitute by the one you set in the IPI configuration file.\n",
    "fullLink": "/docs/openshift/openid-azuread/#azure-ad-service-principal-requirements",
    "heading": "Azure AD service principal requirements",
    "level": 2,
    "linkIfNotFAQ": "/docs/openshift/openid-azuread/Use and configure OpenID connect with Azure AD",
    "permalink": "/docs/openshift/openid-azuread/",
    "title": "Use and configure OpenID connect with Azure AD",
    "truncatedContent": " Ensure the service principal has the following API permissions …"
  },
  {
    "anchor": "openshift-settings",
    "content": " Create an openshift secret\nbe sure to substitute the by the right value ! oc create secret generic azuread --from-literal=clientSecret= -n openshift-config Create an oauth-config.yaml file to configure oauth. be sure to substitute the by the right value !\napiVersion: config.openshift.io/v1 kind: OAuth metadata: annotations: release.openshift.io/create-only: \"true\" generation: 1 name: cluster selfLink: /apis/config.openshift.io/v1/oauths/cluster spec: identityProviders: - mappingMethod: claim name: azuread openID: claims: email: - email id: - sub name: - name preferredUsername: - email clientID: clientSecret: name: azuread issuer: https://login.microsoftonline.com/8b87af7d-8647-4dc7-8df4-5f69a2011bb5/v2.0 type: OpenID apply the config oc apply -f oauth-config.yaml ",
    "fullLink": "/docs/openshift/openid-azuread/#openshift-settings",
    "heading": "Openshift settings",
    "level": 2,
    "linkIfNotFAQ": "/docs/openshift/openid-azuread/Use and configure OpenID connect with Azure AD",
    "permalink": "/docs/openshift/openid-azuread/",
    "title": "Use and configure OpenID connect with Azure AD",
    "truncatedContent": " Create an openshift secret\nbe sure to substitute the by the right …"
  },
  {
    "anchor": "post-configuration-tests",
    "content": " wait a moment and try to login in a new private window of your internet browser.\nazuread should be an option available and it must work properly. ",
    "fullLink": "/docs/openshift/openid-azuread/#post-configuration-tests",
    "heading": "Post configuration tests",
    "level": 2,
    "linkIfNotFAQ": "/docs/openshift/openid-azuread/Use and configure OpenID connect with Azure AD",
    "permalink": "/docs/openshift/openid-azuread/",
    "title": "Use and configure OpenID connect with Azure AD",
    "truncatedContent": " wait a moment and try to login in a new private window of your …"
  },
  {
    "anchor": "post-configuration-steps",
    "content": " signin as kubeadmin and promote your cloud admin account as cluster-admin Example:\noc adm policy add-cluster-role-to-user cluster-admin user-id logout and login with your own admin account. Ensure you have the cluster-admin role and remove the kubeadmin secret oc delete secrets kubeadmin -n kube-system logout and ensure the kube:admin option is not available anymore.\nif you need to restrict access to the cluster, go on the Azure AD, select your entreprise application, go in the “Users and Groups” blade, and select the ones who could access to the instance.\nPlease click to configure Azure Authentication from UI\n",
    "fullLink": "/docs/openshift/openid-azuread/#post-configuration-steps",
    "heading": "Post configuration steps",
    "level": 2,
    "linkIfNotFAQ": "/docs/openshift/openid-azuread/Use and configure OpenID connect with Azure AD",
    "permalink": "/docs/openshift/openid-azuread/",
    "title": "Use and configure OpenID connect with Azure AD",
    "truncatedContent": " signin as kubeadmin and promote your cloud admin account as …"
  },
  {
    "anchor": "steps-to-create-aks-cluster",
    "content": " Login to Azure cloud az login Create a resourceGroup az group create --name demoResourceGroup --location westus Run the below command to create cluster with ssh key to login to node. az aks create --resource-group myResourceGroup --name myAKSCluster --node-count 2 --generate-ssh-keys --attach-acr Above command take upto 5 mins\nDownload kubeconfig file az aks get-credentials --resource-group myResourceGroup --name myAKSCluster Verify connection to your cluster using the kubectl get nodes command, which returns a list of cluster nodes. kubectl get nodes ",
    "fullLink": "/docs/azure-devops/aks-deployment/#steps-to-create-aks-cluster",
    "heading": "Steps to create AKS cluster",
    "level": 3,
    "linkIfNotFAQ": "/docs/azure-devops/aks-deployment/AKS Deployment",
    "permalink": "/docs/azure-devops/aks-deployment/",
    "title": "AKS Deployment",
    "truncatedContent": " Login to Azure cloud az login Create a resourceGroup az group create …"
  },
  {
    "anchor": "instructions-for-getting-started",
    "content": " Install Docker Run the “hello-world” base image docker run -it hello-world Login to your container registry docker login mycontainerregistry001neq.azurecr.io Push to your registry docker tag hello-world mycontainerregistry001neq.azurecr.io/hello-world docker push mycontainerregistry001neq.azurecr.io/hello-world Pull from your registry docker pull mycontainerregistry001neq.azurecr.io/hello-world if you get permission denied error execute the below permission. sudo chmod 666 /var/run/docker.sock ",
    "fullLink": "/docs/azure-devops/azure-container-registry/#instructions-for-getting-started",
    "heading": "Instructions for Getting Started",
    "level": 3,
    "linkIfNotFAQ": "/docs/azure-devops/azure-container-registry/Azure Container Registry",
    "permalink": "/docs/azure-devops/azure-container-registry/",
    "title": "Azure Container Registry",
    "truncatedContent": " Install Docker Run the “hello-world” base image docker run -it …"
  },
  {
    "anchor": "prerequisites",
    "content": " Create one Linux vm\nLogin to Azure Devops and go to project setting\nSelect Agent pool\nClick on add pool\nFill the information and click on create\nClick on add agent\nNow Login to Linux vm and run the below commands mkdir myagent \u0026\u0026 cd myagent wget https://vstsagentpackage.azureedge.net/agent/3.234.0/vsts-agent-linux-x64-3.234.0.tar.gz Extract the zip file\ntar -xvf vsts-agent-linux-x64-3.234.0.tar.gz Run config.sh ./config.sh It will ask some information pls enter accordingly\nPress Y to agree the\nEnter Server Url\nit will be the address of your organization like https://dev.azure.com/nks1183/devops/ Now generate PAT and give full permission.\nRun the agent ./run.sh Now your runner should be available\nCreate SSL certificate for our application Create a kubernetes Cluster\nCreate ACR\nCreate a service connection for ACR\nCreate a service connection for AKS\nPull and push container image\nCreate a pipeline which will craete an image and push to ACR\n",
    "fullLink": "/docs/azure-devops/azure-devopsagent/#prerequisites",
    "heading": "Prerequisites",
    "level": 4,
    "linkIfNotFAQ": "/docs/azure-devops/azure-devopsagent/Azure Devops Pipeline Agent",
    "permalink": "/docs/azure-devops/azure-devopsagent/",
    "title": "Azure Devops Pipeline Agent",
    "truncatedContent": " Create one Linux vm\nLogin to Azure Devops and go to project setting …"
  },
  {
    "anchor": "azure-devops-pipeline-concepts",
    "content": " Pipeline: It is a workflow that defines how our test, build, and deployment steps are run.\nStage: It is a logical boundary in the pipeline. It can be used to mark the separation of concerns. Each stage contains one or more jobs.\nJob: A stage can contain one or more jobs. Each job runs on an agent. It represents an execution boundary of a set of steps.\nStep: It is the smallest building block of a pipeline. It can either be a script or a task. A task is simply an already created script offered as a convenience to you.\nAgent and Agent pools: An agent is an installable software that runs one job at a time. Instead of managing each agent individually, you organize agents into agent pools.\nArtifact: It is a collection of files or packages published by a run. The Artifact is made available to subsequent tasks, such as distribution or deployment.\nTrigger: It is something that is set up to tell the pipeline when to run. We can configure a pipeline to run upon a push to the repository, at scheduled times, etc.\nEnvironment: It is a collection of resources, where you deploy your application. It contains one or more virtual machines, containers, web apps, etc.\nChecks: Checks define a set of validations required before a deployment can be performed.\nRuns: It represents a single execution of a pipeline and collects the logs associated with running the steps and the results of running tests.\nDefine your first Pipeline\ntrigger: - main pool: vmImage: 'ubuntu-latest' steps: - script: echo 'Hello, Azure DevOps!' displayName: 'Print a greeting' Define stages trigger: branches: include: - main stages: - stage: Example displayName: 'Example Stage' jobs: - job: ExampleJob displayName: 'Example Job' pool: vmImage: 'ubuntu-latest' steps: - script: | echo \"Hello, World!\" displayName: 'Echo Hello World' Define Environment Variable trigger: branches: include: - main stages: - stage: Example displayName: 'Example Stage' jobs: - job: ExampleJob displayName: 'Example Job' pool: vmImage: 'ubuntu-latest' environment: variables: MY_VARIABLE: 'Hello, World!' steps: - script: | echo \"The value of MY_VARIABLE is $MY_VARIABLE\" displayName: 'Print Environment Variable' Define simple Variable trigger: branches: include: - main variables: myVariable: 'Hello, World!' stages: - stage: Example displayName: 'Example Stage' jobs: - job: ExampleJob displayName: 'Example Job' pool: vmImage: 'ubuntu-latest' steps: - script: | echo \"The value of myVariable is $(myVariable)\" displayName: 'Print Variable Value' Another Sample pipeline trigger:\r- master\rpool:\rvmImage: 'ubuntu-latest'\r# Pipelines \u003e Stages \u003e Jobs \u003e Tasks(Steps)\rjobs:\r- job: Job1\rsteps:\r- script: echo Job1 - Hello, world, changed!\rdisplayName: 'Run a one-line script'\r- script: |\recho Add other tasks to build, test, and deploy your project.\recho See https://aka.ms/yaml\recho more information\rdisplayName: 'Run a multi-line script'\r- job: Job2\rdependsOn: Job1\rsteps:\r- script: echo Job2!\rdisplayName: 'Run a one-line script'\r- job: Job3\rdependsOn: Job1\rsteps:\r- script: echo Job3!\rdisplayName: 'Run a one-line script'\r- job: Job4\rdependsOn: - Job2\r- Job3\rsteps:\r- script: echo Job3!\rdisplayName: 'Run a one-line script' Basic Multi Stage Example for Azure Pipeline stages:\r- stage: Build\rjobs:\r- job: BuildJob\rsteps:\r- script: echo \"Building the application\"\r- stage: Test\rjobs:\r- job: UnitTests\rsteps:\r- script: echo \"Running unit tests\"\r- job: IntegrationTests\rsteps:\r- script: echo \"Running integration tests\"\r- stage: Deploy\rjobs:\r- job: DeployToStaging\rsteps:\r- script: echo \"Deploying to staging environment\" Ignore Error example jobs:\r- job: MyJob\rsteps:\r- script: echo \"This step will continue even if it fails\"\rcontinueOnError: true\r- script: echo \"This step will run after the previous step\" Example for a basic condition trigger:\r- main\rpool:\rvmImage: 'windows-latest'\rjobs:\r- job: BuildAndTest\rsteps:\r- script: echo \"Building the application\"\r- script: echo \"Running tests\"\r- script: echo \"Deploying artifacts to staging\"\rcondition: eq(variables['Build.SourceBranch'], 'refs/heads/main') Job Example jobs:\r- job: BuildAndTest\rdisplayName: \"Build and Test Job\"\rpool:\rvmImage: 'windows-latest'\rsteps:\r- script: echo \"Building the application\"\r- script: echo \"Running tests\" Example for Azure pipeline schedule schedules:\r- cron: \"0 0 * * *\" # Runs every day at midnight UTC\rdisplayName: DailyBuild\rbranches:\rinclude:\r- main\rjobs:\r- job: BuildAndTest\rsteps:\r- script: echo \"Building the application\"\r- script: echo \"Running tests\" Depends on Example trigger:\r- main\rstages:\r- stage: BuildAndTest\rjobs:\r- job: Build\rsteps:\r- script: echo \"Building the application\"\r- job: Test\rsteps:\r- script: echo \"Running tests\"\r- stage: Deploy\rdependsOn: BuildAndTest\rjobs:\r- job: DeployToStaging\rsteps:\r- script: echo \"Deploying to staging environment\" ",
    "fullLink": "/docs/azure-devops/azure-devops-pipeline/#azure-devops-pipeline-concepts",
    "heading": "Azure DevOps Pipeline concepts",
    "level": 2,
    "linkIfNotFAQ": "/docs/azure-devops/azure-devops-pipeline/Azure Devops Pipeline Basics",
    "permalink": "/docs/azure-devops/azure-devops-pipeline/",
    "title": "Azure Devops Pipeline Basics",
    "truncatedContent": " Pipeline: It is a workflow that defines how our test, build, and …"
  },
  {
    "anchor": "azure-devops-pipeline-concepts",
    "content": " Pipeline: It is a workflow that defines how our test, build, and deployment steps are run.\nStage: It is a logical boundary in the pipeline. It can be used to mark the separation of concerns. Each stage contains one or more jobs.\nJob: A stage can contain one or more jobs. Each job runs on an agent. It represents an execution boundary of a set of steps.\nStep: It is the smallest building block of a pipeline. It can either be a script or a task. A task is simply an already created script offered as a convenience to you.\nAgent and Agent pools: An agent is an installable software that runs one job at a time. Instead of managing each agent individually, you organize agents into agent pools.\nArtifact: It is a collection of files or packages published by a run. The Artifact is made available to subsequent tasks, such as distribution or deployment.\nTrigger: It is something that is set up to tell the pipeline when to run. We can configure a pipeline to run upon a push to the repository, at scheduled times, etc.\nEnvironment: It is a collection of resources, where you deploy your application. It contains one or more virtual machines, containers, web apps, etc.\nChecks: Checks define a set of validations required before a deployment can be performed.\nRuns: It represents a single execution of a pipeline and collects the logs associated with running the steps and the results of running tests.\nDefine your first Pipeline\ntrigger: - main pool: vmImage: 'ubuntu-latest' steps: - script: echo 'Hello, Azure DevOps!' displayName: 'Print a greeting' Define stages trigger: branches: include: - main stages: - stage: Example displayName: 'Example Stage' jobs: - job: ExampleJob displayName: 'Example Job' pool: vmImage: 'ubuntu-latest' steps: - script: | echo \"Hello, World!\" displayName: 'Echo Hello World' Define Environment Variable trigger: branches: include: - main stages: - stage: Example displayName: 'Example Stage' jobs: - job: ExampleJob displayName: 'Example Job' pool: vmImage: 'ubuntu-latest' environment: variables: MY_VARIABLE: 'Hello, World!' steps: - script: | echo \"The value of MY_VARIABLE is $MY_VARIABLE\" displayName: 'Print Environment Variable' Define simple Variable trigger: branches: include: - main variables: myVariable: 'Hello, World!' stages: - stage: Example displayName: 'Example Stage' jobs: - job: ExampleJob displayName: 'Example Job' pool: vmImage: 'ubuntu-latest' steps: - script: | echo \"The value of myVariable is $(myVariable)\" displayName: 'Print Variable Value' Another Sample pipeline trigger:\r- master\rpool:\rvmImage: 'ubuntu-latest'\r# Pipelines \u003e Stages \u003e Jobs \u003e Tasks(Steps)\rjobs:\r- job: Job1\rsteps:\r- script: echo Job1 - Hello, world, changed!\rdisplayName: 'Run a one-line script'\r- script: |\recho Add other tasks to build, test, and deploy your project.\recho See https://aka.ms/yaml\recho more information\rdisplayName: 'Run a multi-line script'\r- job: Job2\rdependsOn: Job1\rsteps:\r- script: echo Job2!\rdisplayName: 'Run a one-line script'\r- job: Job3\rdependsOn: Job1\rsteps:\r- script: echo Job3!\rdisplayName: 'Run a one-line script'\r- job: Job4\rdependsOn: - Job2\r- Job3\rsteps:\r- script: echo Job3!\rdisplayName: 'Run a one-line script' Basic Multi Stage Example for Azure Pipeline stages:\r- stage: Build\rjobs:\r- job: BuildJob\rsteps:\r- script: echo \"Building the application\"\r- stage: Test\rjobs:\r- job: UnitTests\rsteps:\r- script: echo \"Running unit tests\"\r- job: IntegrationTests\rsteps:\r- script: echo \"Running integration tests\"\r- stage: Deploy\rjobs:\r- job: DeployToStaging\rsteps:\r- script: echo \"Deploying to staging environment\" Ignore Error example jobs:\r- job: MyJob\rsteps:\r- script: echo \"This step will continue even if it fails\"\rcontinueOnError: true\r- script: echo \"This step will run after the previous step\" Example for a basic condition trigger:\r- main\rpool:\rvmImage: 'windows-latest'\rjobs:\r- job: BuildAndTest\rsteps:\r- script: echo \"Building the application\"\r- script: echo \"Running tests\"\r- script: echo \"Deploying artifacts to staging\"\rcondition: eq(variables['Build.SourceBranch'], 'refs/heads/main') Job Example jobs:\r- job: BuildAndTest\rdisplayName: \"Build and Test Job\"\rpool:\rvmImage: 'windows-latest'\rsteps:\r- script: echo \"Building the application\"\r- script: echo \"Running tests\" Example for Azure pipeline schedule schedules:\r- cron: \"0 0 * * *\" # Runs every day at midnight UTC\rdisplayName: DailyBuild\rbranches:\rinclude:\r- main\rjobs:\r- job: BuildAndTest\rsteps:\r- script: echo \"Building the application\"\r- script: echo \"Running tests\" Depends on Example trigger:\r- main\rstages:\r- stage: BuildAndTest\rjobs:\r- job: Build\rsteps:\r- script: echo \"Building the application\"\r- job: Test\rsteps:\r- script: echo \"Running tests\"\r- stage: Deploy\rdependsOn: BuildAndTest\rjobs:\r- job: DeployToStaging\rsteps:\r- script: echo \"Deploying to staging environment\" ",
    "fullLink": "/docs/azure-devops/azure-dns/#azure-devops-pipeline-concepts",
    "heading": "Azure DevOps Pipeline concepts",
    "level": 2,
    "linkIfNotFAQ": "/docs/azure-devops/azure-dns/Azure DNS",
    "permalink": "/docs/azure-devops/azure-dns/",
    "title": "Azure DNS",
    "truncatedContent": " Pipeline: It is a workflow that defines how our test, build, and …"
  },
  {
    "anchor": "implement-ssl-using-lets-encrypt",
    "content": "Implement SSL using Lets Encrypt",
    "fullLink": "/docs/azure-devops/certmanager/#implement-ssl-using-lets-encrypt",
    "heading": "Implement SSL using Lets Encrypt",
    "level": 3,
    "linkIfNotFAQ": "/docs/azure-devops/certmanager/Cert Manager",
    "permalink": "/docs/azure-devops/certmanager/",
    "title": "Cert Manager",
    "truncatedContent": "Implement SSL using Lets Encrypt"
  },
  {
    "anchor": "install-cert-manager",
    "content": " Add the Jetstack Helm repository helm repo add jetstack https://charts.jetstack.io Update your local Helm chart repository cache helm repo update Install the cert-manager Helm chart helm upgrade cert-manager jetstack/cert-manager \\ --install \\ --create-namespace \\ --wait \\ --namespace cert-manager \\ --set installCRDs=true Verify Cert Manager pods kubectl -n cert-manager get all Below Api will be available Certificate CertificateRequest Issuer Create a ClusterIssuer and a Certificate apiVersion: cert-manager.io/v1alpha2 kind: ClusterIssuer metadata: name: letsencrypt spec: acme: server: https://acme-v02.api.letsencrypt.org/directory email: privateKeySecretRef: name: letsencrypt solvers: - http01: ingress: class: nginx Create ingress rules as below apiVersion: networking.k8s.io/v1 kind: Ingress metadata: name: name-tomcat annotations: cert-manager.io/cluster-issuer: letsencrypt-production nginx.ingress.kubernetes.io/rewrite-target: /$1 nginx.ingress.kubernetes.io/use-regex: \"true\" spec: ingressClassName: nginx tls: - hosts: - old.serverwebpage.com secretName: tls-secret rules: - host: old.serverwebpage.com http: paths: - pathType: Prefix path: \"/\" backend: service: name: old port: number: 80 Check if new certificate is in ready state Kubectl get certificate Test your app now ",
    "fullLink": "/docs/azure-devops/certmanager/#install-cert-manager",
    "heading": "Install Cert Manager",
    "level": 3,
    "linkIfNotFAQ": "/docs/azure-devops/certmanager/Cert Manager",
    "permalink": "/docs/azure-devops/certmanager/",
    "title": "Cert Manager",
    "truncatedContent": " Add the Jetstack Helm repository helm repo add jetstack …"
  },
  {
    "anchor": "prerequisites",
    "content": " Kubernetes Cluster Access\nInstall Nginx IngressController\nkubectl apply -f https://raw.githubusercontent.com/kubernetes/ingress-nginx/controller-v1.3.0/deploy/static/provider/cloud/deploy.yaml Install using Helm helm upgrade --install ingress-nginx ingress-nginx --repo https://kubernetes.github.io/ingress-nginx --namespace ingress-nginx --create-namespace Verify IngressController kubectl get pods --namespace ingress-nginx Check the NGINX Ingress controller has been assigned a public Ip address kubectl get service ingress-nginx-controller --namespace=ingress-nginx Browsing to this IP address will show you the NGINX 404 page. This is because we have not set up any routing rules for our services yet Create two deployment kubectl create deployment myapp01 --image=nginx kubectl create deployment myapp02 --image=httpd Create service of type ClusterIp for above two deployment kubectl expose deployment/myapp01 --port=80 kubectl expose deployment/myapp02 --port=80 Map the IngressController Svc ip in DNS kubectl get svc -n Check How many ingressClass are available kubectl get ingressclass Create ingress rule apiVersion: networking.k8s.io/v1 kind: Ingress metadata: name: name-virtual-host-ingress spec: ingressClassName: nginx rules: - host: myapp01.serverwebpage.com http: paths: - pathType: Prefix path: \"/\" backend: service: name: myapp01 port: number: 80 - host: myapp02.serverwebpage.com http: paths: - pathType: Prefix path: \"/\" backend: service: name: myapp02 port: number: 80 Now try to access the application in browser myapp01.serverwebpage.com\rmyapp02.serverwebpage.com if page open your You have been able to set up IngressController.\nNow Secure your app using Let us Encrypt and Cert Manager ",
    "fullLink": "/docs/azure-devops/ingresscontroller/#prerequisites",
    "heading": "Prerequisites",
    "level": 4,
    "linkIfNotFAQ": "/docs/azure-devops/ingresscontroller/IngressController",
    "permalink": "/docs/azure-devops/ingresscontroller/",
    "title": "IngressController",
    "truncatedContent": " Kubernetes Cluster Access\nInstall Nginx IngressController\nkubectl …"
  },
  {
    "anchor": "topics",
    "content": " Kubernetes Overview Kubernetes Architecture Kubernetes Components Kubernetes Installation Kubernetes SSL Certificates Kubernetes Static Pods Kubernetes Configuration files Kubernetes Upgrade Etcd backup and restore Kubernetes Node related commands CIS Benchmark ",
    "fullLink": "/docs/kubernetes/part01/#topics",
    "heading": "Topics",
    "level": 2,
    "linkIfNotFAQ": "/docs/kubernetes/part01/Part 1",
    "permalink": "/docs/kubernetes/part01/",
    "title": "Part 1",
    "truncatedContent": " Kubernetes Overview Kubernetes Architecture Kubernetes Components …"
  },
  {
    "anchor": "kubernetes-overview",
    "content": "Kubernetes or k8s is an open-source orchestration and cluster management for container-based applications maintained by the Cloud Native Computing Foundation.\nKubernetes is an open-source system for automating deployment, scaling, and management of containerized applications.\nIt groups containers that make up an application into logical units for easy management and discovery\n",
    "fullLink": "/docs/kubernetes/part01/#kubernetes-overview",
    "heading": "Kubernetes Overview",
    "level": 2,
    "linkIfNotFAQ": "/docs/kubernetes/part01/Part 1",
    "permalink": "/docs/kubernetes/part01/",
    "title": "Part 1",
    "truncatedContent": "Kubernetes or k8s is an open-source orchestration and cluster …"
  },
  {
    "anchor": "kubernetes-architecture--components",
    "content": " Managed Kubernetes Cluster (We do not have on control Plane) e.g AKS on Azure Cloud EKS on AWS cloud GKE on Google Cloud Self Managed kubernetes Cluster (Installed on VMs) ",
    "fullLink": "/docs/kubernetes/part01/#kubernetes-architecture--components",
    "heading": "Kubernetes Architecture \u0026 Components",
    "level": 2,
    "linkIfNotFAQ": "/docs/kubernetes/part01/Part 1",
    "permalink": "/docs/kubernetes/part01/",
    "title": "Part 1",
    "truncatedContent": " Managed Kubernetes Cluster (We do not have on control Plane) e.g AKS …"
  },
  {
    "anchor": "kubernetes-has-two-type-of-nodes",
    "content": " Master Nodes (Control Plane) Worker Nodes ",
    "fullLink": "/docs/kubernetes/part01/#kubernetes-has-two-type-of-nodes",
    "heading": "Kubernetes has two type of nodes",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part01/Part 1",
    "permalink": "/docs/kubernetes/part01/",
    "title": "Part 1",
    "truncatedContent": " Master Nodes (Control Plane) Worker Nodes "
  },
  {
    "anchor": "control-plane",
    "content": "The control plane is responsible for container orchestration and maintaining the desired state of the cluster. It has the following components.\nkube-apiserver etcd kube-scheduler kube-controller-manager cloud-controller-manager ",
    "fullLink": "/docs/kubernetes/part01/#control-plane",
    "heading": "Control Plane",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part01/Part 1",
    "permalink": "/docs/kubernetes/part01/",
    "title": "Part 1",
    "truncatedContent": "The control plane is responsible for container orchestration and …"
  },
  {
    "anchor": "worker-node",
    "content": "The Worker nodes are responsible for running containerized applications. The worker Node has the following components.\nkubelet kube-proxy Container runtime ",
    "fullLink": "/docs/kubernetes/part01/#worker-node",
    "heading": "Worker Node",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part01/Part 1",
    "permalink": "/docs/kubernetes/part01/",
    "title": "Part 1",
    "truncatedContent": "The Worker nodes are responsible for running containerized …"
  },
  {
    "anchor": "control-plane-components",
    "content": "Control Plane Components:",
    "fullLink": "/docs/kubernetes/part01/#control-plane-components",
    "heading": "Control Plane Components:",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part01/Part 1",
    "permalink": "/docs/kubernetes/part01/",
    "title": "Part 1",
    "truncatedContent": "Control Plane Components:"
  },
  {
    "anchor": "kube-apiserver",
    "content": " The kube-api server is the central hub of the Kubernetes cluster that exposes the Kubernetes API.\nEnd users, and other cluster components, talk to the cluster via the API server.\nSo when you use kubectl to manage the cluster, at the backend you are actually communicating with the API server through HTTP REST APIs.\nThe communication between the API server and other components in the cluster happens over TLS to prevent unauthorized access to the cluster.\nIt is the only component that communicates with etcd.\n",
    "fullLink": "/docs/kubernetes/part01/#kube-apiserver",
    "heading": "kube-apiserver",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/part01/Part 1",
    "permalink": "/docs/kubernetes/part01/",
    "title": "Part 1",
    "truncatedContent": " The kube-api server is the central hub of the Kubernetes cluster that …"
  },
  {
    "anchor": "etcd",
    "content": " etcd is an open-source strongly consistent, distributed key-value store. etcd is designed to run on multiple nodes as a cluster without sacrificing consistency. etcd stores all configurations, states, and metadata of Kubernetes objects (pods, secrets, daemonsets, deployments, configmaps, statefulsets, etc). etcd it is the only Statefulset component in the control plane. Only kube-apiserver can talk to etcd. ",
    "fullLink": "/docs/kubernetes/part01/#etcd",
    "heading": "etcd",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/part01/Part 1",
    "permalink": "/docs/kubernetes/part01/",
    "title": "Part 1",
    "truncatedContent": " etcd is an open-source strongly consistent, distributed key-value …"
  },
  {
    "anchor": "kube-scheduler",
    "content": " The kube-scheduler is responsible for scheduling Kubernetes pods on worker nodes. It is a controller that listens to pod creation events in the API server. The scheduler has two phases. Scheduling cycle and the Binding cycle. Together it is called the scheduling context. The scheduling cycle selects a worker node and the binding cycle applies that change to the cluster. ",
    "fullLink": "/docs/kubernetes/part01/#kube-scheduler",
    "heading": "kube-scheduler:",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/part01/Part 1",
    "permalink": "/docs/kubernetes/part01/",
    "title": "Part 1",
    "truncatedContent": " The kube-scheduler is responsible for scheduling Kubernetes pods on …"
  },
  {
    "anchor": "kube-controller-manager",
    "content": " Controllers are programs that run infinite control loops. Meaning it runs continuously and watches the actual and desired state of objects. Kube controller manager is a component that manages all the Kubernetes controllers. Kubernetes resources/objects like pods, namespaces, jobs, replicaset are managed by respective controllers. the Kube scheduler is also a controller managed by the Kube controller manager. ",
    "fullLink": "/docs/kubernetes/part01/#kube-controller-manager",
    "heading": "Kube Controller Manager",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/part01/Part 1",
    "permalink": "/docs/kubernetes/part01/",
    "title": "Part 1",
    "truncatedContent": " Controllers are programs that run infinite control loops. Meaning it …"
  },
  {
    "anchor": "built-in-kubernetes-controllers",
    "content": " Deployment controller Replicaset controller DaemonSet controller Job Controller (Kubernetes Jobs) CronJob Controller endpoints controller namespace controller service accounts controller. Node controller ",
    "fullLink": "/docs/kubernetes/part01/#built-in-kubernetes-controllers",
    "heading": "built-in Kubernetes controllers.",
    "level": 5,
    "linkIfNotFAQ": "/docs/kubernetes/part01/Part 1",
    "permalink": "/docs/kubernetes/part01/",
    "title": "Part 1",
    "truncatedContent": " Deployment controller Replicaset controller DaemonSet controller Job …"
  },
  {
    "anchor": "cloud-controller-manager-ccm",
    "content": " When kubernetes is deployed in cloud environments, the cloud controller manager acts as a bridge between Cloud Platform APIs and the Kubernetes cluster.\nCloud controller integration allows Kubernetes cluster to provision cloud resources like instances (for nodes), Load Balancers (for services), and Storage Volumes (for persistent volumes).\n3 main controllers that are part of the cloud controller manager.\nNode controller: This controller updates node-related information by talking to the cloud provider API. For example, node labeling \u0026 annotation, getting hostname, CPU \u0026 memory availability, nodes health, etc.\nRoute controller: It is responsible for configuring networking routes on a cloud platform. So that pods in different nodes can talk to each other.\nService controller: It takes care of deploying load balancers for kubernetes services, assigning IP addresses, etc. ",
    "fullLink": "/docs/kubernetes/part01/#cloud-controller-manager-ccm",
    "heading": "Cloud Controller Manager (CCM)",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part01/Part 1",
    "permalink": "/docs/kubernetes/part01/",
    "title": "Part 1",
    "truncatedContent": " When kubernetes is deployed in cloud environments, the cloud …"
  },
  {
    "anchor": "kubernetes-worker-node-components",
    "content": "Kubernetes Worker Node Components",
    "fullLink": "/docs/kubernetes/part01/#kubernetes-worker-node-components",
    "heading": "Kubernetes Worker Node Components",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part01/Part 1",
    "permalink": "/docs/kubernetes/part01/",
    "title": "Part 1",
    "truncatedContent": "Kubernetes Worker Node Components"
  },
  {
    "anchor": "kubelet",
    "content": " Kubelet is an agent component that runs on every node in the cluster. It does not run as a container instead runs as a daemon, managed by systemd. It is responsible for registering worker nodes with the API server. It then brings the podSpec to the desired state by creating containers. Creating, modifying, and deleting containers for the pod. Responsible for handling liveliness, readiness, and startup probes. Responsible for Mounting volumes by reading pod configuration and creating respective directories on the host for the volume mount. Kubelet is also a controller that watches for pod changes and utilizes the node’s container runtime to pull images, run containers, etc. Static pods are controlled by kubelet, not the API servers. Static pods from podSpecs located at /etc/kubernetes/manifests ",
    "fullLink": "/docs/kubernetes/part01/#kubelet",
    "heading": "Kubelet",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/part01/Part 1",
    "permalink": "/docs/kubernetes/part01/",
    "title": "Part 1",
    "truncatedContent": " Kubelet is an agent component that runs on every node in the cluster. …"
  },
  {
    "anchor": "kube-proxy",
    "content": " Kube-Proxy is a network proxy that runs on each node in a Kubernetes cluster. It is responsible for maintaining network connectivity between services and pods. Kube-Proxy does this by translating service definitions into actionable networking rules. Kube-proxy uses iptables as a default mode. ",
    "fullLink": "/docs/kubernetes/part01/#kube-proxy",
    "heading": "Kube proxy",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/part01/Part 1",
    "permalink": "/docs/kubernetes/part01/",
    "title": "Part 1",
    "truncatedContent": " Kube-Proxy is a network proxy that runs on each node in a Kubernetes …"
  },
  {
    "anchor": "container-runtime",
    "content": " Container runtime runs on all the nodes in the Kubernetes cluster. It is responsible for pulling images from container registries, running containers, allocating and isolating resources for containers, and managing the entire lifecycle of a container on a host.\nKubernetes supports multiple container runtimes (CRI-O, Docker Engine, containerd, etc) that are compliant with Container Runtime Interface (CRI). This means, all these container runtimes implement the CRI interface and expose gRPC CRI APIs (runtime and image service endpoints). When there is a new request for a pod from the API server, the kubelet talks to CRI-O daemon to launch the required containers via Kubernetes Container Runtime Interface.\nCRI-O checks and pulls the required container image from the configured container registry using containers/image library.\nCRI-O then generates OCI runtime specification (JSON) for a container.\nCRI-O then launches an OCI-compatible runtime (runc) to start the container process as per the runtime specification.\n",
    "fullLink": "/docs/kubernetes/part01/#container-runtime",
    "heading": "Container Runtime",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/part01/Part 1",
    "permalink": "/docs/kubernetes/part01/",
    "title": "Part 1",
    "truncatedContent": " Container runtime runs on all the nodes in the Kubernetes cluster. It …"
  },
  {
    "anchor": "kubernetes-cluster-addon-components",
    "content": " CNI Plugin (Container Network Interface) CoreDNS (For DNS server): CoreDNS acts as a DNS server within the Kubernetes cluster. By enabling this addon, you can enable DNS-based service discovery. Metrics Server (For Resource Metrics): This addon helps you collect performance data and resource usage of Nodes and pods in the cluster. Web UI (Kubernetes Dashboard): This addon enables the Kubernetes dashboard to manage the object via web UI. ",
    "fullLink": "/docs/kubernetes/part01/#kubernetes-cluster-addon-components",
    "heading": "Kubernetes Cluster Addon Components",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part01/Part 1",
    "permalink": "/docs/kubernetes/part01/",
    "title": "Part 1",
    "truncatedContent": " CNI Plugin (Container Network Interface) CoreDNS (For DNS server): …"
  },
  {
    "anchor": "virual-machine-setup-for-kubernetes-installation",
    "content": "Virual Machine setup for Kubernetes Installation.",
    "fullLink": "/docs/kubernetes/part01/#virual-machine-setup-for-kubernetes-installation",
    "heading": "Virual Machine setup for Kubernetes Installation.",
    "level": 2,
    "linkIfNotFAQ": "/docs/kubernetes/part01/Part 1",
    "permalink": "/docs/kubernetes/part01/",
    "title": "Part 1",
    "truncatedContent": "Virual Machine setup for Kubernetes Installation."
  },
  {
    "anchor": "prerequisites",
    "content": " Virtualbox installed on Windows vm. Internet connectivity has to be there. Vscode should be installed Gitbash should also be available on Windows machine ",
    "fullLink": "/docs/kubernetes/part01/#prerequisites",
    "heading": "Prerequisites",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part01/Part 1",
    "permalink": "/docs/kubernetes/part01/",
    "title": "Part 1",
    "truncatedContent": " Virtualbox installed on Windows vm. Internet connectivity has to be …"
  },
  {
    "anchor": "create-two-vms-using-vagrant-on-virtualbox",
    "content": " Create a folder in Windows OS Open folder in vscode Open Terminal in vscode and run the below commands git clone https://gitlab.com/container-and-kubernetes/kubernetes-2024.git cd kubernetes-2024/two-vms vagrant up Check your virtualbox and see if you have two vms (kmaster \u0026 kworker1) with below ips kmaster: 172.16.16.100 kworker1: 172.16.16.101 Try to login to each vms using the command below usinf vscode terminal ssh vagrant@172.16.16.100 ssh vagrant@172.16.16.101 ",
    "fullLink": "/docs/kubernetes/part01/#create-two-vms-using-vagrant-on-virtualbox",
    "heading": "Create two VMS using vagrant on virtualbox",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part01/Part 1",
    "permalink": "/docs/kubernetes/part01/",
    "title": "Part 1",
    "truncatedContent": " Create a folder in Windows OS Open folder in vscode Open Terminal in …"
  },
  {
    "anchor": "kubernetes-cluster-setup-documentation",
    "content": "Kubernetes Cluster Setup Documentation",
    "fullLink": "/docs/kubernetes/part01/#kubernetes-cluster-setup-documentation",
    "heading": "Kubernetes Cluster Setup Documentation",
    "level": 2,
    "linkIfNotFAQ": "/docs/kubernetes/part01/Part 1",
    "permalink": "/docs/kubernetes/part01/",
    "title": "Part 1",
    "truncatedContent": "Kubernetes Cluster Setup Documentation"
  },
  {
    "anchor": "documentation-link",
    "content": "https://kubernetes.io/docs/setup/production-environment/tools/kubeadm/install-kubeadm/\n",
    "fullLink": "/docs/kubernetes/part01/#documentation-link",
    "heading": "Documentation Link:",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part01/Part 1",
    "permalink": "/docs/kubernetes/part01/",
    "title": "Part 1",
    "truncatedContent": "https://kubernetes.io/docs/setup/production-environment/tools/kubeadm/ …"
  },
  {
    "anchor": "installation-of-kubeadm-kubelet-etc-will-be-done-on-master-and-worker-nodes",
    "content": "Installation of kubeadm ,kubelet etc will be done on master and worker nodes.",
    "fullLink": "/docs/kubernetes/part01/#installation-of-kubeadm-kubelet-etc-will-be-done-on-master-and-worker-nodes",
    "heading": "Installation of kubeadm ,kubelet etc will be done on master and worker nodes.",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part01/Part 1",
    "permalink": "/docs/kubernetes/part01/",
    "title": "Part 1",
    "truncatedContent": "Installation of kubeadm ,kubelet etc will be done on master and worker …"
  },
  {
    "anchor": "setup-containerd",
    "content": "Setup containerd",
    "fullLink": "/docs/kubernetes/part01/#setup-containerd",
    "heading": "Setup containerd",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/part01/Part 1",
    "permalink": "/docs/kubernetes/part01/",
    "title": "Part 1",
    "truncatedContent": "Setup containerd"
  },
  {
    "anchor": "prerequisites-1",
    "content": " A compatible Linux host.\n2 GB or more of RAM per machine (any less will leave little room for your apps).\n2 CPUs or more.\nFull network connectivity between all machines in the cluster (public or private network is fine).\nUnique hostname, MAC address, and product_uuid for every node. See here for more details.\nCertain ports are open on your machines. See here for more details.\nSwap configuration. The default behavior of a kubelet was to fail to start if swap memory was detected on a node.\nVerify the MAC address and product_uuid are unique for every node\nip link ip addr show ifconfig -a sudo cat /sys/class/dmi/id/product_uuid Check Required Ports nc 127.0.0.1 6443 Disable swap sudo swapoff -a sudo sed -i '/ swap / s/^\\(.*\\)$/#\\1/g' /etc/fstab ",
    "fullLink": "/docs/kubernetes/part01/#prerequisites-1",
    "heading": "Prerequisites",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/part01/Part 1",
    "permalink": "/docs/kubernetes/part01/",
    "title": "Part 1",
    "truncatedContent": " A compatible Linux host.\n2 GB or more of RAM per machine (any less …"
  },
  {
    "anchor": "installing-a-container-runtime",
    "content": " To run containers in Pods, Kubernetes uses a container runtime.\nBy default, Kubernetes uses the Container Runtime Interface (CRI) to interface with your chosen container runtime.\nIf you don’t specify a runtime, kubeadm automatically tries to detect an installed container runtime by scanning through a list of known endpoints.\nIf multiple or no container runtimes are detected kubeadm will throw an error and will request that you specify which one you want to use.\nThe tables below include the known endpoints for supported operating systems:\nRuntime\tPath to Unix domain socket\nContainer Runtime Socket containerd unix:///var/run/containerd/containerd.sock CRI-O unix:///var/run/crio/crio.sock Docker Engine (cri-dockerd) unix:///var/run/cri-dockerd.sock ",
    "fullLink": "/docs/kubernetes/part01/#installing-a-container-runtime",
    "heading": "Installing a container runtime",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part01/Part 1",
    "permalink": "/docs/kubernetes/part01/",
    "title": "Part 1",
    "truncatedContent": " To run containers in Pods, Kubernetes uses a container runtime.\nBy …"
  },
  {
    "anchor": "install-containerd",
    "content": "apt update -y apt-get install -y containerd mkdir -p /etc/containerd containerd config default \u003e /etc/containerd/config.toml ",
    "fullLink": "/docs/kubernetes/part01/#install-containerd",
    "heading": "Install containerd",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/part01/Part 1",
    "permalink": "/docs/kubernetes/part01/",
    "title": "Part 1",
    "truncatedContent": "apt update -y apt-get install -y containerd mkdir -p /etc/containerd …"
  },
  {
    "anchor": "update-systemdcgroup-settings",
    "content": "sed -i 's/SystemdCgroup \\= false/SystemdCgroup \\= true/g' /etc/containerd/config.toml ",
    "fullLink": "/docs/kubernetes/part01/#update-systemdcgroup-settings",
    "heading": "Update SystemdCgroup Settings",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/part01/Part 1",
    "permalink": "/docs/kubernetes/part01/",
    "title": "Part 1",
    "truncatedContent": "sed -i \u0026#39;s/SystemdCgroup \\= false/SystemdCgroup \\= true/g\u0026#39; …"
  },
  {
    "anchor": "restart-containerd",
    "content": "systemctl restart containerd ",
    "fullLink": "/docs/kubernetes/part01/#restart-containerd",
    "heading": "Restart containerd",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/part01/Part 1",
    "permalink": "/docs/kubernetes/part01/",
    "title": "Part 1",
    "truncatedContent": "systemctl restart containerd "
  },
  {
    "anchor": "kernel-parameter-configuration",
    "content": " Forwarding IPv4 and letting iptables see bridged traffic cat \u003c\u003cEOF | sudo tee /etc/modules-load.d/k8s.conf overlay br_netfilter EOF sudo modprobe overlay sudo modprobe br_netfilter sysctl params required by setup, params persist across reboots cat \u003c\u003cEOF | sudo tee /etc/sysctl.d/k8s.conf net.bridge.bridge-nf-call-iptables = 1 net.bridge.bridge-nf-call-ip6tables = 1 net.ipv4.ip_forward = 1 EOF Apply sysctl params without reboot sudo sysctl --system ",
    "fullLink": "/docs/kubernetes/part01/#kernel-parameter-configuration",
    "heading": "Kernel Parameter Configuration",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/part01/Part 1",
    "permalink": "/docs/kubernetes/part01/",
    "title": "Part 1",
    "truncatedContent": " Forwarding IPv4 and letting iptables see bridged traffic cat \u0026lt;\u0026lt;EOF | …"
  },
  {
    "anchor": "installing-kubeadm-kubelet-and-kubectl",
    "content": "sudo apt-get update sudo apt-get install -y apt-transport-https ca-certificates curl sudo curl -fsSL https://packages.cloud.google.com/apt/doc/apt-key.gpg | sudo gpg --dearmor -o /etc/apt/keyrings/kubernetes-archive-keyring.gpg echo \"deb [signed-by=/etc/apt/keyrings/kubernetes-archive-keyring.gpg] https://apt.kubernetes.io/ kubernetes-xenial main\" | sudo tee /etc/apt/sources.list.d/kubernetes.list sudo apt-get update apt-cache madison kubeadm sudo apt-get install -y kubelet=1.24.0-00 kubeadm=1.24.0-00 kubectl=1.24.0-00 cri-tools=1.24.2-00 sudo apt-mark hold kubelet kubeadm kubectl ",
    "fullLink": "/docs/kubernetes/part01/#installing-kubeadm-kubelet-and-kubectl",
    "heading": "Installing kubeadm, kubelet and kubectl",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/part01/Part 1",
    "permalink": "/docs/kubernetes/part01/",
    "title": "Part 1",
    "truncatedContent": "sudo apt-get update sudo apt-get install -y apt-transport-https …"
  },
  {
    "anchor": "initialize-cluster-with-kubeadm-only-master-node",
    "content": "kubeadm init --pod-network-cidr=10.244.0.0/16 --kubernetes-version=1.24.0 --apiserver-advertise-address=172.16.16.100 ",
    "fullLink": "/docs/kubernetes/part01/#initialize-cluster-with-kubeadm-only-master-node",
    "heading": "Initialize Cluster with kubeadm (Only master node)",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/part01/Part 1",
    "permalink": "/docs/kubernetes/part01/",
    "title": "Part 1",
    "truncatedContent": "kubeadm init --pod-network-cidr=10.244.0.0/16 …"
  },
  {
    "anchor": "execute-the-below-command-to-run-kubectl-commands-as-you-will-require-kubeconfig-file-to-connect-to-kubernetes-cluster",
    "content": "mkdir -p $HOME/.kube sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config sudo chown $(id -u):$(id -g) $HOME/.kube/config Click Here to know more about kubeconfig\n",
    "fullLink": "/docs/kubernetes/part01/#execute-the-below-command-to-run-kubectl-commands-as-you-will-require-kubeconfig-file-to-connect-to-kubernetes-cluster",
    "heading": "Execute the below command to run kubectl commands as you will require kubeconfig file to connect to kubernetes cluster",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/part01/Part 1",
    "permalink": "/docs/kubernetes/part01/",
    "title": "Part 1",
    "truncatedContent": "mkdir -p $HOME/.kube sudo cp -i /etc/kubernetes/admin.conf …"
  },
  {
    "anchor": "check-nodes-status",
    "content": "kubectl get nodes ",
    "fullLink": "/docs/kubernetes/part01/#check-nodes-status",
    "heading": "Check nodes status",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/part01/Part 1",
    "permalink": "/docs/kubernetes/part01/",
    "title": "Part 1",
    "truncatedContent": "kubectl get nodes "
  },
  {
    "anchor": "install-network-addon-flannel-master-node",
    "content": "kubectl apply -f https://raw.githubusercontent.com/coreos/flannel/master/Documentation/kube-flannel.yml ",
    "fullLink": "/docs/kubernetes/part01/#install-network-addon-flannel-master-node",
    "heading": "Install Network Addon (flannel) (master node)",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/part01/Part 1",
    "permalink": "/docs/kubernetes/part01/",
    "title": "Part 1",
    "truncatedContent": "kubectl apply -f …"
  },
  {
    "anchor": "connect-worker-node-only-worker-node",
    "content": "kubeadm join 172.16.16.100:6443 --token qmw5dj.ljdh8r74ce3y85ad \\ --discovery-token-ca-cert-hash sha256:83374ec05088fa7efe9c31cce63326ae7037210ab049048ef08f8c961a048ddf ",
    "fullLink": "/docs/kubernetes/part01/#connect-worker-node-only-worker-node",
    "heading": "Connect Worker Node (Only worker node)",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/part01/Part 1",
    "permalink": "/docs/kubernetes/part01/",
    "title": "Part 1",
    "truncatedContent": "kubeadm join 172.16.16.100:6443 --token qmw5dj.ljdh8r74ce3y85ad \\ …"
  },
  {
    "anchor": "verification",
    "content": " check node status kubectl get nodes run a pod kubectl run nginx --image=nginx check running pod kubectl get pods -o wide ",
    "fullLink": "/docs/kubernetes/part01/#verification",
    "heading": "Verification",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/part01/Part 1",
    "permalink": "/docs/kubernetes/part01/",
    "title": "Part 1",
    "truncatedContent": " check node status kubectl get nodes run a pod kubectl run nginx …"
  },
  {
    "anchor": "kubernetes-cluster-configurations",
    "content": " Static Pod Manifests: /etc/kubernetes/manifests /etc/kubernetes/manifests ├── etcd.yaml ├── kube-apiserver.yaml ├── kube-controller-manager.yaml └── kube-scheduler.yaml TLS Certificates All the components talk to each other over mTLS. Under the PKI folder, you will find all the TLS certificates and keys Kubeconfig Files\nAny components that need to authenticate to the API server need the kubeconfig file.\nAll the cluster Kubeconfig files are present in the /etc/kubernetes folder (.conf files). You will find the following files.\nadmin.conf controller-manager.conf kubelet.conf scheduler.conf It contains the API server endpoint, cluster CA certificate, cluster client certificate, and other information.\nThe admin.conf, file, which is the admin kubeconfig file used by end users to access the API server to manage the clusters.\nThe Kubeconfig for the Controller manager controller-manager.conf, scheduler, and Kubelet is used for API server authentication and authorization.\n",
    "fullLink": "/docs/kubernetes/part01/#kubernetes-cluster-configurations",
    "heading": "Kubernetes Cluster Configurations",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part01/Part 1",
    "permalink": "/docs/kubernetes/part01/",
    "title": "Part 1",
    "truncatedContent": " Static Pod Manifests: /etc/kubernetes/manifests …"
  },
  {
    "anchor": "kubelet-configurations",
    "content": " kubelet kubeconfig file: /etc/kubernetes/kubelet.conf kubelet config file: /var/lib/kubelet/config.yaml EnvironmentFile=-/var/lib/kubelet/kubeadm-flags.env The /var/lib/kubelet/config.yaml contains all the kubelet-related configurations. The static pod manifest location is added as part of the staticPodPath parameter. /var/lib/kubelet/kubeadm-flags.env file contains the container runtime environment Linux socket and the infra container (pause container) image. CoreDNS Configurations kubectl get configmap --namespace=kube-system ",
    "fullLink": "/docs/kubernetes/part01/#kubelet-configurations",
    "heading": "Kubelet Configurations",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part01/Part 1",
    "permalink": "/docs/kubernetes/part01/",
    "title": "Part 1",
    "truncatedContent": " kubelet kubeconfig file: /etc/kubernetes/kubelet.conf kubelet config …"
  },
  {
    "anchor": "node-related-commands",
    "content": " Check all nodes which are the part of kubernetes cluster kubectl get nodes Cordon a node (prevent new pods from being scheduled) kubectl cordon Uncordon a node (allow new pods to be scheduled): kubectl uncordon Drain a node (evacuate all pods, reschedule them elsewhere) kubectl drain Sort Nodes by CPU Capacity kubectl get nodes --sort-by=.status.capacity.cpu Sort by memory kubectl get nodes --sort-by=.status.capacity.memory How to label a node kubectl label node key=value check nodes with label kubectl get nodes -l key=value check the nodes which does not label key=value kubectl get nodes key!=value Check detailed information about a node kubectl get nodes -o wide ",
    "fullLink": "/docs/kubernetes/part01/#node-related-commands",
    "heading": "Node Related commands",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part01/Part 1",
    "permalink": "/docs/kubernetes/part01/",
    "title": "Part 1",
    "truncatedContent": " Check all nodes which are the part of kubernetes cluster kubectl get …"
  },
  {
    "anchor": "upgrade-kubeadm-cluster",
    "content": " Before upgrade kubernetes cluster Do not forgot to study kubernetes release\nCheck the release notes before you upgrade your kubernetes cluster\nAlso drain a node and uncordon after the upgrade is successful\nCheck the upgrade plan using below commands\nkubeadm upgrade plan kubectl -n kube-system get cm kubeadm-config -o yaml Check the kubeadm version available apt-cache madison kubeadm Unhold the packages to be upgraded apt-mark unhold kubelet kubectl kubeadm Upgrade the available packages apt-get update \u0026\u0026 apt-get install -y kubelet=1.25.0-00 kubectl=1.25.0-00 kubeadm=1.25.0-00 Lock again the below packages apt-mark hold kubelet kubectl Check new kubeadm version kubeadm version Upgrade the kubernetes cluster kubeadm upgrade apply 1.25.0 Restart the services systemctl daemon-reload systemctl restart kubelet Check the kubernetes version kubectl version ",
    "fullLink": "/docs/kubernetes/part01/#upgrade-kubeadm-cluster",
    "heading": "Upgrade Kubeadm Cluster",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part01/Part 1",
    "permalink": "/docs/kubernetes/part01/",
    "title": "Part 1",
    "truncatedContent": " Before upgrade kubernetes cluster Do not forgot to study kubernetes …"
  },
  {
    "anchor": "kubens--kubectx",
    "content": " Login to master node and run the command there ",
    "fullLink": "/docs/kubernetes/part01/#kubens--kubectx",
    "heading": "Kubens \u0026 Kubectx",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part01/Part 1",
    "permalink": "/docs/kubernetes/part01/",
    "title": "Part 1",
    "truncatedContent": " Login to master node and run the command there "
  },
  {
    "anchor": "install-kubens-to-switch-from-one-namespace-to-another",
    "content": "wget https://raw.githubusercontent.com/ahmetb/kubectx/master/kubens chmod +x kubens cp kubens /bin ",
    "fullLink": "/docs/kubernetes/part01/#install-kubens-to-switch-from-one-namespace-to-another",
    "heading": "Install Kubens to switch from one namespace to another",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/part01/Part 1",
    "permalink": "/docs/kubernetes/part01/",
    "title": "Part 1",
    "truncatedContent": "wget https://raw.githubusercontent.com/ahmetb/kubectx/master/kubens …"
  },
  {
    "anchor": "install-kubectx-to-switch-from-one-kubernetes-cluster-to-another",
    "content": "wget https://raw.githubusercontent.com/ahmetb/kubectx/master/kubectx chmod +x kubectx cp kubectx /bin ",
    "fullLink": "/docs/kubernetes/part01/#install-kubectx-to-switch-from-one-kubernetes-cluster-to-another",
    "heading": "Install kubectx to switch from one Kubernetes cluster to another",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/part01/Part 1",
    "permalink": "/docs/kubernetes/part01/",
    "title": "Part 1",
    "truncatedContent": "wget https://raw.githubusercontent.com/ahmetb/kubectx/master/kubectx …"
  },
  {
    "anchor": "kubernetes-initial-commands-for-cluster-verification",
    "content": " How to check nodes in cluster kubectl get nodes Cluster api info kubectl api-resources Cluster info kubect cluster-info Kubernetes nodes information kubectl describe nodes Update worker node role as a worker kubectl label node kubernetes.io/role=worker Make a test after creating one pod kubectl run mypod --image=nginx Check newly created pod kubectl get pods ",
    "fullLink": "/docs/kubernetes/part01/#kubernetes-initial-commands-for-cluster-verification",
    "heading": "Kubernetes Initial commands for cluster verification",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/part01/Part 1",
    "permalink": "/docs/kubernetes/part01/",
    "title": "Part 1",
    "truncatedContent": " How to check nodes in cluster kubectl get nodes Cluster api info …"
  },
  {
    "anchor": "install-kubernetes-cluster-automatically",
    "content": "git clone https://gitlab.com/container-and-kubernetes/kubernetes-2024.git cd kubernetes-2024/ cd kubernetes-with-vagrant/ vagrant up ",
    "fullLink": "/docs/kubernetes/part01/#install-kubernetes-cluster-automatically",
    "heading": "Install kubernetes Cluster Automatically",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part01/Part 1",
    "permalink": "/docs/kubernetes/part01/",
    "title": "Part 1",
    "truncatedContent": "git clone …"
  },
  {
    "anchor": "common-kubeadm-commands",
    "content": " kubeadm init (initialize kubernetes) kubeadm init --pod-network-cidr=192.168.0.0/16 kubeadm join (To join a worker node) kubeadm join : --token --discovery-token-ca-cert-hash kubeadm reset( removing all installed Kubernetes components and returning it to its pre-Kubernetes state. ) kubeadm reset --force kubeadm upgrade (check available upgrades) kubeadm upgrade plan kubeadm token (Token management) kubeadm token create Print Token along with command kubeadm token create --print-join-command kubeadm token list (Check all token along with expiration date) kubeadm token list kubeadm token delete kubeadm token delete kubeadm config migrate kubeadm config migrate --old-config kubeadm.conf --new-config kubeadm.yaml kubeadm config (Print default config files) kubeadm config print init-defaults kubeadm config images(List all required images) kubeadm config images list kubeadm certs(Check certificate status) kubeadm certs check-expiration kubeadm certs certificate-key kubeadm upgrade node(upgrades the kubelet and kube-proxy on a worker node to match the control plane’s version.) kubeadm upgrade node ",
    "fullLink": "/docs/kubernetes/part01/#common-kubeadm-commands",
    "heading": "Common Kubeadm Commands",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part01/Part 1",
    "permalink": "/docs/kubernetes/part01/",
    "title": "Part 1",
    "truncatedContent": " kubeadm init (initialize kubernetes) kubeadm init …"
  },
  {
    "anchor": "what-is-a-kubeconfig-file",
    "content": " A Kubeconfig is a YAML file with all the Kubernetes cluster details, certificates, and secret tokens to authenticate the cluster. You might get this config file directly from the cluster administrator or from a cloud platform if you are using a managed Kubernetes cluster. When you use kubectl, it uses the information in the kubeconfig file to connect to the kubernetes cluster API. The default location of the Kubeconfig file is $HOME/.kube/config Example Kubeconfig File certificate-authority-data: Cluster CA server: Cluster endpoint (IP/DNS of the master node) name: Cluster name user: name of the user/service account. token: Secret token of the user/service account. apiVersion: v1 clusters: - cluster: certificate-authority-data: server: https://your-k8s-cluster.com name: contexts: - context: cluster: user: name: current-context: kind: Config preferences: {} users: - name: user: token: List all cluster contexts kubectl config get-contexts -o=name Set the current context kubectl config use-context Using Environment variable (KUBECONFIG) export KUBECONFIG=\u003ckubeconfig filename\u003e Using Kubeconfig File With Kubectl kubectl get nodes --kubeconfig= How to merge multiple kubeconfig into one KUBECONFIG=config:dev_config:test_config kubectl config view --merge --flatten \u003e config.new ",
    "fullLink": "/docs/kubernetes/part01/#what-is-a-kubeconfig-file",
    "heading": "What is a Kubeconfig file?",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part01/Part 1",
    "permalink": "/docs/kubernetes/part01/",
    "title": "Part 1",
    "truncatedContent": " A Kubeconfig is a YAML file with all the Kubernetes cluster details, …"
  },
  {
    "anchor": "topics",
    "content": "Topics:",
    "fullLink": "/docs/kubernetes/part02/#topics",
    "heading": "Topics:",
    "level": 2,
    "linkIfNotFAQ": "/docs/kubernetes/part02/Part 2",
    "permalink": "/docs/kubernetes/part02/",
    "title": "Part 2",
    "truncatedContent": "Topics:"
  },
  {
    "anchor": "namespacenamespace",
    "content": " Create a namespace Switch from one ns to another Resource Quota Resource Limits ",
    "fullLink": "/docs/kubernetes/part02/#namespacenamespace",
    "heading": "",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part02/Part 2",
    "permalink": "/docs/kubernetes/part02/",
    "title": "Part 2",
    "truncatedContent": " Create a namespace Switch from one ns to another Resource Quota …"
  },
  {
    "anchor": "podpod",
    "content": " Single Container pod MultiContainer pod Login to a pod Copy to a pod and from a pod(container) How to check logs from a container Environment Variables of pod initContainer Command and Argument of a pod pullSecret of a pod pod restart policy imagePull policy How to delete a pod Pod priority Pod Resources Pod Quality of Services(QOS) ",
    "fullLink": "/docs/kubernetes/part02/#podpod",
    "heading": "",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part02/Part 2",
    "permalink": "/docs/kubernetes/part02/",
    "title": "Part 2",
    "truncatedContent": " Single Container pod MultiContainer pod Login to a pod Copy to a pod …"
  },
  {
    "anchor": "advance-scheduling-of-podadvance-scheduling-of-pod",
    "content": " Scheduler Nodename nodeSelector Node Affinity Taints and Tolerations Pod affinity and anti affinity Priority and PriorityClass Preemption Disruption Budget Topology and Constraints Descheduler ",
    "fullLink": "/docs/kubernetes/part02/#advance-scheduling-of-podadvance-scheduling-of-pod",
    "heading": "",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part02/Part 2",
    "permalink": "/docs/kubernetes/part02/",
    "title": "Part 2",
    "truncatedContent": " Scheduler Nodename nodeSelector Node Affinity Taints and Tolerations …"
  },
  {
    "anchor": "namespace",
    "content": " Namespaces are a way to divide cluster resources between multiple users (via resource quota). namespaces provides a mechanism for isolating groups of resources within a single cluster Names of resources need to be unique within a namespace, but not across namespaces. To achieve multitenancy with Networkpolicy To configure RBAC Check all namespaces kubectl get ns Create a new namespace kubectl create ns Switch from one ns to another kubens kubens \u003cns name\u003e ",
    "fullLink": "/docs/kubernetes/part02/#namespace",
    "heading": "Namespace",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/part02/Part 2",
    "permalink": "/docs/kubernetes/part02/",
    "title": "Part 2",
    "truncatedContent": " Namespaces are a way to divide cluster resources between multiple …"
  },
  {
    "anchor": "to-see-which-kubernetes-resources-are-and-arent-in-a-namespace",
    "content": " In a namespace kubectl api-resources --namespaced=true Not in a namespace kubectl api-resources --namespaced=false Learn About Resource Quota and limits Configure Memory and CPU Quotas for a Namespace\nkubectl apply -f - \u003c",
    "fullLink": "/docs/kubernetes/part02/#to-see-which-kubernetes-resources-are-and-arent-in-a-namespace",
    "heading": "To see which Kubernetes resources are and aren’t in a namespace:",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/part02/Part 2",
    "permalink": "/docs/kubernetes/part02/",
    "title": "Part 2",
    "truncatedContent": " In a namespace kubectl api-resources --namespaced=true Not in a …"
  },
  {
    "anchor": "as-per-above-example",
    "content": " The ResourceQuota places these requirements on the quota-mem-cpu-example namespace:\nFor every Pod in the namespace, each container must have a memory request, memory limit, cpu request, and cpu limit.\nThe memory request total for all Pods in that namespace must not exceed 1 GiB.\nThe memory limit total for all Pods in that namespace must not exceed 2 GiB.\nThe CPU request total for all Pods in that namespace must not exceed 1 cpu.\nThe CPU limit total for all Pods in that namespace must not exceed 2 cpu.\nCheck applied quota\nkubectl get quota Create namespace using a yaml file kubectl apply -f - \u003c",
    "fullLink": "/docs/kubernetes/part02/#as-per-above-example",
    "heading": "As per above Example:",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/part02/Part 2",
    "permalink": "/docs/kubernetes/part02/",
    "title": "Part 2",
    "truncatedContent": " The ResourceQuota places these requirements on the …"
  },
  {
    "anchor": "resource-limits",
    "content": "A Kubernetes cluster can be divided into namespaces. Once you have a namespace that has a default memory limit, and you then try to create a Pod with a container that does not specify its own memory limit, then the control plane assigns the default memory limit to that container.\nCreate a LimitRange kubectl apply -f - \u003c",
    "fullLink": "/docs/kubernetes/part02/#resource-limits",
    "heading": "Resource Limits",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/part02/Part 2",
    "permalink": "/docs/kubernetes/part02/",
    "title": "Part 2",
    "truncatedContent": "A Kubernetes cluster can be divided into namespaces. Once you have a …"
  },
  {
    "anchor": "pod",
    "content": " A pod is the smallest deployable unit in Kubernetes that represents a single instance of an application. For example, if you want to run the Nginx application, you run it in a pod. A container is a single unit. However, a pod can contain more than one container. You can think of pods as a box that can hold one or more containers together. the pod gets a single unique IP address and containers running inside the pod use localhost to connect to each other on different ports. Each pod gets a unique IP address. Pods communicate with each other using the IP address. Containers inside a pod connect using localhost on different ports. Containers running inside a pod should have different port numbers to avoid port clashes. You can set CPU and memory resources for each container running inside the pod. Containers inside a pod share the same volume mount. All the containers inside a pod are scheduled on the same node; It cannot span multiple nodes. If there is more than one container, during the pod startup all the main containers start in parallel. Whereas the init containers inside the pod run in sequence. Create a pod kubectl run pod --image=nginx Check newly created pod kubectl get pods Check more info of a pod like where the pod is scheduled and ip address kubectl get pods -o wide check pods details like events and resources kubectl describe pod Check the name of all pods kubectl get pods -o name Create a pod using yaml file kubectl apply -f - \u003c",
    "fullLink": "/docs/kubernetes/part02/#pod",
    "heading": "POD",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/part02/Part 2",
    "permalink": "/docs/kubernetes/part02/",
    "title": "Part 2",
    "truncatedContent": " A pod is the smallest deployable unit in Kubernetes that represents a …"
  },
  {
    "anchor": "some-useful-command-in-realtimeproduction",
    "content": " Find out all the images of all the pods kubectl get pods --all-namespaces -o jsonpath='{range .items[*]}{.spec.containers[*].image}{\"\\n\"}{end}' Get All containers name kubectl get pods --all-namespaces -o jsonpath='{range .items[*]}{.metadata.namespace} {.metadata.name}: {.spec.containers[*].name}{\"\\n\"}{end}' ",
    "fullLink": "/docs/kubernetes/part02/#some-useful-command-in-realtimeproduction",
    "heading": "Some useful command in realtime(Production)",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part02/Part 2",
    "permalink": "/docs/kubernetes/part02/",
    "title": "Part 2",
    "truncatedContent": " Find out all the images of all the pods kubectl get pods …"
  },
  {
    "anchor": "define-environment-variables-for-a-container",
    "content": "A Kubernetes environment variable is a dynamic value that configures some aspect of the environment in which a Kubernetes-based application runs.\nenv: - name: SERVICE_PORT value: \"8080\" - name: SERVICE_IP value: \"192.168.100.1\" ",
    "fullLink": "/docs/kubernetes/part02/#define-environment-variables-for-a-container",
    "heading": "Define Environment Variables for a Container",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part02/Part 2",
    "permalink": "/docs/kubernetes/part02/",
    "title": "Part 2",
    "truncatedContent": "A Kubernetes environment variable is a dynamic value that configures …"
  },
  {
    "anchor": "problem-statement-if-the-pod-is-failing-becuase-of-environment-variable",
    "content": " Deploy one mysql pod and see if the pod is failing kubectl run mysql --image=mysql:5.6 Check the logs and fix the issue ",
    "fullLink": "/docs/kubernetes/part02/#problem-statement-if-the-pod-is-failing-becuase-of-environment-variable",
    "heading": "Problem Statement if the pod is failing becuase of environment variable",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/part02/Part 2",
    "permalink": "/docs/kubernetes/part02/",
    "title": "Part 2",
    "truncatedContent": " Deploy one mysql pod and see if the pod is failing kubectl run mysql …"
  },
  {
    "anchor": "environment-variables",
    "content": " Apply required variables using below yaml file kubectl apply -f - \u003c",
    "fullLink": "/docs/kubernetes/part02/#environment-variables",
    "heading": "Environment Variables",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/part02/Part 2",
    "permalink": "/docs/kubernetes/part02/",
    "title": "Part 2",
    "truncatedContent": " Apply required variables using below yaml file kubectl apply -f - \u0026lt;"
  },
  {
    "anchor": "command-and-arguments-with-kubernetes-pod",
    "content": "Here’s a table summarizing the field names used by Docker and Kubernetes:\nDescription Docker field name Kubernetes field name The command run by the container Entrypoint command The arguments passed to the command Cmd args When you override the default Entrypoint and Cmd, these rules apply:\nIf you do not supply command or args for a Container, the defaults defined in the Docker image are used. If you supply a command but no args for a Container, only the supplied command is used. The default EntryPoint and the default Cmd defined in the Docker image are ignored. If you supply only args for a Container, the default Entrypoint defined in the Docker image is run with the args that you supplied. If you supply a command and args, the default Entrypoint and the default Cmd defined in the Docker image are ignored. Your command is run with your args. ",
    "fullLink": "/docs/kubernetes/part02/#command-and-arguments-with-kubernetes-pod",
    "heading": "Command and Arguments with Kubernetes Pod",
    "level": 2,
    "linkIfNotFAQ": "/docs/kubernetes/part02/Part 2",
    "permalink": "/docs/kubernetes/part02/",
    "title": "Part 2",
    "truncatedContent": "Here’s a table summarizing the field names used by Docker and …"
  },
  {
    "anchor": "example-1-command-override",
    "content": "kubectl apply -f - \u003c",
    "fullLink": "/docs/kubernetes/part02/#example-1-command-override",
    "heading": "Example 1: Command Override",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part02/Part 2",
    "permalink": "/docs/kubernetes/part02/",
    "title": "Part 2",
    "truncatedContent": "kubectl apply -f - \u0026lt;"
  },
  {
    "anchor": "example-2-command-and-arguments",
    "content": "kubectl apply -f - \u003c",
    "fullLink": "/docs/kubernetes/part02/#example-2-command-and-arguments",
    "heading": "Example 2: Command and Arguments",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part02/Part 2",
    "permalink": "/docs/kubernetes/part02/",
    "title": "Part 2",
    "truncatedContent": "kubectl apply -f - \u0026lt;"
  },
  {
    "anchor": "example-3-passing-environment-variables-to-commands",
    "content": " kubectl apply -f - \u003c",
    "fullLink": "/docs/kubernetes/part02/#example-3-passing-environment-variables-to-commands",
    "heading": "Example 3: Passing Environment Variables to Commands",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/part02/Part 2",
    "permalink": "/docs/kubernetes/part02/",
    "title": "Part 2",
    "truncatedContent": " kubectl apply -f - \u0026lt;"
  },
  {
    "anchor": "example-4-passing-arguments-to-docker-entrypoint",
    "content": "kubectl apply -f - \u003c",
    "fullLink": "/docs/kubernetes/part02/#example-4-passing-arguments-to-docker-entrypoint",
    "heading": "Example 4: Passing Arguments to Docker Entrypoint",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part02/Part 2",
    "permalink": "/docs/kubernetes/part02/",
    "title": "Part 2",
    "truncatedContent": "kubectl apply -f - \u0026lt;"
  },
  {
    "anchor": "multicontainer-pod",
    "content": "MultiContainer pod",
    "fullLink": "/docs/kubernetes/part02/#multicontainer-pod",
    "heading": "MultiContainer pod",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part02/Part 2",
    "permalink": "/docs/kubernetes/part02/",
    "title": "Part 2",
    "truncatedContent": "MultiContainer pod"
  },
  {
    "anchor": "use-cases-for-multi-container-pods",
    "content": " Pods that run multiple containers that need to work together.\nA Pod can encapsulate an application composed of multiple co-located containers that are tightly coupled and need to share resources.\nThese co-located containers form a single cohesive unit. Here is an example for multiple container.\nkubectl apply -f - \u003c",
    "fullLink": "/docs/kubernetes/part02/#use-cases-for-multi-container-pods",
    "heading": "Use Cases for Multi-Container Pods",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part02/Part 2",
    "permalink": "/docs/kubernetes/part02/",
    "title": "Part 2",
    "truncatedContent": " Pods that run multiple containers that need to work together.\nA Pod …"
  },
  {
    "anchor": "initcontainer",
    "content": " A Pod can have multiple containers running apps within it, but it can also have one or more init containers, which are run before the app containers are started. Init containers are exactly like regular containers, except:\nInit containers always run to completion.\nEach init container must complete successfully before the next one starts.\nIf a Pod’s init container fails, the kubelet repeatedly restarts that init container until it succeeds.\nRegular init containers (in other words: excluding sidecar containers) do not support the lifecycle, livenessProbe, readinessProbe, or startupProbe fields.\nInit containers must run to completion before the Pod can be ready\nIf you specify multiple init containers for a Pod, kubelet runs each init container sequentially\nEach init container must succeed before the next can run. Here is an example for initContainer:\nkubectl apply -f - \u003c",
    "fullLink": "/docs/kubernetes/part02/#initcontainer",
    "heading": "InitContainer",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/part02/Part 2",
    "permalink": "/docs/kubernetes/part02/",
    "title": "Part 2",
    "truncatedContent": " A Pod can have multiple containers running apps within it, but it can …"
  },
  {
    "anchor": "example-2",
    "content": "kubectl apply -f - \u003c",
    "fullLink": "/docs/kubernetes/part02/#example-2",
    "heading": "Example 2",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/part02/Part 2",
    "permalink": "/docs/kubernetes/part02/",
    "title": "Part 2",
    "truncatedContent": "kubectl apply -f - \u0026lt;"
  },
  {
    "anchor": "sidecar-container",
    "content": " A Sidecar container extends and enhances the functionality of a preexisting container without changing it. This pattern is one of the fundamental container patterns that allows single-purpose containers to cooperate closely together. ",
    "fullLink": "/docs/kubernetes/part02/#sidecar-container",
    "heading": "Sidecar container",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/part02/Part 2",
    "permalink": "/docs/kubernetes/part02/",
    "title": "Part 2",
    "truncatedContent": " A Sidecar container extends and enhances the functionality of a …"
  },
  {
    "anchor": "adapter-container",
    "content": " The Adapter pattern takes a heterogeneous containerized system and makes it conform to a consistent, unified interface with a standardized and normalized format that can be consumed by the outside world. The Adapter pattern inherits all its characteristics from the Sidecar, ",
    "fullLink": "/docs/kubernetes/part02/#adapter-container",
    "heading": "Adapter Container",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/part02/Part 2",
    "permalink": "/docs/kubernetes/part02/",
    "title": "Part 2",
    "truncatedContent": " The Adapter pattern takes a heterogeneous containerized system and …"
  },
  {
    "anchor": "resources-definition-in-pod",
    "content": "Resources definition in pod",
    "fullLink": "/docs/kubernetes/part02/#resources-definition-in-pod",
    "heading": "Resources definition in pod",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part02/Part 2",
    "permalink": "/docs/kubernetes/part02/",
    "title": "Part 2",
    "truncatedContent": "Resources definition in pod"
  },
  {
    "anchor": "burstable-qos",
    "content": " Kubernetes assigns the Burstable class to a Pod when a container in the pod has more resource limit than the request value.\nA pod in this category will have the following characteristics:\nThe Pod has not met the criteria for Guaranteed QoS class. A container in the Pod has an unequal memory or CPU request or limit An example is given below resources: limits: memory: \"300Mi\" cpu: \"800m\" requests: memory: \"100Mi\" cpu: \"600m\" kubectl apply -f - \u003c",
    "fullLink": "/docs/kubernetes/part02/#burstable-qos",
    "heading": "Burstable QOS",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/part02/Part 2",
    "permalink": "/docs/kubernetes/part02/",
    "title": "Part 2",
    "truncatedContent": " Kubernetes assigns the Burstable class to a Pod when a container in …"
  },
  {
    "anchor": "guranteed-qos",
    "content": " Kubernetes considers Pods classified as Guaranteed as a top priority. It won’t evict them until they exceed their limits.\nA Pod with a Guaranteed class has the following characteristics:\nAll containers in the Pod have a memory limit and request. All containers in the Pod have a memory limit equal to the memory request. All containers in the Pod have a CPU limit and a CPU request. All containers in the Pod have a CPU limit equal to the CPU request. kubectl apply -f - \u003c",
    "fullLink": "/docs/kubernetes/part02/#guranteed-qos",
    "heading": "Guranteed QOS",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/part02/Part 2",
    "permalink": "/docs/kubernetes/part02/",
    "title": "Part 2",
    "truncatedContent": " Kubernetes considers Pods classified as Guaranteed as a top priority. …"
  },
  {
    "anchor": "best-efforts",
    "content": " Kubernetes assigns the Burstable class to a Pod when a container in the pod has more resource limit than the request value. A pod in this category will have the following characteristics: The Pod has not met the criteria for Guaranteed QoS class. A container in the Pod has an unequal memory or CPU request or limit Pod without resourcs section are considered best efforts kubectl apply -f - \u003c",
    "fullLink": "/docs/kubernetes/part02/#best-efforts",
    "heading": "Best Efforts",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/part02/Part 2",
    "permalink": "/docs/kubernetes/part02/",
    "title": "Part 2",
    "truncatedContent": " Kubernetes assigns the Burstable class to a Pod when a container in …"
  },
  {
    "anchor": "imagepullsecret",
    "content": " Pod that uses a Secret to pull an image from a private container image registry or repository. There are many private registries in use. This task uses Docker Hub as an example registry. ",
    "fullLink": "/docs/kubernetes/part02/#imagepullsecret",
    "heading": "imagepullSecret",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/part02/Part 2",
    "permalink": "/docs/kubernetes/part02/",
    "title": "Part 2",
    "truncatedContent": " Pod that uses a Secret to pull an image from a private container …"
  },
  {
    "anchor": "steps-to-use-a-pull-secret-in-a-pod-yaml",
    "content": " Create Docker Config JSON File: Create a Docker configuration file (~/.docker/config.json) with the credentials for your private registry. You can use the docker login command to generate this file. docker login ",
    "fullLink": "/docs/kubernetes/part02/#steps-to-use-a-pull-secret-in-a-pod-yaml",
    "heading": "Steps to Use a Pull Secret in a Pod YAML:",
    "level": 5,
    "linkIfNotFAQ": "/docs/kubernetes/part02/Part 2",
    "permalink": "/docs/kubernetes/part02/",
    "title": "Part 2",
    "truncatedContent": " Create Docker Config JSON File: Create a Docker configuration file …"
  },
  {
    "anchor": "create-a-kubernetes-secret",
    "content": "kubectl create secret generic my-pull-secret --from-file=.dockerconfigjson=$HOME/.docker/config.json --type=kubernetes.io/dockerconfigjson use the yaml to create pod with private registry kubectl apply -f - \u003c",
    "fullLink": "/docs/kubernetes/part02/#create-a-kubernetes-secret",
    "heading": "Create a Kubernetes Secret:",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part02/Part 2",
    "permalink": "/docs/kubernetes/part02/",
    "title": "Part 2",
    "truncatedContent": "kubectl create secret generic my-pull-secret …"
  },
  {
    "anchor": "imagepullpolicy-examples",
    "content": "imagePullPolicy Examples",
    "fullLink": "/docs/kubernetes/part02/#imagepullpolicy-examples",
    "heading": "imagePullPolicy Examples",
    "level": 2,
    "linkIfNotFAQ": "/docs/kubernetes/part02/Part 2",
    "permalink": "/docs/kubernetes/part02/",
    "title": "Part 2",
    "truncatedContent": "imagePullPolicy Examples"
  },
  {
    "anchor": "1-ifnotpresent",
    "content": " Description: Pull the image only if it does not already exist locally. Usage: Use this policy when you want to minimize image pulls and rely on locally cached images. Example: spec: containers: - name: my-container image: my-image:latest imagePullPolicy: IfNotPresent ",
    "fullLink": "/docs/kubernetes/part02/#1-ifnotpresent",
    "heading": "1. IfNotPresent",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part02/Part 2",
    "permalink": "/docs/kubernetes/part02/",
    "title": "Part 2",
    "truncatedContent": " Description: Pull the image only if it does not already exist …"
  },
  {
    "anchor": "1-ifnotpresent-1",
    "content": " Description: Pull the image only if it does not already exist locally. Usage: Use this policy when you want to minimize image pulls and rely on locally cached images. Example: spec: containers: - name: my-container image: my-image:latest imagePullPolicy: IfNotPresent ",
    "fullLink": "/docs/kubernetes/part02/#1-ifnotpresent-1",
    "heading": "1. IfNotPresent",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part02/Part 2",
    "permalink": "/docs/kubernetes/part02/",
    "title": "Part 2",
    "truncatedContent": " Description: Pull the image only if it does not already exist …"
  },
  {
    "anchor": "2-always",
    "content": " Description : Always pull the latest version of the image, even if it already exists locally. Usage: Use this policy when you want to ensure that the container runs the latest version of the image. Example: spec: containers: - name: my-container image: my-image:latest imagePullPolicy: Always ",
    "fullLink": "/docs/kubernetes/part02/#2-always",
    "heading": "2. Always",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part02/Part 2",
    "permalink": "/docs/kubernetes/part02/",
    "title": "Part 2",
    "truncatedContent": " Description : Always pull the latest version of the image, even if it …"
  },
  {
    "anchor": "3-never",
    "content": " Description: Never pull the image, and only use the locally cached version if available.\nUsage : Use this policy when you want to prevent Kubernetes from pulling the image, even if it does not exist locally.\nExample:\nspec: containers: - name: my-container image: my-image:latest imagePullPolicy: Never ",
    "fullLink": "/docs/kubernetes/part02/#3-never",
    "heading": "3. Never",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part02/Part 2",
    "permalink": "/docs/kubernetes/part02/",
    "title": "Part 2",
    "truncatedContent": " Description: Never pull the image, and only use the locally cached …"
  },
  {
    "anchor": "4-ifpresent",
    "content": " Description: Pull the image only if it already exists locally. If the image does not exist locally, do not pull it. Usage: Use this policy when you want to pull the image only if it is already available locally, otherwise use a cached version. Example spec: containers: - name: my-container image: my-image:latest imagePullPolicy: IfPresent ",
    "fullLink": "/docs/kubernetes/part02/#4-ifpresent",
    "heading": "4. IfPresent",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part02/Part 2",
    "permalink": "/docs/kubernetes/part02/",
    "title": "Part 2",
    "truncatedContent": " Description: Pull the image only if it already exists locally. If the …"
  },
  {
    "anchor": "5-default-ifnotpresent",
    "content": " Description: Kubernetes default behavior if imagePullPolicy is not explicitly set. Pull the image only if it does not already exist locally. Usage: This is the default behavior, and it is suitable for many use cases where you want to minimize image pulls. Example : spec: containers: - name: my-container image: my-image:latest ",
    "fullLink": "/docs/kubernetes/part02/#5-default-ifnotpresent",
    "heading": "5. Default (IfNotPresent)",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part02/Part 2",
    "permalink": "/docs/kubernetes/part02/",
    "title": "Part 2",
    "truncatedContent": " Description: Kubernetes default behavior if imagePullPolicy is not …"
  },
  {
    "anchor": "container-restartpolicy-in-pod-block",
    "content": "Container RestartPolicy in Pod block",
    "fullLink": "/docs/kubernetes/part02/#container-restartpolicy-in-pod-block",
    "heading": "Container RestartPolicy in Pod block",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part02/Part 2",
    "permalink": "/docs/kubernetes/part02/",
    "title": "Part 2",
    "truncatedContent": "Container RestartPolicy in Pod block"
  },
  {
    "anchor": "1-always",
    "content": " Description: Always restart the container regardless of the exit status or reason. Usage: Use this policy for critical services that should always be running. Example: spec: restartPolicy: Always ",
    "fullLink": "/docs/kubernetes/part02/#1-always",
    "heading": "1. Always",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part02/Part 2",
    "permalink": "/docs/kubernetes/part02/",
    "title": "Part 2",
    "truncatedContent": " Description: Always restart the container regardless of the exit …"
  },
  {
    "anchor": "2-onfailure",
    "content": " Description: Restart the container only if it exits with a non-zero status. Usage: Use this policy for jobs or batch processes that should be retried on failure. Example:\nspec: restartPolicy: OnFailure ",
    "fullLink": "/docs/kubernetes/part02/#2-onfailure",
    "heading": "2. OnFailure",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part02/Part 2",
    "permalink": "/docs/kubernetes/part02/",
    "title": "Part 2",
    "truncatedContent": " Description: Restart the container only if it exits with a non-zero …"
  },
  {
    "anchor": "3-never-1",
    "content": " Description: Never restart the container, regardless of the exit status or reason. Usage: Use this policy for containers that are expected to run to completion and not be restarted. Example:\nspec: restartPolicy: Never ",
    "fullLink": "/docs/kubernetes/part02/#3-never-1",
    "heading": "3. Never",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part02/Part 2",
    "permalink": "/docs/kubernetes/part02/",
    "title": "Part 2",
    "truncatedContent": " Description: Never restart the container, regardless of the exit …"
  },
  {
    "anchor": "4-default-always",
    "content": " Description: Kubernetes default behavior if restartPolicy is not explicitly set. Always restart the container. Usage: This is the default behavior and is suitable for many long-running services. Example\nspec: restartPolicy: Always (default behavior) ",
    "fullLink": "/docs/kubernetes/part02/#4-default-always",
    "heading": "4. Default (Always)",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part02/Part 2",
    "permalink": "/docs/kubernetes/part02/",
    "title": "Part 2",
    "truncatedContent": " Description: Kubernetes default behavior if restartPolicy is not …"
  },
  {
    "anchor": "advance-scheduling-of--pod",
    "content": "Advance Scheduling of pod",
    "fullLink": "/docs/kubernetes/part02/#advance-scheduling-of--pod",
    "heading": "Advance Scheduling of  pod",
    "level": 2,
    "linkIfNotFAQ": "/docs/kubernetes/part02/Part 2",
    "permalink": "/docs/kubernetes/part02/",
    "title": "Part 2",
    "truncatedContent": "Advance Scheduling of pod"
  },
  {
    "anchor": "using-nodename",
    "content": "kubectl apply -f - \u003c",
    "fullLink": "/docs/kubernetes/part02/#using-nodename",
    "heading": "Using nodeName",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/part02/Part 2",
    "permalink": "/docs/kubernetes/part02/",
    "title": "Part 2",
    "truncatedContent": "kubectl apply -f - \u0026lt;"
  },
  {
    "anchor": "steps-to-use-nodeselector",
    "content": " Label the node kubectl label nodes specific-node-name diskType=ssd Use this label to schedule the pod\napiVersion: v1 kind: Pod metadata: name: pod-with-node-selector spec: containers: - name: my-container image: nginx:latest nodeSelector: diskType: ssd Check where this pod has been schduled\nkubectl get pods -o wide ",
    "fullLink": "/docs/kubernetes/part02/#steps-to-use-nodeselector",
    "heading": "Steps to Use nodeSelector:",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/part02/Part 2",
    "permalink": "/docs/kubernetes/part02/",
    "title": "Part 2",
    "truncatedContent": " Label the node kubectl label nodes specific-node-name diskType=ssd …"
  },
  {
    "anchor": "taint-and-toleration",
    "content": " A taint allows a node to refuse pod to be scheduled unless that pod has a matching toleration. You apply taints to a node through the node specification (NodeSpec) and apply tolerations to a pod through the pod specification (PodSpec). A taint on a node instructs the node to repel all pods that do not tolerate the taint. Taints and tolerations consist of a key, value, and effect. An operator allows you to leave one of these parameters empty. Taint and Toleration key points\nParameter Description key Any string, up to 253 characters. Must begin with a letter or number, and may contain letters, numbers, hyphens, dots, and underscores. value Any string, up to 63 characters. Must begin with a letter or number, and may contain letters, numbers, hyphens, dots, and underscores. effect One of: NoSchedule, PreferNoSchedule, NoExecute operator One of: Equal, Exists How to apply taint on a node kubectl taint nodes =: kubectl taint nodes specific-node-name disktype=ssd:NoSchedule Now use this in pod yaml kubectl apply -f - \u003c",
    "fullLink": "/docs/kubernetes/part02/#taint-and-toleration",
    "heading": "Taint and Toleration",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/part02/Part 2",
    "permalink": "/docs/kubernetes/part02/",
    "title": "Part 2",
    "truncatedContent": " A taint allows a node to refuse pod to be scheduled unless that pod …"
  },
  {
    "anchor": "example--notequal-operator",
    "content": "kubectl apply -f - \u003c",
    "fullLink": "/docs/kubernetes/part02/#example--notequal-operator",
    "heading": "Example : NotEqual Operator",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/part02/Part 2",
    "permalink": "/docs/kubernetes/part02/",
    "title": "Part 2",
    "truncatedContent": "kubectl apply -f - \u0026lt;"
  },
  {
    "anchor": "example-exists-operator-with-key",
    "content": "kubectl apply -f - \u003c",
    "fullLink": "/docs/kubernetes/part02/#example-exists-operator-with-key",
    "heading": "Example Exists Operator with Key",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/part02/Part 2",
    "permalink": "/docs/kubernetes/part02/",
    "title": "Part 2",
    "truncatedContent": "kubectl apply -f - \u0026lt;"
  },
  {
    "anchor": "node-affinity",
    "content": " Label Nodes kubectl label nodes kworker1 example-label=value1 kubectl label nodes kworker2 example-label=value2 Yaml for pod creation cat \u003c pod-with-node-affinity.yaml apiVersion: v1 kind: Pod metadata: name: pod-with-node-affinity spec: containers: - name: nginx-container image: nginx affinity: nodeAffinity: requiredDuringSchedulingIgnoredDuringExecution: nodeSelectorTerms: - matchExpressions: - key: example-label operator: In values: - value1 - value2 EOF ",
    "fullLink": "/docs/kubernetes/part02/#node-affinity",
    "heading": "Node Affinity",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part02/Part 2",
    "permalink": "/docs/kubernetes/part02/",
    "title": "Part 2",
    "truncatedContent": " Label Nodes kubectl label nodes kworker1 example-label=value1 kubectl …"
  },
  {
    "anchor": "example-2-with-operator-notin",
    "content": "cat \u003c pod-with-node-affinity.yaml apiVersion: v1 kind: Pod metadata: name: pod-with-node-affinity spec: containers: - name: nginx-container image: nginx affinity: nodeAffinity: requiredDuringSchedulingIgnoredDuringExecution: nodeSelectorTerms: - matchExpressions: - key: example-label operator: NotIn values: - value3 - value4 EOF ",
    "fullLink": "/docs/kubernetes/part02/#example-2-with-operator-notin",
    "heading": "Example 2 with operator notin",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part02/Part 2",
    "permalink": "/docs/kubernetes/part02/",
    "title": "Part 2",
    "truncatedContent": "cat \u0026lt; pod-with-node-affinity.yaml apiVersion: v1 kind: Pod metadata: …"
  },
  {
    "anchor": "example-using-exists-operator",
    "content": "cat \u003c pod-with-node-affinity.yaml apiVersion: v1 kind: Pod metadata: name: pod-with-node-affinity spec: containers: - name: nginx-container image: nginx affinity: nodeAffinity: requiredDuringSchedulingIgnoredDuringExecution: nodeSelectorTerms: - matchExpressions: - key: example-label operator: Exists EOF Check the pods status ",
    "fullLink": "/docs/kubernetes/part02/#example-using-exists-operator",
    "heading": "Example Using Exists Operator",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/part02/Part 2",
    "permalink": "/docs/kubernetes/part02/",
    "title": "Part 2",
    "truncatedContent": "cat \u0026lt; pod-with-node-affinity.yaml apiVersion: v1 kind: Pod metadata: …"
  },
  {
    "anchor": "example-with-preferred-affinity",
    "content": "cat \u003c pod-with-preferred-node-affinity.yaml apiVersion: v1 kind: Pod metadata: name: pod-with-preferred-node-affinity spec: containers: - name: nginx-container image: nginx affinity: nodeAffinity: preferredDuringSchedulingIgnoredDuringExecution: - weight: 1 preference: matchExpressions: - key: example-label operator: Exists EOF ",
    "fullLink": "/docs/kubernetes/part02/#example-with-preferred-affinity",
    "heading": "Example with Preferred Affinity",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part02/Part 2",
    "permalink": "/docs/kubernetes/part02/",
    "title": "Part 2",
    "truncatedContent": "cat \u0026lt; pod-with-preferred-node-affinity.yaml apiVersion: v1 kind: Pod …"
  },
  {
    "anchor": "pod-affinity-and-anti-affinity",
    "content": "kubectl apply -f - \u003c",
    "fullLink": "/docs/kubernetes/part02/#pod-affinity-and-anti-affinity",
    "heading": "Pod Affinity and Anti Affinity",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/part02/Part 2",
    "permalink": "/docs/kubernetes/part02/",
    "title": "Part 2",
    "truncatedContent": "kubectl apply -f - \u0026lt;"
  },
  {
    "anchor": "another-example-with-weight",
    "content": "kubectl apply -f - \u003c",
    "fullLink": "/docs/kubernetes/part02/#another-example-with-weight",
    "heading": "Another Example with weight",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/part02/Part 2",
    "permalink": "/docs/kubernetes/part02/",
    "title": "Part 2",
    "truncatedContent": "kubectl apply -f - \u0026lt;"
  },
  {
    "anchor": "pod-antiaffinity",
    "content": "kubectl apply -f - \u003c",
    "fullLink": "/docs/kubernetes/part02/#pod-antiaffinity",
    "heading": "Pod antiAffinity",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/part02/Part 2",
    "permalink": "/docs/kubernetes/part02/",
    "title": "Part 2",
    "truncatedContent": "kubectl apply -f - \u0026lt;"
  },
  {
    "anchor": "soft-antiaffinity",
    "content": "kubectl apply -f - \u003c",
    "fullLink": "/docs/kubernetes/part02/#soft-antiaffinity",
    "heading": "Soft AntiAffinity",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/part02/Part 2",
    "permalink": "/docs/kubernetes/part02/",
    "title": "Part 2",
    "truncatedContent": "kubectl apply -f - \u0026lt;"
  },
  {
    "anchor": "pod-priorityhttpskubernetesiodocsconceptsscheduling-evictionpod-priority-preemption",
    "content": "Pod Priority",
    "fullLink": "/docs/kubernetes/part02/#pod-priorityhttpskubernetesiodocsconceptsscheduling-evictionpod-priority-preemption",
    "heading": "",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part02/Part 2",
    "permalink": "/docs/kubernetes/part02/",
    "title": "Part 2",
    "truncatedContent": "Pod Priority"
  },
  {
    "anchor": "pod-priority-classes",
    "content": " You can assign pods a priority class, which is a non-namespaced object that defines a mapping from a name to the integer value of the priority. The higher the value, the higher the priority.\nA priority class object can take any 32-bit integer value smaller than or equal to 1000000000 (one billion). Reserve numbers larger than one billion for critical pods that should not be preempted or evicted. By default, OpenShift Container Platform has two reserved priority classes for critical system pods to have guaranteed scheduling.\nSystem-node-critical - This priority class has a value of 2000001000 and is used for all pods that should never be evicted from a node. Examples of pods that have this priority class are sdn-ovs, sdn, and so forth.\nSystem-cluster-critical - This priority class has a value of 2000000000 (two billion) and is used with pods that are important for the cluster. Pods with this priority class can be evicted from a node in certain circumstances. For example, pods configured with the system-node-critical priority class can take priority. However, this priority class does ensure guaranteed scheduling. Examples of pods that can have this priority class are fluentd, add-on components like descheduler, and so forth.\nSample priority class object\napiVersion: scheduling.k8s.io/v1beta1 kind: PriorityClass metadata: name: high-priority value: 1000000 globalDefault: false description: \"This priority class should be used for XYZ service pods only.\" Sample pod specification with priority class name kubectl apply -f - \u003c",
    "fullLink": "/docs/kubernetes/part02/#pod-priority-classes",
    "heading": "Pod priority classes",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/part02/Part 2",
    "permalink": "/docs/kubernetes/part02/",
    "title": "Part 2",
    "truncatedContent": " You can assign pods a priority class, which is a non-namespaced …"
  },
  {
    "anchor": "pod-disruptions-budget",
    "content": " Learn more about Disruptions Budget kubectl apply -f - \u003c",
    "fullLink": "/docs/kubernetes/part02/#pod-disruptions-budget",
    "heading": "Pod Disruptions Budget:",
    "level": 2,
    "linkIfNotFAQ": "/docs/kubernetes/part02/Part 2",
    "permalink": "/docs/kubernetes/part02/",
    "title": "Part 2",
    "truncatedContent": " Learn more about Disruptions Budget kubectl apply -f - \u0026lt;"
  },
  {
    "anchor": "use-of-pdb-with-deployment",
    "content": "kubectl apply -f - \u003c",
    "fullLink": "/docs/kubernetes/part02/#use-of-pdb-with-deployment",
    "heading": "Use of pdb with Deployment",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part02/Part 2",
    "permalink": "/docs/kubernetes/part02/",
    "title": "Part 2",
    "truncatedContent": "kubectl apply -f - \u0026lt;"
  },
  {
    "anchor": "pod-preemption-and-pod-distruption-budget",
    "content": " Pod preemption and other scheduler settings If you enable pod priority and preemption, consider your other scheduler settings: ",
    "fullLink": "/docs/kubernetes/part02/#pod-preemption-and-pod-distruption-budget",
    "heading": "Pod Preemption and Pod Distruption Budget",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part02/Part 2",
    "permalink": "/docs/kubernetes/part02/",
    "title": "Part 2",
    "truncatedContent": " Pod preemption and other scheduler settings If you enable pod …"
  },
  {
    "anchor": "pod-priority-and-pod-disruption-budget",
    "content": " A pod disruption budget specifies the minimum number or percentage of replicas that must be up at a time. If you specify pod disruption budgets, OpenShift Container Platform respects them when preempting pods at a best effort level. The scheduler attempts to preempt pods without violating the pod disruption budget. If no such pods are found, lower-priority pods might be preempted despite their pod disruption budget requirements. ",
    "fullLink": "/docs/kubernetes/part02/#pod-priority-and-pod-disruption-budget",
    "heading": "Pod priority and pod disruption budget",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/part02/Part 2",
    "permalink": "/docs/kubernetes/part02/",
    "title": "Part 2",
    "truncatedContent": " A pod disruption budget specifies the minimum number or percentage of …"
  },
  {
    "anchor": "pod-priority-and-pod-affinity",
    "content": "Pod affinity requires a new pod to be scheduled on the same node as other pods with the same label.\n",
    "fullLink": "/docs/kubernetes/part02/#pod-priority-and-pod-affinity",
    "heading": "Pod priority and pod affinity",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/part02/Part 2",
    "permalink": "/docs/kubernetes/part02/",
    "title": "Part 2",
    "truncatedContent": "Pod affinity requires a new pod to be scheduled on the same node as …"
  },
  {
    "anchor": "pointer-regarding-pod-scheduling",
    "content": " Preemption removes existing Pods from a cluster under resource pressure to make room for higher priority pending Pods\nThe default priority for all pods is zero ( 0 )\nSupported Operators for Affinity\nThe operator represents the relationship between the label on the node and the set of values in the matchExpression parameters in the pod specification.\nThis value can be below:\nIn, NotIn, Exists DoesNotExist Lt Gt Specify a weight for the node, 1-100. The node that with highest weight is preferred.\nA taint on a node instructs the node to repel all pods that do not tolerate the taint.\nTaint Effects are given below:\n",
    "fullLink": "/docs/kubernetes/part02/#pointer-regarding-pod-scheduling",
    "heading": "Pointer Regarding Pod Scheduling",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/part02/Part 2",
    "permalink": "/docs/kubernetes/part02/",
    "title": "Part 2",
    "truncatedContent": " Preemption removes existing Pods from a cluster under resource …"
  },
  {
    "anchor": "the-effect-is-one-of-the-following",
    "content": "The effect is one of the following:",
    "fullLink": "/docs/kubernetes/part02/#the-effect-is-one-of-the-following",
    "heading": "The effect is one of the following:",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/part02/Part 2",
    "permalink": "/docs/kubernetes/part02/",
    "title": "Part 2",
    "truncatedContent": "The effect is one of the following:"
  },
  {
    "anchor": "noschedule",
    "content": "New pods that do not match the taint are not scheduled onto that node. Existing pods on the node remain.\n",
    "fullLink": "/docs/kubernetes/part02/#noschedule",
    "heading": "NoSchedule",
    "level": 5,
    "linkIfNotFAQ": "/docs/kubernetes/part02/Part 2",
    "permalink": "/docs/kubernetes/part02/",
    "title": "Part 2",
    "truncatedContent": "New pods that do not match the taint are not scheduled onto that node. …"
  },
  {
    "anchor": "prefernoschedule",
    "content": "New pods that do not match the taint might be scheduled onto that node, but the scheduler tries not to.\nExisting pods on the node remain.\n",
    "fullLink": "/docs/kubernetes/part02/#prefernoschedule",
    "heading": "PreferNoSchedule",
    "level": 5,
    "linkIfNotFAQ": "/docs/kubernetes/part02/Part 2",
    "permalink": "/docs/kubernetes/part02/",
    "title": "Part 2",
    "truncatedContent": "New pods that do not match the taint might be scheduled onto that …"
  },
  {
    "anchor": "noexecute",
    "content": "New pods that do not match the taint cannot be scheduled onto that node.\nExisting pods on the node that do not have a matching toleration are removed.\n",
    "fullLink": "/docs/kubernetes/part02/#noexecute",
    "heading": "NoExecute",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/part02/Part 2",
    "permalink": "/docs/kubernetes/part02/",
    "title": "Part 2",
    "truncatedContent": "New pods that do not match the taint cannot be scheduled onto that …"
  },
  {
    "anchor": "operator",
    "content": "operator",
    "fullLink": "/docs/kubernetes/part02/#operator",
    "heading": "operator",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part02/Part 2",
    "permalink": "/docs/kubernetes/part02/",
    "title": "Part 2",
    "truncatedContent": "operator"
  },
  {
    "anchor": "equal",
    "content": "The key/value/effect parameters must match. This is the default.\n",
    "fullLink": "/docs/kubernetes/part02/#equal",
    "heading": "Equal",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/part02/Part 2",
    "permalink": "/docs/kubernetes/part02/",
    "title": "Part 2",
    "truncatedContent": "The key/value/effect parameters must match. This is the default.\n"
  },
  {
    "anchor": "exists",
    "content": "The key/effect parameters must match. You must leave a blank value parameter, which matches any.\nDescheduler ",
    "fullLink": "/docs/kubernetes/part02/#exists",
    "heading": "Exists",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/part02/Part 2",
    "permalink": "/docs/kubernetes/part02/",
    "title": "Part 2",
    "truncatedContent": "The key/effect parameters must match. You must leave a blank value …"
  },
  {
    "anchor": "topics",
    "content": " Service CLusterIP NodePort LoadBalancer Headless Service METALLB DNS Troubleshooting Deployment ReplicaSet Daemonset Job CronJob Metric Server HPA(pod Autoscaling) Helm Overview ",
    "fullLink": "/docs/kubernetes/part03/#topics",
    "heading": "Topics",
    "level": 2,
    "linkIfNotFAQ": "/docs/kubernetes/part03/Part 3",
    "permalink": "/docs/kubernetes/part03/",
    "title": "Part 3",
    "truncatedContent": " Service CLusterIP NodePort LoadBalancer Headless Service METALLB DNS …"
  },
  {
    "anchor": "service",
    "content": "A Service is a method for exposing a network application that is running as one or more Pods in your cluster.\nA key aim of Services in Kubernetes is that you don’t need to modify your existing application to use an unfamiliar service discovery mechanism. A Kubernetes service is a logical abstraction for a deployed group of pods in a cluster ",
    "fullLink": "/docs/kubernetes/part03/#service",
    "heading": "Service",
    "level": 2,
    "linkIfNotFAQ": "/docs/kubernetes/part03/Part 3",
    "permalink": "/docs/kubernetes/part03/",
    "title": "Part 3",
    "truncatedContent": "A Service is a method for exposing a network application that is …"
  },
  {
    "anchor": "what-are-the-types-of-kubernetes-services",
    "content": " ClusterIP: Exposes a service which is only accessible from within the cluster. NodePort: Exposes a service via a static port on each node’s IP. NodePorts are in the 30000-32767 range by default LoadBalancer: Exposes the service via the cloud provider’s load balancer. ExternalName Maps a service to a predefined externalName field by returning a value for the CNAME record. ",
    "fullLink": "/docs/kubernetes/part03/#what-are-the-types-of-kubernetes-services",
    "heading": "What are the types of Kubernetes services?",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part03/Part 3",
    "permalink": "/docs/kubernetes/part03/",
    "title": "Part 3",
    "truncatedContent": " ClusterIP: Exposes a service which is only accessible from within the …"
  },
  {
    "anchor": "create-a-service-of-typeclusterip",
    "content": "kubectl apply -f - \u003c",
    "fullLink": "/docs/kubernetes/part03/#create-a-service-of-typeclusterip",
    "heading": "Create a service of Type(ClusterIp)",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/part03/Part 3",
    "permalink": "/docs/kubernetes/part03/",
    "title": "Part 3",
    "truncatedContent": "kubectl apply -f - \u0026lt;"
  },
  {
    "anchor": "create-a-service-of-type-nodeport",
    "content": "kubectl expose pod/ --port 80 --target-port=80 --name ",
    "fullLink": "/docs/kubernetes/part03/#create-a-service-of-type-nodeport",
    "heading": "Create a service of Type (NodePort",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/part03/Part 3",
    "permalink": "/docs/kubernetes/part03/",
    "title": "Part 3",
    "truncatedContent": "kubectl expose pod/ --port 80 --target-port=80 --name "
  },
  {
    "anchor": "create-a-type-of-service-loadbalancer",
    "content": "kubectl expose pod/name --port=80 --type=LoadBalancer Check the endpoint kubectl get ep Achieve the blue green Delete a service Exchange the service selector ",
    "fullLink": "/docs/kubernetes/part03/#create-a-type-of-service-loadbalancer",
    "heading": "Create a type of service (LoadBalancer)",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/part03/Part 3",
    "permalink": "/docs/kubernetes/part03/",
    "title": "Part 3",
    "truncatedContent": "kubectl expose pod/name --port=80 --type=LoadBalancer Check the …"
  },
  {
    "anchor": "metallb-a-loadbalancer-solution-for-onprem-kubernetes",
    "content": "Metallb A LoadBalancer Solution for OnPrem Kubernetes",
    "fullLink": "/docs/kubernetes/part03/#metallb-a-loadbalancer-solution-for-onprem-kubernetes",
    "heading": "Metallb A LoadBalancer Solution for OnPrem Kubernetes",
    "level": 2,
    "linkIfNotFAQ": "/docs/kubernetes/part03/Part 3",
    "permalink": "/docs/kubernetes/part03/",
    "title": "Part 3",
    "truncatedContent": "Metallb A LoadBalancer Solution for OnPrem Kubernetes"
  },
  {
    "anchor": "deploying-metallbhttpsmetallbuniversetf",
    "content": "Deploying Metallb",
    "fullLink": "/docs/kubernetes/part03/#deploying-metallbhttpsmetallbuniversetf",
    "heading": "Deploying ",
    "level": 2,
    "linkIfNotFAQ": "/docs/kubernetes/part03/Part 3",
    "permalink": "/docs/kubernetes/part03/",
    "title": "Part 3",
    "truncatedContent": "Deploying Metallb"
  },
  {
    "anchor": "steps",
    "content": "git clone https://gitlab.com/container-and-kubernetes/kubernetes-2024.git cd kubernetes-2024/ cd metallb kubectl.exe apply -f 01 01_metallb.yaml kubectl apply -f 02_metallb-config.yaml Make a test after creating a service kubectl apply -f 03_test-load-balancer.yaml Check the service kubectl get svc ",
    "fullLink": "/docs/kubernetes/part03/#steps",
    "heading": "Steps:",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part03/Part 3",
    "permalink": "/docs/kubernetes/part03/",
    "title": "Part 3",
    "truncatedContent": "git clone …"
  },
  {
    "anchor": "metric-server",
    "content": "Metric Server Github Link\n",
    "fullLink": "/docs/kubernetes/part03/#metric-server",
    "heading": "Metric Server",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part03/Part 3",
    "permalink": "/docs/kubernetes/part03/",
    "title": "Part 3",
    "truncatedContent": "Metric Server Github Link\n"
  },
  {
    "anchor": "steps-1",
    "content": "git clone https://gitlab.com/container-and-kubernetes/kubernetes-2024.git cd kubernetes-2024 cd metricserver kubectl apply -f . wait for few mins and check if the metric server pods are up kubectl top nodes kubectl top pods ",
    "fullLink": "/docs/kubernetes/part03/#steps-1",
    "heading": "Steps",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part03/Part 3",
    "permalink": "/docs/kubernetes/part03/",
    "title": "Part 3",
    "truncatedContent": "git clone …"
  },
  {
    "anchor": "hpa-pod-autoscaling",
    "content": "HPA (Pod Autoscaling)",
    "fullLink": "/docs/kubernetes/part03/#hpa-pod-autoscaling",
    "heading": "HPA (Pod Autoscaling)",
    "level": 2,
    "linkIfNotFAQ": "/docs/kubernetes/part03/Part 3",
    "permalink": "/docs/kubernetes/part03/",
    "title": "Part 3",
    "truncatedContent": "HPA (Pod Autoscaling)"
  },
  {
    "anchor": "steps-2",
    "content": "git clone https://gitlab.com/container-and-kubernetes/kubernetes-2024.git cd kubernetes-2024 cd hpa kubectl apply -f deployment.yaml kubectl apply -f service.yaml kubectl apply hpa.yaml check hpa kubectl get hpa ",
    "fullLink": "/docs/kubernetes/part03/#steps-2",
    "heading": "Steps",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part03/Part 3",
    "permalink": "/docs/kubernetes/part03/",
    "title": "Part 3",
    "truncatedContent": "git clone …"
  },
  {
    "anchor": "deployment",
    "content": " Create Deployment Update secret for a deployment Set resource block for a deployment Set Environment Variables in Deployment Perform Rollout Perform Rollback Rolled back to another revision Check the max rs for a deployment Create a deployment kubectl create deployment myapp --image=nginx Deployment with Yaml file kubectl apply -f - \u003c",
    "fullLink": "/docs/kubernetes/part03/#deployment",
    "heading": "Deployment",
    "level": 2,
    "linkIfNotFAQ": "/docs/kubernetes/part03/Part 3",
    "permalink": "/docs/kubernetes/part03/",
    "title": "Part 3",
    "truncatedContent": " Create Deployment Update secret for a deployment Set resource block …"
  },
  {
    "anchor": "job",
    "content": " Create a job Create a cronjob check different option in cronjob as job backoffLimit completions parallelism ",
    "fullLink": "/docs/kubernetes/part03/#job",
    "heading": "job",
    "level": 2,
    "linkIfNotFAQ": "/docs/kubernetes/part03/Part 3",
    "permalink": "/docs/kubernetes/part03/",
    "title": "Part 3",
    "truncatedContent": " Create a job Create a cronjob check different option in cronjob as …"
  },
  {
    "anchor": "job-creation-yaml",
    "content": "kubectl apply -f - \u003c",
    "fullLink": "/docs/kubernetes/part03/#job-creation-yaml",
    "heading": "Job Creation yaml",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part03/Part 3",
    "permalink": "/docs/kubernetes/part03/",
    "title": "Part 3",
    "truncatedContent": "kubectl apply -f - \u0026lt;"
  },
  {
    "anchor": "cronjob",
    "content": " Create a cronjob kubectl apply -f - \u003c",
    "fullLink": "/docs/kubernetes/part03/#cronjob",
    "heading": "cronjob",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part03/Part 3",
    "permalink": "/docs/kubernetes/part03/",
    "title": "Part 3",
    "truncatedContent": " Create a cronjob kubectl apply -f - \u0026lt;"
  },
  {
    "anchor": "replicaset",
    "content": " Create a replicaset Scale Replicaset Check the image used for replicaset Change the image for a rs Create a service for rs Forward the port of a rs Test if the app is opening ",
    "fullLink": "/docs/kubernetes/part03/#replicaset",
    "heading": "Replicaset",
    "level": 2,
    "linkIfNotFAQ": "/docs/kubernetes/part03/Part 3",
    "permalink": "/docs/kubernetes/part03/",
    "title": "Part 3",
    "truncatedContent": " Create a replicaset Scale Replicaset Check the image used for …"
  },
  {
    "anchor": "replicasset-yaml-example",
    "content": "apiVersion: apps/v1 kind: ReplicaSet metadata: name: my-replicaset spec: replicas: 3 selector: matchLabels: app: myapp template: metadata: labels: app: myapp spec: containers: - name: myapp-container image: myapp-image:latest View Replicaset kubectl get replicasets kubectl get rs Scale up/down a replicaset kubectl scale replicaset my-replicaset --replicas=5 Create a service for Replicaset apiVersion: v1 kind: Service metadata: name: my-service spec: selector: app: myapp ports: - protocol: TCP port: 80 targetPort: 8080 type: LoadBalancer configure port forward for replicaset kubectl port-forward replicaset/my-replicaset 8080:80 ",
    "fullLink": "/docs/kubernetes/part03/#replicasset-yaml-example",
    "heading": "ReplicasSet Yaml example",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part03/Part 3",
    "permalink": "/docs/kubernetes/part03/",
    "title": "Part 3",
    "truncatedContent": "apiVersion: apps/v1 kind: ReplicaSet metadata: name: my-replicaset …"
  },
  {
    "anchor": "daemonsethttpskubernetesiodocsconceptsworkloadscontrollersdaemonset",
    "content": " Create a daemonset\nCheck the daemonset\ntest if the daemonset is as expected.\ncheck the pod if they are creating on all nodes\n",
    "fullLink": "/docs/kubernetes/part03/#daemonsethttpskubernetesiodocsconceptsworkloadscontrollersdaemonset",
    "heading": "",
    "level": 2,
    "linkIfNotFAQ": "/docs/kubernetes/part03/Part 3",
    "permalink": "/docs/kubernetes/part03/",
    "title": "Part 3",
    "truncatedContent": " Create a daemonset\nCheck the daemonset\ntest if the daemonset is as …"
  },
  {
    "anchor": "dns-troubleshooting",
    "content": " Follow this for DNS Troubleshooting\nCreate a simple Pod to use as a test environment apiVersion: v1 kind: Pod metadata: name: dnsutils namespace: default spec: containers: - name: dnsutils image: registry.k8s.io/e2e-test-images/jessie-dnsutils:1.3 command: - sleep - \"infinity\" imagePullPolicy: IfNotPresent restartPolicy: Always Run nslookup for kuberntes cluster kubectl exec -i -t dnsutils -- nslookup kubernetes.default Check the local DNS configuration first kubectl exec -ti dnsutils -- cat /etc/resolv.conf if you get some error Check if the DNS pod is running kubectl get pods --namespace=kube-system -l k8s-app=kube-dns Check for errors in the DNS pod kubectl logs --namespace=kube-system -l k8s-app=kube-dns Is DNS service up? kubectl get svc --namespace=kube-system Are DNS endpoints exposed? kubectl get endpoints kube-dns --namespace=kube-system ",
    "fullLink": "/docs/kubernetes/part03/#dns-troubleshooting",
    "heading": "DNS Troubleshooting:",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part03/Part 3",
    "permalink": "/docs/kubernetes/part03/",
    "title": "Part 3",
    "truncatedContent": " Follow this for DNS Troubleshooting\nCreate a simple Pod to use as a …"
  },
  {
    "anchor": "dns-for-services-and-pods",
    "content": " Kubernetes creates DNS records for Services and Pods. You can contact Services with consistent DNS names instead of IP addresses. Services defined in the cluster are assigned DNS names. By default, a client Pod’s DNS search list includes the Pod’s own namespace and the cluster’s default domain. ",
    "fullLink": "/docs/kubernetes/part03/#dns-for-services-and-pods",
    "heading": "DNS for Services and Pods",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part03/Part 3",
    "permalink": "/docs/kubernetes/part03/",
    "title": "Part 3",
    "truncatedContent": " Kubernetes creates DNS records for Services and Pods. You can contact …"
  },
  {
    "anchor": "topics",
    "content": " Kubernetes Probes Kubernetes Storage Secret ConfigMap emptyDIr hostPath StatefulSet Kubernetes IngressController Kubectl Set Kubectl Patch ",
    "fullLink": "/docs/kubernetes/part04/#topics",
    "heading": "Topics",
    "level": 2,
    "linkIfNotFAQ": "/docs/kubernetes/part04/Part 4",
    "permalink": "/docs/kubernetes/part04/",
    "title": "Part 4",
    "truncatedContent": " Kubernetes Probes Kubernetes Storage Secret ConfigMap emptyDIr …"
  },
  {
    "anchor": "probes",
    "content": "The kubelet uses liveness probes to know when to restart a container.\nLiveness probes can be a powerful way to recover from application failures, but they should be used with caution.\n",
    "fullLink": "/docs/kubernetes/part04/#probes",
    "heading": "Probes",
    "level": 2,
    "linkIfNotFAQ": "/docs/kubernetes/part04/Part 4",
    "permalink": "/docs/kubernetes/part04/",
    "title": "Part 4",
    "truncatedContent": "The kubelet uses liveness probes to know when to restart a container. …"
  },
  {
    "anchor": "liveness-probe",
    "content": " It checks whether the application running inside the container is still alive and functioning properly. ",
    "fullLink": "/docs/kubernetes/part04/#liveness-probe",
    "heading": "Liveness Probe",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part04/Part 4",
    "permalink": "/docs/kubernetes/part04/",
    "title": "Part 4",
    "truncatedContent": " It checks whether the application running inside the container is …"
  },
  {
    "anchor": "readiness-probe",
    "content": "It determines whether the application inside the container is ready to accept traffic or requests. When a readiness probe fails, Kubernetes stops sending traffic to the container until it passes the probe. This is useful during application startup or when the application needs some time to initialize before serving traffic.\n",
    "fullLink": "/docs/kubernetes/part04/#readiness-probe",
    "heading": "Readiness Probe:",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part04/Part 4",
    "permalink": "/docs/kubernetes/part04/",
    "title": "Part 4",
    "truncatedContent": "It determines whether the application inside the container is ready to …"
  },
  {
    "anchor": "startup-probe-introduced-in-kubernetes-116",
    "content": "It is similar to a readiness probe, but it only runs during the initial startup of a container. The purpose of the startup probe is to differentiate between a container that’s starting up and one that’s in a crashed state. Once the startup probe succeeds, it is disabled, and the readiness probe takes over.\n",
    "fullLink": "/docs/kubernetes/part04/#startup-probe-introduced-in-kubernetes-116",
    "heading": "Startup Probe (introduced in Kubernetes 1.16):",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part04/Part 4",
    "permalink": "/docs/kubernetes/part04/",
    "title": "Part 4",
    "truncatedContent": "It is similar to a readiness probe, but it only runs during the …"
  },
  {
    "anchor": "heading",
    "content": " Create a pod with startup probe Make a test and monitor the pods and logs as well Create a pod with liveness prode Create a pod with readiness probe ",
    "fullLink": "/docs/kubernetes/part04/#heading",
    "heading": "\" data-level=",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part04/Part 4",
    "permalink": "/docs/kubernetes/part04/",
    "title": "Part 4",
    "truncatedContent": " Create a pod with startup probe Make a test and monitor the pods and …"
  },
  {
    "anchor": "a-pod-with--startup-probe",
    "content": "apiVersion: v1 kind: Pod metadata: name: pod-with-startup-probe spec: containers: - name: nginx-container image: nginx:latest startupProbe: httpGet: path: / port: 80 initialDelaySeconds: 20 periodSeconds: 5 ",
    "fullLink": "/docs/kubernetes/part04/#a-pod-with--startup-probe",
    "heading": "A pod with  Startup Probe",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part04/Part 4",
    "permalink": "/docs/kubernetes/part04/",
    "title": "Part 4",
    "truncatedContent": "apiVersion: v1 kind: Pod metadata: name: pod-with-startup-probe spec: …"
  },
  {
    "anchor": "a-pod-with-liveness-probe",
    "content": "apiVersion: v1 kind: Pod metadata: name: pod-with-liveness-probe spec: containers: - name: nginx-container image: nginx:latest livenessProbe: httpGet: path: / port: 80 initialDelaySeconds: 10 periodSeconds: 5 ",
    "fullLink": "/docs/kubernetes/part04/#a-pod-with-liveness-probe",
    "heading": "A Pod with Liveness probe",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part04/Part 4",
    "permalink": "/docs/kubernetes/part04/",
    "title": "Part 4",
    "truncatedContent": "apiVersion: v1 kind: Pod metadata: name: pod-with-liveness-probe spec: …"
  },
  {
    "anchor": "a-pod-with-readiness-probe",
    "content": "apiVersion: v1 kind: Pod metadata: name: pod-with-readiness-probe spec: containers: - name: nginx-container image: nginx:latest readinessProbe: httpGet: path: / port: 80 initialDelaySeconds: 15 periodSeconds: 5 ",
    "fullLink": "/docs/kubernetes/part04/#a-pod-with-readiness-probe",
    "heading": "A Pod with Readiness probe",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part04/Part 4",
    "permalink": "/docs/kubernetes/part04/",
    "title": "Part 4",
    "truncatedContent": "apiVersion: v1 kind: Pod metadata: name: pod-with-readiness-probe …"
  },
  {
    "anchor": "key-points-about-kubernetes-probes",
    "content": " initialDelaySeconds 60 seconds specifies the delay before the probe starts executing after the container starts. periodSeconds 10 seconds means that the probe will be executed every 10 seconds. failureThreshold 3 indicates that the container will be marked as unhealthy after three consecutive failed probes. ",
    "fullLink": "/docs/kubernetes/part04/#key-points-about-kubernetes-probes",
    "heading": "Key Points about kubernetes Probes",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part04/Part 4",
    "permalink": "/docs/kubernetes/part04/",
    "title": "Part 4",
    "truncatedContent": " initialDelaySeconds 60 seconds specifies the delay before the probe …"
  },
  {
    "anchor": "kubernetes-storage",
    "content": " Set up NFS storage git clone https://gitlab.com/container-and-kubernetes/kubernetes-2024.git cd kubernetes-2024/nfs-subdir-external-provisioner Run the script on all nodes #!/usr/bin/env bash export DEBIAN_FRONTEND=noninteractive readonly NFS_SHARE=\"/srv/nfs/kubedata\" echo \"[TASK 1] apt update\" sudo apt-get update -qq \u003e/dev/null if [[ $HOSTNAME == \"kmaster\" ]]; then echo \"[TASK 2] install nfs server\" sudo -E apt-get install -y -qq nfs-kernel-server \u003e/dev/null echo \"[TASK 3] creating nfs exports\" sudo mkdir -p $NFS_SHARE sudo chown nobody:nogroup $NFS_SHARE echo \"$NFS_SHARE *(rw,sync,no_subtree_check)\" | sudo tee /etc/exports \u003e/dev/null sudo systemctl restart nfs-kernel-server else echo \"[TASK 2] install nfs common\" sudo -E apt-get install -y -qq nfs-common \u003e/dev/null fi Now apply nfs on kubernetes kubectl apply -f 01-setup-nfs-provisioner.yaml Create a pvc using 02-test-claim.yaml kubectl apply -f 02-test-claim.yaml Check newly created pvc kubectl get pvc ",
    "fullLink": "/docs/kubernetes/part04/#kubernetes-storage",
    "heading": "Kubernetes Storage",
    "level": 2,
    "linkIfNotFAQ": "/docs/kubernetes/part04/Part 4",
    "permalink": "/docs/kubernetes/part04/",
    "title": "Part 4",
    "truncatedContent": " Set up NFS storage git clone …"
  },
  {
    "anchor": "a-persistentvolume",
    "content": " A PersistentVolume (PV) is a piece of storage in the cluster that has been provisioned by an administrator or dynamically provisioned using Storage Classes. It is a resource in the cluster just like a node is a cluster resource. ",
    "fullLink": "/docs/kubernetes/part04/#a-persistentvolume",
    "heading": "A PersistentVolume",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/part04/Part 4",
    "permalink": "/docs/kubernetes/part04/",
    "title": "Part 4",
    "truncatedContent": " A PersistentVolume (PV) is a piece of storage in the cluster that has …"
  },
  {
    "anchor": "a-persistentvolumeclaim-pvc",
    "content": " A PersistentVolumeClaim (PVC) is a request for storage by a user. It is similar to a Pod. Pods consume node resources and PVCs consume PV resources. ",
    "fullLink": "/docs/kubernetes/part04/#a-persistentvolumeclaim-pvc",
    "heading": "A PersistentVolumeClaim (PVC)",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/part04/Part 4",
    "permalink": "/docs/kubernetes/part04/",
    "title": "Part 4",
    "truncatedContent": " A PersistentVolumeClaim (PVC) is a request for storage by a user. It …"
  },
  {
    "anchor": "lifecycle-of-a-volume-and-claim",
    "content": " PVs are resources in the cluster. PVCs are requests for those resources and also act as claim checks to the resource. The interaction between PVs and PVCs follows this lifecycle: ",
    "fullLink": "/docs/kubernetes/part04/#lifecycle-of-a-volume-and-claim",
    "heading": "Lifecycle of a volume and claim",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/part04/Part 4",
    "permalink": "/docs/kubernetes/part04/",
    "title": "Part 4",
    "truncatedContent": " PVs are resources in the cluster. PVCs are requests for those …"
  },
  {
    "anchor": "provisioning",
    "content": "There are two ways PVs may be provisioned: statically or dynamically.\n",
    "fullLink": "/docs/kubernetes/part04/#provisioning",
    "heading": "Provisioning",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/part04/Part 4",
    "permalink": "/docs/kubernetes/part04/",
    "title": "Part 4",
    "truncatedContent": "There are two ways PVs may be provisioned: statically or dynamically.\n"
  },
  {
    "anchor": "static",
    "content": "A cluster administrator creates a number of PVs. They carry the details of the real storage, which is available for use by cluster users. They exist in the Kubernetes API and are available for consumption.\n",
    "fullLink": "/docs/kubernetes/part04/#static",
    "heading": "Static",
    "level": 5,
    "linkIfNotFAQ": "/docs/kubernetes/part04/Part 4",
    "permalink": "/docs/kubernetes/part04/",
    "title": "Part 4",
    "truncatedContent": "A cluster administrator creates a number of PVs. They carry the …"
  },
  {
    "anchor": "dynamic",
    "content": " When none of the static PVs the administrator created match a user’s PersistentVolumeClaim, the cluster may try to dynamically provision a volume specially for the PVC. This provisioning is based on StorageClasses: the PVC must request a storage class The administrator must have created and configured that class for dynamic provisioning to occur ",
    "fullLink": "/docs/kubernetes/part04/#dynamic",
    "heading": "Dynamic",
    "level": 5,
    "linkIfNotFAQ": "/docs/kubernetes/part04/Part 4",
    "permalink": "/docs/kubernetes/part04/",
    "title": "Part 4",
    "truncatedContent": " When none of the static PVs the administrator created match a user’s …"
  },
  {
    "anchor": "access-modes",
    "content": "Access Modes",
    "fullLink": "/docs/kubernetes/part04/#access-modes",
    "heading": "Access Modes",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/part04/Part 4",
    "permalink": "/docs/kubernetes/part04/",
    "title": "Part 4",
    "truncatedContent": "Access Modes"
  },
  {
    "anchor": "the-access-modes-are",
    "content": "The access modes are:",
    "fullLink": "/docs/kubernetes/part04/#the-access-modes-are",
    "heading": "The access modes are:",
    "level": 5,
    "linkIfNotFAQ": "/docs/kubernetes/part04/Part 4",
    "permalink": "/docs/kubernetes/part04/",
    "title": "Part 4",
    "truncatedContent": "The access modes are:"
  },
  {
    "anchor": "readwriteonce",
    "content": "the volume can be mounted as read-write by a single node. ReadWriteOnce access mode still can allow multiple pods to access the volume when the pods are running on the same node. For single pod access, please see ReadWriteOncePod.\n",
    "fullLink": "/docs/kubernetes/part04/#readwriteonce",
    "heading": "ReadWriteOnce",
    "level": 5,
    "linkIfNotFAQ": "/docs/kubernetes/part04/Part 4",
    "permalink": "/docs/kubernetes/part04/",
    "title": "Part 4",
    "truncatedContent": "the volume can be mounted as read-write by a single node. …"
  },
  {
    "anchor": "readonlymany",
    "content": "the volume can be mounted as read-only by many nodes.\n",
    "fullLink": "/docs/kubernetes/part04/#readonlymany",
    "heading": "ReadOnlyMany",
    "level": 5,
    "linkIfNotFAQ": "/docs/kubernetes/part04/Part 4",
    "permalink": "/docs/kubernetes/part04/",
    "title": "Part 4",
    "truncatedContent": "the volume can be mounted as read-only by many nodes.\n"
  },
  {
    "anchor": "readwritemany",
    "content": "the volume can be mounted as read-write by many nodes.\n",
    "fullLink": "/docs/kubernetes/part04/#readwritemany",
    "heading": "ReadWriteMany",
    "level": 5,
    "linkIfNotFAQ": "/docs/kubernetes/part04/Part 4",
    "permalink": "/docs/kubernetes/part04/",
    "title": "Part 4",
    "truncatedContent": "the volume can be mounted as read-write by many nodes.\n"
  },
  {
    "anchor": "readwriteoncepod",
    "content": "the volume can be mounted as read-write by a single Pod. Use ReadWriteOncePod access mode if you want to ensure that only one pod across the whole cluster can read that PVC or write to it.\n",
    "fullLink": "/docs/kubernetes/part04/#readwriteoncepod",
    "heading": "ReadWriteOncePod",
    "level": 5,
    "linkIfNotFAQ": "/docs/kubernetes/part04/Part 4",
    "permalink": "/docs/kubernetes/part04/",
    "title": "Part 4",
    "truncatedContent": "the volume can be mounted as read-write by a single Pod. Use …"
  },
  {
    "anchor": "in-the-cli-the-access-modes-are-abbreviated-to",
    "content": " RWO - ReadWriteOnce\nROX - ReadOnlyMany\nRWX - ReadWriteMany\nRWOP - ReadWriteOncePod\nExample of a pvc\napiVersion: v1 kind: PersistentVolumeClaim metadata: name: task-pv-claim spec: storageClassName: manual accessModes: - ReadWriteOnce resources: requests: storage: 3Gi Create a pod and use the pvc there apiVersion: v1 kind: Pod metadata: name: task-pv-pod spec: volumes: - name: task-pv-storage persistentVolumeClaim: claimName: task-pv-claim containers: - name: task-pv-container image: nginx ports: - containerPort: 80 name: \"http-server\" volumeMounts: - mountPath: \"/usr/share/nginx/html\" name: task-pv-storage Test pod and pvc Also check the storage class kubectl get sc ",
    "fullLink": "/docs/kubernetes/part04/#in-the-cli-the-access-modes-are-abbreviated-to",
    "heading": "In the CLI, the access modes are abbreviated to:",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/part04/Part 4",
    "permalink": "/docs/kubernetes/part04/",
    "title": "Part 4",
    "truncatedContent": " RWO - ReadWriteOnce\nROX - ReadOnlyMany\nRWX - ReadWriteMany\nRWOP - …"
  },
  {
    "anchor": "emptydir",
    "content": " emptyDir are volumes that get created empty when a Pod is created. While a Pod is running its emptyDir exists. If a container in a Pod crashes the emptyDir content is unaffected. Deleting a Pod deletes all its emptyDirs. An emptyDir volume is first created when a Pod is assigned to a Node and initially its empty A Volume of type emptyDir that lasts for the life of the Pod, even if the Container terminates and restarts. If a container in a Pod crashes the emptyDir content is unaffected. All containers in a Pod share use of the emptyDir volume . Each container can independently mount the emptyDir at the same / or different path. Using emptyDir, The Kubelet will create the directory in the container, but not mount any storage. Containers in the Pod can all read/write the same files in the emptyDir volume, though that volume can be mounted at the same or different paths in each Container. When a Pod is removed from a node for any reason, the data in the emptyDir is deleted forever along with the container. A Container crashing does NOT remove a Pod from a node, so the data in an emptyDir volume is safe across Container crashes. By default, emptyDir volumes are stored on whatever medium is backing the node – that might be disk or SSD or network storage. You can set the emptyDir.medium field to “Memory” to tell Kubernetes to mount a tmpfs (RAM-backed filesystem) for you instead. The location should of emptyDir should be in /var/lib/kubelet/pods/{podid}/volumes/kubernetes.io~empty-dir/ on the given node where your pod is running. Example: Example of emptyDir – 1 apiVersion: v1 kind: Pod metadata: name: test-pd spec: containers: - image: k8s.gcr.io/test-webserver name: test-container volumeMounts: - mountPath: /cache name: cache-volume volumes: - name: cache-volume emptyDir: {} ",
    "fullLink": "/docs/kubernetes/part04/#emptydir",
    "heading": "emptyDir",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part04/Part 4",
    "permalink": "/docs/kubernetes/part04/",
    "title": "Part 4",
    "truncatedContent": " emptyDir are volumes that get created empty when a Pod is created. …"
  },
  {
    "anchor": "hostpath",
    "content": " The hostPath volume mounts a resource from the host node filesystem. the resources could be directory, file socket, character, or block device. These resources mu A hostPath volume mounts a file or directory from the host node’s filesystem into your pod. A hostPath PersistentVolume must be used only in a single-node cluster. Kubernetes does not support hostPath on a multi-node cluster currently. The directories created on the underlying hosts are only writable by root. You either need to run your process as root in a privileged container or modify the file permissions on the host to be able to write to a hostPath volume Example: apiVersion: v1 kind: Pod metadata: name: test-pd spec: containers: - image: k8s.gcr.io/test-webserver name: test-container volumeMounts: - mountPath: /test-pd name: test-volume volumes: - name: test-volume hostPath: # directory location on host path: /data # this field is optional type: DirectoryOrCreate ",
    "fullLink": "/docs/kubernetes/part04/#hostpath",
    "heading": "hostPath:",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part04/Part 4",
    "permalink": "/docs/kubernetes/part04/",
    "title": "Part 4",
    "truncatedContent": " The hostPath volume mounts a resource from the host node filesystem. …"
  },
  {
    "anchor": "persistentvolumeclaim",
    "content": "https://kubernetes.io/docs/tasks/configure-pod-container/configure-persistent-volume-storage/\n",
    "fullLink": "/docs/kubernetes/part04/#persistentvolumeclaim",
    "heading": "PersistentVolumeClaim",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part04/Part 4",
    "permalink": "/docs/kubernetes/part04/",
    "title": "Part 4",
    "truncatedContent": "https://kubernetes.io/docs/tasks/configure-pod-container/configure-per …"
  },
  {
    "anchor": "kubernetes-objects",
    "content": "Kubernetes Objects",
    "fullLink": "/docs/kubernetes/part04/#kubernetes-objects",
    "heading": "Kubernetes Objects",
    "level": 2,
    "linkIfNotFAQ": "/docs/kubernetes/part04/Part 4",
    "permalink": "/docs/kubernetes/part04/",
    "title": "Part 4",
    "truncatedContent": "Kubernetes Objects"
  },
  {
    "anchor": "secret",
    "content": " Creating a secret Checking the value of a secret Use jsonpath to fetch the value Use secret in pod an environment value Use secret as a file in pod Creating a secret of type tls ",
    "fullLink": "/docs/kubernetes/part04/#secret",
    "heading": "Secret",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part04/Part 4",
    "permalink": "/docs/kubernetes/part04/",
    "title": "Part 4",
    "truncatedContent": " Creating a secret Checking the value of a secret Use jsonpath to …"
  },
  {
    "anchor": "configmap",
    "content": " Create a config map use cm as a file in pod To create a secret, you can use the kubectl create secret command. kubectl create secret generic my-secret --from-literal=MYSQL_ROOT_PASSWORD=root To create secret of type TLS kubectl create secret tls my-tls-secret --cert=path/to/tls.crt --key=path/to/tls.key Check secret kubectl get secrets use the secret with pod as an environment variable apiVersion: v1 kind: Pod metadata: name: mypod spec: containers: - name: mycontainer image: mysql env: - name: MYSQL_ROOT_PASSWORD valueFrom: secretKeyRef: name: my-secret key: MYSQL_ROOT_PASSWORD Use secret as a file apiVersion: v1 kind: Pod metadata: name: mypod spec: containers: - name: mycontainer image: myimage volumeMounts: - name: secret-volume mountPath: /etc/secrets volumes: - name: secret-volume secret: secretName: my-secret How to extract the value from a secret kubectl get secret my-secret -o jsonpath='{.data.username}' | base64 --decode \u003e username.txt kubectl get secret my-secret -o jsonpath='{.data.password}' | base64 --decode \u003e password.txt ",
    "fullLink": "/docs/kubernetes/part04/#configmap",
    "heading": "Configmap",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part04/Part 4",
    "permalink": "/docs/kubernetes/part04/",
    "title": "Part 4",
    "truncatedContent": " Create a config map use cm as a file in pod To create a secret, you …"
  },
  {
    "anchor": "configmap-1",
    "content": " Create a configmap kubectl create configmap my-configmap --from-literal=key1=value1 Create cm with yaml apiVersion: v1 kind: ConfigMap metadata: name: my-configmap data: key1: value1 key2: value2 Configmap for a config file kubectl create configmap my-configmap --from-file=config-file.txt use configmap as a file in a pod apiVersion: v1 kind: Pod metadata: name: mypod spec: containers: - name: mycontainer image: myimage envFrom: - configMapRef: name: my-configmap --- apiVersion: v1 kind: Pod metadata: name: mypod spec: containers: - name: mycontainer image: myimage volumeMounts: - name: config-volume mountPath: /etc/config volumes: - name: config-volume configMap: name: my-configmap ",
    "fullLink": "/docs/kubernetes/part04/#configmap-1",
    "heading": "Configmap",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part04/Part 4",
    "permalink": "/docs/kubernetes/part04/",
    "title": "Part 4",
    "truncatedContent": " Create a configmap kubectl create configmap my-configmap …"
  },
  {
    "anchor": "ingresscontroller",
    "content": "IngressController",
    "fullLink": "/docs/kubernetes/part04/#ingresscontroller",
    "heading": "IngressController",
    "level": 2,
    "linkIfNotFAQ": "/docs/kubernetes/part04/Part 4",
    "permalink": "/docs/kubernetes/part04/",
    "title": "Part 4",
    "truncatedContent": "IngressController"
  },
  {
    "anchor": "documentation-referred",
    "content": "https://kubernetes.io/docs/concepts/services-networking/ingress-controllers/\nhttps://kubernetes.github.io/ingress-nginx/deploy/\nStep 1: Install Nginx Ingress Controller: helm upgrade --install ingress-nginx ingress-nginx --repo https://kubernetes.github.io/ingress-nginx --namespace ingress-nginx --create-namespace Step 2: Verify the Ingress Controller Resource helm list --all-namespaces kubectl get ingressclass kubectl get service -n ingress-nginx check if the IngressClass is available kubectl get ingressClassName Add the Application dns to your hosts in case you are not using DNS service\nnano /etc/hosts for windows it is under C:\\Windows\\System32\\drivers\\etc website01.example.internal website02.example.internal Step 1: Create two Pods\nkubectl run service-pod-1 --image=nginx kubectl run service-pod-2 --image=nginx Step 2: Create Service for above created pods\nkubectl expose pod service-pod-1 --name service1 --port=80 --target-port=80 kubectl expose pod service-pod-2 --name service2 --port=80 --target-port=80 kubectl get services Step 3: Verify Service to POD connectivity\nkubectl run frontend-pod --image=ubuntu --command -- sleep 36000 kubectl exec -it frontend-pod -- bash apt-get update \u0026\u0026 apt-get -y install curl nano curl curl Check if the application is reachable\ncurl website01.example.internal curl website02.example.internal Step 5: Change the Default Nginx Page for Each Service\nkubectl exec -it service-pod-1 -- bash cd /usr/share/nginx/html echo \"This is Website 1\" \u003e index.html kubectl exec -it service-pod-2 -- bash cd /usr/share/nginx/html echo \"This is Website 2\" \u003e index.html Step 6: Verification\nkubectl exec -it frontend-pod -- bash curl website01.example.internal curl website02.example.internal ",
    "fullLink": "/docs/kubernetes/part04/#documentation-referred",
    "heading": "Documentation Referred:",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/part04/Part 4",
    "permalink": "/docs/kubernetes/part04/",
    "title": "Part 4",
    "truncatedContent": "https://kubernetes.io/docs/concepts/services-networking/ingress-contro …"
  },
  {
    "anchor": "documentation-referred-1",
    "content": " Lean About name based virtual Hosting\nStep 7: Create Ingress Resource vi ingress.yaml apiVersion: networking.k8s.io/v1 kind: Ingress metadata: name: name-virtual-host-ingress spec: ingressClassName: nginx rules: - host: website01.example.internal http: paths: - pathType: Prefix path: \"/\" backend: service: name: service1 port: number: 80 - host: website02.example.internal http: paths: - pathType: Prefix path: \"/\" backend: service: name: service2 port: number: 80 kubectl apply -f ingress.yaml Check newlly created ingress rules kubectl get ingress Check more information for ingress kubectl describe ingress name-virtual-host-ingress created Now check if the application is opening in browser ",
    "fullLink": "/docs/kubernetes/part04/#documentation-referred-1",
    "heading": "Documentation Referred:",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/part04/Part 4",
    "permalink": "/docs/kubernetes/part04/",
    "title": "Part 4",
    "truncatedContent": " Lean About name based virtual Hosting\nStep 7: Create Ingress Resource …"
  },
  {
    "anchor": "kubernetes-patch-command",
    "content": "Kubernetes Patch command",
    "fullLink": "/docs/kubernetes/part04/#kubernetes-patch-command",
    "heading": "Kubernetes Patch command",
    "level": 2,
    "linkIfNotFAQ": "/docs/kubernetes/part04/Part 4",
    "permalink": "/docs/kubernetes/part04/",
    "title": "Part 4",
    "truncatedContent": "Kubernetes Patch command"
  },
  {
    "anchor": "description",
    "content": "Briefly describe the purpose of the issue.\n",
    "fullLink": "/docs/kubernetes/part04/#description",
    "heading": "Description",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part04/Part 4",
    "permalink": "/docs/kubernetes/part04/",
    "title": "Part 4",
    "truncatedContent": "Briefly describe the purpose of the issue.\n"
  },
  {
    "anchor": "examples-using-kubectl-patch",
    "content": " Patch a Deployment (Update Replicas) kubectl patch deployment -p '{\"spec\": {\"replicas\": 3}}' Patch a Pod (Update Container Image) kubectl patch pod -p '{\"spec\": {\"containers\": [{\"name\": \"container-name\", \"image\": \"new-image:tag\"}]}}' Update configmap kubectl patch configmap -p '{\"data\": {\"new-key\": \"new-value\"}}' Patch a Service (Update Service Type) kubectl patch service -p '{\"spec\": {\"type\": \"LoadBalancer\"}}' Patch a PVC (Update Storage Size) kubectl patch pvc -p '{\"spec\": {\"resources\": {\"requests\": {\"storage\": \"5Gi\"}}}}' ",
    "fullLink": "/docs/kubernetes/part04/#examples-using-kubectl-patch",
    "heading": "Examples using kubectl patch",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part04/Part 4",
    "permalink": "/docs/kubernetes/part04/",
    "title": "Part 4",
    "truncatedContent": " Patch a Deployment (Update Replicas) kubectl patch deployment -p …"
  },
  {
    "anchor": "statefulsets",
    "content": " StatefulSet is the workload API object used to manage stateful applications. Like a Deployment, a StatefulSet manages Pods that are based on an identical container spec. Unlike a Deployment, a StatefulSet maintains a sticky identity for each of its Pods. ",
    "fullLink": "/docs/kubernetes/part04/#statefulsets",
    "heading": "StatefulSets",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part04/Part 4",
    "permalink": "/docs/kubernetes/part04/",
    "title": "Part 4",
    "truncatedContent": " StatefulSet is the workload API object used to manage stateful …"
  },
  {
    "anchor": "using-statefulsets",
    "content": "Using StatefulSets",
    "fullLink": "/docs/kubernetes/part04/#using-statefulsets",
    "heading": "Using StatefulSets",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/part04/Part 4",
    "permalink": "/docs/kubernetes/part04/",
    "title": "Part 4",
    "truncatedContent": "Using StatefulSets"
  },
  {
    "anchor": "statefulsets-are-valuable-for-applications-that-require-one-or-more-of-the-following",
    "content": " Stable, unique network identifiers. Stable, persistent storage. Ordered, graceful deployment and scaling. Ordered, automated rolling updates. ",
    "fullLink": "/docs/kubernetes/part04/#statefulsets-are-valuable-for-applications-that-require-one-or-more-of-the-following",
    "heading": "StatefulSets are valuable for applications that require one or more of the following.",
    "level": 5,
    "linkIfNotFAQ": "/docs/kubernetes/part04/Part 4",
    "permalink": "/docs/kubernetes/part04/",
    "title": "Part 4",
    "truncatedContent": " Stable, unique network identifiers. Stable, persistent storage. …"
  },
  {
    "anchor": "example-of-statefulset",
    "content": " apiVersion: v1 kind: Service metadata: name: nginx labels: app: nginx spec: ports: - port: 80 name: web clusterIP: None selector: app: nginx --- apiVersion: apps/v1 kind: StatefulSet metadata: name: web spec: selector: matchLabels: app: nginx # has to match .spec.template.metadata.labels serviceName: \"nginx\" replicas: 3 # by default is 1 minReadySeconds: 10 # by default is 0 template: metadata: labels: app: nginx # has to match .spec.selector.matchLabels spec: terminationGracePeriodSeconds: 10 containers: - name: nginx image: registry.k8s.io/nginx-slim:0.8 ports: - containerPort: 80 name: web volumeMounts: - name: www mountPath: /usr/share/nginx/html volumeClaimTemplates: - metadata: name: www spec: accessModes: [ \"ReadWriteOnce\" ] storageClassName: \"my-storage-class\" resources: requests: storage: 1Gi check statefulset kubectl get sts Also check for service type kubectl get svc Check for pvc kubectl get pvc Check pods kubectl get pods Test after deleting a pod if the pod is taking the same name again ",
    "fullLink": "/docs/kubernetes/part04/#example-of-statefulset",
    "heading": "Example of statefulset",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/part04/Part 4",
    "permalink": "/docs/kubernetes/part04/",
    "title": "Part 4",
    "truncatedContent": " apiVersion: v1 kind: Service metadata: name: nginx labels: app: nginx …"
  },
  {
    "anchor": "topics",
    "content": " Rancher Network Policies Metric Server Configure HPA Logging with Grafana Loki Monitoring with Prometheus Enable Audit logs ",
    "fullLink": "/docs/kubernetes/part05/#topics",
    "heading": "Topics",
    "level": 2,
    "linkIfNotFAQ": "/docs/kubernetes/part05/Part 5",
    "permalink": "/docs/kubernetes/part05/",
    "title": "Part 5",
    "truncatedContent": " Rancher Network Policies Metric Server Configure HPA Logging with …"
  },
  {
    "anchor": "rancher-kubernetes-management-tool",
    "content": "Rancher Installation Steps\nRancher Installation for Kubernetes Management sudo docker run --privileged -d --restart=unless-stopped -p 80:80 -p 443:443 rancher/rancher Login to rancher Wait for atleast 4 to 5 mins Monitoring all node pods Try to deploy some pod/app ",
    "fullLink": "/docs/kubernetes/part05/#rancher-kubernetes-management-tool",
    "heading": "Rancher (Kubernetes Management Tool)",
    "level": 2,
    "linkIfNotFAQ": "/docs/kubernetes/part05/Part 5",
    "permalink": "/docs/kubernetes/part05/",
    "title": "Part 5",
    "truncatedContent": "Rancher Installation Steps\nRancher Installation for Kubernetes …"
  },
  {
    "anchor": "get-started-with-kubernetes-network-policy",
    "content": " Kubernetes network policy lets administrators and developers enforce which network traffic is allowed using rules. Kubernetes network policy lets developers secure access to and from their applications using the same simple language they use to deploy them. Developers can focus on their applications without understanding low-level networking concepts. Enabling developers to easily secure their applications using network policies supports a shift left DevOps environment. The Kubernetes Network Policy API supports the following features: Policies are namespace scoped Policies are applied to pods using label selectors Policy rules can specify the traffic that is allowed to/from pods, namespaces, or CIDRs Policy rules can specify protocols (TCP, UDP, SCTP), named ports or port numbers ",
    "fullLink": "/docs/kubernetes/part05/#get-started-with-kubernetes-network-policy",
    "heading": "Get started with Kubernetes network policy",
    "level": 2,
    "linkIfNotFAQ": "/docs/kubernetes/part05/Part 5",
    "permalink": "/docs/kubernetes/part05/",
    "title": "Part 5",
    "truncatedContent": " Kubernetes network policy lets administrators and developers enforce …"
  },
  {
    "anchor": "ingress-and-egress",
    "content": " ingress is incoming traffic to the pod, and egress is outgoing traffic from the pod. In Kubernetes network policy, you create ingress and egress “allow” rules independently (egress, ingress, or both). ",
    "fullLink": "/docs/kubernetes/part05/#ingress-and-egress",
    "heading": "Ingress and egress",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/part05/Part 5",
    "permalink": "/docs/kubernetes/part05/",
    "title": "Part 5",
    "truncatedContent": " ingress is incoming traffic to the pod, and egress is outgoing …"
  },
  {
    "anchor": "default-denyallow-behavior",
    "content": " Default allow means all traffic is allowed by default, unless otherwise specified. Default deny means all traffic is denied by default, unless explicitly allowed. ",
    "fullLink": "/docs/kubernetes/part05/#default-denyallow-behavior",
    "heading": "Default deny/allow behavior",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/part05/Part 5",
    "permalink": "/docs/kubernetes/part05/",
    "title": "Part 5",
    "truncatedContent": " Default allow means all traffic is allowed by default, unless …"
  },
  {
    "anchor": "network-policy",
    "content": " Create base setup (Default behaviour is all traffic is allowd) Create a namespace kubectl create ns external Test the default behaviour by creating pod and try to ping kubectl run pod-1 --image=praqma/network-multitool kubectl run pod-2 --image=praqma/network-multitool kubectl run pod-3 --image=praqma/network-multitool -n external Get Ip address kubectl get pods -o wide kubectl get pods -o wide -n external Check connectivity from POD-1 to POD2 and POD-3 and Internet: kubectl exec -it pod-1 -- ping [pod-2-ip] kubectl exec -it pod-1 -- ping [pod-3-ip] kubectl exec -it pod-1 -- ping google.com Rule 1: Deny Ingress kubectl apply -f - \u003c",
    "fullLink": "/docs/kubernetes/part05/#network-policy",
    "heading": "Network Policy",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part05/Part 5",
    "permalink": "/docs/kubernetes/part05/",
    "title": "Part 5",
    "truncatedContent": " Create base setup (Default behaviour is all traffic is allowd) Create …"
  },
  {
    "anchor": "rule-4---podselector",
    "content": "kubectl apply -f - \u003c",
    "fullLink": "/docs/kubernetes/part05/#rule-4---podselector",
    "heading": "Rule 4 - PodSelector:",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part05/Part 5",
    "permalink": "/docs/kubernetes/part05/",
    "title": "Part 5",
    "truncatedContent": "kubectl apply -f - \u0026lt;"
  },
  {
    "anchor": "create-ingress-policies-with-pod-selector--colorblue-on-port-80",
    "content": "kind: NetworkPolicy apiVersion: networking.k8s.io/v1 metadata: name: allow-same-namespace namespace: default spec: podSelector: matchLabels: color: blue ingress: - from: - podSelector: matchLabels: color: red ports: - port: 80 ",
    "fullLink": "/docs/kubernetes/part05/#create-ingress-policies-with-pod-selector--colorblue-on-port-80",
    "heading": "Create ingress policies with pod selector  color=blue on port 80",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part05/Part 5",
    "permalink": "/docs/kubernetes/part05/",
    "title": "Part 5",
    "truncatedContent": "kind: NetworkPolicy apiVersion: networking.k8s.io/v1 metadata: name: …"
  },
  {
    "anchor": "allow-ingress-traffic-from-pods-in-a-different-namespace-using-namespaceselector",
    "content": "kind: NetworkPolicy apiVersion: networking.k8s.io/v1 metadata: name: allow-different-namespace namespace: default spec: podSelector: matchLabels: color: blue ingress: - from: - podSelector: matchLabels: color: red namespaceSelector: matchLabels: shape: square ports: - port: 80 Here’s an example of a Network Policy in Kubernetes that allows incoming traffic only from a pod with label color=red in a namespace with label shape=square, on port 80:\n",
    "fullLink": "/docs/kubernetes/part05/#allow-ingress-traffic-from-pods-in-a-different-namespace-using-namespaceselector",
    "heading": "Allow ingress traffic from pods in a different namespace using namespaceSelector",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/part05/Part 5",
    "permalink": "/docs/kubernetes/part05/",
    "title": "Part 5",
    "truncatedContent": "kind: NetworkPolicy apiVersion: networking.k8s.io/v1 metadata: name: …"
  },
  {
    "anchor": "create-egress-policies",
    "content": "In the following example, outbound traffic is allowed only if they go to a pod with label color=red, on port 80.\nkind: NetworkPolicy apiVersion: networking.k8s.io/v1 metadata: name: allow-egress-same-namespace namespace: default spec: podSelector: matchLabels: color: blue egress: - to: - podSelector: matchLabels: color: red ports: - port: 80 ",
    "fullLink": "/docs/kubernetes/part05/#create-egress-policies",
    "heading": "Create egress policies",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part05/Part 5",
    "permalink": "/docs/kubernetes/part05/",
    "title": "Part 5",
    "truncatedContent": "In the following example, outbound traffic is allowed only if they go …"
  },
  {
    "anchor": "allow-a-cidr-range",
    "content": " The following policy allows egress traffic to pods in CIDR, 172.18.0.0/24. kind: NetworkPolicy apiVersion: networking.k8s.io/v1 metadata: name: allow-egress-external namespace: default spec: podSelector: matchLabels: color: red egress: - to: - ipBlock: cidr: 172.18.0.0/24 ",
    "fullLink": "/docs/kubernetes/part05/#allow-a-cidr-range",
    "heading": "Allow a CIDR range",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part05/Part 5",
    "permalink": "/docs/kubernetes/part05/",
    "title": "Part 5",
    "truncatedContent": " The following policy allows egress traffic to pods in CIDR, …"
  },
  {
    "anchor": "create-deny-all-default-ingress-and-egress-network-policy",
    "content": "kind: NetworkPolicy apiVersion: networking.k8s.io/v1 metadata: name: default-deny namespace: policy-demo spec: podSelector: matchLabels: {} policyTypes: - Ingress - Egress ",
    "fullLink": "/docs/kubernetes/part05/#create-deny-all-default-ingress-and-egress-network-policy",
    "heading": "Create deny-all default ingress and egress network policy",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part05/Part 5",
    "permalink": "/docs/kubernetes/part05/",
    "title": "Part 5",
    "truncatedContent": "kind: NetworkPolicy apiVersion: networking.k8s.io/v1 metadata: name: …"
  },
  {
    "anchor": "kubernetes-monitoring",
    "content": "Kubernetes Monitoring",
    "fullLink": "/docs/kubernetes/part05/#kubernetes-monitoring",
    "heading": "Kubernetes Monitoring",
    "level": 2,
    "linkIfNotFAQ": "/docs/kubernetes/part05/Part 5",
    "permalink": "/docs/kubernetes/part05/",
    "title": "Part 5",
    "truncatedContent": "Kubernetes Monitoring"
  },
  {
    "anchor": "prerequisites",
    "content": " Access to Kubernetes Cluster Helm cli installed ",
    "fullLink": "/docs/kubernetes/part05/#prerequisites",
    "heading": "Prerequisites",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part05/Part 5",
    "permalink": "/docs/kubernetes/part05/",
    "title": "Part 5",
    "truncatedContent": " Access to Kubernetes Cluster Helm cli installed "
  },
  {
    "anchor": "search-for-prometheus-helm-chart",
    "content": "Prometheus Helm Charts ",
    "fullLink": "/docs/kubernetes/part05/#search-for-prometheus-helm-chart",
    "heading": "Search for Prometheus helm chart",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part05/Part 5",
    "permalink": "/docs/kubernetes/part05/",
    "title": "Part 5",
    "truncatedContent": "Prometheus Helm Charts "
  },
  {
    "anchor": "add-prometheus-helm-repo",
    "content": "helm repo add prometheus-community https://prometheus-community.github.io/helm-charts helm repo update ",
    "fullLink": "/docs/kubernetes/part05/#add-prometheus-helm-repo",
    "heading": "Add Prometheus Helm Repo",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part05/Part 5",
    "permalink": "/docs/kubernetes/part05/",
    "title": "Part 5",
    "truncatedContent": "helm repo add prometheus-community …"
  },
  {
    "anchor": "install-prometheus-helm-chart-on-kubernetes-cluster",
    "content": "helm install prometheus prometheus-community/prometheus ",
    "fullLink": "/docs/kubernetes/part05/#install-prometheus-helm-chart-on-kubernetes-cluster",
    "heading": "Install Prometheus Helm Chart on Kubernetes Cluster",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part05/Part 5",
    "permalink": "/docs/kubernetes/part05/",
    "title": "Part 5",
    "truncatedContent": "helm install prometheus prometheus-community/prometheus "
  },
  {
    "anchor": "check-all-services-podsdeployment",
    "content": "kubectl get svc,deployment,pods,secret ",
    "fullLink": "/docs/kubernetes/part05/#check-all-services-podsdeployment",
    "heading": "Check all services pods,deployment",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part05/Part 5",
    "permalink": "/docs/kubernetes/part05/",
    "title": "Part 5",
    "truncatedContent": "kubectl get svc,deployment,pods,secret "
  },
  {
    "anchor": "exposing-the-prometheus-server-kubernetes-service",
    "content": "kubectl expose service prometheus-server --type=LoadBalancer --target-port=9090 --name=prometheus-server-ext ",
    "fullLink": "/docs/kubernetes/part05/#exposing-the-prometheus-server-kubernetes-service",
    "heading": "Exposing the prometheus-server Kubernetes Service",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part05/Part 5",
    "permalink": "/docs/kubernetes/part05/",
    "title": "Part 5",
    "truncatedContent": "kubectl expose service prometheus-server --type=LoadBalancer …"
  },
  {
    "anchor": "access-prometheus-from-ui",
    "content": "LoadBalancer Ip ",
    "fullLink": "/docs/kubernetes/part05/#access-prometheus-from-ui",
    "heading": "Access Prometheus from UI",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part05/Part 5",
    "permalink": "/docs/kubernetes/part05/",
    "title": "Part 5",
    "truncatedContent": "LoadBalancer Ip "
  },
  {
    "anchor": "check-targets-rules-etc",
    "content": "Check targets, Rules etc",
    "fullLink": "/docs/kubernetes/part05/#check-targets-rules-etc",
    "heading": "Check targets, Rules etc",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part05/Part 5",
    "permalink": "/docs/kubernetes/part05/",
    "title": "Part 5",
    "truncatedContent": "Check targets, Rules etc"
  },
  {
    "anchor": "install-grafana",
    "content": " Search for Grafana Chart helm search hub grafana Add and update Grafana repo helm repo add grafana https://grafana.github.io/helm-charts helm repo update Install Grafana Helm Chart on Kubernetes Cluster helm install grafana grafana/grafana Check for Services and other details kubectl get service Exposing the grafana Kubernetes Service kubectl expose service grafana --type=LoadBalancer --target-port=3000 --name=grafana-ext Take the password for Grafana user(Admin) kubectl get secret --namespace default grafana -o jsonpath=\"{.data.admin-password}\" | base64 --decode ; echo Login to Grafana and add datasource Select Prometheus as the data source: Click on “Save \u0026 test” to save your changes.\n",
    "fullLink": "/docs/kubernetes/part05/#install-grafana",
    "heading": "Install Grafana",
    "level": 2,
    "linkIfNotFAQ": "/docs/kubernetes/part05/Part 5",
    "permalink": "/docs/kubernetes/part05/",
    "title": "Part 5",
    "truncatedContent": " Search for Grafana Chart helm search hub grafana Add and update …"
  },
  {
    "anchor": "grafana-dashboard",
    "content": " To import a Grafana Dashboard, follow these steps: Click here\n",
    "fullLink": "/docs/kubernetes/part05/#grafana-dashboard",
    "heading": "Grafana Dashboard",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part05/Part 5",
    "permalink": "/docs/kubernetes/part05/",
    "title": "Part 5",
    "truncatedContent": " To import a Grafana Dashboard, follow these steps: Click here\n"
  },
  {
    "anchor": "kuberntes-monitoring-with-grafana-loki",
    "content": "Kuberntes Monitoring with Grafana Loki",
    "fullLink": "/docs/kubernetes/part05/#kuberntes-monitoring-with-grafana-loki",
    "heading": "Kuberntes Monitoring with Grafana Loki",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part05/Part 5",
    "permalink": "/docs/kubernetes/part05/",
    "title": "Part 5",
    "truncatedContent": "Kuberntes Monitoring with Grafana Loki"
  },
  {
    "anchor": "kubernetes-monitoring-1",
    "content": "Kubernetes Monitoring",
    "fullLink": "/docs/kubernetes/part05/#kubernetes-monitoring-1",
    "heading": "Kubernetes Monitoring",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part05/Part 5",
    "permalink": "/docs/kubernetes/part05/",
    "title": "Part 5",
    "truncatedContent": "Kubernetes Monitoring"
  },
  {
    "anchor": "source-httpsartifacthubiopackageshelmgrafanaloki-stack",
    "content": "source https://artifacthub.io/packages/helm/grafana/loki-stack",
    "fullLink": "/docs/kubernetes/part05/#source-httpsartifacthubiopackageshelmgrafanaloki-stack",
    "heading": "source ",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part05/Part 5",
    "permalink": "/docs/kubernetes/part05/",
    "title": "Part 5",
    "truncatedContent": "source https://artifacthub.io/packages/helm/grafana/loki-stack"
  },
  {
    "anchor": "grafana-loki",
    "content": "Grafana Loki",
    "fullLink": "/docs/kubernetes/part05/#grafana-loki",
    "heading": "Grafana Loki",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part05/Part 5",
    "permalink": "/docs/kubernetes/part05/",
    "title": "Part 5",
    "truncatedContent": "Grafana Loki"
  },
  {
    "anchor": "loki-stack-helm-chart",
    "content": "Loki-Stack Helm Chart",
    "fullLink": "/docs/kubernetes/part05/#loki-stack-helm-chart",
    "heading": "Loki-Stack Helm Chart",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part05/Part 5",
    "permalink": "/docs/kubernetes/part05/",
    "title": "Part 5",
    "truncatedContent": "Loki-Stack Helm Chart"
  },
  {
    "anchor": "get-repo-info",
    "content": "helm repo add grafana https://grafana.github.io/helm-charts helm repo update Deploy Loki and Promtail to your cluster helm upgrade --install loki grafana/loki-stack \\ --set fluent-bit.enabled=false,promtail.enabled=true,grafana.enabled=true To get the admin password for the Grafana pod, run the following command: kubectl get secret --namespace loki-grafana -o jsonpath=\"{.data.admin-password}\" | base64 --decode ; echo To access Grafana you can use port forwarding or Service LoadBalancer kubectl port-forward --namespace service/loki-grafana 3000:80 ",
    "fullLink": "/docs/kubernetes/part05/#get-repo-info",
    "heading": "Get Repo Info",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part05/Part 5",
    "permalink": "/docs/kubernetes/part05/",
    "title": "Part 5",
    "truncatedContent": "helm repo add grafana https://grafana.github.io/helm-charts helm repo …"
  },
  {
    "anchor": "etcd-backup-and-restore-on-kubernetes-cluster",
    "content": " Login to control plane ssh vagrant@172.16.16.100 sudo -s Install etcd cli sudo apt install etcd-client ",
    "fullLink": "/docs/kubernetes/part05/#etcd-backup-and-restore-on-kubernetes-cluster",
    "heading": "Etcd Backup and Restore on Kubernetes Cluster",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part05/Part 5",
    "permalink": "/docs/kubernetes/part05/",
    "title": "Part 5",
    "truncatedContent": " Login to control plane ssh vagrant@172.16.16.100 sudo -s Install etcd …"
  },
  {
    "anchor": "we-need-to-pass-the-following-three-pieces-of-information-to-etcdctl-to-take-an-etcd-snapshot",
    "content": " etcd endpoint (–endpoints)\nca certificate (–cacert)\nserver certificate (–cert)\nserver key (–key)\nCheck the file for above information\ncat /etc/kubernetes/manifests/etcd.yaml Take an etcd snapshot backup using the following command. ETCDCTL_API=3 etcdctl \\ --endpoints=https://127.0.0.1:2379 \\ --cacert= \\ --cert= \\ --key= \\ snapshot save ETCDCTL_API=3 etcdctl \\ --endpoints=https://127.0.0.1:2379 \\ --cacert=/etc/kubernetes/pki/etcd/ca.crt \\ --cert=/etc/kubernetes/pki/etcd/server.crt \\ --key=/etc/kubernetes/pki/etcd/server.key \\ snapshot save /opt/backup/etcd.db you can verify the snapshot using the following command. ETCDCTL_API=3 etcdctl --write-out=table snapshot status /opt/backup/etcd.db Kubernetes etcd Restore Using Snapshot Backup\nUse the below command\nETCDCTL_API=3 etcdctl snapshot restore ETCDCTL_API=3 etcdctl snapshot restore /opt/backup/etcd.db ETCDCTL_API=3 etcdctl --data-dir /opt/etcd snapshot restore /opt/backup/etcd.db ",
    "fullLink": "/docs/kubernetes/part05/#we-need-to-pass-the-following-three-pieces-of-information-to-etcdctl-to-take-an-etcd-snapshot",
    "heading": "We need to pass the following three pieces of information to etcdctl to take an etcd snapshot.",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part05/Part 5",
    "permalink": "/docs/kubernetes/part05/",
    "title": "Part 5",
    "truncatedContent": " etcd endpoint (–endpoints)\nca certificate (–cacert)\nserver …"
  },
  {
    "anchor": "kubernetes-api-related-commands",
    "content": " All namespaced resources kubectl api-resources --namespaced=true kubectl api-resources --namespaced=false kubectl api-resources -o name kubectl api-resources -o wide kubectl api-resources --verbs=list,get kubectl api-resources --api-group=extensions ",
    "fullLink": "/docs/kubernetes/part05/#kubernetes-api-related-commands",
    "heading": "Kubernetes Api related commands",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part05/Part 5",
    "permalink": "/docs/kubernetes/part05/",
    "title": "Part 5",
    "truncatedContent": " All namespaced resources kubectl api-resources --namespaced=true …"
  },
  {
    "anchor": "enable-pod-security-replacement-of-psp",
    "content": " Enable PodSecurity in kube api Server --enable-admission-plugins=PodSecurity In the context of PodSecurity, the admission controller checks whether Pods conform to the security settings specified in the associated PodSecurityPolicy objects. It verifies aspects such as:\nPrivilege Escalation: Checks if containers in the Pod have the privilege of escalating their own privileges.\nUse of Host Network/IPC/PID: Ensures that Pods are not using the host’s network, IPC namespace, or PID namespace.\nFilesystem Restrictions: Verifies that containers are not mounting certain sensitive paths.\nCapabilities: Checks for the use of dangerous Linux capabilities.\nSELinux/AppArmor Profiles: Enforces the use of SELinux or AppArmor profiles.\nAllowed Volume Types: Specifies which volume types are allowed.\n",
    "fullLink": "/docs/kubernetes/part05/#enable-pod-security-replacement-of-psp",
    "heading": "Enable Pod Security replacement of psp",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/part05/Part 5",
    "permalink": "/docs/kubernetes/part05/",
    "title": "Part 5",
    "truncatedContent": " Enable PodSecurity in kube api Server …"
  },
  {
    "anchor": "topics",
    "content": " Create a virtual machine git clone https://gitlab.com/container-and-kubernetes/kubernetes-2024.git cd kubernetes-2024/ vagrant up You will have a vm ready within 5 mins of time Login to Linux vm ssh vagrant@172.16.16.105 Enter password: vagrant Switch from vagrant user of root user sudo -s ",
    "fullLink": "/docs/kubernetes/docs/miscellaneous/containerbasics/#topics",
    "heading": "Topics",
    "level": 2,
    "linkIfNotFAQ": "/docs/kubernetes/docs/miscellaneous/containerbasics/Container Basics",
    "permalink": "/docs/kubernetes/docs/miscellaneous/containerbasics/",
    "title": "Container Basics",
    "truncatedContent": " Create a virtual machine git clone …"
  },
  {
    "anchor": "docker-basics-lab",
    "content": " How to install docker # Add Docker's official GPG key: sudo apt-get update sudo apt-get install ca-certificates curl sudo install -m 0755 -d /etc/apt/keyrings sudo curl -fsSL https://download.docker.com/linux/ubuntu/gpg -o /etc/apt/keyrings/docker.asc sudo chmod a+r /etc/apt/keyrings/docker.asc # Add the repository to Apt sources: echo \\ \"deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/ubuntu \\ $(. /etc/os-release \u0026\u0026 echo \"$VERSION_CODENAME\") stable\" | \\ sudo tee /etc/apt/sources.list.d/docker.list \u003e /dev/null sudo apt-get update Run the below command\nsudo apt-get install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin Check docker version\ndocker version check all docker images\ndocker images check all running containers\ndocker ps Check all containers\ndocker ps -a Download an image\ndocker pull docker pull nginx How to create a container\ndocker run container id (this will run a process in foreground) Run a container in backgroud\ndocker run -d container id Login to a container\ndocker exec container id sh/bash Delete a container\ndocker rm containerid Delete container forcefully(if the container is running)\ndocker rm containerid --force Check the id of all containers\ndocker ps -aq Delete all containers\ndocker rm $(docker ps -aq) -f Delete all images\ndocker rmi $(docker images -aq) ",
    "fullLink": "/docs/kubernetes/docs/miscellaneous/containerbasics/#docker-basics-lab",
    "heading": "Docker Basics Lab",
    "level": 2,
    "linkIfNotFAQ": "/docs/kubernetes/docs/miscellaneous/containerbasics/Container Basics",
    "permalink": "/docs/kubernetes/docs/miscellaneous/containerbasics/",
    "title": "Container Basics",
    "truncatedContent": " How to install docker # Add Docker\u0026#39;s official GPG key: sudo apt-get …"
  },
  {
    "anchor": "docker-networking",
    "content": " Expose a docker container port to access from host ip docker run -d -p : \u003cimage name\u003e ",
    "fullLink": "/docs/kubernetes/docs/miscellaneous/containerbasics/#docker-networking",
    "heading": "Docker Networking",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/docs/miscellaneous/containerbasics/Container Basics",
    "permalink": "/docs/kubernetes/docs/miscellaneous/containerbasics/",
    "title": "Container Basics",
    "truncatedContent": " Expose a docker container port to access from host ip docker run -d …"
  },
  {
    "anchor": "note-you-can-not-map-a-host-port-which-is-already-in-use",
    "content": "NOTE: You can not map a host port which is already in use",
    "fullLink": "/docs/kubernetes/docs/miscellaneous/containerbasics/#note-you-can-not-map-a-host-port-which-is-already-in-use",
    "heading": "NOTE: You can not map a host port which is already in use",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/docs/miscellaneous/containerbasics/Container Basics",
    "permalink": "/docs/kubernetes/docs/miscellaneous/containerbasics/",
    "title": "Container Basics",
    "truncatedContent": "NOTE: You can not map a host port which is already in use"
  },
  {
    "anchor": "docker-storage",
    "content": " How to map a directory to container dir docker run -d -v \u003cdir at host\u003e:\u003cdir at container\u003e ",
    "fullLink": "/docs/kubernetes/docs/miscellaneous/containerbasics/#docker-storage",
    "heading": "Docker storage",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/docs/miscellaneous/containerbasics/Container Basics",
    "permalink": "/docs/kubernetes/docs/miscellaneous/containerbasics/",
    "title": "Container Basics",
    "truncatedContent": " How to map a directory to container dir docker run -d -v \u0026lt;dir at …"
  },
  {
    "anchor": "docker-images",
    "content": " How to login to docker hub\ndocker login How to convert a running container into an image\ndocker commit containerid newname How to save docker image into a tar\ndocker save \u003e example.tar How to import from a tar file\ndocker load \u003c example.tar How to rename an image\ndocker tag Login to docker hub/any other container registry\ndocker login docker login ",
    "fullLink": "/docs/kubernetes/docs/miscellaneous/containerbasics/#docker-images",
    "heading": "Docker Images",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/docs/miscellaneous/containerbasics/Container Basics",
    "permalink": "/docs/kubernetes/docs/miscellaneous/containerbasics/",
    "title": "Container Basics",
    "truncatedContent": " How to login to docker hub\ndocker login How to convert a running …"
  },
  {
    "anchor": "creating-dockerimage-from-docker-file",
    "content": "Dockerfile Documentation\nDestroy the vm once the Lab is completed from the directory of your Laptop where you have vagrantfile vagrant destroy ",
    "fullLink": "/docs/kubernetes/docs/miscellaneous/containerbasics/#creating-dockerimage-from-docker-file",
    "heading": "Creating dockerimage from Docker file",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/docs/miscellaneous/containerbasics/Container Basics",
    "permalink": "/docs/kubernetes/docs/miscellaneous/containerbasics/",
    "title": "Container Basics",
    "truncatedContent": "Dockerfile Documentation\nDestroy the vm once the Lab is completed from …"
  },
  {
    "anchor": "helm-overview",
    "content": " Download and Installation of Helm from the below link. https://github.com/helm/helm/releases Install using script curl -fsSL -o get_helm.sh https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3 chmod 700 get_helm.sh ./get_helm.sh Check helm version helm version Click here to check the helm version and k8s version compatiblity ",
    "fullLink": "/docs/kubernetes/docs/miscellaneous/helm-overview/#helm-overview",
    "heading": "HELM Overview",
    "level": 2,
    "linkIfNotFAQ": "/docs/kubernetes/docs/miscellaneous/helm-overview/Helm Overview",
    "permalink": "/docs/kubernetes/docs/miscellaneous/helm-overview/",
    "title": "Helm Overview",
    "truncatedContent": " Download and Installation of Helm from the below link. …"
  },
  {
    "anchor": "prerequisites",
    "content": "Prerequisites",
    "fullLink": "/docs/kubernetes/docs/miscellaneous/helm-overview/#prerequisites",
    "heading": "Prerequisites",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/docs/miscellaneous/helm-overview/Helm Overview",
    "permalink": "/docs/kubernetes/docs/miscellaneous/helm-overview/",
    "title": "Helm Overview",
    "truncatedContent": "Prerequisites"
  },
  {
    "anchor": "the-following-prerequisites-are-required-for-a-successful-and-properly-secured-use-of-helm",
    "content": " A Kubernetes cluster Installed and configured Helm. ",
    "fullLink": "/docs/kubernetes/docs/miscellaneous/helm-overview/#the-following-prerequisites-are-required-for-a-successful-and-properly-secured-use-of-helm",
    "heading": "The following prerequisites are required for a successful and properly secured use of Helm.",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/docs/miscellaneous/helm-overview/Helm Overview",
    "permalink": "/docs/kubernetes/docs/miscellaneous/helm-overview/",
    "title": "Helm Overview",
    "truncatedContent": " A Kubernetes cluster Installed and configured Helm. "
  },
  {
    "anchor": "initialize-a-helm-chart-repository",
    "content": "helm repo add bitnami https://charts.bitnami.com/bitnami How to search package in repo helm search repo bitnami Update helm repo helm repo update Install an Example Chart helm install bitnami/mysql --generate-name Check all the release installed helm list Uninstall a Release helm uninstall Check the history if the flag –keep-history is provided helm status mysql-1612624192 Customizing the Chart Before Installing helm show values bitnami/wordpress make the changes in values.yaml file and use below command to install helm install -f values.yaml bitnami/wordpress --generate-name How to get the value file helm get values happy-panda How to rollback to previous version helm rollback happy-panda 1 How to check packages in all projects helm list --all Check all repositories helm repo list ",
    "fullLink": "/docs/kubernetes/docs/miscellaneous/helm-overview/#initialize-a-helm-chart-repository",
    "heading": "Initialize a Helm Chart Repository",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/docs/miscellaneous/helm-overview/Helm Overview",
    "permalink": "/docs/kubernetes/docs/miscellaneous/helm-overview/",
    "title": "Helm Overview",
    "truncatedContent": "helm repo add bitnami https://charts.bitnami.com/bitnami How to search …"
  },
  {
    "anchor": "creating-your-own-charts",
    "content": " Use below command helm create deis-workflow Validate your helm chart helm lint . How to package your helm chart helm package deis-workflow How to install charts helm install deis-workflow ./deis-workflow-0.1.0.tgz How to download the charts to your local vm helm pull [chart] Displaya list of a chart’s dependencies helm dependency list [chart] ",
    "fullLink": "/docs/kubernetes/docs/miscellaneous/helm-overview/#creating-your-own-charts",
    "heading": "Creating Your Own Charts",
    "level": 2,
    "linkIfNotFAQ": "/docs/kubernetes/docs/miscellaneous/helm-overview/Helm Overview",
    "permalink": "/docs/kubernetes/docs/miscellaneous/helm-overview/",
    "title": "Helm Overview",
    "truncatedContent": " Use below command helm create deis-workflow Validate your helm chart …"
  },
  {
    "anchor": "rbac",
    "content": "Kubernetes RBAC is a powerful security feature that allows administrators to control who can access the Kubernetes API and what actions they can perform. You can use it to implement the principle of “least privilege,” which means that users should have the minimum levels of access necessary to perform their tasks. This approach minimizes the potential for accidental or malicious misuse of the Kubernetes system.\nRole-based access control (RBAC) is a method of regulating access to computer or network resources based on the roles of individual users within your organization.\n",
    "fullLink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/#rbac",
    "heading": "RBAC",
    "level": 2,
    "linkIfNotFAQ": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/Kubernetes RBAC",
    "permalink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/",
    "title": "Kubernetes RBAC",
    "truncatedContent": "Kubernetes RBAC is a powerful security feature that allows …"
  },
  {
    "anchor": "core-components-of-kubernetes-rbac",
    "content": "Core Components of Kubernetes RBAC",
    "fullLink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/#core-components-of-kubernetes-rbac",
    "heading": "Core Components of Kubernetes RBAC",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/Kubernetes RBAC",
    "permalink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/",
    "title": "Kubernetes RBAC",
    "truncatedContent": "Core Components of Kubernetes RBAC"
  },
  {
    "anchor": "role",
    "content": " Roles define a set of permissions within a specific namespace. They define which actions (verbs) can be performed on which resources (nouns) within that namespace. A role, for example, might enable a user to list and retrieve pods in a specific namespace. ClusterRole, by contrast, is a non-namespaced resource. The resources have different names (Role and ClusterRole) because a Kubernetes object always has to be either namespaced or not namespaced; it can’t be both. ",
    "fullLink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/#role",
    "heading": "Role",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/Kubernetes RBAC",
    "permalink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/",
    "title": "Kubernetes RBAC",
    "truncatedContent": " Roles define a set of permissions within a specific namespace. They …"
  },
  {
    "anchor": "clusterroles",
    "content": " It has several uses. You can use a ClusterRole to define permissions on namespaced resources and be granted access within individual namespace(s) define permissions on namespaced resources and be granted access across all namespaces define permissions on cluster-scoped resources ",
    "fullLink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/#clusterroles",
    "heading": "ClusterRoles",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/Kubernetes RBAC",
    "permalink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/",
    "title": "Kubernetes RBAC",
    "truncatedContent": " It has several uses. You can use a ClusterRole to define permissions …"
  },
  {
    "anchor": "rolebinding-and-clusterrolebinding",
    "content": " A role binding grants the permissions defined in a role to a user or set of users. It holds a list of subjects (users, groups, or service accounts). A RoleBinding grants permissions within a specific namespace whereas a ClusterRoleBinding grants that access cluster-wide. ",
    "fullLink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/#rolebinding-and-clusterrolebinding",
    "heading": "RoleBinding and ClusterRoleBinding",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/Kubernetes RBAC",
    "permalink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/",
    "title": "Kubernetes RBAC",
    "truncatedContent": " A role binding grants the permissions defined in a role to a user or …"
  },
  {
    "anchor": "documentation-and-websites-referredhttpskubernetesiodocsreferenceaccess-authn-authzauthentication",
    "content": "Documentation and Websites Referred",
    "fullLink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/#documentation-and-websites-referredhttpskubernetesiodocsreferenceaccess-authn-authzauthentication",
    "heading": "",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/Kubernetes RBAC",
    "permalink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/",
    "title": "Kubernetes RBAC",
    "truncatedContent": "Documentation and Websites Referred"
  },
  {
    "anchor": "service-account",
    "content": " A service account provides an identity for processes that run in a Pod, and maps to a ServiceAccount object. Token associated to a SA is stored at /var/run/secrets/kubernetes.io/serviceaccount/token inside a pod We can configure a SA not to mount a secret in pod using kubectl apply -f - \u003c",
    "fullLink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/#service-account",
    "heading": "Service Account",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/Kubernetes RBAC",
    "permalink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/",
    "title": "Kubernetes RBAC",
    "truncatedContent": " A service account provides an identity for processes that run in a …"
  },
  {
    "anchor": "step-1-create-a-new-service-account",
    "content": "kubectl create serviceaccount external ",
    "fullLink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/#step-1-create-a-new-service-account",
    "heading": "Step 1: Create a new Service Account:",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/Kubernetes RBAC",
    "permalink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/",
    "title": "Kubernetes RBAC",
    "truncatedContent": "kubectl create serviceaccount external "
  },
  {
    "anchor": "step-2-create-a-new-pod-with-external-service-account",
    "content": "kubectl run external-pod --image=nginx --dry-run=client -o yaml Add following contents under .spec\nserviceAccountName: external Final File will look like this:\nkubectl apply -f - \u003c",
    "fullLink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/#step-2-create-a-new-pod-with-external-service-account",
    "heading": "Step 2: Create a new POD with External Service Account",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/Kubernetes RBAC",
    "permalink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/",
    "title": "Kubernetes RBAC",
    "truncatedContent": "kubectl run external-pod --image=nginx --dry-run=client -o yaml Add …"
  },
  {
    "anchor": "step-3-verification",
    "content": "kubectl get pods kubectl get pod external -o yaml ",
    "fullLink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/#step-3-verification",
    "heading": "Step 3: Verification",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/Kubernetes RBAC",
    "permalink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/",
    "title": "Kubernetes RBAC",
    "truncatedContent": "kubectl get pods kubectl get pod external -o yaml "
  },
  {
    "anchor": "step-4-fetch-the-token-of-a-pod",
    "content": "kubectl exec -it external-pod -- bash cat /var/run/secrets/kubernetes.io/serviceaccount/token ",
    "fullLink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/#step-4-fetch-the-token-of-a-pod",
    "heading": "Step 4: Fetch the Token of a POD",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/Kubernetes RBAC",
    "permalink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/",
    "title": "Kubernetes RBAC",
    "truncatedContent": "kubectl exec -it external-pod -- bash cat …"
  },
  {
    "anchor": "step-5-make-a-request-to-kubernetes-using-token",
    "content": "curl -k curl -k /api/v1 --header \"Authorization: Bearer \" ",
    "fullLink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/#step-5-make-a-request-to-kubernetes-using-token",
    "heading": "Step 5: Make a Request to Kubernetes using Token",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/Kubernetes RBAC",
    "permalink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/",
    "title": "Kubernetes RBAC",
    "truncatedContent": "curl -k curl -k /api/v1 --header \u0026#34;Authorization: Bearer \u0026#34; "
  },
  {
    "anchor": "create-user-with-certificate",
    "content": "Create user with certificate",
    "fullLink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/#create-user-with-certificate",
    "heading": "Create user with certificate",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/Kubernetes RBAC",
    "permalink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/",
    "title": "Kubernetes RBAC",
    "truncatedContent": "Create user with certificate"
  },
  {
    "anchor": "step-1-create-a-new-private-key--and-csr",
    "content": "mkdir /root/certificates cd /root/certificates openssl genrsa -out john.key 2048 openssl req -new -key john.key -out john.csr -subj \"/CN=john/O=finance\" ",
    "fullLink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/#step-1-create-a-new-private-key--and-csr",
    "heading": "Step 1: Create a new private key  and CSR",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/Kubernetes RBAC",
    "permalink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/",
    "title": "Kubernetes RBAC",
    "truncatedContent": "mkdir /root/certificates cd /root/certificates openssl genrsa -out …"
  },
  {
    "anchor": "step-2-decode-the-csr",
    "content": "cat john.csr | base64 | tr -d '\\n' ",
    "fullLink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/#step-2-decode-the-csr",
    "heading": "Step 2: Decode the csr",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/Kubernetes RBAC",
    "permalink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/",
    "title": "Kubernetes RBAC",
    "truncatedContent": "cat john.csr | base64 | tr -d \u0026#39;\\n\u0026#39; "
  },
  {
    "anchor": "step-3-generate-the-kubernetes-signing-request",
    "content": "nano csr-requests.yaml kubectl apply -f - \u003c",
    "fullLink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/#step-3-generate-the-kubernetes-signing-request",
    "heading": "Step 3: Generate the Kubernetes Signing Request",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/Kubernetes RBAC",
    "permalink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/",
    "title": "Kubernetes RBAC",
    "truncatedContent": "nano csr-requests.yaml kubectl apply -f - \u0026lt;"
  },
  {
    "anchor": "step-4-apply-the-signing-requests",
    "content": "kubectl apply -f csr-requests.yaml You can optionally verify with kubectl get csr\n",
    "fullLink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/#step-4-apply-the-signing-requests",
    "heading": "Step 4: Apply the Signing Requests:",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/Kubernetes RBAC",
    "permalink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/",
    "title": "Kubernetes RBAC",
    "truncatedContent": "kubectl apply -f csr-requests.yaml You can optionally verify with …"
  },
  {
    "anchor": "step-5-approve-the-csr",
    "content": "kubectl certificate approve john-csr ",
    "fullLink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/#step-5-approve-the-csr",
    "heading": "Step 5: Approve the csr",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/Kubernetes RBAC",
    "permalink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/",
    "title": "Kubernetes RBAC",
    "truncatedContent": "kubectl certificate approve john-csr "
  },
  {
    "anchor": "step-6-download-the-certificate-from-csr",
    "content": "kubectl get csr john-csr -o jsonpath='{.status.certificate}' | base64 -d \u003e john.crt ",
    "fullLink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/#step-6-download-the-certificate-from-csr",
    "heading": "Step 6: Download the Certificate from csr",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/Kubernetes RBAC",
    "permalink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/",
    "title": "Kubernetes RBAC",
    "truncatedContent": "kubectl get csr john-csr -o jsonpath=\u0026#39;{.status.certificate}\u0026#39; | base64 …"
  },
  {
    "anchor": "step-7-create-a-new-context",
    "content": "kubectl config set-credentials john --client-certificate=john.crt --client-key=john.key ",
    "fullLink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/#step-7-create-a-new-context",
    "heading": "Step 7: Create a new context",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/Kubernetes RBAC",
    "permalink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/",
    "title": "Kubernetes RBAC",
    "truncatedContent": "kubectl config set-credentials john --client-certificate=john.crt …"
  },
  {
    "anchor": "step-8-set-new-context",
    "content": "kubectl config set-context john-context --cluster [YOUR-CLUSTER-HERE] --user=john ",
    "fullLink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/#step-8-set-new-context",
    "heading": "Step 8: Set new Context",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/Kubernetes RBAC",
    "permalink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/",
    "title": "Kubernetes RBAC",
    "truncatedContent": "kubectl config set-context john-context --cluster [YOUR-CLUSTER-HERE] …"
  },
  {
    "anchor": "step-9-use-context-to-verify",
    "content": "kubectl --context=john-context get pods ",
    "fullLink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/#step-9-use-context-to-verify",
    "heading": "Step 9: Use Context to Verify",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/Kubernetes RBAC",
    "permalink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/",
    "title": "Kubernetes RBAC",
    "truncatedContent": "kubectl --context=john-context get pods "
  },
  {
    "anchor": "step-10-create-rbac-role-allowing-list-pods-operation",
    "content": "kubectl apply -f - \u003c",
    "fullLink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/#step-10-create-rbac-role-allowing-list-pods-operation",
    "heading": "Step 10: Create RBAC Role Allowing List PODS Operation",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/Kubernetes RBAC",
    "permalink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/",
    "title": "Kubernetes RBAC",
    "truncatedContent": "kubectl apply -f - \u0026lt;"
  },
  {
    "anchor": "step-11-create-a-new-role-binding",
    "content": "kubectl apply -f - \u003c",
    "fullLink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/#step-11-create-a-new-role-binding",
    "heading": "Step 11: Create a New Role Binding",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/Kubernetes RBAC",
    "permalink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/",
    "title": "Kubernetes RBAC",
    "truncatedContent": "kubectl apply -f - \u0026lt;"
  },
  {
    "anchor": "step-12-verify-permissions",
    "content": "kubectl --context=john-context get pods ",
    "fullLink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/#step-12-verify-permissions",
    "heading": "Step 12: Verify Permissions",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/Kubernetes RBAC",
    "permalink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/",
    "title": "Kubernetes RBAC",
    "truncatedContent": "kubectl --context=john-context get pods "
  },
  {
    "anchor": "step-13-delete-resources-created-in-this-lab",
    "content": "Step 13: Delete Resources Created in this Lab",
    "fullLink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/#step-13-delete-resources-created-in-this-lab",
    "heading": "Step 13: Delete Resources Created in this Lab",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/Kubernetes RBAC",
    "permalink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/",
    "title": "Kubernetes RBAC",
    "truncatedContent": "Step 13: Delete Resources Created in this Lab"
  },
  {
    "anchor": "namespace-access-control",
    "content": "kubectl apply -f - \u003c",
    "fullLink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/#namespace-access-control",
    "heading": "NameSpace Access Control",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/Kubernetes RBAC",
    "permalink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/",
    "title": "Kubernetes RBAC",
    "truncatedContent": "kubectl apply -f - \u0026lt;"
  },
  {
    "anchor": "teama-rolebindingyaml",
    "content": "kubectl apply -f - \u003c",
    "fullLink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/#teama-rolebindingyaml",
    "heading": "teama-rolebinding.yaml",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/Kubernetes RBAC",
    "permalink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/",
    "title": "Kubernetes RBAC",
    "truncatedContent": "kubectl apply -f - \u0026lt;"
  },
  {
    "anchor": "clusterrole--clusterrolebindinghttpskubernetesiodocsreferenceaccess-authn-authzauthorization",
    "content": "ClusterRole \u0026 ClusterRoleBinding",
    "fullLink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/#clusterrole--clusterrolebindinghttpskubernetesiodocsreferenceaccess-authn-authzauthorization",
    "heading": "",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/Kubernetes RBAC",
    "permalink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/",
    "title": "Kubernetes RBAC",
    "truncatedContent": "ClusterRole \u0026amp; ClusterRoleBinding"
  },
  {
    "anchor": "step-1-delete-role-and-role-binding",
    "content": "Step 1: Delete Role and Role Binding",
    "fullLink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/#step-1-delete-role-and-role-binding",
    "heading": "Step 1: Delete Role and Role Binding",
    "level": 5,
    "linkIfNotFAQ": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/Kubernetes RBAC",
    "permalink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/",
    "title": "Kubernetes RBAC",
    "truncatedContent": "Step 1: Delete Role and Role Binding"
  },
  {
    "anchor": "step-2-create-a-cluster-role",
    "content": "kubectl apply -f - \u003c",
    "fullLink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/#step-2-create-a-cluster-role",
    "heading": "Step 2: Create a Cluster Role",
    "level": 5,
    "linkIfNotFAQ": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/Kubernetes RBAC",
    "permalink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/",
    "title": "Kubernetes RBAC",
    "truncatedContent": "kubectl apply -f - \u0026lt;"
  },
  {
    "anchor": "step-3-create-a-cluster-role-binding-for-a-serviceaccount-named-external-in-default-namespace-make-sure-to-create-sa-in-right-namespace",
    "content": "kubectl apply -f - \u003c",
    "fullLink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/#step-3-create-a-cluster-role-binding-for-a-serviceaccount-named-external-in-default-namespace-make-sure-to-create-sa-in-right-namespace",
    "heading": "Step 3: Create a Cluster Role Binding for a ServiceAccount named external in default namespace (make sure to create sa in right namespace)",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/Kubernetes RBAC",
    "permalink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/",
    "title": "Kubernetes RBAC",
    "truncatedContent": "kubectl apply -f - \u0026lt;"
  },
  {
    "anchor": "step-4-verify-permissions",
    "content": "curl -k /api/v1/namespaces/default/pods --header \"Authorization: Bearer \" ",
    "fullLink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/#step-4-verify-permissions",
    "heading": "Step 4: Verify Permissions",
    "level": 5,
    "linkIfNotFAQ": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/Kubernetes RBAC",
    "permalink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/",
    "title": "Kubernetes RBAC",
    "truncatedContent": "curl -k /api/v1/namespaces/default/pods --header \u0026#34;Authorization: …"
  },
  {
    "anchor": "step-5-create-a-new-namespace",
    "content": "kubectl create namespace external curl -k /api/v1/namespaces/external/pods --header \"Authorization: Bearer \" ",
    "fullLink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/#step-5-create-a-new-namespace",
    "heading": "Step 5: Create a new Namespace",
    "level": 5,
    "linkIfNotFAQ": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/Kubernetes RBAC",
    "permalink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/",
    "title": "Kubernetes RBAC",
    "truncatedContent": "kubectl create namespace external curl -k …"
  },
  {
    "anchor": "step-6-delete-cluster-role-binding",
    "content": " Verify if you receive forbidden error. curl -k /api/v1/namespaces/external/pods --header \"Authorization: Bearer \" ",
    "fullLink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/#step-6-delete-cluster-role-binding",
    "heading": "Step 6: Delete Cluster Role Binding",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/Kubernetes RBAC",
    "permalink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/",
    "title": "Kubernetes RBAC",
    "truncatedContent": " Verify if you receive forbidden error. curl -k …"
  },
  {
    "anchor": "step-7-create-role-binding-with-clusterrole",
    "content": "kubectl apply -f - \u003c",
    "fullLink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/#step-7-create-role-binding-with-clusterrole",
    "heading": "Step 7: Create Role Binding with ClusterRole",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/Kubernetes RBAC",
    "permalink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/",
    "title": "Kubernetes RBAC",
    "truncatedContent": "kubectl apply -f - \u0026lt;"
  },
  {
    "anchor": "step-8-verification",
    "content": "curl -k /api/v1/namespaces/external/pods --header \"Authorization: Bearer \" curl -k /api/v1/namespaces/default/pods --header \"Authorization: Bearer \" You can also assign cluster-Admin role using below kubectl apply -f - \u003c",
    "fullLink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/#step-8-verification",
    "heading": "Step 8: Verification",
    "level": 4,
    "linkIfNotFAQ": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/Kubernetes RBAC",
    "permalink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/",
    "title": "Kubernetes RBAC",
    "truncatedContent": "curl -k /api/v1/namespaces/external/pods --header \u0026#34;Authorization: …"
  },
  {
    "anchor": "role-with-imperative-commands",
    "content": "Role with Imperative commands",
    "fullLink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/#role-with-imperative-commands",
    "heading": "Role with Imperative commands",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/Kubernetes RBAC",
    "permalink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/",
    "title": "Kubernetes RBAC",
    "truncatedContent": "Role with Imperative commands"
  },
  {
    "anchor": "create-a-role-named-pod-reader-that-allows-users-to-perform-get-watch-and-list-on-pods",
    "content": " kubectl create role pod-reader --verb=get --verb=list --verb=watch --resource=pods ",
    "fullLink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/#create-a-role-named-pod-reader-that-allows-users-to-perform-get-watch-and-list-on-pods",
    "heading": "Create a Role named “pod-reader” that allows users to perform get, watch and list on pods:",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/Kubernetes RBAC",
    "permalink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/",
    "title": "Kubernetes RBAC",
    "truncatedContent": " kubectl create role pod-reader --verb=get --verb=list --verb=watch …"
  },
  {
    "anchor": "create-a-role-named-pod-reader-with-resourcenames-specified",
    "content": "kubectl create role pod-reader --verb=get --resource=pods --resource-name=readablepod --resource-name=anotherpod ",
    "fullLink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/#create-a-role-named-pod-reader-with-resourcenames-specified",
    "heading": "Create a Role named “pod-reader” with resourceNames specified:",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/Kubernetes RBAC",
    "permalink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/",
    "title": "Kubernetes RBAC",
    "truncatedContent": "kubectl create role pod-reader --verb=get --resource=pods …"
  },
  {
    "anchor": "create-a-role-named-foo-with-apigroups-specified",
    "content": "kubectl create role foo --verb=get,list,watch --resource=replicasets.apps ",
    "fullLink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/#create-a-role-named-foo-with-apigroups-specified",
    "heading": "Create a Role named “foo” with apiGroups specified:",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/Kubernetes RBAC",
    "permalink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/",
    "title": "Kubernetes RBAC",
    "truncatedContent": "kubectl create role foo --verb=get,list,watch …"
  },
  {
    "anchor": "create-a-role-named-foo-with-subresource-permissions",
    "content": "kubectl create role foo --verb=get,list,watch --resource=pods,pods/status ",
    "fullLink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/#create-a-role-named-foo-with-subresource-permissions",
    "heading": "Create a Role named “foo” with subresource permissions:",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/Kubernetes RBAC",
    "permalink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/",
    "title": "Kubernetes RBAC",
    "truncatedContent": "kubectl create role foo --verb=get,list,watch …"
  },
  {
    "anchor": "create-a-role-named-my-component-lease-holder-with-permissions-to-getupdate-a-resource-with-a-specific-name",
    "content": "kubectl create role my-component-lease-holder --verb=get,list,watch,update --resource=lease --resource-name=my-component ",
    "fullLink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/#create-a-role-named-my-component-lease-holder-with-permissions-to-getupdate-a-resource-with-a-specific-name",
    "heading": "Create a Role named “my-component-lease-holder” with permissions to get/update a resource with a specific name:",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/Kubernetes RBAC",
    "permalink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/",
    "title": "Kubernetes RBAC",
    "truncatedContent": "kubectl create role my-component-lease-holder …"
  },
  {
    "anchor": "clusterrole",
    "content": "CLusterROle",
    "fullLink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/#clusterrole",
    "heading": "CLusterROle",
    "level": 2,
    "linkIfNotFAQ": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/Kubernetes RBAC",
    "permalink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/",
    "title": "Kubernetes RBAC",
    "truncatedContent": "CLusterROle"
  },
  {
    "anchor": "create-a-clusterrole-named-pod-reader-that-allows-user-to-perform-get-watch-and-list-on-pods",
    "content": "kubectl create clusterrole pod-reader --verb=get,list,watch --resource=pods ",
    "fullLink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/#create-a-clusterrole-named-pod-reader-that-allows-user-to-perform-get-watch-and-list-on-pods",
    "heading": "Create a ClusterRole named “pod-reader” that allows user to perform get, watch and list on pods:",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/Kubernetes RBAC",
    "permalink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/",
    "title": "Kubernetes RBAC",
    "truncatedContent": "kubectl create clusterrole pod-reader --verb=get,list,watch …"
  },
  {
    "anchor": "create-a-clusterrole-named-pod-reader-with-resourcenames-specified",
    "content": "kubectl create clusterrole pod-reader --verb=get --resource=pods --resource-name=readablepod --resource-name=anotherpod ",
    "fullLink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/#create-a-clusterrole-named-pod-reader-with-resourcenames-specified",
    "heading": "Create a ClusterRole named “pod-reader” with resourceNames specified:",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/Kubernetes RBAC",
    "permalink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/",
    "title": "Kubernetes RBAC",
    "truncatedContent": "kubectl create clusterrole pod-reader --verb=get --resource=pods …"
  },
  {
    "anchor": "create-a-clusterrole-named-foo-with-apigroups-specified",
    "content": "kubectl create clusterrole foo --verb=get,list,watch --resource=replicasets.apps ",
    "fullLink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/#create-a-clusterrole-named-foo-with-apigroups-specified",
    "heading": "Create a ClusterRole named “foo” with apiGroups specified:",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/Kubernetes RBAC",
    "permalink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/",
    "title": "Kubernetes RBAC",
    "truncatedContent": "kubectl create clusterrole foo --verb=get,list,watch …"
  },
  {
    "anchor": "create-a-clusterrole-named-foo-with-subresource-permissions",
    "content": "kubectl create clusterrole foo --verb=get,list,watch --resource=pods,pods/status ",
    "fullLink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/#create-a-clusterrole-named-foo-with-subresource-permissions",
    "heading": "Create a ClusterRole named “foo” with subresource permissions:",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/Kubernetes RBAC",
    "permalink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/",
    "title": "Kubernetes RBAC",
    "truncatedContent": "kubectl create clusterrole foo --verb=get,list,watch …"
  },
  {
    "anchor": "rolebindings-with-imperative-commands",
    "content": "kubectl create clusterrolebinding myapp-view-binding --clusterrole=view --serviceaccount=acme:myapp kubectl create rolebinding my-sa-view \\ --clusterrole=view \\ --serviceaccount=my-namespace:my-sa \\ --namespace=my-namespace ",
    "fullLink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/#rolebindings-with-imperative-commands",
    "heading": "Rolebindings with Imperative commands",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/Kubernetes RBAC",
    "permalink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/",
    "title": "Kubernetes RBAC",
    "truncatedContent": "kubectl create clusterrolebinding myapp-view-binding …"
  },
  {
    "anchor": "kubernetes-rbac-setup",
    "content": " Authentication Authorization ",
    "fullLink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/#kubernetes-rbac-setup",
    "heading": "Kubernetes RBAC Setup",
    "level": 1,
    "linkIfNotFAQ": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/Kubernetes RBAC",
    "permalink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/",
    "title": "Kubernetes RBAC",
    "truncatedContent": " Authentication Authorization "
  },
  {
    "anchor": "role-binding",
    "content": "The rolebinding.yaml file defines a role binding named read-pods that binds the pod-reader role to the user jack in the default namespace.\n",
    "fullLink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/#role-binding",
    "heading": "Role Binding",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/Kubernetes RBAC",
    "permalink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/",
    "title": "Kubernetes RBAC",
    "truncatedContent": "The rolebinding.yaml file defines a role binding named read-pods that …"
  },
  {
    "anchor": "cluster-role",
    "content": "The clusterrole.yaml file contains the configuration for creating a cluster role named secret-reader. This cluster role allows the user to perform actions like get, watch, and list on secrets resources.\n",
    "fullLink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/#cluster-role",
    "heading": "Cluster Role",
    "level": 2,
    "linkIfNotFAQ": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/Kubernetes RBAC",
    "permalink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/",
    "title": "Kubernetes RBAC",
    "truncatedContent": "The clusterrole.yaml file contains the configuration for creating a …"
  },
  {
    "anchor": "role-binding-namespace-level",
    "content": "The rolebinding.yaml file defines a role binding named read-secrets that binds the secret-reader cluster role to the user dev in the development namespace.\n",
    "fullLink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/#role-binding-namespace-level",
    "heading": "Role Binding (Namespace-level)",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/Kubernetes RBAC",
    "permalink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/",
    "title": "Kubernetes RBAC",
    "truncatedContent": "The rolebinding.yaml file defines a role binding named read-secrets …"
  },
  {
    "anchor": "cluster-role-binding",
    "content": "The clusterrolebinding.yaml file contains the configuration for creating a cluster role binding named read-secrets-global. This cluster role binding binds the secret-reader cluster role to the user riya globally.\n",
    "fullLink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/#cluster-role-binding",
    "heading": "Cluster Role Binding",
    "level": 2,
    "linkIfNotFAQ": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/Kubernetes RBAC",
    "permalink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/",
    "title": "Kubernetes RBAC",
    "truncatedContent": "The clusterrolebinding.yaml file contains the configuration for …"
  },
  {
    "anchor": "securitycontexthttpskubernetesiodocstasksconfigure-pod-containersecurity-context",
    "content": " A Kubernetes security context is a set of security settings that are applied at the pod or container level. It provides you with the ability to define privilege and access controls for pods or containers. Example 1 kubectl apply -f - \u003c",
    "fullLink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/#securitycontexthttpskubernetesiodocstasksconfigure-pod-containersecurity-context",
    "heading": "",
    "level": 2,
    "linkIfNotFAQ": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/Kubernetes RBAC",
    "permalink": "/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/",
    "title": "Kubernetes RBAC",
    "truncatedContent": " A Kubernetes security context is a set of security settings that are …"
  },
  {
    "anchor": "kubernetes-installation-on-centos-9",
    "content": "Kubernetes Installation on Centos 9",
    "fullLink": "/docs/kubernetes/docs/miscellaneous/kubernetes-on-centos/#kubernetes-installation-on-centos-9",
    "heading": "Kubernetes Installation on Centos 9",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/docs/miscellaneous/kubernetes-on-centos/Kubernetes-on-Centos",
    "permalink": "/docs/kubernetes/docs/miscellaneous/kubernetes-on-centos/",
    "title": "Kubernetes-on-Centos",
    "truncatedContent": "Kubernetes Installation on Centos 9"
  },
  {
    "anchor": "common-steps-for-master-and-worker-node",
    "content": "sudo tee /etc/sysctl.d/99-k8s-cri.conf \u003e/dev/null \u003c\u003cEOF net.bridge.bridge-nf-call-iptables=1 net.ipv4.ip_forward=1 net.bridge.bridge-nf-call-ip6tables=1 EOF update the setting without restarting the OS sysctl --system modprobe overlay modprobe br_netfilter echo -e overlay\\\\nbr_netfilter \u003e /etc/modules-load.d/k8s.conf install from EPEL Install iptables legacy dnf --enablerepo=epel -y install iptables-legacy alternatives --config iptables There are 2 programs which provide 'iptables'. Selection Command ----------------------------------------------- *+ 1 /usr/sbin/iptables-nft 2 /usr/sbin/iptables-legacy switch to [iptables-legacy] Enter to keep the current selection[+], or type selection number: 2 set Swap off setting swapoff -a vi /etc/fstab comment out the Swap line /dev/mapper/cs-swap none swap defaults 0 0 Install Cri and other software dnf -y install centos-release-okd-4.14 sed -i -e \"s/enabled=1/enabled=0/g\" /etc/yum.repos.d/CentOS-OKD-4.14.repo dnf --enablerepo=centos-okd-4.14 -y install cri-o systemctl enable --now crio cat \u003c\u003c'EOF' \u003e /etc/yum.repos.d/kubernetes.repo [kubernetes] name=Kubernetes baseurl=https://packages.cloud.google.com/yum/repos/kubernetes-el7-$basearch enabled=0 gpgcheck=1 repo_gpgcheck=1 gpgkey=https://packages.cloud.google.com/yum/doc/yum-key.gpg https://packages.cloud.google.com/yum/doc/rpm-package-key.gpg EOF Install kubelet and cri-tools dnf --enablerepo=kubernetes -y install kubeadm kubelet cri-tools iproute-tc container-selinux Restart kubelet systemctl enable kubelet ",
    "fullLink": "/docs/kubernetes/docs/miscellaneous/kubernetes-on-centos/#common-steps-for-master-and-worker-node",
    "heading": "Common Steps for master and worker node",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/docs/miscellaneous/kubernetes-on-centos/Kubernetes-on-Centos",
    "permalink": "/docs/kubernetes/docs/miscellaneous/kubernetes-on-centos/",
    "title": "Kubernetes-on-Centos",
    "truncatedContent": "sudo tee /etc/sysctl.d/99-k8s-cri.conf \u0026gt;/dev/null \u0026lt;\u0026lt;EOF …"
  },
  {
    "anchor": "on-master-node",
    "content": " Bootstrap Kubernetes Cluster kubeadm init --apiserver-advertise-address=10.224.29.85 --pod-network-cidr=192.168.0.0/16 --cri-socket=unix:///var/run/crio/crio.sock Run the below command on master nodes to run kubectl command To start using your cluster, you need to run the following as a regular user: mkdir -p $HOME/.kube sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config sudo chown $(id -u):$(id -g) $HOME/.kube/config Alternatively, if you are the root user, you can run: export KUBECONFIG=/etc/kubernetes/admin.conf Execute the below command on worker nodes\nOn worker node kubeadm join 10.224.29.85:6443 --token sfkbuw.h6oloizivsdsovbs \\ --discovery-token-ca-cert-hash sha256:664454f0d923630af2ac8e65bf14ff1e63bd1040b6d8aaf5665d016d3a6dbdf8 ",
    "fullLink": "/docs/kubernetes/docs/miscellaneous/kubernetes-on-centos/#on-master-node",
    "heading": "On Master node:",
    "level": 3,
    "linkIfNotFAQ": "/docs/kubernetes/docs/miscellaneous/kubernetes-on-centos/Kubernetes-on-Centos",
    "permalink": "/docs/kubernetes/docs/miscellaneous/kubernetes-on-centos/",
    "title": "Kubernetes-on-Centos",
    "truncatedContent": " Bootstrap Kubernetes Cluster kubeadm init …"
  }
]