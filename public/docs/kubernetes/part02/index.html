
<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.122.0">
<meta name="robots" content="index, follow">

<link rel="shortcut icon" href="/favicons/favicon.ico" >

<title>Part 2 | Documentation</title>
<meta name="description" content="

Topics:

NameSpace
Create a namespace
Switch from one ns …">
<meta property="og:title" content="Part 2" />
<meta property="og:description" content="Topics: NameSpace Create a namespace Switch from one ns to another Resource Quota Resource Limits POD Single Container pod MultiContainer pod Login to a pod Copy to a pod and from a pod(container) How to check logs from a container Environment Variables of pod initContainer Command and Argument of a pod pullSecret of a pod pod restart policy imagePull policy How to delete a pod Pod priority Pod Resources Pod Quality of Services(QOS) Advance Scheduling of pod Scheduler Nodename nodeSelector Node Affinity Taints and Tolerations Pod affinity and anti affinity Priority and PriorityClass Preemption Disruption Budget Topology and Constraints Descheduler Namespace Namespaces are a way to divide cluster resources between multiple users (via resource quota)." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/docs/kubernetes/part02/" /><meta property="article:section" content="docs" />

<meta property="article:modified_time" content="2024-06-01T18:32:23+05:30" />

<meta itemprop="name" content="Part 2">
<meta itemprop="description" content="Topics: NameSpace Create a namespace Switch from one ns to another Resource Quota Resource Limits POD Single Container pod MultiContainer pod Login to a pod Copy to a pod and from a pod(container) How to check logs from a container Environment Variables of pod initContainer Command and Argument of a pod pullSecret of a pod pod restart policy imagePull policy How to delete a pod Pod priority Pod Resources Pod Quality of Services(QOS) Advance Scheduling of pod Scheduler Nodename nodeSelector Node Affinity Taints and Tolerations Pod affinity and anti affinity Priority and PriorityClass Preemption Disruption Budget Topology and Constraints Descheduler Namespace Namespaces are a way to divide cluster resources between multiple users (via resource quota).">
<meta itemprop="dateModified" content="2024-06-01T18:32:23+05:30" />
<meta itemprop="wordCount" content="4052">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Part 2"/>
<meta name="twitter:description" content="Topics: NameSpace Create a namespace Switch from one ns to another Resource Quota Resource Limits POD Single Container pod MultiContainer pod Login to a pod Copy to a pod and from a pod(container) How to check logs from a container Environment Variables of pod initContainer Command and Argument of a pod pullSecret of a pod pod restart policy imagePull policy How to delete a pod Pod priority Pod Resources Pod Quality of Services(QOS) Advance Scheduling of pod Scheduler Nodename nodeSelector Node Affinity Taints and Tolerations Pod affinity and anti affinity Priority and PriorityClass Preemption Disruption Budget Topology and Constraints Descheduler Namespace Namespaces are a way to divide cluster resources between multiple users (via resource quota)."/>




<link rel="preload" href="/scss/main.min.723d31f72c8542b0efd4dc916a8b429bb3241885d5c0984bf341c1aad66aed50.css" as="style">
<link href="/scss/main.min.723d31f72c8542b0efd4dc916a8b429bb3241885d5c0984bf341c1aad66aed50.css" rel="stylesheet" integrity="">

<script
  src="https://code.jquery.com/jquery-3.6.0.min.js"
  integrity="sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK"
  crossorigin="anonymous"></script>
<script
  src="https://unpkg.com/lunr@2.3.9/lunr.min.js"
  integrity="sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli"
  crossorigin="anonymous"></script>
<link rel="stylesheet" href="/css/prism.css"/>
<script type="text/javascript"  src="/js/highlight-search.js"></script>
<script type="text/javascript"  src="/js/manage-side-panels.js"></script>
  </head>
  <body class="td-page highlightable">
    <header>
      
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
        <a class="navbar-brand" href="/">
		<span class="navbar-logo"><svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="217pt" height="232pt" viewBox="0 0 217 232"><g transform="translate(0.000000,232.000000) scale(0.100000,-0.100000)" fill="#000" stroke="none"><path d="M1017 2250c-397-48-698-367-731-775-9-106-3-113 66-87l55 20 11-71c6-39 10-72 9-73s-58-22-127-47c-104-37-124-48-122-64 7-37 56-150 88-205l34-56 66 25 66 26 65-72c206-226 513-322 808-252 367 88 634 417 635 784 0 43-4 77-10 77-5 0-32-9-60-20s-55-20-59-20c-5 0-12 26-16 59-4 32-20 96-36 142s-30 88-31 92c-2 5 54 29 124 55l128 46-31 55c-17 31-33 58-34 59-2 2-31-6-64-19l-61-22-23 29c-81 104-172 178-292 235-140 68-309 97-458 79zm226-299c90-24 136-46 206-101l52-41 61 20 60 20 26-31c15-17 35-44 44-59l17-28-52-19c-29-11-86-32-128-47l-76-27 24-58c26-66 43-144 43-201 0-22 2-39 5-39 2 0 27 9 55 20s55 20 60 20c17 0 10-63-14-131-127-359-580-484-862-237l-35 31-70-24-71-24-30 35c-37 43-97 164-104 212l-6 34 123 46 124 45-3 64c-2 35-5 66-7 68-2 1-27-5-55-14s-53-15-55-14c-2 2 1 29 7 59 32 179 185 352 361 409 112 36 192 39 3e2 12z"/><path d="M134 321c-77-33-95-169-29-231 19-18 36-23 71-23 40 0 51 4 75 30 50 56 47 153-5 202-26 25-80 35-112 22zm82-62c26-29 26-99 0-128-24-26-47-27-77-2-19 15-24 29-24 64 0 76 58 114 101 66z"/><path d="M1172 320c-27-12-44-52-33-82 4-12 31-32 61-47 30-14 58-34 64-43 26-43-50-76-99-44-15 10-26 12-30 6-10-16 4-29 44-40 62-17 114 13 114 65 0 35-19 53-80 81-54 23-67 46-41 72 15 15 62 16 88 2 23-12 35 3 16 19-20 17-77 23-104 11z"/><path d="M350 195V70h25c23 0 25 4 25 45v45h40c76 0 115 40 103 104-8 42-38 56-120 56h-73V195zm134 69c18-18 18-17 10-38-4-11-19-16-50-16-44 0-44 0-44 35 0 33 2 35 34 35 19 0 42-7 50-16z"/><path d="M6e2 195V70h90c83 0 90 2 90 20 0 16-8 19-62 22-63 3-63 3-66 36-3 31-2 32 36 32 36 0 39 2 34 25-4 21-10 25-38 25-30 0-34 3-34 25 0 24 2 25 65 25 58 0 65 2 65 20 0 19-7 20-90 20h-90V195z"/><path d="M850 195c0-117 1-125 20-125 17 0 19 8 22 83l3 82 55-82c41-62 61-83 78-83 22 0 22 2 22 125 0 117-1 125-20 125-17 0-19-8-22-82l-3-82-54 82c-42 65-59 82-77 82-24 0-24 0-24-125z"/><path d="M1360 195c0-104 2-125 15-125 12 0 15 13 15 60v60h65 65v-60c0-47 3-60 15-60 13 0 15 21 15 125s-2 125-15 125c-12 0-15-13-15-55v-55h-65-65v55c0 42-3 55-15 55-13 0-15-21-15-125z"/><path d="M1620 195c0-104 2-125 15-125s15 21 15 125-2 125-15 125-15-21-15-125z"/><path d="M1730 195c0-77 4-125 10-125s10 27 10 60v60h35c19 0 35 5 35 10 0 6-16 10-35 10-35 0-35 0-35 45v45h60c33 0 60 4 60 10s-30 10-70 10h-70V195z"/><path d="M1930 310c0-5 18-10 40-10h40V185c0-70 4-115 10-115s10 45 10 115v115h40c22 0 40 5 40 10 0 6-37 10-90 10s-90-4-90-10z"/></g></svg></span><span class="font-weight-bold">Documentation</span>
	</a>
	<div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
		<ul class="navbar-nav mt-2 mt-lg-0">
			
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				
				
				<a class="nav-link active" href="/docs/kubernetes/" ><i class='fas fa-binoculars'></i><span class="active">KUBERNETES DOCUMENTS</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				
				
				<a class="nav-link" href="/docs/ansible/" ><i class='fas fa-user-check'></i><span>Ansible</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				
				
				<a class="nav-link" href="/docs/azure-devops/" ><i class='fas fa-user-check'></i><span>Azure Devops</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				
				
				<a class="nav-link" href="/docs/devops/" ><i class='fas fa-user-check'></i><span>Devops </span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				
				
				<a class="nav-link" href="/docs/gitlab/" ><i class='fas fa-user-check'></i><span>Gitlab</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				
				
				<a class="nav-link" href="/docs/openshift/" ><i class='fas fa-user-check'></i><span>Openshift</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				
				
				<a class="nav-link" href="/docs/terraform/" ><i class='fas fa-user-check'></i><span>Terraform</span></a>
			</li>
			
			
			
		</ul>
	</div>
	<div class="navbar-nav d-none d-lg-block">
<form class="d-flex align-items-center">
  <input type="search"
  class="form-control td-search-input"
  placeholder="&#xf002; Search this site…"
  aria-label="Search this site…"
  autocomplete="off"
  
  data-offline-search-index-json-src="/offline-search-index.d81df5ea3c42d7ddf1c407fed2af5e96.json"
  data-offline-search-base-href="/"
  data-offline-search-max-results="20">
</form>
</div>
</nav>

      <div class="manage-panels">
    <button type="button" class="button-left" id="left-panel-manager" title="Hide sidebar">""</button>
    <button type="button" class="button-right" id="right-panel-manager" title="Hide sidebar">""</button>
</div>
    </header>
    <div class="container-fluid td-outer">
      <div class="td-main autonumbering">
        <div class="row flex-xl-nowrap">
          <aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            
<div id="td-sidebar-menu" class="td-sidebar__inner">
  <div id="content-mobile">
  <form class="td-sidebar__search d-flex align-items-center">
    
<form class="d-flex align-items-center">
  <input type="search"
  class="form-control td-search-input"
  placeholder="&#xf002; Search this site…"
  aria-label="Search this site…"
  autocomplete="off"
  
  data-offline-search-index-json-src="/offline-search-index.d81df5ea3c42d7ddf1c407fed2af5e96.json"
  data-offline-search-base-href="/"
  data-offline-search-max-results="20">
</form>

    <button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type="button" data-toggle="collapse" data-target="#td-section-nav" aria-controls="td-docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    </button>
  </form>
  </div>
  <div id="content-desktop"></div>
  <nav class="collapse td-sidebar-nav foldable-nav" id="td-section-nav">
    <ul class="td-sidebar-nav__section pr-md-3 ul-0">
      <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-docs-li">
  <a href="/docs/" title="DEVOPS Documents hub" class="align-left pl-0 td-sidebar-link td-sidebar-link__section tree-root" id="m-docs"><span class="">Docs</span></a>
  <ul class="ul-1">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-docskubernetes-li">
  <input type="checkbox" id="m-docskubernetes-check" checked/>
  <label for="m-docskubernetes-check"><a href="/docs/kubernetes/" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-docskubernetes"><i class="fas fa-compass"></i><span class="">KUBERNETES DOCUMENTS</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docskubernetespart01-li">
  <input type="checkbox" id="m-docskubernetespart01-check"/>
  <label for="m-docskubernetespart01-check"><a href="/docs/kubernetes/part01/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docskubernetespart01"><span class="">Part 1</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docskubernetespart02-li">
  <input type="checkbox" id="m-docskubernetespart02-check"/>
  <label for="m-docskubernetespart02-check"><a href="/docs/kubernetes/part02/" class="align-left pl-0  active td-sidebar-link td-sidebar-link__page" id="m-docskubernetespart02"><span class="td-sidebar-nav-active-item">Part 2</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docskubernetespart03-li">
  <input type="checkbox" id="m-docskubernetespart03-check"/>
  <label for="m-docskubernetespart03-check"><a href="/docs/kubernetes/part03/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docskubernetespart03"><span class="">Part 3</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docskubernetespart04-li">
  <input type="checkbox" id="m-docskubernetespart04-check"/>
  <label for="m-docskubernetespart04-check"><a href="/docs/kubernetes/part04/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docskubernetespart04"><span class="">Part 4</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docskubernetespart05-li">
  <input type="checkbox" id="m-docskubernetespart05-check"/>
  <label for="m-docskubernetespart05-check"><a href="/docs/kubernetes/part05/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docskubernetespart05"><span class="">Part 5</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docskubernetesdocsmiscellaneouscontainerbasics-li">
  <input type="checkbox" id="m-docskubernetesdocsmiscellaneouscontainerbasics-check"/>
  <label for="m-docskubernetesdocsmiscellaneouscontainerbasics-check"><a href="/docs/kubernetes/docs/miscellaneous/containerbasics/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docskubernetesdocsmiscellaneouscontainerbasics"><span class="">Container Basics</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docskubernetesdocsmiscellaneoushelm-overview-li">
  <input type="checkbox" id="m-docskubernetesdocsmiscellaneoushelm-overview-check"/>
  <label for="m-docskubernetesdocsmiscellaneoushelm-overview-check"><a href="/docs/kubernetes/docs/miscellaneous/helm-overview/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docskubernetesdocsmiscellaneoushelm-overview"><span class="">Helm Overview</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docskubernetesdocsmiscellaneouskubernetes-rbac-li">
  <input type="checkbox" id="m-docskubernetesdocsmiscellaneouskubernetes-rbac-check"/>
  <label for="m-docskubernetesdocsmiscellaneouskubernetes-rbac-check"><a href="/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docskubernetesdocsmiscellaneouskubernetes-rbac"><span class="">Kubernetes RBAC</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docskubernetesdocsmiscellaneouskubernetes-on-centos-li">
  <input type="checkbox" id="m-docskubernetesdocsmiscellaneouskubernetes-on-centos-check"/>
  <label for="m-docskubernetesdocsmiscellaneouskubernetes-on-centos-check"><a href="/docs/kubernetes/docs/miscellaneous/kubernetes-on-centos/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docskubernetesdocsmiscellaneouskubernetes-on-centos"><span class="">Kubernetes-on-Centos</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docskubernetesdocsmiscellaneouskuberneteshardway-li">
  <input type="checkbox" id="m-docskubernetesdocsmiscellaneouskuberneteshardway-check"/>
  <label for="m-docskubernetesdocsmiscellaneouskuberneteshardway-check"><a href="/docs/kubernetes/docs/miscellaneous/kuberneteshardway/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docskubernetesdocsmiscellaneouskuberneteshardway"><span class="">Kubernets Installation From Scatch on rocky 9</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docskubernetesdocsmiscellaneousminio-li">
  <input type="checkbox" id="m-docskubernetesdocsmiscellaneousminio-check"/>
  <label for="m-docskubernetesdocsmiscellaneousminio-check"><a href="/docs/kubernetes/docs/miscellaneous/minio/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docskubernetesdocsmiscellaneousminio"><span class="">The Object Store for AI Data Infrastructure</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsansible-li">
  <input type="checkbox" id="m-docsansible-check"/>
  <label for="m-docsansible-check"><a href="/docs/ansible/" title="Configuration Management Tool" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-docsansible"><i class="fas fa-user-check"></i><span class="">Ansible</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsazure-devops-li">
  <input type="checkbox" id="m-docsazure-devops-check"/>
  <label for="m-docsazure-devops-check"><a href="/docs/azure-devops/" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-docsazure-devops"><i class="fas fa-user-check"></i><span class="">Azure Devops</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsazure-devopsaks-deployment-li">
  <input type="checkbox" id="m-docsazure-devopsaks-deployment-check"/>
  <label for="m-docsazure-devopsaks-deployment-check"><a href="/docs/azure-devops/aks-deployment/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsazure-devopsaks-deployment"><span class="">AKS Deployment</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsazure-devopsazure-container-registry-li">
  <input type="checkbox" id="m-docsazure-devopsazure-container-registry-check"/>
  <label for="m-docsazure-devopsazure-container-registry-check"><a href="/docs/azure-devops/azure-container-registry/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsazure-devopsazure-container-registry"><span class="">Azure Container Registry</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsazure-devopsazure-devopsagent-li">
  <input type="checkbox" id="m-docsazure-devopsazure-devopsagent-check"/>
  <label for="m-docsazure-devopsazure-devopsagent-check"><a href="/docs/azure-devops/azure-devopsagent/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsazure-devopsazure-devopsagent"><span class="">Azure Devops Pipeline Agent</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsazure-devopsazure-devops-pipeline-li">
  <input type="checkbox" id="m-docsazure-devopsazure-devops-pipeline-check"/>
  <label for="m-docsazure-devopsazure-devops-pipeline-check"><a href="/docs/azure-devops/azure-devops-pipeline/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsazure-devopsazure-devops-pipeline"><span class="">Azure Devops Pipeline Basics</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsazure-devopsazure-dns-li">
  <input type="checkbox" id="m-docsazure-devopsazure-dns-check"/>
  <label for="m-docsazure-devopsazure-dns-check"><a href="/docs/azure-devops/azure-dns/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsazure-devopsazure-dns"><span class="">Azure DNS</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsazure-devopscertmanager-li">
  <input type="checkbox" id="m-docsazure-devopscertmanager-check"/>
  <label for="m-docsazure-devopscertmanager-check"><a href="/docs/azure-devops/certmanager/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsazure-devopscertmanager"><span class="">Cert Manager</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsazure-devopsingresscontroller-li">
  <input type="checkbox" id="m-docsazure-devopsingresscontroller-check"/>
  <label for="m-docsazure-devopsingresscontroller-check"><a href="/docs/azure-devops/ingresscontroller/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsazure-devopsingresscontroller"><span class="">IngressController</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsdevops-li">
  <input type="checkbox" id="m-docsdevops-check"/>
  <label for="m-docsdevops-check"><a href="/docs/devops/" title="Devops" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-docsdevops"><i class="fas fa-user-check"></i><span class="">Devops </span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsdevopsdevops-advance-li">
  <input type="checkbox" id="m-docsdevopsdevops-advance-check"/>
  <label for="m-docsdevopsdevops-advance-check"><a href="/docs/devops/devops-advance/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsdevopsdevops-advance"><span class="">Devops for Advance Level</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsdevopsdevopsl1-li">
  <input type="checkbox" id="m-docsdevopsdevopsl1-check"/>
  <label for="m-docsdevopsdevopsl1-check"><a href="/docs/devops/devopsl1/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsdevopsdevopsl1"><span class="">Devops for Begineers</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsdevopselk-stack-li">
  <input type="checkbox" id="m-docsdevopselk-stack-check"/>
  <label for="m-docsdevopselk-stack-check"><a href="/docs/devops/elk-stack/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsdevopselk-stack"><span class="">ELK statck </span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsdevopspostgresql-li">
  <input type="checkbox" id="m-docsdevopspostgresql-check"/>
  <label for="m-docsdevopspostgresql-check"><a href="/docs/devops/postgresql/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsdevopspostgresql"><span class="">Postgres Installation </span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsgitlab-li">
  <input type="checkbox" id="m-docsgitlab-check"/>
  <label for="m-docsgitlab-check"><a href="/docs/gitlab/" title="Project Management Tool" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-docsgitlab"><i class="fas fa-user-check"></i><span class="">Gitlab</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsterraform-li">
  <input type="checkbox" id="m-docsterraform-check"/>
  <label for="m-docsterraform-check"><a href="/docs/terraform/" title="Infrastracture as a Code" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-docsterraform"><i class="fas fa-user-check"></i><span class="">Terraform</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsterraformdiscussions-li">
  <input type="checkbox" id="m-docsterraformdiscussions-check"/>
  <label for="m-docsterraformdiscussions-check"><a href="/docs/terraform/discussions/" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-docsterraformdiscussions"><span class="">Discussions</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsterraformterraform-with-aws-li">
  <input type="checkbox" id="m-docsterraformterraform-with-aws-check"/>
  <label for="m-docsterraformterraform-with-aws-check"><a href="/docs/terraform/terraform-with-aws/" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-docsterraformterraform-with-aws"><span class="">Terraform with AWS</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsterraformterraform-with-azure-li">
  <input type="checkbox" id="m-docsterraformterraform-with-azure-check"/>
  <label for="m-docsterraformterraform-with-azure-check"><a href="/docs/terraform/terraform-with-azure/" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-docsterraformterraform-with-azure"><span class="">Terraform with Azure</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsterraformterraform-with-gcp-li">
  <input type="checkbox" id="m-docsterraformterraform-with-gcp-check"/>
  <label for="m-docsterraformterraform-with-gcp-check"><a href="/docs/terraform/terraform-with-gcp/" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-docsterraformterraform-with-gcp"><span class="">Terraform with Google Cloud</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsopenshift-li">
  <input type="checkbox" id="m-docsopenshift-check"/>
  <label for="m-docsopenshift-check"><a href="/docs/openshift/" title="Redhat Container Platform" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-docsopenshift"><i class="fas fa-user-check"></i><span class="">Openshift</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsopenshiftopenshift-baremetalmd-li">
  <input type="checkbox" id="m-docsopenshiftopenshift-baremetalmd-check"/>
  <label for="m-docsopenshiftopenshift-baremetalmd-check"><a href="/docs/openshift/openshift-baremetal.md/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsopenshiftopenshift-baremetalmd"><span class="">Openshift Baremetal</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsopenshiftocpsetup-li">
  <input type="checkbox" id="m-docsopenshiftocpsetup-check"/>
  <label for="m-docsopenshiftocpsetup-check"><a href="/docs/openshift/ocpsetup/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsopenshiftocpsetup"><span class="">Openshift Installation and Upgradation</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsopenshiftprerequisites-li">
  <input type="checkbox" id="m-docsopenshiftprerequisites-check"/>
  <label for="m-docsopenshiftprerequisites-check"><a href="/docs/openshift/prerequisites./" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsopenshiftprerequisites"><span class="">OpenShift Prerequisites</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsopenshiftopenshifttasks-li">
  <input type="checkbox" id="m-docsopenshiftopenshifttasks-check"/>
  <label for="m-docsopenshiftopenshifttasks-check"><a href="/docs/openshift/openshifttasks/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsopenshiftopenshifttasks"><span class="">OpenShift Tasks</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsopenshifttoc-li">
  <input type="checkbox" id="m-docsopenshifttoc-check"/>
  <label for="m-docsopenshifttoc-check"><a href="/docs/openshift/toc/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsopenshifttoc"><span class="">Openshift TOC</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsopenshiftpart-1-li">
  <input type="checkbox" id="m-docsopenshiftpart-1-check"/>
  <label for="m-docsopenshiftpart-1-check"><a href="/docs/openshift/part-1/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsopenshiftpart-1"><span class="">Part 1</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsopenshiftpart-2-li">
  <input type="checkbox" id="m-docsopenshiftpart-2-check"/>
  <label for="m-docsopenshiftpart-2-check"><a href="/docs/openshift/part-2/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsopenshiftpart-2"><span class="">Part 2</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsopenshiftopenid-azuread-li">
  <input type="checkbox" id="m-docsopenshiftopenid-azuread-check"/>
  <label for="m-docsopenshiftopenid-azuread-check"><a href="/docs/openshift/openid-azuread/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsopenshiftopenid-azuread"><span class="">Use and configure OpenID connect with Azure AD</span></a></label>
  
</li>
  </ul>
</li>
  </ul>
</li>
    </ul>
  </nav>
</div>

          </aside>
          <aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none">
            

    <div class="td-page-meta ml-2 pb-1 pt-2 mb-0">
        <div class="toc-title">Actions</div>
        <a href="/edit/master/content/docs/kubernetes/Part02.md" target="_blank" rel="noopener"><i class="fa fa-edit fa-fw"></i> Contribute to this page</a>
        <a href="/issues/new?issue%5Btitle=%f0%9f%93%83%20docs:%20update%20page%20docs/kubernetes/Part02.md" target="_blank" rel="noopener"><i class="fab fa-gitlab fa-fw"></i> Create a documentation issue</a>
       
    </div>

            
<div class="td-page-meta ml-2 pb-1 pt-2 mb-0 right-menu-toc">

    
        
            <div class="toc-title">Table of content</div>
            <div class="td-toc"><nav id="TableOfContents">
  <ul>
    <li><a href="#topics">Topics:</a>
      <ul>
        <li><a href="#namespacenamespace"><a href="#namespace">NameSpace</a></a></li>
        <li><a href="#podpod"><a href="#pod">POD</a></a></li>
        <li><a href="#advance-scheduling-of-podadvance-scheduling-of-pod"><a href="#advance-scheduling-of-pod">Advance Scheduling of pod</a></a>
          <ul>
            <li><a href="#namespace">Namespace</a></li>
            <li><a href="#to-see-which-kubernetes-resources-are-and-arent-in-a-namespace">To see which Kubernetes resources are and aren&rsquo;t in a namespace:</a></li>
            <li><a href="#as-per-above-example">As per above Example:</a></li>
            <li><a href="#resource-limits">Resource Limits</a></li>
            <li><a href="#pod">POD</a></li>
          </ul>
        </li>
        <li><a href="#some-useful-command-in-realtimeproduction">Some useful command in realtime(Production)</a></li>
        <li><a href="#define-environment-variables-for-a-container">Define Environment Variables for a Container</a>
          <ul>
            <li><a href="#problem-statement-if-the-pod-is-failing-becuase-of-environment-variable">Problem Statement if the pod is failing becuase of environment variable</a></li>
            <li><a href="#environment-variables">Environment Variables</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#command-and-arguments-with-kubernetes-pod">Command and Arguments with Kubernetes Pod</a>
      <ul>
        <li><a href="#example-1-command-override">Example 1: Command Override</a></li>
        <li><a href="#example-2-command-and-arguments">Example 2: Command and Arguments</a>
          <ul>
            <li><a href="#example-3-passing-environment-variables-to-commands">Example 3: Passing Environment Variables to Commands</a></li>
          </ul>
        </li>
        <li><a href="#example-4-passing-arguments-to-docker-entrypoint">Example 4: Passing Arguments to Docker Entrypoint</a></li>
        <li><a href="#multicontainer-pod">MultiContainer pod</a></li>
        <li><a href="#use-cases-for-multi-container-pods">Use Cases for Multi-Container Pods</a>
          <ul>
            <li><a href="#initcontainer">InitContainer</a></li>
            <li><a href="#sidecar-container">Sidecar container</a></li>
            <li><a href="#adapter-container">Adapter Container</a></li>
          </ul>
        </li>
        <li><a href="#resources-definition-in-pod">Resources definition in pod</a>
          <ul>
            <li><a href="#burstable-qos">Burstable QOS</a></li>
            <li><a href="#guranteed-qos">Guranteed QOS</a></li>
            <li><a href="#best-efforts">Best Efforts</a></li>
            <li><a href="#imagepullsecret">imagepullSecret</a>
              <ul>
                <li><a href="#steps-to-use-a-pull-secret-in-a-pod-yaml">Steps to Use a Pull Secret in a Pod YAML:</a></li>
              </ul>
            </li>
          </ul>
        </li>
        <li><a href="#create-a-kubernetes-secret">Create a Kubernetes Secret:</a></li>
      </ul>
    </li>
    <li><a href="#imagepullpolicy-examples">imagePullPolicy Examples</a>
      <ul>
        <li><a href="#1-ifnotpresent">1. IfNotPresent</a></li>
        <li><a href="#2-always">2. Always</a></li>
        <li><a href="#3-never">3. Never</a></li>
        <li><a href="#4-ifpresent">4. IfPresent</a></li>
        <li><a href="#5-default-ifnotpresent">5. Default (IfNotPresent)</a></li>
        <li><a href="#container-restartpolicy-in-pod-block">Container RestartPolicy in Pod block</a></li>
        <li><a href="#1-always">1. Always</a></li>
        <li><a href="#2-onfailure">2. OnFailure</a></li>
        <li><a href="#3-never-1">3. Never</a></li>
        <li><a href="#4-default-always">4. Default (Always)</a></li>
      </ul>
    </li>
    <li><a href="#advance-scheduling-of--pod">Advance Scheduling of  pod</a>
      <ul>
        <li>
          <ul>
            <li><a href="#using-nodename">Using nodeName</a></li>
            <li><a href="#steps-to-use-nodeselector">Steps to Use nodeSelector:</a></li>
            <li><a href="#taint-and-toleration">Taint and Toleration</a></li>
            <li><a href="#example--notequal-operator">Example : NotEqual Operator</a></li>
            <li><a href="#example-exists-operator-with-key">Example Exists Operator with Key</a></li>
          </ul>
        </li>
        <li><a href="#node-affinity">Node Affinity</a></li>
        <li><a href="#example-2-with-operator-notin">Example 2 with operator notin</a>
          <ul>
            <li><a href="#example-using-exists-operator">Example Using Exists Operator</a></li>
          </ul>
        </li>
        <li><a href="#example-with-preferred-affinity">Example with Preferred Affinity</a>
          <ul>
            <li><a href="#pod-affinity-and-anti-affinity">Pod Affinity and Anti Affinity</a></li>
            <li><a href="#another-example-with-weight">Another Example with weight</a></li>
            <li><a href="#pod-antiaffinity">Pod antiAffinity</a></li>
            <li><a href="#soft-antiaffinity">Soft AntiAffinity</a></li>
          </ul>
        </li>
        <li><a href="#pod-priorityhttpskubernetesiodocsconceptsscheduling-evictionpod-priority-preemption"><a href="https://kubernetes.io/docs/concepts/scheduling-eviction/pod-priority-preemption/">Pod Priority</a></a>
          <ul>
            <li><a href="#pod-priority-classes">Pod priority classes</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#pod-disruptions-budget">Pod Disruptions Budget:</a>
      <ul>
        <li><a href="#use-of-pdb-with-deployment">Use of pdb with Deployment</a></li>
        <li><a href="#pod-preemption-and-pod-distruption-budget">Pod Preemption and Pod Distruption Budget</a>
          <ul>
            <li><a href="#pod-priority-and-pod-disruption-budget">Pod priority and pod disruption budget</a></li>
            <li><a href="#pod-priority-and-pod-affinity">Pod priority and pod affinity</a></li>
            <li><a href="#pointer-regarding-pod-scheduling">Pointer Regarding Pod Scheduling</a></li>
            <li><a href="#the-effect-is-one-of-the-following">The effect is one of the following:</a>
              <ul>
                <li><a href="#noschedule">NoSchedule</a></li>
                <li><a href="#prefernoschedule">PreferNoSchedule</a></li>
              </ul>
            </li>
            <li><a href="#noexecute">NoExecute</a></li>
          </ul>
        </li>
        <li><a href="#operator">operator</a>
          <ul>
            <li><a href="#equal">Equal</a></li>
            <li><a href="#exists">Exists</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav></div>
        
    

</div>
          </aside>
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            
  

            <nav aria-label="breadcrumb" class="td-breadcrumbs">
  <ol class="breadcrumb">
  <li class="breadcrumb-item">
    <a href="/docs/">Docs</a>
  </li>
  <li class="breadcrumb-item">
    <a href="/docs/kubernetes/">KUBERNETES DOCUMENTS</a>
  </li>
  <li class="breadcrumb-item active" aria-current="page">
    <a href="/docs/kubernetes/part02/">Part 2</a>
  </li>
  </ol>
</nav>
            
<div class="td-content">
	<h1>Part 2</h1>
	
	<header class="article-meta">
		

  
    


  
    


  

		
	</header>    
	<!-- end-chunk -->
<!-- begin-chunk data-anchor="topics" data-heading="Topics:" data-level="2" data-permalink="/docs/kubernetes/part02/" data-title="Part 2" -->
<h2 id="topics">Topics:</h2><!-- end-chunk -->
<!-- begin-chunk data-anchor="namespacenamespace" data-heading="<a href=\"#namespace\">NameSpace</a>" data-level="3" data-permalink="/docs/kubernetes/part02/" data-title="Part 2" -->
<h3 id="namespacenamespace"><a href="#namespace">NameSpace</a></h3><ul>
<li>Create a namespace</li>
<li>Switch from one ns to another</li>
<li>Resource Quota</li>
<li>Resource Limits</li>
</ul>
<!-- end-chunk -->
<!-- begin-chunk data-anchor="podpod" data-heading="<a href=\"#pod\">POD</a>" data-level="3" data-permalink="/docs/kubernetes/part02/" data-title="Part 2" -->
<h3 id="podpod"><a href="#pod">POD</a></h3><ul>
<li>Single Container pod</li>
<li>MultiContainer pod</li>
<li>Login to a pod</li>
<li>Copy to a pod and from a pod(container)</li>
<li>How to check logs from a container</li>
<li>Environment Variables of pod</li>
<li>initContainer</li>
<li>Command and Argument of a pod</li>
<li>pullSecret of a pod</li>
<li>pod restart policy</li>
<li>imagePull policy</li>
<li>How to delete a pod</li>
<li>Pod priority</li>
<li>Pod Resources</li>
<li>Pod Quality of Services(QOS)</li>
</ul>
<!-- end-chunk -->
<!-- begin-chunk data-anchor="advance-scheduling-of-podadvance-scheduling-of-pod" data-heading="<a href=\"#advance-scheduling-of-pod\">Advance Scheduling of pod</a>" data-level="3" data-permalink="/docs/kubernetes/part02/" data-title="Part 2" -->
<h3 id="advance-scheduling-of-podadvance-scheduling-of-pod"><a href="#advance-scheduling-of-pod">Advance Scheduling of pod</a></h3><ul>
<li>Scheduler</li>
<li>Nodename</li>
<li>nodeSelector</li>
<li>Node Affinity</li>
<li>Taints and Tolerations</li>
<li>Pod affinity and anti affinity</li>
<li>Priority and PriorityClass</li>
<li>Preemption</li>
<li>Disruption Budget</li>
<li>Topology and Constraints</li>
<li>Descheduler</li>
</ul>
<!-- end-chunk -->
<!-- begin-chunk data-anchor="namespace" data-heading="Namespace" data-level="4" data-permalink="/docs/kubernetes/part02/" data-title="Part 2" -->
<h4 id="namespace">Namespace</h4><ul>
<li>Namespaces are a way to divide cluster resources between multiple users (via resource quota).</li>
<li>namespaces provides a mechanism for isolating groups of resources within a single cluster</li>
<li>Names of resources need to be unique within a namespace, but not across namespaces.</li>
<li>To achieve multitenancy with Networkpolicy</li>
<li>To configure RBAC</li>
<li>Check all namespaces</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubectl get ns
</span></span></code></pre></div><ul>
<li>Create a new namespace</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubectl create ns <span style="color:#e6db74">&lt;name&gt;</span>
</span></span></code></pre></div><ul>
<li>Switch from one ns to another</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubens
</span></span><span style="display:flex;"><span>kubens <span style="color:#f92672">&lt;</span>ns name<span style="color:#f92672">&gt;</span>
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="to-see-which-kubernetes-resources-are-and-arent-in-a-namespace" data-heading="To see which Kubernetes resources are and aren&rsquo;t in a namespace:" data-level="4" data-permalink="/docs/kubernetes/part02/" data-title="Part 2" -->
<h4 id="to-see-which-kubernetes-resources-are-and-arent-in-a-namespace">To see which Kubernetes resources are and aren&rsquo;t in a namespace:</h4><ul>
<li>In a namespace</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubectl api<span style="color:#f92672">-</span>resources <span style="color:#f92672">--</span>namespaced<span style="color:#f92672">=</span>true
</span></span></code></pre></div><ul>
<li>Not in a namespace</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubectl api<span style="color:#f92672">-</span>resources <span style="color:#f92672">--</span>namespaced<span style="color:#f92672">=</span>false
</span></span></code></pre></div><ul>
<li>
<p><a href="https://kubernetes.io/docs/tasks/administer-cluster/manage-resources/quota-memory-cpu-namespace/" target="_blank" rel="noopener">Learn About Resource Quota and limits </a></p>
</li>
<li>
<p>Configure Memory and CPU Quotas for a Namespace</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kubectl apply -f - <span style="color:#e6db74">&lt;&lt;EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">apiVersion: v1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">kind: ResourceQuota
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">metadata:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: mem-cpu-demo
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">spec:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  hard:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    requests.cpu: &#34;1&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    requests.memory: 1Gi
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    limits.cpu: &#34;2&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    limits.memory: 2Gi
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="as-per-above-example" data-heading="As per above Example:" data-level="4" data-permalink="/docs/kubernetes/part02/" data-title="Part 2" -->
<h4 id="as-per-above-example">As per above Example:</h4><ul>
<li>
<p>The ResourceQuota places these requirements on the quota-mem-cpu-example namespace:</p>
</li>
<li>
<p>For every Pod in the namespace, each container must have a memory request, memory limit, cpu request, and cpu limit.</p>
</li>
<li>
<p>The memory request total for all Pods in that namespace must not exceed 1 GiB.</p>
</li>
<li>
<p>The memory limit total for all Pods in that namespace must not exceed 2 GiB.</p>
</li>
<li>
<p>The CPU request total for all Pods in that namespace must not exceed 1 cpu.</p>
</li>
<li>
<p>The CPU limit total for all Pods in that namespace must not exceed 2 cpu.</p>
</li>
<li>
<p><strong>Check applied quota</strong></p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubectl get quota 
</span></span></code></pre></div><ul>
<li><strong>Create namespace using a yaml file</strong></li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kubectl apply -f - <span style="color:#e6db74">&lt;&lt;EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">kind: Namespace
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">apiVersion: v1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">metadata:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: test
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  labels:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    name: test
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="resource-limits" data-heading="Resource Limits" data-level="4" data-permalink="/docs/kubernetes/part02/" data-title="Part 2" -->
<h4 id="resource-limits">Resource Limits</h4><p>A Kubernetes cluster can be divided into namespaces. Once you have a namespace that has a default memory limit, and you then try to create a Pod with a container that does not specify its own memory limit, then the control plane assigns the default memory limit to that container.</p>
<ul>
<li>Create a LimitRange</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kubectl apply -f - <span style="color:#e6db74">&lt;&lt;EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">apiVersion: v1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">kind: LimitRange
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">metadata:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: example-limits
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">spec:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  limits:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - max:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      cpu: &#34;2&#34;            # Maximum CPU limit for a container (2 cores)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      memory: &#34;1Gi&#34;       # Maximum memory limit for a container (1 GiB)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    min:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      cpu: &#34;200m&#34;         # Minimum CPU request for a container (200 millicores, or 0.2 cores)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      memory: &#34;256Mi&#34;     # Minimum memory request for a container (256 MiB)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    default:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      cpu: &#34;500m&#34;         # Default CPU request for a container (500 millicores, or 0.5 cores)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      memory: &#34;512Mi&#34;     # Default memory request for a container (512 MiB)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    defaultRequest:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      cpu: &#34;300m&#34;         # Default CPU request if not specified (300 millicores, or 0.3 cores)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      memory: &#34;384Mi&#34;     # Default memory request if not specified (384 MiB)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    type: Container
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span></code></pre></div><ul>
<li>Now create one pod with no resource and check if the default resource has been applied</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubectl describe pod <span style="color:#e6db74">&lt;podname&gt;</span>
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="pod" data-heading="POD" data-level="4" data-permalink="/docs/kubernetes/part02/" data-title="Part 2" -->
<h4 id="pod">POD</h4><ul>
<li>A pod is the smallest deployable unit in Kubernetes that represents a single instance of an application.</li>
<li>For example, if you want to run the Nginx application, you run it in a pod.</li>
<li>A container is a single unit. However, a pod can contain more than one container. You can think of pods as a box that can hold one or more containers together.</li>
<li>the pod gets a single unique IP address and containers running inside the pod use localhost to connect to each other on different ports.</li>
<li>Each pod gets a unique IP address.</li>
<li>Pods communicate with each other using the IP address.</li>
<li>Containers inside a pod connect using localhost on different ports.</li>
<li>Containers running inside a pod should have different port numbers to avoid port clashes.</li>
<li>You can set CPU and memory resources for each container running inside the pod.</li>
<li>Containers inside a pod share the same volume mount.</li>
<li>All the containers inside a pod are scheduled on the same node; It cannot span multiple nodes.
<ul>
<li>If there is more than one container, during the pod startup all the main containers start in parallel. Whereas the init containers inside the pod run in sequence.</li>
<li>Create a pod</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubectl run pod <span style="color:#f92672">--</span>image<span style="color:#f92672">=</span>nginx
</span></span></code></pre></div><ul>
<li>Check newly created pod</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubectl get pods
</span></span></code></pre></div><ul>
<li>Check more info of a pod like where the pod is scheduled and ip address</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubectl get pods <span style="color:#f92672">-</span>o wide
</span></span></code></pre></div><ul>
<li>check pods details like events and resources</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubectl describe pod <span style="color:#e6db74">&lt;podname&gt;</span>
</span></span></code></pre></div><ul>
<li>Check the name of all pods</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubectl get pods <span style="color:#f92672">-</span>o name
</span></span></code></pre></div></li>
<li>Create a pod using yaml file</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kubectl apply -f - <span style="color:#e6db74">&lt;&lt;EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">apiVersion: v1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">kind: Pod
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">metadata:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: example-pod
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  labels:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    app: example
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">spec:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  containers:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - name: my-container
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    image: nginx:latest
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span></code></pre></div><ul>
<li>Check Pod Logs
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubectl logs <span style="color:#e6db74">&lt;pod-name&gt;</span>
</span></span></code></pre></div></li>
<li>Follow Pod Logs in Real-time</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>  kubectl logs <span style="color:#f92672">-</span>f <span style="color:#e6db74">&lt;pod-name&gt;</span>
</span></span></code></pre></div><ul>
<li>How to check logs for a container from multiContainer pod</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubectl logs <span style="color:#f92672">-</span>c <span style="color:#e6db74">&lt;containername&gt;</span> <span style="color:#e6db74">&lt;podname&gt;</span>
</span></span></code></pre></div><ul>
<li>Check the logs for all containers</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kubectl logs &lt;podname&gt; --all-containers<span style="color:#f92672">=</span>true
</span></span></code></pre></div><ul>
<li>Execute Command in a Pod:</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubectl exec <span style="color:#f92672">-</span>it <span style="color:#e6db74">&lt;pod-name&gt;</span> <span style="color:#f92672">--</span> <span style="color:#e6db74">&lt;command&gt;</span>
</span></span></code></pre></div><ul>
<li>Copy Files to/from Pod:</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubectl cp <span style="color:#e6db74">&lt;local-path&gt;</span> <span style="color:#e6db74">&lt;pod-name&gt;</span>:<span style="color:#e6db74">&lt;pod-path&gt;</span>
</span></span><span style="display:flex;"><span>kubectl cp <span style="color:#e6db74">&lt;pod-name&gt;</span>:<span style="color:#e6db74">&lt;pod-path&gt;</span> <span style="color:#e6db74">&lt;local-path&gt;</span>
</span></span></code></pre></div><ul>
<li>Delete a Pod:</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubectl delete pod <span style="color:#e6db74">&lt;pod-name&gt;</span>
</span></span></code></pre></div><ul>
<li>How to delete a pod forcefully</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubectl delete pod <span style="color:#f92672">--</span>force <span style="color:#f92672">--</span>grace<span style="color:#f92672">-</span>period<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>
</span></span></code></pre></div><ul>
<li>Port Forwarding to Pod:</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubectl port<span style="color:#f92672">-</span>forward <span style="color:#e6db74">&lt;pod-name&gt;</span> <span style="color:#e6db74">&lt;local-port&gt;</span>:<span style="color:#e6db74">&lt;pod-port&gt;</span>
</span></span></code></pre></div><ul>
<li>Port forwarding on ip address not on the localhost</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span> kubectl port<span style="color:#f92672">-</span>forward <span style="color:#f92672">--</span>address <span style="color:#ae81ff">0.0.0.0</span> pod<span style="color:#f92672">/</span>mypod <span style="color:#ae81ff">8888</span>:<span style="color:#ae81ff">5000</span>
</span></span></code></pre></div><ul>
<li>Get YAML Definition of a Running Pod:</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubectl get pod <span style="color:#e6db74">&lt;pod-name&gt;</span> <span style="color:#f92672">-</span>o yaml
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="some-useful-command-in-realtimeproduction" data-heading="Some useful command in realtime(Production)" data-level="3" data-permalink="/docs/kubernetes/part02/" data-title="Part 2" -->
<h3 id="some-useful-command-in-realtimeproduction">Some useful command in realtime(Production)</h3><ul>
<li>Find out all the images of all the pods</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubectl get pods <span style="color:#f92672">--</span>all<span style="color:#f92672">-</span>namespaces <span style="color:#f92672">-</span>o jsonpath<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;{range .items[*]}{.spec.containers[*].image}{&#34;\n&#34;}{end}&#39;</span>
</span></span></code></pre></div><ul>
<li>Get  All containers name</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubectl get pods <span style="color:#f92672">--</span>all<span style="color:#f92672">-</span>namespaces <span style="color:#f92672">-</span>o jsonpath<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;{range .items[*]}{.metadata.namespace} {.metadata.name}: {.spec.containers[*].name}{&#34;\n&#34;}{end}&#39;</span>
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="define-environment-variables-for-a-container" data-heading="Define Environment Variables for a Container" data-level="3" data-permalink="/docs/kubernetes/part02/" data-title="Part 2" -->
<h3 id="define-environment-variables-for-a-container">Define Environment Variables for a Container</h3><p>A Kubernetes environment variable is a dynamic value that configures some aspect of the environment in which a Kubernetes-based application runs.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>env: 
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">-</span> name: SERVICE_PORT 
</span></span><span style="display:flex;"><span>        value: <span style="color:#e6db74">&#34;8080&#34;</span> 
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">-</span> name: SERVICE_IP 
</span></span><span style="display:flex;"><span>        value: <span style="color:#e6db74">&#34;192.168.100.1&#34;</span>
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="problem-statement-if-the-pod-is-failing-becuase-of-environment-variable" data-heading="Problem Statement if the pod is failing becuase of environment variable" data-level="4" data-permalink="/docs/kubernetes/part02/" data-title="Part 2" -->
<h4 id="problem-statement-if-the-pod-is-failing-becuase-of-environment-variable">Problem Statement if the pod is failing becuase of environment variable</h4><ul>
<li>Deploy one mysql pod and see if the pod is  failing</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubectl run mysql <span style="color:#f92672">--</span>image<span style="color:#f92672">=</span>mysql:5<span style="color:#ae81ff">.6</span>
</span></span></code></pre></div><ul>
<li>Check the logs and fix the issue</li>
</ul>
<!-- end-chunk -->
<!-- begin-chunk data-anchor="environment-variables" data-heading="Environment Variables" data-level="4" data-permalink="/docs/kubernetes/part02/" data-title="Part 2" -->
<h4 id="environment-variables">Environment Variables</h4><ul>
<li>Apply required variables using below yaml file</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#ae81ff">kubectl apply -f - &lt;&lt;EOF</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">v1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">Pod</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">pod-with-env</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">containers</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">my-container</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">image</span>: <span style="color:#ae81ff">mysql:5.6</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">env</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#f92672">name</span>:  <span style="color:#ae81ff">MYSQL_ROOT_PASSWORD</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">value</span>: <span style="color:#e6db74">&#34;root&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">EOF</span>
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="command-and-arguments-with-kubernetes-pod" data-heading="Command and Arguments with Kubernetes Pod" data-level="2" data-permalink="/docs/kubernetes/part02/" data-title="Part 2" -->
<h2 id="command-and-arguments-with-kubernetes-pod">Command and Arguments with Kubernetes Pod</h2><p>Here&rsquo;s a table summarizing the field names used by Docker and Kubernetes:</p>
<table>
<thead>
<tr>
<th>Description</th>
<th>Docker field name</th>
<th>Kubernetes field name</th>
</tr>
</thead>
<tbody>
<tr>
<td>The command run by the container</td>
<td>Entrypoint</td>
<td>command</td>
</tr>
<tr>
<td>The arguments passed to the command</td>
<td>Cmd</td>
<td>args</td>
</tr>
</tbody>
</table>
<p>When you override the default Entrypoint and Cmd, these rules apply:</p>
<ul>
<li>If you do not supply command or args for a Container, the defaults defined in the Docker image are used.</li>
<li>If you supply a command but no args for a Container, only the supplied command is used. The default EntryPoint and the default Cmd defined in the Docker image are ignored.</li>
<li>If you supply only args for a Container, the default Entrypoint defined in the Docker image is run with the args that you supplied.</li>
<li>If you supply a command and args, the default Entrypoint and the default Cmd defined in the Docker image are ignored. Your command is run with your args.</li>
</ul>
<!-- end-chunk -->
<!-- begin-chunk data-anchor="example-1-command-override" data-heading="Example 1: Command Override" data-level="3" data-permalink="/docs/kubernetes/part02/" data-title="Part 2" -->
<h3 id="example-1-command-override">Example 1: Command Override</h3><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl apply -f - <span style="color:#e6db74">&lt;&lt;EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">apiVersion: v1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">kind: Pod
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">metadata:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: pod-with-command
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">spec:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  containers:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - name: my-container
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    image: nginx:latest
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    command: [&#34;echo&#34;]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    args: [&#34;Hello, Kubernetes!&#34;]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="example-2-command-and-arguments" data-heading="Example 2: Command and Arguments" data-level="3" data-permalink="/docs/kubernetes/part02/" data-title="Part 2" -->
<h3 id="example-2-command-and-arguments">Example 2: Command and Arguments</h3><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl apply -f - <span style="color:#e6db74">&lt;&lt;EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">apiVersion: v1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">kind: Pod
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">metadata:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: pod-with-command-args
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">spec:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  containers:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - name: my-container
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    image: busybox:latest
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    command: [&#34;sh&#34;, &#34;-c&#34;]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    args: [&#34;echo Hello from Kubernetes! &amp;&amp; sleep 3600&#34;]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="example-3-passing-environment-variables-to-commands" data-heading="Example 3: Passing Environment Variables to Commands" data-level="4" data-permalink="/docs/kubernetes/part02/" data-title="Part 2" -->
<h4 id="example-3-passing-environment-variables-to-commands">Example 3: Passing Environment Variables to Commands</h4><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>kubectl apply -f - <span style="color:#e6db74">&lt;&lt;EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">apiVersion: v1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">kind: Pod
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">metadata:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: pod-with-env-vars
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">spec:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  containers:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - name: my-container
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    image: alpine:latest
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    command: [&#34;/bin/sh&#34;, &#34;-c&#34;]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    args: [&#34;echo \$GREETING&#34;]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    env:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    - name: GREETING
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      value: &#34;Hello, Kubernetes!&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="example-4-passing-arguments-to-docker-entrypoint" data-heading="Example 4: Passing Arguments to Docker Entrypoint" data-level="3" data-permalink="/docs/kubernetes/part02/" data-title="Part 2" -->
<h3 id="example-4-passing-arguments-to-docker-entrypoint">Example 4: Passing Arguments to Docker Entrypoint</h3><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl apply -f - <span style="color:#e6db74">&lt;&lt;EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">apiVersion: v1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">kind: Pod
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">metadata:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: pod-with-entrypoint-args
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">spec:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  containers:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - name: my-container
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    image: ubuntu:latest
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    command: [&#34;/bin/echo&#34;]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    args: [&#34;Hello&#34;, &#34;Kubernetes!&#34;]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="multicontainer-pod" data-heading="MultiContainer pod" data-level="3" data-permalink="/docs/kubernetes/part02/" data-title="Part 2" -->
<h3 id="multicontainer-pod">MultiContainer pod</h3><!-- end-chunk -->
<!-- begin-chunk data-anchor="use-cases-for-multi-container-pods" data-heading="Use Cases for Multi-Container Pods" data-level="3" data-permalink="/docs/kubernetes/part02/" data-title="Part 2" -->
<h3 id="use-cases-for-multi-container-pods">Use Cases for Multi-Container Pods</h3><ul>
<li>
<p>Pods that run multiple containers that need to work together.</p>
</li>
<li>
<p>A Pod can encapsulate an application composed of multiple co-located containers that are tightly coupled and need to share resources.</p>
</li>
<li>
<p>These co-located containers form a single cohesive unit.
<img src="/images/pod.svg" alt="MultiContainerpod"></p>
</li>
<li>
<p>Here is an example for multiple container.</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl apply -f - <span style="color:#e6db74">&lt;&lt;EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">apiVersion: v1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">kind: Pod
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">metadata:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: nginx-redis-pod
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">spec:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  containers:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - name: nginx-container
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    image: nginx:latest
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    ports:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    - containerPort: 80
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - name: redis-container
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    image: redis:latest
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    ports:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    - containerPort: 6379
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="initcontainer" data-heading="InitContainer" data-level="4" data-permalink="/docs/kubernetes/part02/" data-title="Part 2" -->
<h4 id="initcontainer">InitContainer</h4><ul>
<li>
<p>A Pod can have multiple containers running apps within it, but it can also have one or more init containers, which are run before the app containers are started.
Init containers are exactly like regular containers, except:<br></p>
</li>
<li>
<p>Init containers always run to completion.</p>
</li>
<li>
<p>Each init container must complete successfully before the next one starts.</p>
</li>
<li>
<p>If a Pod&rsquo;s init container fails, the kubelet repeatedly restarts that init container until it succeeds.</p>
</li>
<li>
<p>Regular init containers (in other words: excluding sidecar containers) do not support the lifecycle, livenessProbe, readinessProbe, or startupProbe fields.</p>
</li>
<li>
<p>Init containers must run to completion before the Pod can be ready</p>
</li>
<li>
<p>If you specify multiple init containers for a Pod, kubelet runs each init container sequentially</p>
</li>
<li>
<p>Each init container must succeed before the next can run.
Here is an example for initContainer:</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kubectl apply -f - <span style="color:#e6db74">&lt;&lt;EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">apiVersion: v1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">kind: Pod
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">metadata:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> name: init-container-pod
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">spec:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> containers:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> - name: main-container
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   image: nginx:latest
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   ports:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   - containerPort: 80
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> initContainers:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> - name: init-wait-redis
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   image: busybox:latest
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   command: [&#34;sh&#34;, &#34;-c&#34;, &#34;until nc -zv nginx 80; do echo &#39;Waiting for Redis to be ready&#39;; sleep 1; done&#34;]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span></code></pre></div><ul>
<li>Make a test by creating a pod and service</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubectl run nginx <span style="color:#f92672">--</span>image<span style="color:#f92672">=</span>nginx
</span></span><span style="display:flex;"><span>kubectl expose pod<span style="color:#f92672">/</span>nginx <span style="color:#f92672">--</span>port <span style="color:#ae81ff">80</span>
</span></span></code></pre></div><ul>
<li>Now check the pod status initContainer should be successful</li>
<li>Also check the logs for initContainer</li>
</ul>
<!-- end-chunk -->
<!-- begin-chunk data-anchor="sidecar-container" data-heading="Sidecar container" data-level="4" data-permalink="/docs/kubernetes/part02/" data-title="Part 2" -->
<h4 id="sidecar-container">Sidecar container</h4><ul>
<li>A Sidecar container extends and enhances the functionality of a preexisting container without changing it.</li>
<li>This pattern is one of the fundamental container patterns that
allows single-purpose containers to cooperate closely together.</li>
</ul>
<!-- end-chunk -->
<!-- begin-chunk data-anchor="adapter-container" data-heading="Adapter Container" data-level="4" data-permalink="/docs/kubernetes/part02/" data-title="Part 2" -->
<h4 id="adapter-container">Adapter Container</h4><ul>
<li>The Adapter pattern takes a heterogeneous containerized system and makes it conform to a consistent, unified interface with a standardized and normalized format that can be consumed by the outside world.</li>
<li>The Adapter pattern inherits all its characteristics
from the Sidecar,</li>
</ul>
<!-- end-chunk -->
<!-- begin-chunk data-anchor="resources-definition-in-pod" data-heading="Resources definition in pod" data-level="3" data-permalink="/docs/kubernetes/part02/" data-title="Part 2" -->
<h3 id="resources-definition-in-pod">Resources definition in pod</h3><!-- end-chunk -->
<!-- begin-chunk data-anchor="burstable-qos" data-heading="Burstable QOS" data-level="4" data-permalink="/docs/kubernetes/part02/" data-title="Part 2" -->
<h4 id="burstable-qos">Burstable QOS</h4><ul>
<li>
<p>Kubernetes assigns the Burstable class to a Pod when a container in the pod has more resource limit than the request value.</p>
</li>
<li>
<p>A pod in this category will have the following characteristics:</p>
<ul>
<li>The Pod has not met the criteria for Guaranteed QoS class.</br></li>
<li>A container in the Pod has an unequal memory or CPU request or limit
An example is given below</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>resources:
</span></span><span style="display:flex;"><span>      limits:
</span></span><span style="display:flex;"><span>        memory: <span style="color:#e6db74">&#34;300Mi&#34;</span>
</span></span><span style="display:flex;"><span>        cpu: <span style="color:#e6db74">&#34;800m&#34;</span>
</span></span><span style="display:flex;"><span>      requests:
</span></span><span style="display:flex;"><span>        memory: <span style="color:#e6db74">&#34;100Mi&#34;</span>
</span></span><span style="display:flex;"><span>        cpu: <span style="color:#e6db74">&#34;600m&#34;</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl apply -f - <span style="color:#e6db74">&lt;&lt;EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">apiVersion: v1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">kind: Pod
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">metadata:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: pod-with-resources
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">spec:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  containers:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - name: my-container
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    image: nginx:latest
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    resources:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      requests:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        memory: &#34;64Mi&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        cpu: &#34;250m&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      limits:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        memory: &#34;128Mi&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        cpu: &#34;500m&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span></code></pre></div></li>
<li>
<p>Check the pods if this is running</p>
</li>
<li>
<p>check the QOS of the pod</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubectl describe pod <span style="color:#f92672">|</span> grep <span style="color:#f92672">-</span>i qos
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="guranteed-qos" data-heading="Guranteed QOS" data-level="4" data-permalink="/docs/kubernetes/part02/" data-title="Part 2" -->
<h4 id="guranteed-qos">Guranteed QOS</h4><ul>
<li>
<p>Kubernetes considers Pods classified as Guaranteed as a top priority. It won’t evict them until they exceed their limits.</p>
</li>
<li>
<p>A Pod with a Guaranteed class has the following characteristics:</p>
<ul>
<li>All containers in the Pod have a memory limit and request.</li>
<li>All containers in the Pod have a memory limit equal to the memory request.</li>
<li>All containers in the Pod have a CPU limit and a CPU request.</li>
<li>All containers in the Pod have a CPU limit equal to the CPU request.</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl apply -f - <span style="color:#e6db74">&lt;&lt;EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">apiVersion: v1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">kind: Pod
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">metadata:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: pod-with-resources
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">spec:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  containers:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - name: my-container
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    image: nginx:latest
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    resources:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      requests:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        memory: &#34;64Mi&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        cpu: &#34;250m&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      limits:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        memory: &#34;64Mi&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        cpu: &#34;250m&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="best-efforts" data-heading="Best Efforts" data-level="4" data-permalink="/docs/kubernetes/part02/" data-title="Part 2" -->
<h4 id="best-efforts">Best Efforts</h4><ul>
<li>Kubernetes assigns the Burstable class to a Pod when a container in the pod has more resource limit than the request value.</li>
<li>A pod in this category will have the following characteristics:</li>
<li>The Pod has not met the criteria for Guaranteed QoS class.</li>
<li>A container in the Pod has an unequal memory or CPU request or limit</li>
<li>Pod without resourcs section are considered best efforts</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl apply -f - <span style="color:#e6db74">&lt;&lt;EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">apiVersion: v1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">kind: Pod
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">metadata:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: pod-with-resources
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">spec:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  containers:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - name: my-container
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    image: nginx:latest
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="imagepullsecret" data-heading="imagepullSecret" data-level="4" data-permalink="/docs/kubernetes/part02/" data-title="Part 2" -->
<h4 id="imagepullsecret">imagepullSecret</h4><ul>
<li>Pod that uses a Secret to pull an image from a private container image registry or repository.</li>
<li>There are many private registries in use.</li>
<li>This task uses Docker Hub as an example registry.</li>
</ul>
<!-- end-chunk -->
<!-- begin-chunk data-anchor="steps-to-use-a-pull-secret-in-a-pod-yaml" data-heading="Steps to Use a Pull Secret in a Pod YAML:" data-level="5" data-permalink="/docs/kubernetes/part02/" data-title="Part 2" -->
<h5 id="steps-to-use-a-pull-secret-in-a-pod-yaml">Steps to Use a Pull Secret in a Pod YAML:</h5><ul>
<li><strong>Create Docker Config JSON File:</strong>
<ul>
<li>Create a Docker configuration file (<code>~/.docker/config.json</code>) with the credentials for your private registry.</li>
<li>You can use the <code>docker login</code> command to generate this file.</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>   docker login
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="create-a-kubernetes-secret" data-heading="Create a Kubernetes Secret:" data-level="3" data-permalink="/docs/kubernetes/part02/" data-title="Part 2" -->
<h3 id="create-a-kubernetes-secret">Create a Kubernetes Secret:</h3><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl create secret generic my-pull-secret --from-file<span style="color:#f92672">=</span>.dockerconfigjson<span style="color:#f92672">=</span>$HOME/.docker/config.json --type<span style="color:#f92672">=</span>kubernetes.io/dockerconfigjson
</span></span></code></pre></div><ul>
<li>use the yaml to create pod with private registry</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl apply -f - <span style="color:#e6db74">&lt;&lt;EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">apiVersion: v1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">kind: Pod
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">metadata:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: pod-with-pull-secret
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">spec:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  containers:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - name: my-container
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    image: myregistry.example.com/my-image:latest
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  imagePullSecrets:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - name: my-pull-secret
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span></code></pre></div><ul>
<li>Give permission to serviceAccount to pull image so that you will not have to mention in pod Spec</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubectl patch serviceaccount default <span style="color:#f92672">-</span>p <span style="color:#e6db74">&#39;{&#34;imagePullSecrets&#34;: [{&#34;name&#34;: &#34;mySecret&#34;}]}&#39;</span>
</span></span></code></pre></div><p><a href="https://kubernetes.io/docs/tasks/configure-pod-container/configure-service-account/" target="_blank" rel="noopener">Learn about ServiceAccount</a></p>
<!-- end-chunk -->
<!-- begin-chunk data-anchor="imagepullpolicy-examples" data-heading="imagePullPolicy Examples" data-level="2" data-permalink="/docs/kubernetes/part02/" data-title="Part 2" -->
<h2 id="imagepullpolicy-examples">imagePullPolicy Examples</h2><!-- end-chunk -->
<!-- begin-chunk data-anchor="1-ifnotpresent" data-heading="1. IfNotPresent" data-level="3" data-permalink="/docs/kubernetes/part02/" data-title="Part 2" -->
<h3 id="1-ifnotpresent">1. IfNotPresent</h3><ul>
<li><strong>Description</strong>: Pull the image only if it does not already exist locally.</li>
<li><strong>Usage</strong>: Use this policy when you want to minimize image pulls and rely on locally cached images.</li>
<li><strong>Example</strong>:
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">containers</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">my-container</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">image</span>: <span style="color:#ae81ff">my-image:latest</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">imagePullPolicy</span>: <span style="color:#ae81ff">IfNotPresent</span>
</span></span></code></pre></div></li>
</ul>
<!-- end-chunk -->
<!-- begin-chunk data-anchor="2-always" data-heading="2. Always" data-level="3" data-permalink="/docs/kubernetes/part02/" data-title="Part 2" -->
<h3 id="2-always">2. Always</h3><ul>
<li><strong>Description</strong> : Always pull the latest version of the image, even if it already exists locally.</li>
<li><strong>Usage</strong>: Use this policy when you want to ensure that the container runs the latest version of the image.</li>
<li><strong>Example</strong>:</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span><span style="color:#f92672">containers</span>:
</span></span><span style="display:flex;"><span>- <span style="color:#f92672">name</span>: <span style="color:#ae81ff">my-container</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">image</span>: <span style="color:#ae81ff">my-image:latest</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">imagePullPolicy</span>: <span style="color:#ae81ff">Always</span>
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="3-never" data-heading="3. Never" data-level="3" data-permalink="/docs/kubernetes/part02/" data-title="Part 2" -->
<h3 id="3-never">3. Never</h3><ul>
<li>
<p><strong>Description</strong>: Never pull the image, and only use the locally cached version if available.</p>
</li>
<li>
<p><strong>Usage</strong> : Use this policy when you want to prevent Kubernetes from pulling the image, even if it does not exist locally.</p>
</li>
<li>
<p><strong>Example</strong>:</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span><span style="color:#f92672">containers</span>:
</span></span><span style="display:flex;"><span>- <span style="color:#f92672">name</span>: <span style="color:#ae81ff">my-container</span>
</span></span><span style="display:flex;"><span> <span style="color:#f92672">image</span>: <span style="color:#ae81ff">my-image:latest</span>
</span></span><span style="display:flex;"><span> <span style="color:#f92672">imagePullPolicy</span>: <span style="color:#ae81ff">Never</span>
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="4-ifpresent" data-heading="4. IfPresent" data-level="3" data-permalink="/docs/kubernetes/part02/" data-title="Part 2" -->
<h3 id="4-ifpresent">4. IfPresent</h3><ul>
<li><strong>Description</strong>: Pull the image only if it already exists locally. If the image does not exist locally, do not pull it.</li>
<li><strong>Usage</strong>: Use this policy when you want to pull the image only if it is already available locally, otherwise use a cached version.</li>
<li><strong>Example</strong></li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">containers</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">my-container</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">image</span>: <span style="color:#ae81ff">my-image:latest</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">imagePullPolicy</span>: <span style="color:#ae81ff">IfPresent</span>
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="5-default-ifnotpresent" data-heading="5. Default (IfNotPresent)" data-level="3" data-permalink="/docs/kubernetes/part02/" data-title="Part 2" -->
<h3 id="5-default-ifnotpresent">5. Default (IfNotPresent)</h3><ul>
<li>Description: Kubernetes default behavior if imagePullPolicy is not explicitly set.</li>
<li>Pull the image only if it does not already exist locally.</li>
<li>Usage: This is the default behavior, and it is suitable for many use cases where you want to minimize image pulls.
<strong>Example</strong> :</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span><span style="color:#f92672">containers</span>:
</span></span><span style="display:flex;"><span>- <span style="color:#f92672">name</span>: <span style="color:#ae81ff">my-container</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">image</span>: <span style="color:#ae81ff">my-image:latest</span>
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="container-restartpolicy-in-pod-block" data-heading="Container RestartPolicy in Pod block" data-level="3" data-permalink="/docs/kubernetes/part02/" data-title="Part 2" -->
<h3 id="container-restartpolicy-in-pod-block">Container RestartPolicy in Pod block</h3><!-- end-chunk -->
<!-- begin-chunk data-anchor="1-always" data-heading="1. Always" data-level="3" data-permalink="/docs/kubernetes/part02/" data-title="Part 2" -->
<h3 id="1-always">1. Always</h3><ul>
<li><strong>Description</strong>: Always restart the container regardless of the exit status or reason.</li>
<li><strong>Usage</strong>: Use this policy for critical services that should always be running.</li>
<li><strong>Example</strong>:</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span>  <span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">restartPolicy</span>: <span style="color:#ae81ff">Always</span>
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="2-onfailure" data-heading="2. OnFailure" data-level="3" data-permalink="/docs/kubernetes/part02/" data-title="Part 2" -->
<h3 id="2-onfailure">2. OnFailure</h3><ul>
<li>Description: Restart the container only if it exits with a non-zero status.</li>
<li>Usage: Use this policy for jobs or batch processes that should be retried on failure.</li>
</ul>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">restartPolicy</span>: <span style="color:#ae81ff">OnFailure</span>
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="3-never-1" data-heading="3. Never" data-level="3" data-permalink="/docs/kubernetes/part02/" data-title="Part 2" -->
<h3 id="3-never-1">3. Never</h3><ul>
<li>Description: Never restart the container, regardless of the exit status or reason.</li>
<li>Usage: Use this policy for containers that are expected to run to completion and not be restarted.</li>
</ul>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span> <span style="color:#f92672">restartPolicy</span>: <span style="color:#ae81ff">Never</span>
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="4-default-always" data-heading="4. Default (Always)" data-level="3" data-permalink="/docs/kubernetes/part02/" data-title="Part 2" -->
<h3 id="4-default-always">4. Default (Always)</h3><ul>
<li>Description: Kubernetes default behavior if restartPolicy is not explicitly set. Always restart the container.</li>
<li>Usage: This is the default behavior and is suitable for many long-running services.</li>
</ul>
<p>Example</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">restartPolicy</span>: <span style="color:#ae81ff">Always (default behavior)</span>
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="advance-scheduling-of--pod" data-heading="Advance Scheduling of  pod" data-level="2" data-permalink="/docs/kubernetes/part02/" data-title="Part 2" -->
<h2 id="advance-scheduling-of--pod">Advance Scheduling of  pod</h2><!-- end-chunk -->
<!-- begin-chunk data-anchor="using-nodename" data-heading="Using nodeName" data-level="4" data-permalink="/docs/kubernetes/part02/" data-title="Part 2" -->
<h4 id="using-nodename">Using nodeName</h4><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl apply -f - <span style="color:#e6db74">&lt;&lt;EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">apiVersion: v1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">kind: Pod
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">metadata:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: pod-scheduled-node
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">spec:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  nodeName: &lt;mentionhere nodename&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  containers:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - name: my-container
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    image: nginx:latest
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="steps-to-use-nodeselector" data-heading="Steps to Use nodeSelector:" data-level="4" data-permalink="/docs/kubernetes/part02/" data-title="Part 2" -->
<h4 id="steps-to-use-nodeselector">Steps to Use nodeSelector:</h4><ul>
<li><strong>Label the node</strong></li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl label nodes specific-node-name diskType<span style="color:#f92672">=</span>ssd
</span></span></code></pre></div><ul>
<li>
<p><strong>Use this label to schedule the pod</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>apiVersion: v1
</span></span><span style="display:flex;"><span>kind: Pod
</span></span><span style="display:flex;"><span>metadata:
</span></span><span style="display:flex;"><span>  name: pod-with-node-selector
</span></span><span style="display:flex;"><span>spec:
</span></span><span style="display:flex;"><span>  containers:
</span></span><span style="display:flex;"><span>  - name: my-container
</span></span><span style="display:flex;"><span>    image: nginx:latest
</span></span><span style="display:flex;"><span>  nodeSelector:
</span></span><span style="display:flex;"><span>    diskType: ssd
</span></span></code></pre></div></li>
<li>
<p><strong>Check where this pod has been schduled</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubectl get pods <span style="color:#f92672">-</span>o wide
</span></span></code></pre></div></li>
</ul>
<!-- end-chunk -->
<!-- begin-chunk data-anchor="taint-and-toleration" data-heading="Taint and Toleration" data-level="4" data-permalink="/docs/kubernetes/part02/" data-title="Part 2" -->
<h4 id="taint-and-toleration">Taint and Toleration</h4><ul>
<li>A taint allows a node to refuse pod to be scheduled unless that pod has a matching toleration.</li>
<li>You apply taints to a node through the node specification (NodeSpec) and apply tolerations to a pod through the pod specification (PodSpec). A taint on a node instructs the node to repel all pods that do not tolerate the taint.</li>
<li>Taints and tolerations consist of a key, value, and effect. An operator allows you to leave one of these parameters empty.</li>
</ul>
<p>Taint and Toleration key points</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>key</td>
<td>Any string, up to 253 characters. Must begin with a letter or number, and may contain letters, numbers, hyphens, dots, and underscores.</td>
</tr>
<tr>
<td>value</td>
<td>Any string, up to 63 characters. Must begin with a letter or number, and may contain letters, numbers, hyphens, dots, and underscores.</td>
</tr>
<tr>
<td>effect</td>
<td>One of: NoSchedule, PreferNoSchedule, NoExecute</td>
</tr>
<tr>
<td>operator</td>
<td>One of: Equal, Exists</td>
</tr>
</tbody>
</table>
<ul>
<li><strong>How to apply taint on a node</strong></li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl taint nodes &lt;node-name&gt; &lt;key&gt;<span style="color:#f92672">=</span>&lt;value&gt;:&lt;effect&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>kubectl taint nodes specific-node-name disktype<span style="color:#f92672">=</span>ssd:NoSchedule
</span></span></code></pre></div><ul>
<li><strong>Now use this in pod yaml</strong></li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl apply -f - <span style="color:#e6db74">&lt;&lt;EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">apiVersion: v1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">kind: Pod
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">metadata:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: toleration-pod
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">spec:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  containers:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - name: my-container
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    image: nginx:latest
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  tolerations:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - key: disktype
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    operator: Equal
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    value: ssd
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    effect: NoSchedule
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="example--notequal-operator" data-heading="Example : NotEqual Operator" data-level="4" data-permalink="/docs/kubernetes/part02/" data-title="Part 2" -->
<h4 id="example--notequal-operator">Example : NotEqual Operator</h4><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl apply -f - <span style="color:#e6db74">&lt;&lt;EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">apiVersion: v1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">kind: Pod
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">metadata:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: toleration-not-equal-pod
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">spec:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  containers:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - name: my-container
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    image: nginx:latest
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  tolerations:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - key: disktype
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    operator: NotEqual
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    value: ssd
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    effect: NoSchedule
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="example-exists-operator-with-key" data-heading="Example Exists Operator with Key" data-level="4" data-permalink="/docs/kubernetes/part02/" data-title="Part 2" -->
<h4 id="example-exists-operator-with-key">Example Exists Operator with Key</h4><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl apply -f - <span style="color:#e6db74">&lt;&lt;EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">apiVersion: v1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">kind: Pod
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">metadata:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: toleration-exists-key-pod
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">spec:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  containers:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - name: my-container
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    image: nginx:latest
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  tolerations:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - key: disktype
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    operator: Exists
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    effect: NoSchedule
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span></code></pre></div><ul>
<li>Check the pods where are they schedules</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubectl get pod <span style="color:#f92672">-</span>o wide
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="node-affinity" data-heading="Node Affinity" data-level="3" data-permalink="/docs/kubernetes/part02/" data-title="Part 2" -->
<h3 id="node-affinity">Node Affinity</h3><ul>
<li>Label Nodes</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl label nodes kworker1 example-label<span style="color:#f92672">=</span>value1
</span></span><span style="display:flex;"><span>kubectl label nodes kworker2 example-label<span style="color:#f92672">=</span>value2
</span></span></code></pre></div><ul>
<li>Yaml for pod creation</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>cat <span style="color:#e6db74">&lt;&lt;EOF &gt; pod-with-node-affinity.yaml
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">apiVersion: v1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">kind: Pod
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">metadata:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: pod-with-node-affinity
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">spec:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  containers:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - name: nginx-container
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    image: nginx
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  affinity:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    nodeAffinity:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      requiredDuringSchedulingIgnoredDuringExecution:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        nodeSelectorTerms:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        - matchExpressions:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          - key: example-label
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            operator: In
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            values:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            - value1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            - value2
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="example-2-with-operator-notin" data-heading="Example 2 with operator notin" data-level="3" data-permalink="/docs/kubernetes/part02/" data-title="Part 2" -->
<h3 id="example-2-with-operator-notin">Example 2 with operator notin</h3><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>cat <span style="color:#e6db74">&lt;&lt;EOF &gt; pod-with-node-affinity.yaml
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">apiVersion: v1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">kind: Pod
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">metadata:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: pod-with-node-affinity
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">spec:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  containers:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - name: nginx-container
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    image: nginx
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  affinity:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    nodeAffinity:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      requiredDuringSchedulingIgnoredDuringExecution:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        nodeSelectorTerms:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        - matchExpressions:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          - key: example-label
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            operator: NotIn
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            values:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            - value3
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            - value4
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="example-using-exists-operator" data-heading="Example Using Exists Operator" data-level="4" data-permalink="/docs/kubernetes/part02/" data-title="Part 2" -->
<h4 id="example-using-exists-operator">Example Using Exists Operator</h4><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>cat <span style="color:#e6db74">&lt;&lt;EOF &gt; pod-with-node-affinity.yaml
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">apiVersion: v1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">kind: Pod
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">metadata:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: pod-with-node-affinity
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">spec:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  containers:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - name: nginx-container
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    image: nginx
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  affinity:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    nodeAffinity:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      requiredDuringSchedulingIgnoredDuringExecution:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        nodeSelectorTerms:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        - matchExpressions:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          - key: example-label
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            operator: Exists
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span></code></pre></div><ul>
<li>Check the pods status</li>
</ul>
<!-- end-chunk -->
<!-- begin-chunk data-anchor="example-with-preferred-affinity" data-heading="Example with Preferred Affinity" data-level="3" data-permalink="/docs/kubernetes/part02/" data-title="Part 2" -->
<h3 id="example-with-preferred-affinity">Example with Preferred Affinity</h3><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>cat <span style="color:#e6db74">&lt;&lt;EOF &gt; pod-with-preferred-node-affinity.yaml
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">apiVersion: v1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">kind: Pod
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">metadata:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: pod-with-preferred-node-affinity
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">spec:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  containers:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - name: nginx-container
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    image: nginx
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  affinity:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    nodeAffinity:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      preferredDuringSchedulingIgnoredDuringExecution:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      - weight: 1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        preference:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          matchExpressions:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          - key: example-label
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            operator: Exists
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="pod-affinity-and-anti-affinity" data-heading="Pod Affinity and Anti Affinity" data-level="4" data-permalink="/docs/kubernetes/part02/" data-title="Part 2" -->
<h4 id="pod-affinity-and-anti-affinity">Pod Affinity and Anti Affinity</h4><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl apply -f - <span style="color:#e6db74">&lt;&lt;EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">apiVersion: v1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">kind: Pod
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">metadata:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: pod-with-pod-affinity
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  labels:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    app: web
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">spec:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  containers:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - name: nginx-container
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    image: nginx
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">---
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">apiVersion: v1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">kind: Pod
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">metadata:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: pod-with-pod-affinity-rule
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">spec:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  affinity:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    podAffinity:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      requiredDuringSchedulingIgnoredDuringExecution:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      - labelSelector:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          matchExpressions:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          - key: app
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            operator: In
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            values:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            - web
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        topologyKey: kubernetes.io/hostname
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  containers:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - name: nginx-container
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    image: nginx
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="another-example-with-weight" data-heading="Another Example with weight" data-level="4" data-permalink="/docs/kubernetes/part02/" data-title="Part 2" -->
<h4 id="another-example-with-weight">Another Example with weight</h4><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#ae81ff">kubectl apply -f - &lt;&lt;EOF</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">v1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">Pod</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">pod-with-preferred-pod-affinity</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">labels</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">app</span>: <span style="color:#ae81ff">database</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">containers</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">postgres-container</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">image</span>: <span style="color:#ae81ff">postgres</span>
</span></span><span style="display:flex;"><span>---
</span></span><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">v1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">Pod</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">pod-with-preferred-pod-affinity-rule</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">affinity</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">podAffinity</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">preferredDuringSchedulingIgnoredDuringExecution</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#f92672">weight</span>: <span style="color:#ae81ff">100</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">podAffinityTerm</span>:
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">labelSelector</span>:
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">matchExpressions</span>:
</span></span><span style="display:flex;"><span>            - <span style="color:#f92672">key</span>: <span style="color:#ae81ff">app</span>
</span></span><span style="display:flex;"><span>              <span style="color:#f92672">operator</span>: <span style="color:#ae81ff">In</span>
</span></span><span style="display:flex;"><span>              <span style="color:#f92672">values</span>:
</span></span><span style="display:flex;"><span>              - <span style="color:#ae81ff">database</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">topologyKey</span>: <span style="color:#ae81ff">kubernetes.io/hostname</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">containers</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">nginx-container</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">image</span>: <span style="color:#ae81ff">nginx</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">EOF</span>
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="pod-antiaffinity" data-heading="Pod antiAffinity" data-level="4" data-permalink="/docs/kubernetes/part02/" data-title="Part 2" -->
<h4 id="pod-antiaffinity">Pod antiAffinity</h4><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#ae81ff">kubectl apply -f - &lt;&lt;EOF</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">v1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">Pod</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">pod-with-anti-affinity</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">labels</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">app</span>: <span style="color:#ae81ff">web</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">containers</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">nginx-container</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">image</span>: <span style="color:#ae81ff">nginx</span>
</span></span><span style="display:flex;"><span>---
</span></span><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">v1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">Pod</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">pod-with-anti-affinity-rule</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">affinity</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">podAntiAffinity</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">requiredDuringSchedulingIgnoredDuringExecution</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#f92672">labelSelector</span>:
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">matchExpressions</span>:
</span></span><span style="display:flex;"><span>          - <span style="color:#f92672">key</span>: <span style="color:#ae81ff">app</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">operator</span>: <span style="color:#ae81ff">In</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">values</span>:
</span></span><span style="display:flex;"><span>            - <span style="color:#ae81ff">web</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">topologyKey</span>: <span style="color:#ae81ff">kubernetes.io/hostname</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">containers</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">nginx-container</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">image</span>: <span style="color:#ae81ff">nginx</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">EOF</span>
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="soft-antiaffinity" data-heading="Soft AntiAffinity" data-level="4" data-permalink="/docs/kubernetes/part02/" data-title="Part 2" -->
<h4 id="soft-antiaffinity">Soft AntiAffinity</h4><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#ae81ff">kubectl apply -f - &lt;&lt;EOF</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">v1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">Pod</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">pod-with-preferred-anti-affinity</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">labels</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">app</span>: <span style="color:#ae81ff">database</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">containers</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">postgres-container</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">image</span>: <span style="color:#ae81ff">postgres</span>
</span></span><span style="display:flex;"><span>---
</span></span><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">v1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">Pod</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">pod-with-preferred-anti-affinity-rule</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">affinity</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">podAntiAffinity</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">preferredDuringSchedulingIgnoredDuringExecution</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#f92672">weight</span>: <span style="color:#ae81ff">100</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">podAffinityTerm</span>:
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">labelSelector</span>:
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">matchExpressions</span>:
</span></span><span style="display:flex;"><span>            - <span style="color:#f92672">key</span>: <span style="color:#ae81ff">app</span>
</span></span><span style="display:flex;"><span>              <span style="color:#f92672">operator</span>: <span style="color:#ae81ff">In</span>
</span></span><span style="display:flex;"><span>              <span style="color:#f92672">values</span>:
</span></span><span style="display:flex;"><span>              - <span style="color:#ae81ff">database</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">topologyKey</span>: <span style="color:#ae81ff">kubernetes.io/hostname</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">containers</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">nginx-container</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">image</span>: <span style="color:#ae81ff">nginx</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">EOF</span>
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="pod-priorityhttpskubernetesiodocsconceptsscheduling-evictionpod-priority-preemption" data-heading="<a href=\"https://kubernetes.io/docs/concepts/scheduling-eviction/pod-priority-preemption/\" target=\"_blank\" rel=\"noopener\">Pod Priority</a>" data-level="3" data-permalink="/docs/kubernetes/part02/" data-title="Part 2" -->
<h3 id="pod-priorityhttpskubernetesiodocsconceptsscheduling-evictionpod-priority-preemption"><a href="https://kubernetes.io/docs/concepts/scheduling-eviction/pod-priority-preemption/" target="_blank" rel="noopener">Pod Priority</a></h3><!-- end-chunk -->
<!-- begin-chunk data-anchor="pod-priority-classes" data-heading="Pod priority classes" data-level="4" data-permalink="/docs/kubernetes/part02/" data-title="Part 2" -->
<h4 id="pod-priority-classes">Pod priority classes</h4><ul>
<li>
<p>You can assign pods a priority class, which is a non-namespaced object that defines a mapping from a name to the integer value of the priority. The higher the value, the higher the priority.</p>
</li>
<li>
<p>A priority class object can take any 32-bit integer value smaller than or equal to 1000000000 (one billion). Reserve numbers larger than one billion for critical pods that should not be preempted or evicted. By default, OpenShift Container Platform has two reserved priority classes for critical system pods to have guaranteed scheduling.</p>
</li>
<li>
<p>System-node-critical - This priority class has a value of 2000001000 and is used for all pods that should never be evicted from a node. Examples of pods that have this priority class are sdn-ovs, sdn, and so forth.</p>
</li>
<li>
<p>System-cluster-critical - This priority class has a value of 2000000000 (two billion) and is used with pods that are important for the cluster. Pods with this priority class can be evicted from a node in certain circumstances. For example, pods configured with the system-node-critical priority class can take priority. However, this priority class does ensure guaranteed scheduling. Examples of pods that can have this priority class are fluentd, add-on components like descheduler, and so forth.</p>
</li>
<li>
<p>Sample priority class object</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kubectl apply -f - <span style="color:#e6db74">&lt;&lt;EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">apiVersion: scheduling.k8s.io/v1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">kind: PriorityClass
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">metadata:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: high-priority 
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">value: 1000000 
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">globalDefault: false 
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">description: &#34;This priority class should be used for XYZ service pods only.&#34; 
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span></code></pre></div><ul>
<li>Sample pod specification with priority class name</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kubectl apply -f - <span style="color:#e6db74">&lt;&lt;EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">apiVersion: v1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">kind: Pod
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">metadata:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: nginx
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  labels:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    env: test
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">spec:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  containers:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - name: nginx
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    image: nginx
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    imagePullPolicy: IfNotPresent
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  priorityClassName: high-priority
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span> 
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="pod-disruptions-budget" data-heading="Pod Disruptions Budget:" data-level="2" data-permalink="/docs/kubernetes/part02/" data-title="Part 2" -->
<h2 id="pod-disruptions-budget">Pod Disruptions Budget:</h2><ul>
<li><a href="https://kubernetes.io/docs/concepts/workloads/pods/disruptions/" target="_blank" rel="noopener">Learn more about Disruptions Budget </a></li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kubectl apply -f - <span style="color:#e6db74">&lt;&lt;EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">apiVersion: policy/v1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">kind: PodDisruptionBudget
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">metadata:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: example-pdb
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">spec:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  minAvailable: 2
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  selector:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    matchLabels:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      app: example-app
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="use-of-pdb-with-deployment" data-heading="Use of pdb with Deployment" data-level="3" data-permalink="/docs/kubernetes/part02/" data-title="Part 2" -->
<h3 id="use-of-pdb-with-deployment">Use of pdb with Deployment</h3><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kubectl apply -f - <span style="color:#e6db74">&lt;&lt;EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">apiVersion: apps/v1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">kind: Deployment
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">metadata:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: example-deployment
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">spec:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  replicas: 3
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  selector:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    matchLabels:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      app: example-app
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  template:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    metadata:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      labels:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        app: example-app
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    spec:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      containers:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      - name: nginx-container
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        image: nginx:latest
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">---
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">apiVersion: policy/v1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">kind: PodDisruptionBudget
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">metadata:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: example-pdb
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">spec:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  minAvailable: 2
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  selector:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    matchLabels:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      app: example-app
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="pod-preemption-and-pod-distruption-budget" data-heading="Pod Preemption and Pod Distruption Budget" data-level="3" data-permalink="/docs/kubernetes/part02/" data-title="Part 2" -->
<h3 id="pod-preemption-and-pod-distruption-budget">Pod Preemption and Pod Distruption Budget</h3><ul>
<li>Pod preemption and other scheduler settings
If you enable pod priority and preemption, consider your other scheduler settings:</li>
</ul>
<!-- end-chunk -->
<!-- begin-chunk data-anchor="pod-priority-and-pod-disruption-budget" data-heading="Pod priority and pod disruption budget" data-level="4" data-permalink="/docs/kubernetes/part02/" data-title="Part 2" -->
<h4 id="pod-priority-and-pod-disruption-budget">Pod priority and pod disruption budget</h4><ul>
<li>A pod disruption budget specifies the minimum number or percentage of replicas that must be up at a time. If you specify pod disruption budgets, OpenShift Container Platform respects them when preempting pods at a best effort level. The scheduler attempts to preempt pods without violating the pod disruption budget. If no such pods are found, lower-priority pods might be preempted despite their pod disruption budget requirements.</li>
</ul>
<!-- end-chunk -->
<!-- begin-chunk data-anchor="pod-priority-and-pod-affinity" data-heading="Pod priority and pod affinity" data-level="4" data-permalink="/docs/kubernetes/part02/" data-title="Part 2" -->
<h4 id="pod-priority-and-pod-affinity">Pod priority and pod affinity</h4><p>Pod affinity requires a new pod to be scheduled on the same node as other pods with the same label.</p>
<!-- end-chunk -->
<!-- begin-chunk data-anchor="pointer-regarding-pod-scheduling" data-heading="Pointer Regarding Pod Scheduling" data-level="4" data-permalink="/docs/kubernetes/part02/" data-title="Part 2" -->
<h4 id="pointer-regarding-pod-scheduling">Pointer Regarding Pod Scheduling</h4><ul>
<li>
<p>Preemption removes existing Pods from a cluster under resource pressure to make room for higher priority pending Pods</p>
</li>
<li>
<p>The default priority for all pods is zero ( 0 )</p>
</li>
<li>
<p>Supported Operators for Affinity</p>
<ul>
<li>
<p>The operator represents the relationship between the label on the node and the set of values in the matchExpression parameters in the pod specification.</p>
</li>
<li>
<p>This value can be below:</p>
<ul>
<li>In,</li>
<li>NotIn,</li>
<li>Exists</li>
<li>DoesNotExist</li>
<li>Lt</li>
<li>Gt</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Specify a weight for the node, 1-100. The node that with highest weight is preferred.</p>
</li>
<li>
<p>A taint on a node instructs the node to repel all pods that do not tolerate the taint.</p>
</li>
<li>
<p>Taint Effects are given below:</p>
</li>
</ul>
<!-- end-chunk -->
<!-- begin-chunk data-anchor="the-effect-is-one-of-the-following" data-heading="The effect is one of the following:" data-level="4" data-permalink="/docs/kubernetes/part02/" data-title="Part 2" -->
<h4 id="the-effect-is-one-of-the-following">The effect is one of the following:</h4><!-- end-chunk -->
<!-- begin-chunk data-anchor="noschedule" data-heading="NoSchedule" data-level="5" data-permalink="/docs/kubernetes/part02/" data-title="Part 2" -->
<h5 id="noschedule">NoSchedule</h5><p>New pods that do not match the taint are not scheduled onto that node.
Existing pods on the node remain.</p>
<!-- end-chunk -->
<!-- begin-chunk data-anchor="prefernoschedule" data-heading="PreferNoSchedule" data-level="5" data-permalink="/docs/kubernetes/part02/" data-title="Part 2" -->
<h5 id="prefernoschedule">PreferNoSchedule</h5><p>New pods that do not match the taint might be scheduled onto that node, but the scheduler tries not to.</p>
<p>Existing pods on the node remain.</p>
<!-- end-chunk -->
<!-- begin-chunk data-anchor="noexecute" data-heading="NoExecute" data-level="4" data-permalink="/docs/kubernetes/part02/" data-title="Part 2" -->
<h4 id="noexecute">NoExecute</h4><p>New pods that do not match the taint cannot be scheduled onto that node.</p>
<p>Existing pods on the node that do not have a matching toleration are removed.</p>
<!-- end-chunk -->
<!-- begin-chunk data-anchor="operator" data-heading="operator" data-level="3" data-permalink="/docs/kubernetes/part02/" data-title="Part 2" -->
<h3 id="operator">operator</h3><!-- end-chunk -->
<!-- begin-chunk data-anchor="equal" data-heading="Equal" data-level="4" data-permalink="/docs/kubernetes/part02/" data-title="Part 2" -->
<h4 id="equal">Equal</h4><p>The key/value/effect parameters must match. This is the default.</p>
<!-- end-chunk -->
<!-- begin-chunk data-anchor="exists" data-heading="Exists" data-level="4" data-permalink="/docs/kubernetes/part02/" data-title="Part 2" -->
<h4 id="exists">Exists</h4><p>The key/effect parameters must match. You must leave a blank value parameter, which matches any.</p>
<ul>
<li><a href="https://github.com/kubernetes-sigs/descheduler" target="_blank" rel="noopener">Descheduler</a></li>
</ul>

	
	
	
</div>


          </main>
        </div>
      </div>
      
    </div>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
    integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.min.js"
    integrity="sha512-UR25UO94eTnCVwjbXozyeVd6ZqpaAE9naiEUBK/A+QDbfSTQFhPGj5lOR6d8tsgbBk84Ggb5A3EkjsOgPRPcKA=="
    crossorigin="anonymous"></script>





<script src='/js/tabpane-persist.js'></script>




















<script src="/js/main.min.223ab2fcc7d742c1b94772c0276851c497da4343cd2d21534199ced90681e207.js" integrity="sha256-Ijqy/MfXQsG5R3LAJ2hRxJfaQ0PNLSFTQZnO2QaB4gc=" crossorigin="anonymous"></script>



<script src='/js/prism.js'></script>



  </body>
</html>