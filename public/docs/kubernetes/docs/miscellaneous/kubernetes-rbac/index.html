
<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.122.0">
<meta name="robots" content="index, follow">

<link rel="shortcut icon" href="/favicons/favicon.ico" >

<title>Kubernetes RBAC | Documentation</title>
<meta name="description" content="

RBACKubernetes RBAC is a powerful security feature that allows administrators to control who can access the Kubernetes API and what actions they can …&lt;/!--&gt;&lt;/!--&gt;">
<meta property="og:title" content="Kubernetes RBAC" />
<meta property="og:description" content="RBACKubernetes RBAC is a powerful security feature that allows administrators to control who can access the Kubernetes API and what actions they can perform. You can use it to implement the principle of &ldquo;least privilege,&rdquo; which means that users should have the minimum levels of access necessary to perform their tasks. This approach minimizes the potential for accidental or malicious misuse of the Kubernetes system.
Role-based access control (RBAC) is a method of regulating access to computer or network resources based on the roles of individual users within your organization." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/" /><meta property="article:section" content="docs" />

<meta property="article:modified_time" content="2024-06-01T18:32:23+05:30" />

<meta itemprop="name" content="Kubernetes RBAC">
<meta itemprop="description" content="RBACKubernetes RBAC is a powerful security feature that allows administrators to control who can access the Kubernetes API and what actions they can perform. You can use it to implement the principle of &ldquo;least privilege,&rdquo; which means that users should have the minimum levels of access necessary to perform their tasks. This approach minimizes the potential for accidental or malicious misuse of the Kubernetes system.
Role-based access control (RBAC) is a method of regulating access to computer or network resources based on the roles of individual users within your organization.">
<meta itemprop="dateModified" content="2024-06-01T18:32:23+05:30" />
<meta itemprop="wordCount" content="1714">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Kubernetes RBAC"/>
<meta name="twitter:description" content="RBACKubernetes RBAC is a powerful security feature that allows administrators to control who can access the Kubernetes API and what actions they can perform. You can use it to implement the principle of &ldquo;least privilege,&rdquo; which means that users should have the minimum levels of access necessary to perform their tasks. This approach minimizes the potential for accidental or malicious misuse of the Kubernetes system.
Role-based access control (RBAC) is a method of regulating access to computer or network resources based on the roles of individual users within your organization."/>




<link rel="preload" href="/scss/main.min.723d31f72c8542b0efd4dc916a8b429bb3241885d5c0984bf341c1aad66aed50.css" as="style">
<link href="/scss/main.min.723d31f72c8542b0efd4dc916a8b429bb3241885d5c0984bf341c1aad66aed50.css" rel="stylesheet" integrity="">

<script
  src="https://code.jquery.com/jquery-3.6.0.min.js"
  integrity="sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK"
  crossorigin="anonymous"></script>
<script
  src="https://unpkg.com/lunr@2.3.9/lunr.min.js"
  integrity="sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli"
  crossorigin="anonymous"></script>
<link rel="stylesheet" href="/css/prism.css"/>
<script type="text/javascript"  src="/js/highlight-search.js"></script>
<script type="text/javascript"  src="/js/manage-side-panels.js"></script>
  </head>
  <body class="td-page highlightable">
    <header>
      
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
        <a class="navbar-brand" href="/">
		<span class="navbar-logo"><svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="217pt" height="232pt" viewBox="0 0 217 232"><g transform="translate(0.000000,232.000000) scale(0.100000,-0.100000)" fill="#000" stroke="none"><path d="M1017 2250c-397-48-698-367-731-775-9-106-3-113 66-87l55 20 11-71c6-39 10-72 9-73s-58-22-127-47c-104-37-124-48-122-64 7-37 56-150 88-205l34-56 66 25 66 26 65-72c206-226 513-322 808-252 367 88 634 417 635 784 0 43-4 77-10 77-5 0-32-9-60-20s-55-20-59-20c-5 0-12 26-16 59-4 32-20 96-36 142s-30 88-31 92c-2 5 54 29 124 55l128 46-31 55c-17 31-33 58-34 59-2 2-31-6-64-19l-61-22-23 29c-81 104-172 178-292 235-140 68-309 97-458 79zm226-299c90-24 136-46 206-101l52-41 61 20 60 20 26-31c15-17 35-44 44-59l17-28-52-19c-29-11-86-32-128-47l-76-27 24-58c26-66 43-144 43-201 0-22 2-39 5-39 2 0 27 9 55 20s55 20 60 20c17 0 10-63-14-131-127-359-580-484-862-237l-35 31-70-24-71-24-30 35c-37 43-97 164-104 212l-6 34 123 46 124 45-3 64c-2 35-5 66-7 68-2 1-27-5-55-14s-53-15-55-14c-2 2 1 29 7 59 32 179 185 352 361 409 112 36 192 39 3e2 12z"/><path d="M134 321c-77-33-95-169-29-231 19-18 36-23 71-23 40 0 51 4 75 30 50 56 47 153-5 202-26 25-80 35-112 22zm82-62c26-29 26-99 0-128-24-26-47-27-77-2-19 15-24 29-24 64 0 76 58 114 101 66z"/><path d="M1172 320c-27-12-44-52-33-82 4-12 31-32 61-47 30-14 58-34 64-43 26-43-50-76-99-44-15 10-26 12-30 6-10-16 4-29 44-40 62-17 114 13 114 65 0 35-19 53-80 81-54 23-67 46-41 72 15 15 62 16 88 2 23-12 35 3 16 19-20 17-77 23-104 11z"/><path d="M350 195V70h25c23 0 25 4 25 45v45h40c76 0 115 40 103 104-8 42-38 56-120 56h-73V195zm134 69c18-18 18-17 10-38-4-11-19-16-50-16-44 0-44 0-44 35 0 33 2 35 34 35 19 0 42-7 50-16z"/><path d="M6e2 195V70h90c83 0 90 2 90 20 0 16-8 19-62 22-63 3-63 3-66 36-3 31-2 32 36 32 36 0 39 2 34 25-4 21-10 25-38 25-30 0-34 3-34 25 0 24 2 25 65 25 58 0 65 2 65 20 0 19-7 20-90 20h-90V195z"/><path d="M850 195c0-117 1-125 20-125 17 0 19 8 22 83l3 82 55-82c41-62 61-83 78-83 22 0 22 2 22 125 0 117-1 125-20 125-17 0-19-8-22-82l-3-82-54 82c-42 65-59 82-77 82-24 0-24 0-24-125z"/><path d="M1360 195c0-104 2-125 15-125 12 0 15 13 15 60v60h65 65v-60c0-47 3-60 15-60 13 0 15 21 15 125s-2 125-15 125c-12 0-15-13-15-55v-55h-65-65v55c0 42-3 55-15 55-13 0-15-21-15-125z"/><path d="M1620 195c0-104 2-125 15-125s15 21 15 125-2 125-15 125-15-21-15-125z"/><path d="M1730 195c0-77 4-125 10-125s10 27 10 60v60h35c19 0 35 5 35 10 0 6-16 10-35 10-35 0-35 0-35 45v45h60c33 0 60 4 60 10s-30 10-70 10h-70V195z"/><path d="M1930 310c0-5 18-10 40-10h40V185c0-70 4-115 10-115s10 45 10 115v115h40c22 0 40 5 40 10 0 6-37 10-90 10s-90-4-90-10z"/></g></svg></span><span class="font-weight-bold">Documentation</span>
	</a>
	<div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
		<ul class="navbar-nav mt-2 mt-lg-0">
			
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				
				
				<a class="nav-link active" href="/docs/kubernetes/" ><i class='fas fa-binoculars'></i><span class="active">KUBERNETES DOCUMENTS</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				
				
				<a class="nav-link" href="/docs/ansible/" ><i class='fas fa-user-check'></i><span>Ansible</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				
				
				<a class="nav-link" href="/docs/azure-devops/" ><i class='fas fa-user-check'></i><span>Azure Devops</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				
				
				<a class="nav-link" href="/docs/devops/" ><i class='fas fa-user-check'></i><span>Devops </span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				
				
				<a class="nav-link" href="/docs/gitlab/" ><i class='fas fa-user-check'></i><span>Gitlab</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				
				
				<a class="nav-link" href="/docs/openshift/" ><i class='fas fa-user-check'></i><span>Openshift</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				
				
				<a class="nav-link" href="/docs/terraform/" ><i class='fas fa-user-check'></i><span>Terraform</span></a>
			</li>
			
			
			
		</ul>
	</div>
	<div class="navbar-nav d-none d-lg-block">
<form class="d-flex align-items-center">
  <input type="search"
  class="form-control td-search-input"
  placeholder="&#xf002; Search this site…"
  aria-label="Search this site…"
  autocomplete="off"
  
  data-offline-search-index-json-src="/offline-search-index.d81df5ea3c42d7ddf1c407fed2af5e96.json"
  data-offline-search-base-href="/"
  data-offline-search-max-results="20">
</form>
</div>
</nav>

      <div class="manage-panels">
    <button type="button" class="button-left" id="left-panel-manager" title="Hide sidebar">""</button>
    <button type="button" class="button-right" id="right-panel-manager" title="Hide sidebar">""</button>
</div>
    </header>
    <div class="container-fluid td-outer">
      <div class="td-main autonumbering">
        <div class="row flex-xl-nowrap">
          <aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            
<div id="td-sidebar-menu" class="td-sidebar__inner">
  <div id="content-mobile">
  <form class="td-sidebar__search d-flex align-items-center">
    
<form class="d-flex align-items-center">
  <input type="search"
  class="form-control td-search-input"
  placeholder="&#xf002; Search this site…"
  aria-label="Search this site…"
  autocomplete="off"
  
  data-offline-search-index-json-src="/offline-search-index.d81df5ea3c42d7ddf1c407fed2af5e96.json"
  data-offline-search-base-href="/"
  data-offline-search-max-results="20">
</form>

    <button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type="button" data-toggle="collapse" data-target="#td-section-nav" aria-controls="td-docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    </button>
  </form>
  </div>
  <div id="content-desktop"></div>
  <nav class="collapse td-sidebar-nav foldable-nav" id="td-section-nav">
    <ul class="td-sidebar-nav__section pr-md-3 ul-0">
      <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-docs-li">
  <a href="/docs/" title="DEVOPS Documents hub" class="align-left pl-0 td-sidebar-link td-sidebar-link__section tree-root" id="m-docs"><span class="">Docs</span></a>
  <ul class="ul-1">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-docskubernetes-li">
  <input type="checkbox" id="m-docskubernetes-check" checked/>
  <label for="m-docskubernetes-check"><a href="/docs/kubernetes/" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-docskubernetes"><i class="fas fa-compass"></i><span class="">KUBERNETES DOCUMENTS</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docskubernetespart01-li">
  <input type="checkbox" id="m-docskubernetespart01-check"/>
  <label for="m-docskubernetespart01-check"><a href="/docs/kubernetes/part01/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docskubernetespart01"><span class="">Part 1</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docskubernetespart02-li">
  <input type="checkbox" id="m-docskubernetespart02-check"/>
  <label for="m-docskubernetespart02-check"><a href="/docs/kubernetes/part02/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docskubernetespart02"><span class="">Part 2</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docskubernetespart03-li">
  <input type="checkbox" id="m-docskubernetespart03-check"/>
  <label for="m-docskubernetespart03-check"><a href="/docs/kubernetes/part03/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docskubernetespart03"><span class="">Part 3</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docskubernetespart04-li">
  <input type="checkbox" id="m-docskubernetespart04-check"/>
  <label for="m-docskubernetespart04-check"><a href="/docs/kubernetes/part04/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docskubernetespart04"><span class="">Part 4</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docskubernetespart05-li">
  <input type="checkbox" id="m-docskubernetespart05-check"/>
  <label for="m-docskubernetespart05-check"><a href="/docs/kubernetes/part05/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docskubernetespart05"><span class="">Part 5</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docskubernetesdocsmiscellaneouscontainerbasics-li">
  <input type="checkbox" id="m-docskubernetesdocsmiscellaneouscontainerbasics-check"/>
  <label for="m-docskubernetesdocsmiscellaneouscontainerbasics-check"><a href="/docs/kubernetes/docs/miscellaneous/containerbasics/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docskubernetesdocsmiscellaneouscontainerbasics"><span class="">Container Basics</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docskubernetesdocsmiscellaneoushelm-overview-li">
  <input type="checkbox" id="m-docskubernetesdocsmiscellaneoushelm-overview-check"/>
  <label for="m-docskubernetesdocsmiscellaneoushelm-overview-check"><a href="/docs/kubernetes/docs/miscellaneous/helm-overview/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docskubernetesdocsmiscellaneoushelm-overview"><span class="">Helm Overview</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docskubernetesdocsmiscellaneouskubernetes-rbac-li">
  <input type="checkbox" id="m-docskubernetesdocsmiscellaneouskubernetes-rbac-check"/>
  <label for="m-docskubernetesdocsmiscellaneouskubernetes-rbac-check"><a href="/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/" class="align-left pl-0  active td-sidebar-link td-sidebar-link__page" id="m-docskubernetesdocsmiscellaneouskubernetes-rbac"><span class="td-sidebar-nav-active-item">Kubernetes RBAC</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docskubernetesdocsmiscellaneouskubernetes-on-centos-li">
  <input type="checkbox" id="m-docskubernetesdocsmiscellaneouskubernetes-on-centos-check"/>
  <label for="m-docskubernetesdocsmiscellaneouskubernetes-on-centos-check"><a href="/docs/kubernetes/docs/miscellaneous/kubernetes-on-centos/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docskubernetesdocsmiscellaneouskubernetes-on-centos"><span class="">Kubernetes-on-Centos</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docskubernetesdocsmiscellaneouskuberneteshardway-li">
  <input type="checkbox" id="m-docskubernetesdocsmiscellaneouskuberneteshardway-check"/>
  <label for="m-docskubernetesdocsmiscellaneouskuberneteshardway-check"><a href="/docs/kubernetes/docs/miscellaneous/kuberneteshardway/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docskubernetesdocsmiscellaneouskuberneteshardway"><span class="">Kubernets Installation From Scatch on rocky 9</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docskubernetesdocsmiscellaneousminio-li">
  <input type="checkbox" id="m-docskubernetesdocsmiscellaneousminio-check"/>
  <label for="m-docskubernetesdocsmiscellaneousminio-check"><a href="/docs/kubernetes/docs/miscellaneous/minio/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docskubernetesdocsmiscellaneousminio"><span class="">The Object Store for AI Data Infrastructure</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsansible-li">
  <input type="checkbox" id="m-docsansible-check"/>
  <label for="m-docsansible-check"><a href="/docs/ansible/" title="Configuration Management Tool" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-docsansible"><i class="fas fa-user-check"></i><span class="">Ansible</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsazure-devops-li">
  <input type="checkbox" id="m-docsazure-devops-check"/>
  <label for="m-docsazure-devops-check"><a href="/docs/azure-devops/" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-docsazure-devops"><i class="fas fa-user-check"></i><span class="">Azure Devops</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsazure-devopsaks-deployment-li">
  <input type="checkbox" id="m-docsazure-devopsaks-deployment-check"/>
  <label for="m-docsazure-devopsaks-deployment-check"><a href="/docs/azure-devops/aks-deployment/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsazure-devopsaks-deployment"><span class="">AKS Deployment</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsazure-devopsazure-container-registry-li">
  <input type="checkbox" id="m-docsazure-devopsazure-container-registry-check"/>
  <label for="m-docsazure-devopsazure-container-registry-check"><a href="/docs/azure-devops/azure-container-registry/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsazure-devopsazure-container-registry"><span class="">Azure Container Registry</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsazure-devopsazure-devopsagent-li">
  <input type="checkbox" id="m-docsazure-devopsazure-devopsagent-check"/>
  <label for="m-docsazure-devopsazure-devopsagent-check"><a href="/docs/azure-devops/azure-devopsagent/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsazure-devopsazure-devopsagent"><span class="">Azure Devops Pipeline Agent</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsazure-devopsazure-devops-pipeline-li">
  <input type="checkbox" id="m-docsazure-devopsazure-devops-pipeline-check"/>
  <label for="m-docsazure-devopsazure-devops-pipeline-check"><a href="/docs/azure-devops/azure-devops-pipeline/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsazure-devopsazure-devops-pipeline"><span class="">Azure Devops Pipeline Basics</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsazure-devopsazure-dns-li">
  <input type="checkbox" id="m-docsazure-devopsazure-dns-check"/>
  <label for="m-docsazure-devopsazure-dns-check"><a href="/docs/azure-devops/azure-dns/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsazure-devopsazure-dns"><span class="">Azure DNS</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsazure-devopscertmanager-li">
  <input type="checkbox" id="m-docsazure-devopscertmanager-check"/>
  <label for="m-docsazure-devopscertmanager-check"><a href="/docs/azure-devops/certmanager/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsazure-devopscertmanager"><span class="">Cert Manager</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsazure-devopsingresscontroller-li">
  <input type="checkbox" id="m-docsazure-devopsingresscontroller-check"/>
  <label for="m-docsazure-devopsingresscontroller-check"><a href="/docs/azure-devops/ingresscontroller/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsazure-devopsingresscontroller"><span class="">IngressController</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsdevops-li">
  <input type="checkbox" id="m-docsdevops-check"/>
  <label for="m-docsdevops-check"><a href="/docs/devops/" title="Devops" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-docsdevops"><i class="fas fa-user-check"></i><span class="">Devops </span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsdevopsdevops-advance-li">
  <input type="checkbox" id="m-docsdevopsdevops-advance-check"/>
  <label for="m-docsdevopsdevops-advance-check"><a href="/docs/devops/devops-advance/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsdevopsdevops-advance"><span class="">Devops for Advance Level</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsdevopsdevopsl1-li">
  <input type="checkbox" id="m-docsdevopsdevopsl1-check"/>
  <label for="m-docsdevopsdevopsl1-check"><a href="/docs/devops/devopsl1/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsdevopsdevopsl1"><span class="">Devops for Begineers</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsdevopselk-stack-li">
  <input type="checkbox" id="m-docsdevopselk-stack-check"/>
  <label for="m-docsdevopselk-stack-check"><a href="/docs/devops/elk-stack/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsdevopselk-stack"><span class="">ELK statck </span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsdevopspostgresql-li">
  <input type="checkbox" id="m-docsdevopspostgresql-check"/>
  <label for="m-docsdevopspostgresql-check"><a href="/docs/devops/postgresql/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsdevopspostgresql"><span class="">Postgres Installation </span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsgitlab-li">
  <input type="checkbox" id="m-docsgitlab-check"/>
  <label for="m-docsgitlab-check"><a href="/docs/gitlab/" title="Project Management Tool" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-docsgitlab"><i class="fas fa-user-check"></i><span class="">Gitlab</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsterraform-li">
  <input type="checkbox" id="m-docsterraform-check"/>
  <label for="m-docsterraform-check"><a href="/docs/terraform/" title="Infrastracture as a Code" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-docsterraform"><i class="fas fa-user-check"></i><span class="">Terraform</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsterraformdiscussions-li">
  <input type="checkbox" id="m-docsterraformdiscussions-check"/>
  <label for="m-docsterraformdiscussions-check"><a href="/docs/terraform/discussions/" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-docsterraformdiscussions"><span class="">Discussions</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsterraformterraform-with-aws-li">
  <input type="checkbox" id="m-docsterraformterraform-with-aws-check"/>
  <label for="m-docsterraformterraform-with-aws-check"><a href="/docs/terraform/terraform-with-aws/" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-docsterraformterraform-with-aws"><span class="">Terraform with AWS</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsterraformterraform-with-azure-li">
  <input type="checkbox" id="m-docsterraformterraform-with-azure-check"/>
  <label for="m-docsterraformterraform-with-azure-check"><a href="/docs/terraform/terraform-with-azure/" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-docsterraformterraform-with-azure"><span class="">Terraform with Azure</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsterraformterraform-with-gcp-li">
  <input type="checkbox" id="m-docsterraformterraform-with-gcp-check"/>
  <label for="m-docsterraformterraform-with-gcp-check"><a href="/docs/terraform/terraform-with-gcp/" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-docsterraformterraform-with-gcp"><span class="">Terraform with Google Cloud</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsopenshift-li">
  <input type="checkbox" id="m-docsopenshift-check"/>
  <label for="m-docsopenshift-check"><a href="/docs/openshift/" title="Redhat Container Platform" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-docsopenshift"><i class="fas fa-user-check"></i><span class="">Openshift</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsopenshiftopenshift-baremetalmd-li">
  <input type="checkbox" id="m-docsopenshiftopenshift-baremetalmd-check"/>
  <label for="m-docsopenshiftopenshift-baremetalmd-check"><a href="/docs/openshift/openshift-baremetal.md/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsopenshiftopenshift-baremetalmd"><span class="">Openshift Baremetal</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsopenshiftocpsetup-li">
  <input type="checkbox" id="m-docsopenshiftocpsetup-check"/>
  <label for="m-docsopenshiftocpsetup-check"><a href="/docs/openshift/ocpsetup/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsopenshiftocpsetup"><span class="">Openshift Installation and Upgradation</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsopenshiftprerequisites-li">
  <input type="checkbox" id="m-docsopenshiftprerequisites-check"/>
  <label for="m-docsopenshiftprerequisites-check"><a href="/docs/openshift/prerequisites./" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsopenshiftprerequisites"><span class="">OpenShift Prerequisites</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsopenshiftopenshifttasks-li">
  <input type="checkbox" id="m-docsopenshiftopenshifttasks-check"/>
  <label for="m-docsopenshiftopenshifttasks-check"><a href="/docs/openshift/openshifttasks/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsopenshiftopenshifttasks"><span class="">OpenShift Tasks</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsopenshifttoc-li">
  <input type="checkbox" id="m-docsopenshifttoc-check"/>
  <label for="m-docsopenshifttoc-check"><a href="/docs/openshift/toc/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsopenshifttoc"><span class="">Openshift TOC</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsopenshiftpart-1-li">
  <input type="checkbox" id="m-docsopenshiftpart-1-check"/>
  <label for="m-docsopenshiftpart-1-check"><a href="/docs/openshift/part-1/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsopenshiftpart-1"><span class="">Part 1</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsopenshiftpart-2-li">
  <input type="checkbox" id="m-docsopenshiftpart-2-check"/>
  <label for="m-docsopenshiftpart-2-check"><a href="/docs/openshift/part-2/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsopenshiftpart-2"><span class="">Part 2</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsopenshiftopenid-azuread-li">
  <input type="checkbox" id="m-docsopenshiftopenid-azuread-check"/>
  <label for="m-docsopenshiftopenid-azuread-check"><a href="/docs/openshift/openid-azuread/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsopenshiftopenid-azuread"><span class="">Use and configure OpenID connect with Azure AD</span></a></label>
  
</li>
  </ul>
</li>
  </ul>
</li>
    </ul>
  </nav>
</div>

          </aside>
          <aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none">
            

    <div class="td-page-meta ml-2 pb-1 pt-2 mb-0">
        <div class="toc-title">Actions</div>
        <a href="/edit/master/content/docs/kubernetes/docs/miscellaneous/Kubernetes%20RBAC.md" target="_blank" rel="noopener"><i class="fa fa-edit fa-fw"></i> Contribute to this page</a>
        <a href="/issues/new?issue%5Btitle=%f0%9f%93%83%20docs:%20update%20page%20docs/kubernetes/docs/miscellaneous/Kubernetes%20RBAC.md" target="_blank" rel="noopener"><i class="fab fa-gitlab fa-fw"></i> Create a documentation issue</a>
       
    </div>

            
<div class="td-page-meta ml-2 pb-1 pt-2 mb-0 right-menu-toc">

    
        
            <div class="toc-title">Table of content</div>
            <div class="td-toc"><nav id="TableOfContents">
  <ul>
    <li><a href="#rbac">RBAC</a>
      <ul>
        <li>
          <ul>
            <li><a href="#core-components-of-kubernetes-rbac">Core Components of Kubernetes RBAC</a></li>
            <li><a href="#role">Role</a></li>
            <li><a href="#clusterroles">ClusterRoles</a></li>
            <li><a href="#rolebinding-and-clusterrolebinding">RoleBinding and ClusterRoleBinding</a></li>
          </ul>
        </li>
        <li><a href="#documentation-and-websites-referredhttpskubernetesiodocsreferenceaccess-authn-authzauthentication"><a href="https://kubernetes.io/docs/reference/access-authn-authz/authentication/">Documentation and Websites Referred</a></a>
          <ul>
            <li><a href="#service-account">Service Account</a></li>
            <li><a href="#step-1-create-a-new-service-account">Step 1: Create a new Service Account:</a></li>
            <li><a href="#step-2-create-a-new-pod-with-external-service-account">Step 2: Create a new POD with External Service Account</a></li>
            <li><a href="#step-3-verification">Step 3: Verification</a></li>
            <li><a href="#step-4-fetch-the-token-of-a-pod">Step 4: Fetch the Token of a POD</a></li>
            <li><a href="#step-5-make-a-request-to-kubernetes-using-token">Step 5: Make a Request to Kubernetes using Token</a></li>
            <li><a href="#now-if-you-want-you-can-generate-a-script-using-the-below-script">Now if you want you can generate a script using the below script</a></li>
            <li><a href="#using-the-kubeconfig-file">Using the Kubeconfig File</a></li>
          </ul>
        </li>
        <li><a href="#create-user-with-certificate">Create user with certificate</a>
          <ul>
            <li><a href="#step-1-create-a-new-private-key--and-csr">Step 1: Create a new private key  and CSR</a></li>
            <li><a href="#step-2-decode-the-csr">Step 2: Decode the csr</a></li>
            <li><a href="#step-3-generate-the-kubernetes-signing-request">Step 3: Generate the Kubernetes Signing Request</a></li>
            <li><a href="#step-4-apply-the-signing-requests">Step 4: Apply the Signing Requests:</a></li>
            <li><a href="#step-5-approve-the-csr">Step 5: Approve the csr</a></li>
            <li><a href="#step-6-download-the-certificate-from-csr">Step 6: Download the Certificate from csr</a></li>
            <li><a href="#step-7-create-a-new-context">Step 7: Create a new context</a></li>
            <li><a href="#step-8-set-new-context">Step 8: Set new Context</a></li>
            <li><a href="#step-9-use-context-to-verify">Step 9: Use Context to Verify</a></li>
            <li><a href="#step-10-create-rbac-role-allowing-list-pods-operation">Step 10: Create RBAC Role Allowing List PODS Operation</a></li>
            <li><a href="#step-11-create-a-new-role-binding">Step 11: Create a New Role Binding</a></li>
            <li><a href="#step-12-verify-permissions">Step 12: Verify Permissions</a></li>
            <li><a href="#step-13-delete-resources-created-in-this-lab">Step 13: Delete Resources Created in this Lab</a></li>
            <li><a href="#namespace-access-control">NameSpace Access Control</a></li>
          </ul>
        </li>
        <li><a href="#teama-rolebindingyaml">teama-rolebinding.yaml</a></li>
        <li><a href="#clusterrole--clusterrolebindinghttpskubernetesiodocsreferenceaccess-authn-authzauthorization"><a href="https://kubernetes.io/docs/reference/access-authn-authz/authorization/">ClusterRole &amp; ClusterRoleBinding</a></a>
          <ul>
            <li>
              <ul>
                <li><a href="#step-1-delete-role-and-role-binding">Step 1: Delete Role and Role Binding</a></li>
                <li><a href="#step-2-create-a-cluster-role">Step 2: Create a Cluster Role</a></li>
              </ul>
            </li>
            <li><a href="#step-3-create-a-cluster-role-binding-for-a-serviceaccount-named-external-in-default-namespace-make-sure-to-create-sa-in-right-namespace">Step 3: Create a Cluster Role Binding for a ServiceAccount named external in default namespace (make sure to create sa in right namespace)</a>
              <ul>
                <li><a href="#step-4-verify-permissions">Step 4: Verify Permissions</a></li>
                <li><a href="#step-5-create-a-new-namespace">Step 5: Create a new Namespace</a></li>
              </ul>
            </li>
            <li><a href="#step-6-delete-cluster-role-binding">Step 6: Delete Cluster Role Binding</a></li>
            <li><a href="#step-7-create-role-binding-with-clusterrole">Step 7: Create Role Binding with ClusterRole</a></li>
            <li><a href="#step-8-verification">Step 8: Verification</a></li>
          </ul>
        </li>
        <li><a href="#role-with-imperative-commands">Role with Imperative commands</a></li>
        <li><a href="#create-a-role-named-pod-reader-that-allows-users-to-perform-get-watch-and-list-on-pods">Create a Role named &ldquo;pod-reader&rdquo; that allows users to perform get, watch and list on pods:</a></li>
        <li><a href="#create-a-role-named-pod-reader-with-resourcenames-specified">Create a Role named &ldquo;pod-reader&rdquo; with resourceNames specified:</a></li>
        <li><a href="#create-a-role-named-foo-with-apigroups-specified">Create a Role named &ldquo;foo&rdquo; with apiGroups specified:</a></li>
        <li><a href="#create-a-role-named-foo-with-subresource-permissions">Create a Role named &ldquo;foo&rdquo; with subresource permissions:</a></li>
        <li><a href="#create-a-role-named-my-component-lease-holder-with-permissions-to-getupdate-a-resource-with-a-specific-name">Create a Role named &ldquo;my-component-lease-holder&rdquo; with permissions to get/update a resource with a specific name:</a></li>
      </ul>
    </li>
    <li><a href="#clusterrole">CLusterROle</a>
      <ul>
        <li><a href="#create-a-clusterrole-named-pod-reader-that-allows-user-to-perform-get-watch-and-list-on-pods">Create a ClusterRole named &ldquo;pod-reader&rdquo; that allows user to perform get, watch and list on pods:</a></li>
        <li><a href="#create-a-clusterrole-named-pod-reader-with-resourcenames-specified">Create a ClusterRole named &ldquo;pod-reader&rdquo; with resourceNames specified:</a></li>
        <li><a href="#create-a-clusterrole-named-foo-with-apigroups-specified">Create a ClusterRole named &ldquo;foo&rdquo; with apiGroups specified:</a></li>
        <li><a href="#create-a-clusterrole-named-foo-with-subresource-permissions">Create a ClusterRole named &ldquo;foo&rdquo; with subresource permissions:</a></li>
        <li><a href="#rolebindings-with-imperative-commands">Rolebindings with Imperative commands</a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#role-binding">Role Binding</a></li>
      </ul>
    </li>
    <li><a href="#cluster-role">Cluster Role</a>
      <ul>
        <li><a href="#role-binding-namespace-level">Role Binding (Namespace-level)</a></li>
      </ul>
    </li>
    <li><a href="#cluster-role-binding">Cluster Role Binding</a></li>
    <li><a href="#securitycontexthttpskubernetesiodocstasksconfigure-pod-containersecurity-context"><a href="https://kubernetes.io/docs/tasks/configure-pod-container/security-context/">SecurityContext</a></a></li>
  </ul>
</nav></div>
        
    

</div>
          </aside>
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            
  

            <nav aria-label="breadcrumb" class="td-breadcrumbs">
  <ol class="breadcrumb">
  <li class="breadcrumb-item">
    <a href="/docs/">Docs</a>
  </li>
  <li class="breadcrumb-item">
    <a href="/docs/kubernetes/">KUBERNETES DOCUMENTS</a>
  </li>
  <li class="breadcrumb-item active" aria-current="page">
    <a href="/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/">Kubernetes RBAC</a>
  </li>
  </ol>
</nav>
            
<div class="td-content">
	<h1>Kubernetes RBAC</h1>
	
	<header class="article-meta">
		

  
    


  
    


  

		
	</header>    
	<!-- end-chunk -->
<!-- begin-chunk data-anchor="rbac" data-heading="RBAC" data-level="2" data-permalink="/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/" data-title="Kubernetes RBAC" -->
<h2 id="rbac">RBAC</h2><p>Kubernetes RBAC is a powerful security feature that allows administrators to control who can access the Kubernetes API and what actions they can perform.
You can use it to implement the principle of &ldquo;least privilege,&rdquo; which means that users should have the minimum levels of access necessary to perform their tasks. This approach minimizes the potential for accidental or malicious misuse of the Kubernetes system.<br></p>
<p>Role-based access control (RBAC) is a method of regulating access to computer or network resources based on the roles of individual users within your organization.</p>
<!-- end-chunk -->
<!-- begin-chunk data-anchor="core-components-of-kubernetes-rbac" data-heading="Core Components of Kubernetes RBAC" data-level="4" data-permalink="/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/" data-title="Kubernetes RBAC" -->
<h4 id="core-components-of-kubernetes-rbac">Core Components of Kubernetes RBAC</h4><!-- end-chunk -->
<!-- begin-chunk data-anchor="role" data-heading="Role" data-level="4" data-permalink="/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/" data-title="Kubernetes RBAC" -->
<h4 id="role">Role</h4><ul>
<li>Roles define a set of permissions within a specific namespace.</li>
<li>They define which actions (verbs) can be performed on which resources (nouns) within that namespace. A role, for example, might enable a user to list and retrieve pods in a specific namespace.
ClusterRole, by contrast, is a non-namespaced resource. The resources have different names (Role and ClusterRole) because a Kubernetes object always has to be either namespaced or not namespaced; it can&rsquo;t be both.</li>
</ul>
<!-- end-chunk -->
<!-- begin-chunk data-anchor="clusterroles" data-heading="ClusterRoles" data-level="4" data-permalink="/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/" data-title="Kubernetes RBAC" -->
<h4 id="clusterroles">ClusterRoles</h4><ul>
<li>It has several uses. You can use a ClusterRole to define permissions on namespaced resources and be granted access within individual namespace(s)</li>
<li>define permissions on namespaced resources and be granted access across all namespaces</li>
<li>define permissions on cluster-scoped resources</li>
</ul>
<!-- end-chunk -->
<!-- begin-chunk data-anchor="rolebinding-and-clusterrolebinding" data-heading="RoleBinding and ClusterRoleBinding" data-level="4" data-permalink="/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/" data-title="Kubernetes RBAC" -->
<h4 id="rolebinding-and-clusterrolebinding">RoleBinding and ClusterRoleBinding</h4><ul>
<li>A role binding grants the permissions defined in a role to a user or set of users. It holds a list of subjects (users, groups, or service accounts).</li>
<li>A RoleBinding grants permissions within a specific namespace whereas a ClusterRoleBinding grants that access cluster-wide.</li>
</ul>
<!-- end-chunk -->
<!-- begin-chunk data-anchor="documentation-and-websites-referredhttpskubernetesiodocsreferenceaccess-authn-authzauthentication" data-heading="<a href=\"https://kubernetes.io/docs/reference/access-authn-authz/authentication/\" target=\"_blank\" rel=\"noopener\">Documentation and Websites Referred</a>" data-level="3" data-permalink="/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/" data-title="Kubernetes RBAC" -->
<h3 id="documentation-and-websites-referredhttpskubernetesiodocsreferenceaccess-authn-authzauthentication"><a href="https://kubernetes.io/docs/reference/access-authn-authz/authentication/" target="_blank" rel="noopener">Documentation and Websites Referred</a></h3><!-- end-chunk -->
<!-- begin-chunk data-anchor="service-account" data-heading="Service Account" data-level="4" data-permalink="/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/" data-title="Kubernetes RBAC" -->
<h4 id="service-account">Service Account</h4><ul>
<li>A service account provides an identity for processes that run in a Pod, and maps to a ServiceAccount object.</li>
<li>Token associated to a SA is stored at <code>/var/run/secrets/kubernetes.io/</code>serviceaccount/token inside a pod</li>
<li>We can configure a SA not to mount a secret in pod using</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl apply -f - <span style="color:#e6db74">&lt;&lt;EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">apiVersion: v1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">kind: ServiceAccount
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">metadata:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: build-robot
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">automountServiceAccountToken: false
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl apply -f - <span style="color:#e6db74">&lt;&lt;EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">apiVersion: v1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">kind: Pod
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">metadata:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: my-pod
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">spec:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  serviceAccountName: build-robot
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  automountServiceAccountToken: false
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span> 
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="step-1-create-a-new-service-account" data-heading="Step 1: Create a new Service Account:" data-level="4" data-permalink="/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/" data-title="Kubernetes RBAC" -->
<h4 id="step-1-create-a-new-service-account">Step 1: Create a new Service Account:</h4><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kubectl create serviceaccount external
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="step-2-create-a-new-pod-with-external-service-account" data-heading="Step 2: Create a new POD with External Service Account" data-level="4" data-permalink="/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/" data-title="Kubernetes RBAC" -->
<h4 id="step-2-create-a-new-pod-with-external-service-account">Step 2: Create a new POD with External Service Account</h4><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kubectl run external-pod --image<span style="color:#f92672">=</span>nginx --dry-run<span style="color:#f92672">=</span>client -o yaml
</span></span></code></pre></div><p>Add following contents under .spec</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>serviceAccountName: external
</span></span></code></pre></div><p>Final File will look like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kubectl apply -f - <span style="color:#e6db74">&lt;&lt;EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">apiVersion: v1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">kind: Pod
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">metadata:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  creationTimestamp: null
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  labels:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    run: external-pod
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: external-pod
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">spec:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  serviceAccountName: external
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  containers:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - image: nginx
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    name: external-pod
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    resources: {}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  dnsPolicy: ClusterFirst
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  restartPolicy: Always
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">status: {}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kubectl apply -f pod-sa.yaml
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="step-3-verification" data-heading="Step 3: Verification" data-level="4" data-permalink="/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/" data-title="Kubernetes RBAC" -->
<h4 id="step-3-verification">Step 3: Verification</h4><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kubectl get pods
</span></span><span style="display:flex;"><span>kubectl get pod external -o yaml
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="step-4-fetch-the-token-of-a-pod" data-heading="Step 4: Fetch the Token of a POD" data-level="4" data-permalink="/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/" data-title="Kubernetes RBAC" -->
<h4 id="step-4-fetch-the-token-of-a-pod">Step 4: Fetch the Token of a POD</h4><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kubectl exec -it external-pod -- bash
</span></span><span style="display:flex;"><span>cat /var/run/secrets/kubernetes.io/serviceaccount/token
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="step-5-make-a-request-to-kubernetes-using-token" data-heading="Step 5: Make a Request to Kubernetes using Token" data-level="4" data-permalink="/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/" data-title="Kubernetes RBAC" -->
<h4 id="step-5-make-a-request-to-kubernetes-using-token">Step 5: Make a Request to Kubernetes using Token</h4><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>curl -k &lt;K8S-SERVER-URL&gt;
</span></span><span style="display:flex;"><span>curl -k &lt;K8S-SERVER-URL&gt;/api/v1 --header <span style="color:#e6db74">&#34;Authorization: Bearer &lt;TOKEN-HERE&gt;&#34;</span>
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="now-if-you-want-you-can-generate-a-script-using-the-below-script" data-heading="Now if you want you can generate a script using the below script" data-level="4" data-permalink="/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/" data-title="Kubernetes RBAC" -->
<h4 id="now-if-you-want-you-can-generate-a-script-using-the-below-script">Now if you want you can generate a script using the below script</h4><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#75715e">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>NAMESPACE<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;default&#34;</span>
</span></span><span style="display:flex;"><span>SERVICE_ACCOUNT_NAME<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;test-sa&#34;</span>
</span></span><span style="display:flex;"><span>ROLE_NAME<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;pod-reader&#34;</span>
</span></span><span style="display:flex;"><span>ROLE_BINDING_NAME<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;pod-reader&#34;</span>
</span></span><span style="display:flex;"><span>CLUSTER_NAME<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;kubernetes&#34;</span>
</span></span><span style="display:flex;"><span>CONTEXT_NAME<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;example-context&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Create the Service Account</span>
</span></span><span style="display:flex;"><span>kubectl create sa <span style="color:#e6db74">${</span>SERVICE_ACCOUNT_NAME<span style="color:#e6db74">}</span> -n <span style="color:#e6db74">${</span>NAMESPACE<span style="color:#e6db74">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>TOKEN<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>kubectl create token <span style="color:#e6db74">${</span>SERVICE_ACCOUNT_NAME<span style="color:#e6db74">}</span> -n <span style="color:#e6db74">${</span>NAMESPACE<span style="color:#e6db74">}</span><span style="color:#66d9ef">)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Create the Role (if not already created)</span>
</span></span><span style="display:flex;"><span>kubectl create role <span style="color:#e6db74">${</span>ROLE_NAME<span style="color:#e6db74">}</span> --namespace<span style="color:#f92672">=</span><span style="color:#e6db74">${</span>NAMESPACE<span style="color:#e6db74">}</span> --verb<span style="color:#f92672">=</span>get --verb<span style="color:#f92672">=</span>list --verb<span style="color:#f92672">=</span>watch --resource<span style="color:#f92672">=</span>pods
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Bind the Role to the Service Account</span>
</span></span><span style="display:flex;"><span>kubectl create rolebinding <span style="color:#e6db74">${</span>ROLE_BINDING_NAME<span style="color:#e6db74">}</span> --role<span style="color:#f92672">=</span><span style="color:#e6db74">${</span>ROLE_NAME<span style="color:#e6db74">}</span> --serviceaccount<span style="color:#f92672">=</span><span style="color:#e6db74">${</span>NAMESPACE<span style="color:#e6db74">}</span>:<span style="color:#e6db74">${</span>SERVICE_ACCOUNT_NAME<span style="color:#e6db74">}</span> -n <span style="color:#e6db74">${</span>NAMESPACE<span style="color:#e6db74">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Get the Service Account token</span>
</span></span><span style="display:flex;"><span>SECRET_NAME<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>kubectl get sa <span style="color:#e6db74">${</span>SERVICE_ACCOUNT_NAME<span style="color:#e6db74">}</span> -n <span style="color:#e6db74">${</span>NAMESPACE<span style="color:#e6db74">}</span> -o jsonpath<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;{.secrets[0].name}&#34;</span><span style="color:#66d9ef">)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#TOKEN=$(kubectl get secret ${SECRET_NAME} -n ${NAMESPACE} -o jsonpath=&#34;{.data.token}&#34; | base64 --decode)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Get the API server URL</span>
</span></span><span style="display:flex;"><span>APISERVER<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>kubectl config view --minify --flatten -o jsonpath<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;{.clusters[0].cluster.server}&#39;</span><span style="color:#66d9ef">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Retrieve the CA certificate</span>
</span></span><span style="display:flex;"><span>kubectl get secret <span style="color:#e6db74">${</span>SECRET_NAME<span style="color:#e6db74">}</span> -n <span style="color:#e6db74">${</span>NAMESPACE<span style="color:#e6db74">}</span> -o jsonpath<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;{.data[&#39;ca\.crt&#39;]}&#34;</span> | base64 --decode &gt; ca.crt
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Create the kubeconfig file</span>
</span></span><span style="display:flex;"><span>cat <span style="color:#e6db74">&lt;&lt;EOF &gt; kubeconfig-sa.yaml
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">apiVersion: v1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">kind: Config
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">clusters:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">- cluster:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    certificate-authority: /etc/kubernetes/pki/ca.crt
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    server: ${APISERVER}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: ${CLUSTER_NAME}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">contexts:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">- context:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    cluster: ${CLUSTER_NAME}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    user: ${SERVICE_ACCOUNT_NAME}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: ${CONTEXT_NAME}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">current-context: ${CONTEXT_NAME}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">users:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">- name: ${SERVICE_ACCOUNT_NAME}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  user:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    token: ${TOKEN}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;Kubeconfig file created as kubeconfig-sa.yaml&#34;</span>
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="using-the-kubeconfig-file" data-heading="Using the Kubeconfig File" data-level="4" data-permalink="/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/" data-title="Kubernetes RBAC" -->
<h4 id="using-the-kubeconfig-file">Using the Kubeconfig File</h4><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>export KUBECONFIG<span style="color:#f92672">=</span><span style="color:#e6db74">/path/</span>to<span style="color:#f92672">/</span>kubeconfig<span style="color:#f92672">-</span>sa<span style="color:#f92672">.</span>yaml
</span></span><span style="display:flex;"><span>kubectl <span style="color:#f92672">--</span>kubeconfig<span style="color:#f92672">=</span><span style="color:#e6db74">/path/</span>to<span style="color:#f92672">/</span>kubeconfig<span style="color:#f92672">-</span>sa<span style="color:#f92672">.</span>yaml get pods
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="create-user-with-certificate" data-heading="Create user with certificate" data-level="3" data-permalink="/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/" data-title="Kubernetes RBAC" -->
<h3 id="create-user-with-certificate">Create user with certificate</h3><!-- end-chunk -->
<!-- begin-chunk data-anchor="step-1-create-a-new-private-key--and-csr" data-heading="Step 1: Create a new private key  and CSR" data-level="4" data-permalink="/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/" data-title="Kubernetes RBAC" -->
<h4 id="step-1-create-a-new-private-key--and-csr">Step 1: Create a new private key  and CSR</h4><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>mkdir /root/certificates
</span></span><span style="display:flex;"><span>cd /root/certificates
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>openssl genrsa -out john.key <span style="color:#ae81ff">2048</span>
</span></span><span style="display:flex;"><span>openssl req -new -key john.key -out john.csr -subj <span style="color:#e6db74">&#34;/CN=john/O=finance&#34;</span>
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="step-2-decode-the-csr" data-heading="Step 2: Decode the csr" data-level="4" data-permalink="/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/" data-title="Kubernetes RBAC" -->
<h4 id="step-2-decode-the-csr">Step 2: Decode the csr</h4><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>cat john.csr | base64 | tr -d <span style="color:#e6db74">&#39;\n&#39;</span>
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="step-3-generate-the-kubernetes-signing-request" data-heading="Step 3: Generate the Kubernetes Signing Request" data-level="4" data-permalink="/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/" data-title="Kubernetes RBAC" -->
<h4 id="step-3-generate-the-kubernetes-signing-request">Step 3: Generate the Kubernetes Signing Request</h4><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>nano csr-requests.yaml
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kubectl apply -f - <span style="color:#e6db74">&lt;&lt;EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">apiVersion: certificates.k8s.io/v1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">kind: CertificateSigningRequest
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">metadata:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: john-csr
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">spec:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  groups:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - system:authenticated
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  request: ADD-YOUR-CSR-HERE
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  signerName: kubernetes.io/kube-apiserver-client
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  usages:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - digital signature
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - key encipherment
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - client auth
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="step-4-apply-the-signing-requests" data-heading="Step 4: Apply the Signing Requests:" data-level="4" data-permalink="/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/" data-title="Kubernetes RBAC" -->
<h4 id="step-4-apply-the-signing-requests">Step 4: Apply the Signing Requests:</h4><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kubectl apply -f csr-requests.yaml
</span></span></code></pre></div><p>You can optionally verify with  kubectl get csr</p>
<!-- end-chunk -->
<!-- begin-chunk data-anchor="step-5-approve-the-csr" data-heading="Step 5: Approve the csr" data-level="4" data-permalink="/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/" data-title="Kubernetes RBAC" -->
<h4 id="step-5-approve-the-csr">Step 5: Approve the csr</h4><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kubectl certificate approve john-csr
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="step-6-download-the-certificate-from-csr" data-heading="Step 6: Download the Certificate from csr" data-level="4" data-permalink="/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/" data-title="Kubernetes RBAC" -->
<h4 id="step-6-download-the-certificate-from-csr">Step 6: Download the Certificate from csr</h4><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kubectl get csr john-csr -o jsonpath<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;{.status.certificate}&#39;</span> | base64 -d &gt; john.crt
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="step-7-create-a-new-context" data-heading="Step 7: Create a new context" data-level="4" data-permalink="/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/" data-title="Kubernetes RBAC" -->
<h4 id="step-7-create-a-new-context">Step 7: Create a new context</h4><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kubectl config set-credentials john --client-certificate<span style="color:#f92672">=</span>john.crt --client-key<span style="color:#f92672">=</span>john.key
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="step-8-set-new-context" data-heading="Step 8: Set new Context" data-level="4" data-permalink="/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/" data-title="Kubernetes RBAC" -->
<h4 id="step-8-set-new-context">Step 8: Set new Context</h4><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kubectl config set-context john-context --cluster <span style="color:#f92672">[</span>YOUR-CLUSTER-HERE<span style="color:#f92672">]</span> --user<span style="color:#f92672">=</span>john
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="step-9-use-context-to-verify" data-heading="Step 9: Use Context to Verify" data-level="4" data-permalink="/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/" data-title="Kubernetes RBAC" -->
<h4 id="step-9-use-context-to-verify">Step 9: Use Context to Verify</h4><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kubectl --context<span style="color:#f92672">=</span>john-context get pods
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="step-10-create-rbac-role-allowing-list-pods-operation" data-heading="Step 10: Create RBAC Role Allowing List PODS Operation" data-level="4" data-permalink="/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/" data-title="Kubernetes RBAC" -->
<h4 id="step-10-create-rbac-role-allowing-list-pods-operation">Step 10: Create RBAC Role Allowing List PODS Operation</h4><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kubectl apply -f - <span style="color:#e6db74">&lt;&lt;EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">apiVersion: rbac.authorization.k8s.io/v1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">kind: Role
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">metadata:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  namespace: default
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: pod-reader
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">rules:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">- apiGroups: [&#34;&#34;]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  resources: [&#34;pods&#34;]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  verbs: [&#34;list&#34;]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="step-11-create-a-new-role-binding" data-heading="Step 11: Create a New Role Binding" data-level="4" data-permalink="/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/" data-title="Kubernetes RBAC" -->
<h4 id="step-11-create-a-new-role-binding">Step 11: Create a New Role Binding</h4><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kubectl apply -f - <span style="color:#e6db74">&lt;&lt;EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">apiVersion: rbac.authorization.k8s.io/v1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">kind: RoleBinding
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">metadata:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: read-pods
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  namespace: default
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">subjects:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">- kind: User
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: john
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  apiGroup: rbac.authorization.k8s.io
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">roleRef:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  kind: Role
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: pod-reader
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  apiGroup: rbac.authorization.k8s.io
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="step-12-verify-permissions" data-heading="Step 12: Verify Permissions" data-level="4" data-permalink="/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/" data-title="Kubernetes RBAC" -->
<h4 id="step-12-verify-permissions">Step 12: Verify Permissions</h4><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kubectl --context<span style="color:#f92672">=</span>john-context get pods
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="step-13-delete-resources-created-in-this-lab" data-heading="Step 13: Delete Resources Created in this Lab" data-level="4" data-permalink="/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/" data-title="Kubernetes RBAC" -->
<h4 id="step-13-delete-resources-created-in-this-lab">Step 13: Delete Resources Created in this Lab</h4><!-- end-chunk -->
<!-- begin-chunk data-anchor="namespace-access-control" data-heading="NameSpace Access Control" data-level="4" data-permalink="/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/" data-title="Kubernetes RBAC" -->
<h4 id="namespace-access-control">NameSpace Access Control</h4><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kubectl apply -f - <span style="color:#e6db74">&lt;&lt;EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">apiVersion: rbac.authorization.k8s.io/v1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">kind: Role
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">metadata:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  namespace: teama
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: pod-reader
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">rules:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">- apiGroups: [&#34;&#34;]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  resources: [&#34;pods&#34;]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  verbs: [&#34;get&#34;, &#34;watch&#34;, &#34;list&#34;, &#34;create&#34;]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="teama-rolebindingyaml" data-heading="teama-rolebinding.yaml" data-level="3" data-permalink="/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/" data-title="Kubernetes RBAC" -->
<h3 id="teama-rolebindingyaml">teama-rolebinding.yaml</h3><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kubectl apply -f - <span style="color:#e6db74">&lt;&lt;EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">apiVersion: rbac.authorization.k8s.io/v1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">kind: RoleBinding
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">metadata:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: read-pods
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  namespace: teama
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">subjects:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">- kind: User
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: john
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  apiGroup: rbac.authorization.k8s.io
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">roleRef:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  kind: Role
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: pod-reader
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  apiGroup: rbac.authorization.k8s.io
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="clusterrole--clusterrolebindinghttpskubernetesiodocsreferenceaccess-authn-authzauthorization" data-heading="<a href=\"https://kubernetes.io/docs/reference/access-authn-authz/authorization/\" target=\"_blank\" rel=\"noopener\">ClusterRole &amp; ClusterRoleBinding</a>" data-level="3" data-permalink="/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/" data-title="Kubernetes RBAC" -->
<h3 id="clusterrole--clusterrolebindinghttpskubernetesiodocsreferenceaccess-authn-authzauthorization"><a href="https://kubernetes.io/docs/reference/access-authn-authz/authorization/" target="_blank" rel="noopener">ClusterRole &amp; ClusterRoleBinding</a></h3><!-- end-chunk -->
<!-- begin-chunk data-anchor="step-1-delete-role-and-role-binding" data-heading="Step 1: Delete Role and Role Binding" data-level="5" data-permalink="/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/" data-title="Kubernetes RBAC" -->
<h5 id="step-1-delete-role-and-role-binding">Step 1: Delete Role and Role Binding</h5><!-- end-chunk -->
<!-- begin-chunk data-anchor="step-2-create-a-cluster-role" data-heading="Step 2: Create a Cluster Role" data-level="5" data-permalink="/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/" data-title="Kubernetes RBAC" -->
<h5 id="step-2-create-a-cluster-role">Step 2: Create a Cluster Role</h5><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kubectl apply -f - <span style="color:#e6db74">&lt;&lt;EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">apiVersion: rbac.authorization.k8s.io/v1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">kind: ClusterRole
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">metadata:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: pod-reader
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">rules:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">- apiGroups: [&#34;&#34;]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  resources: [&#34;pods&#34;]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  verbs: [&#34;list&#34;]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span></code></pre></div><ul>
<li>Check clusterrole</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kubectl get clusterrole
</span></span><span style="display:flex;"><span>kubectl describe clusterrole pod-reader
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="step-3-create-a-cluster-role-binding-for-a-serviceaccount-named-external-in-default-namespace-make-sure-to-create-sa-in-right-namespace" data-heading="Step 3: Create a Cluster Role Binding for a ServiceAccount named external in default namespace (make sure to create sa in right namespace)" data-level="4" data-permalink="/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/" data-title="Kubernetes RBAC" -->
<h4 id="step-3-create-a-cluster-role-binding-for-a-serviceaccount-named-external-in-default-namespace-make-sure-to-create-sa-in-right-namespace">Step 3: Create a Cluster Role Binding for a ServiceAccount named external in default namespace (make sure to create sa in right namespace)</h4><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kubectl apply -f - <span style="color:#e6db74">&lt;&lt;EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">apiVersion: rbac.authorization.k8s.io/v1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">kind: ClusterRoleBinding
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">metadata:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: list-pods-global
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">subjects:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">- kind: User
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: system:serviceaccount:default:external
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  apiGroup: rbac.authorization.k8s.io
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">roleRef:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  kind: ClusterRole
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: pod-reader
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  apiGroup: rbac.authorization.k8s.io
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span></code></pre></div><ul>
<li>Check Clusterrolebindings</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kubectl get clusterrolebinding
</span></span><span style="display:flex;"><span>kubectl describe clusterrolebinding list-pods-global
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="step-4-verify-permissions" data-heading="Step 4: Verify Permissions" data-level="5" data-permalink="/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/" data-title="Kubernetes RBAC" -->
<h5 id="step-4-verify-permissions">Step 4: Verify Permissions</h5><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>curl -k &lt;K8S-SERVER-URL&gt;/api/v1/namespaces/default/pods --header <span style="color:#e6db74">&#34;Authorization: Bearer &lt;TOKEN-HERE&gt;&#34;</span>
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="step-5-create-a-new-namespace" data-heading="Step 5: Create a new Namespace" data-level="5" data-permalink="/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/" data-title="Kubernetes RBAC" -->
<h5 id="step-5-create-a-new-namespace">Step 5: Create a new Namespace</h5><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kubectl create namespace external
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>curl -k &lt;K8S-SERVER-URL&gt;/api/v1/namespaces/external/pods --header <span style="color:#e6db74">&#34;Authorization: Bearer &lt;TOKEN-HERE&gt;&#34;</span>
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="step-6-delete-cluster-role-binding" data-heading="Step 6: Delete Cluster Role Binding" data-level="4" data-permalink="/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/" data-title="Kubernetes RBAC" -->
<h4 id="step-6-delete-cluster-role-binding">Step 6: Delete Cluster Role Binding</h4><ul>
<li>Verify if you receive forbidden error.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>curl -k &lt;K8S-SERVER-URL&gt;/api/v1/namespaces/external/pods --header <span style="color:#e6db74">&#34;Authorization: Bearer &lt;TOKEN-HERE&gt;&#34;</span>
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="step-7-create-role-binding-with-clusterrole" data-heading="Step 7: Create Role Binding with ClusterRole" data-level="4" data-permalink="/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/" data-title="Kubernetes RBAC" -->
<h4 id="step-7-create-role-binding-with-clusterrole">Step 7: Create Role Binding with ClusterRole</h4><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kubectl apply -f - <span style="color:#e6db74">&lt;&lt;EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">apiVersion: rbac.authorization.k8s.io/v1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">kind: RoleBinding
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">metadata:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: read-pods
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  namespace: default
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">subjects:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">- kind: User
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: system:serviceaccount:default:external
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  apiGroup: rbac.authorization.k8s.io
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">roleRef:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  kind: ClusterRole
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: pod-reader
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  apiGroup: rbac.authorization.k8s.io
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="step-8-verification" data-heading="Step 8: Verification" data-level="4" data-permalink="/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/" data-title="Kubernetes RBAC" -->
<h4 id="step-8-verification">Step 8: Verification</h4><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>curl -k &lt;K8S-SERVER-URL&gt;/api/v1/namespaces/external/pods --header <span style="color:#e6db74">&#34;Authorization: Bearer &lt;TOKEN-HERE&gt;&#34;</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>curl -k &lt;K8S-SERVER-URL&gt;/api/v1/namespaces/default/pods --header <span style="color:#e6db74">&#34;Authorization: Bearer &lt;TOKEN-HERE&gt;&#34;</span>
</span></span></code></pre></div><ul>
<li>You can also assign cluster-Admin role using below</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl apply -f - <span style="color:#e6db74">&lt;&lt;EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">apiVersion: rbac.authorization.k8s.io/v1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">kind: ClusterRoleBinding
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">metadata:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: admin-user
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">roleRef:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  apiGroup: rbac.authorization.k8s.io
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  kind: ClusterRole
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: cluster-admin
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">subjects:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">- kind: ServiceAccount
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: admin-user
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  namespace: kube-system
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="role-with-imperative-commands" data-heading="Role with Imperative commands" data-level="3" data-permalink="/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/" data-title="Kubernetes RBAC" -->
<h3 id="role-with-imperative-commands">Role with Imperative commands</h3><!-- end-chunk -->
<!-- begin-chunk data-anchor="create-a-role-named-pod-reader-that-allows-users-to-perform-get-watch-and-list-on-pods" data-heading="Create a Role named &ldquo;pod-reader&rdquo; that allows users to perform get, watch and list on pods:" data-level="3" data-permalink="/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/" data-title="Kubernetes RBAC" -->
<h3 id="create-a-role-named-pod-reader-that-allows-users-to-perform-get-watch-and-list-on-pods">Create a Role named &ldquo;pod-reader&rdquo; that allows users to perform get, watch and list on pods:</h3><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>kubectl create role pod-reader --verb<span style="color:#f92672">=</span>get --verb<span style="color:#f92672">=</span>list --verb<span style="color:#f92672">=</span>watch --resource<span style="color:#f92672">=</span>pods
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="create-a-role-named-pod-reader-with-resourcenames-specified" data-heading="Create a Role named &ldquo;pod-reader&rdquo; with resourceNames specified:" data-level="3" data-permalink="/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/" data-title="Kubernetes RBAC" -->
<h3 id="create-a-role-named-pod-reader-with-resourcenames-specified">Create a Role named &ldquo;pod-reader&rdquo; with resourceNames specified:</h3><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl create role pod-reader --verb<span style="color:#f92672">=</span>get --resource<span style="color:#f92672">=</span>pods --resource-name<span style="color:#f92672">=</span>readablepod --resource-name<span style="color:#f92672">=</span>anotherpod
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="create-a-role-named-foo-with-apigroups-specified" data-heading="Create a Role named &ldquo;foo&rdquo; with apiGroups specified:" data-level="3" data-permalink="/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/" data-title="Kubernetes RBAC" -->
<h3 id="create-a-role-named-foo-with-apigroups-specified">Create a Role named &ldquo;foo&rdquo; with apiGroups specified:</h3><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubectl create role foo <span style="color:#f92672">--</span>verb<span style="color:#f92672">=</span>get,list,watch <span style="color:#f92672">--</span>resource<span style="color:#f92672">=</span>replicasets<span style="color:#f92672">.</span>apps
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="create-a-role-named-foo-with-subresource-permissions" data-heading="Create a Role named &ldquo;foo&rdquo; with subresource permissions:" data-level="3" data-permalink="/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/" data-title="Kubernetes RBAC" -->
<h3 id="create-a-role-named-foo-with-subresource-permissions">Create a Role named &ldquo;foo&rdquo; with subresource permissions:</h3><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl create role foo --verb<span style="color:#f92672">=</span>get,list,watch --resource<span style="color:#f92672">=</span>pods,pods/status
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="create-a-role-named-my-component-lease-holder-with-permissions-to-getupdate-a-resource-with-a-specific-name" data-heading="Create a Role named &ldquo;my-component-lease-holder&rdquo; with permissions to get/update a resource with a specific name:" data-level="3" data-permalink="/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/" data-title="Kubernetes RBAC" -->
<h3 id="create-a-role-named-my-component-lease-holder-with-permissions-to-getupdate-a-resource-with-a-specific-name">Create a Role named &ldquo;my-component-lease-holder&rdquo; with permissions to get/update a resource with a specific name:</h3><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl create role my-component-lease-holder --verb<span style="color:#f92672">=</span>get,list,watch,update --resource<span style="color:#f92672">=</span>lease --resource-name<span style="color:#f92672">=</span>my-component
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="clusterrole" data-heading="CLusterROle" data-level="2" data-permalink="/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/" data-title="Kubernetes RBAC" -->
<h2 id="clusterrole">CLusterROle</h2><!-- end-chunk -->
<!-- begin-chunk data-anchor="create-a-clusterrole-named-pod-reader-that-allows-user-to-perform-get-watch-and-list-on-pods" data-heading="Create a ClusterRole named &ldquo;pod-reader&rdquo; that allows user to perform get, watch and list on pods:" data-level="3" data-permalink="/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/" data-title="Kubernetes RBAC" -->
<h3 id="create-a-clusterrole-named-pod-reader-that-allows-user-to-perform-get-watch-and-list-on-pods">Create a ClusterRole named &ldquo;pod-reader&rdquo; that allows user to perform get, watch and list on pods:</h3><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl create clusterrole pod-reader --verb<span style="color:#f92672">=</span>get,list,watch --resource<span style="color:#f92672">=</span>pods
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="create-a-clusterrole-named-pod-reader-with-resourcenames-specified" data-heading="Create a ClusterRole named &ldquo;pod-reader&rdquo; with resourceNames specified:" data-level="3" data-permalink="/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/" data-title="Kubernetes RBAC" -->
<h3 id="create-a-clusterrole-named-pod-reader-with-resourcenames-specified">Create a ClusterRole named &ldquo;pod-reader&rdquo; with resourceNames specified:</h3><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl create clusterrole pod-reader --verb<span style="color:#f92672">=</span>get --resource<span style="color:#f92672">=</span>pods --resource-name<span style="color:#f92672">=</span>readablepod --resource-name<span style="color:#f92672">=</span>anotherpod
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="create-a-clusterrole-named-foo-with-apigroups-specified" data-heading="Create a ClusterRole named &ldquo;foo&rdquo; with apiGroups specified:" data-level="3" data-permalink="/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/" data-title="Kubernetes RBAC" -->
<h3 id="create-a-clusterrole-named-foo-with-apigroups-specified">Create a ClusterRole named &ldquo;foo&rdquo; with apiGroups specified:</h3><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl create clusterrole foo --verb<span style="color:#f92672">=</span>get,list,watch --resource<span style="color:#f92672">=</span>replicasets.apps
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="create-a-clusterrole-named-foo-with-subresource-permissions" data-heading="Create a ClusterRole named &ldquo;foo&rdquo; with subresource permissions:" data-level="3" data-permalink="/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/" data-title="Kubernetes RBAC" -->
<h3 id="create-a-clusterrole-named-foo-with-subresource-permissions">Create a ClusterRole named &ldquo;foo&rdquo; with subresource permissions:</h3><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl create clusterrole foo --verb<span style="color:#f92672">=</span>get,list,watch --resource<span style="color:#f92672">=</span>pods,pods/status
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="rolebindings-with-imperative-commands" data-heading="Rolebindings with Imperative commands" data-level="3" data-permalink="/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/" data-title="Kubernetes RBAC" -->
<h3 id="rolebindings-with-imperative-commands">Rolebindings with Imperative commands</h3><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl create clusterrolebinding myapp-view-binding --clusterrole<span style="color:#f92672">=</span>view --serviceaccount<span style="color:#f92672">=</span>acme:myapp
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl create rolebinding my-sa-view <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --clusterrole<span style="color:#f92672">=</span>view <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --serviceaccount<span style="color:#f92672">=</span>my-namespace:my-sa <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --namespace<span style="color:#f92672">=</span>my-namespace
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="kubernetes-rbac-setup" data-heading="Kubernetes RBAC Setup" data-level="1" data-permalink="/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/" data-title="Kubernetes RBAC" -->
<h1 id="kubernetes-rbac-setup">Kubernetes RBAC Setup</h1><ul>
<li>Authentication</li>
<li>Authorization</li>
</ul>
<!-- end-chunk -->
<!-- begin-chunk data-anchor="role-binding" data-heading="Role Binding" data-level="3" data-permalink="/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/" data-title="Kubernetes RBAC" -->
<h3 id="role-binding">Role Binding</h3><p>The rolebinding.yaml file defines a role binding named read-pods that binds the pod-reader role to the user jack in the default namespace.</p>
<!-- end-chunk -->
<!-- begin-chunk data-anchor="cluster-role" data-heading="Cluster Role" data-level="2" data-permalink="/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/" data-title="Kubernetes RBAC" -->
<h2 id="cluster-role">Cluster Role</h2><p>The clusterrole.yaml file contains the configuration for creating a cluster role named secret-reader. This cluster role allows the user to perform actions like get, watch, and list on secrets resources.</p>
<!-- end-chunk -->
<!-- begin-chunk data-anchor="role-binding-namespace-level" data-heading="Role Binding (Namespace-level)" data-level="3" data-permalink="/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/" data-title="Kubernetes RBAC" -->
<h3 id="role-binding-namespace-level">Role Binding (Namespace-level)</h3><p>The rolebinding.yaml file defines a role binding named read-secrets that binds the secret-reader cluster role to the user dev in the development namespace.</p>
<!-- end-chunk -->
<!-- begin-chunk data-anchor="cluster-role-binding" data-heading="Cluster Role Binding" data-level="2" data-permalink="/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/" data-title="Kubernetes RBAC" -->
<h2 id="cluster-role-binding">Cluster Role Binding</h2><p>The clusterrolebinding.yaml file contains the configuration for creating a cluster role binding named read-secrets-global. This cluster role binding binds the secret-reader cluster role to the user riya globally.</p>
<!-- end-chunk -->
<!-- begin-chunk data-anchor="securitycontexthttpskubernetesiodocstasksconfigure-pod-containersecurity-context" data-heading="<a href=\"https://kubernetes.io/docs/tasks/configure-pod-container/security-context/\" target=\"_blank\" rel=\"noopener\">SecurityContext</a>" data-level="2" data-permalink="/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/" data-title="Kubernetes RBAC" -->
<h2 id="securitycontexthttpskubernetesiodocstasksconfigure-pod-containersecurity-context"><a href="https://kubernetes.io/docs/tasks/configure-pod-container/security-context/" target="_blank" rel="noopener">SecurityContext</a></h2><ul>
<li>A Kubernetes security context is a set of security settings that are applied at the pod or container level.</li>
<li>It provides you with the ability to define privilege and access controls for pods or containers.</li>
<li>Example 1</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl apply -f - <span style="color:#e6db74">&lt;&lt;EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">apiVersion: v1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">kind: Pod
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">metadata:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: pod-context
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">spec:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  securityContext:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      runAsUser: 1000
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      runAsGroup: 3000
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  containers:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - name: sec-ctx-demo
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    image: busybox
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    command: [ &#34;sh&#34;, &#34;-c&#34;, &#34;sleep 1h&#34; ]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span></code></pre></div><ul>
<li>Check the user id assigned</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kubectl exec -it pod-context sh
</span></span><span style="display:flex;"><span>id
</span></span></code></pre></div><ul>
<li>Example 2</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl apply -f - <span style="color:#e6db74">&lt;&lt;EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">apiVersion: v1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">kind: Pod
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">metadata:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: security-context-demo
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">spec:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  securityContext:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    fsGroup: 2000
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  volumes:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - name: sec-ctx-vol
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    emptyDir: {}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  containers:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - name: sec-ctx-demo
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    image: busybox
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    command: [ &#34;sh&#34;, &#34;-c&#34;, &#34;sleep 1h&#34; ]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    volumeMounts:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    - name: sec-ctx-vol
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      mountPath: /data/demo
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span></code></pre></div><ul>
<li>Check the permission of /data/demo</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span> kubectl exec -it security-context-demo sh
</span></span><span style="display:flex;"><span> cd /data
</span></span><span style="display:flex;"><span> ls -l 
</span></span></code></pre></div><p>In Kubernetes RBAC (Role-Based Access Control), the get and list verbs serve different purposes:</p>
<p>get: This verb allows a user to retrieve the details of a specific resource by name. For example, kubectl get pod <pod-name> retrieves the details of the specified pod.</p>
<p>list: This verb allows a user to retrieve a list of resources of a particular type within a namespace or across the entire cluster. For example, kubectl get pods retrieves the list of all pods in the current namespace.</p>
<p>The main difference is in the scope and granularity of access:</p>
<p>get is used for accessing a single instance of a resource.
list is used for accessing a collection of resources, potentially including multiple instances.</p>

	
	
	
</div>


          </main>
        </div>
      </div>
      
    </div>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
    integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.min.js"
    integrity="sha512-UR25UO94eTnCVwjbXozyeVd6ZqpaAE9naiEUBK/A+QDbfSTQFhPGj5lOR6d8tsgbBk84Ggb5A3EkjsOgPRPcKA=="
    crossorigin="anonymous"></script>





<script src='/js/tabpane-persist.js'></script>




















<script src="/js/main.min.223ab2fcc7d742c1b94772c0276851c497da4343cd2d21534199ced90681e207.js" integrity="sha256-Ijqy/MfXQsG5R3LAJ2hRxJfaQ0PNLSFTQZnO2QaB4gc=" crossorigin="anonymous"></script>



<script src='/js/prism.js'></script>



  </body>
</html>