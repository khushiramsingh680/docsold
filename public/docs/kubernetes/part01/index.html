
<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.122.0">
<meta name="robots" content="index, follow">

<link rel="shortcut icon" href="/favicons/favicon.ico" >

<title>Part 1 | Documentation</title>
<meta name="description" content="

Topics
Kubernetes Overview
Kubernetes Architecture
Kubernetes Components
Kubernetes Installation
Kubernetes SSL Certificates
Kubernetes Static Pods …&lt;/!--&gt;&lt;/!--&gt;">
<meta property="og:title" content="Part 1" />
<meta property="og:description" content="Topics Kubernetes Overview Kubernetes Architecture Kubernetes Components Kubernetes Installation Kubernetes SSL Certificates Kubernetes Static Pods Kubernetes Configuration files Kubernetes Upgrade Etcd backup and restore Kubernetes Node related commands CIS Benchmark Kubernetes OverviewKubernetes or k8s is an open-source orchestration and cluster management for container-based applications maintained by the Cloud Native Computing Foundation.
Kubernetes is an open-source system for automating deployment, scaling, and management of containerized applications.
It groups containers that make up an application into logical units for easy management and discovery" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/docs/kubernetes/part01/" /><meta property="article:section" content="docs" />

<meta property="article:modified_time" content="2024-06-01T18:32:23+05:30" />

<meta itemprop="name" content="Part 1">
<meta itemprop="description" content="Topics Kubernetes Overview Kubernetes Architecture Kubernetes Components Kubernetes Installation Kubernetes SSL Certificates Kubernetes Static Pods Kubernetes Configuration files Kubernetes Upgrade Etcd backup and restore Kubernetes Node related commands CIS Benchmark Kubernetes OverviewKubernetes or k8s is an open-source orchestration and cluster management for container-based applications maintained by the Cloud Native Computing Foundation.
Kubernetes is an open-source system for automating deployment, scaling, and management of containerized applications.
It groups containers that make up an application into logical units for easy management and discovery">
<meta itemprop="dateModified" content="2024-06-01T18:32:23+05:30" />
<meta itemprop="wordCount" content="2614">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Part 1"/>
<meta name="twitter:description" content="Topics Kubernetes Overview Kubernetes Architecture Kubernetes Components Kubernetes Installation Kubernetes SSL Certificates Kubernetes Static Pods Kubernetes Configuration files Kubernetes Upgrade Etcd backup and restore Kubernetes Node related commands CIS Benchmark Kubernetes OverviewKubernetes or k8s is an open-source orchestration and cluster management for container-based applications maintained by the Cloud Native Computing Foundation.
Kubernetes is an open-source system for automating deployment, scaling, and management of containerized applications.
It groups containers that make up an application into logical units for easy management and discovery"/>




<link rel="preload" href="/scss/main.min.723d31f72c8542b0efd4dc916a8b429bb3241885d5c0984bf341c1aad66aed50.css" as="style">
<link href="/scss/main.min.723d31f72c8542b0efd4dc916a8b429bb3241885d5c0984bf341c1aad66aed50.css" rel="stylesheet" integrity="">

<script
  src="https://code.jquery.com/jquery-3.6.0.min.js"
  integrity="sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK"
  crossorigin="anonymous"></script>
<script
  src="https://unpkg.com/lunr@2.3.9/lunr.min.js"
  integrity="sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli"
  crossorigin="anonymous"></script>
<link rel="stylesheet" href="/css/prism.css"/>
<script type="text/javascript"  src="/js/highlight-search.js"></script>
<script type="text/javascript"  src="/js/manage-side-panels.js"></script>
  </head>
  <body class="td-page highlightable">
    <header>
      
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
        <a class="navbar-brand" href="/">
		<span class="navbar-logo"><svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="217pt" height="232pt" viewBox="0 0 217 232"><g transform="translate(0.000000,232.000000) scale(0.100000,-0.100000)" fill="#000" stroke="none"><path d="M1017 2250c-397-48-698-367-731-775-9-106-3-113 66-87l55 20 11-71c6-39 10-72 9-73s-58-22-127-47c-104-37-124-48-122-64 7-37 56-150 88-205l34-56 66 25 66 26 65-72c206-226 513-322 808-252 367 88 634 417 635 784 0 43-4 77-10 77-5 0-32-9-60-20s-55-20-59-20c-5 0-12 26-16 59-4 32-20 96-36 142s-30 88-31 92c-2 5 54 29 124 55l128 46-31 55c-17 31-33 58-34 59-2 2-31-6-64-19l-61-22-23 29c-81 104-172 178-292 235-140 68-309 97-458 79zm226-299c90-24 136-46 206-101l52-41 61 20 60 20 26-31c15-17 35-44 44-59l17-28-52-19c-29-11-86-32-128-47l-76-27 24-58c26-66 43-144 43-201 0-22 2-39 5-39 2 0 27 9 55 20s55 20 60 20c17 0 10-63-14-131-127-359-580-484-862-237l-35 31-70-24-71-24-30 35c-37 43-97 164-104 212l-6 34 123 46 124 45-3 64c-2 35-5 66-7 68-2 1-27-5-55-14s-53-15-55-14c-2 2 1 29 7 59 32 179 185 352 361 409 112 36 192 39 3e2 12z"/><path d="M134 321c-77-33-95-169-29-231 19-18 36-23 71-23 40 0 51 4 75 30 50 56 47 153-5 202-26 25-80 35-112 22zm82-62c26-29 26-99 0-128-24-26-47-27-77-2-19 15-24 29-24 64 0 76 58 114 101 66z"/><path d="M1172 320c-27-12-44-52-33-82 4-12 31-32 61-47 30-14 58-34 64-43 26-43-50-76-99-44-15 10-26 12-30 6-10-16 4-29 44-40 62-17 114 13 114 65 0 35-19 53-80 81-54 23-67 46-41 72 15 15 62 16 88 2 23-12 35 3 16 19-20 17-77 23-104 11z"/><path d="M350 195V70h25c23 0 25 4 25 45v45h40c76 0 115 40 103 104-8 42-38 56-120 56h-73V195zm134 69c18-18 18-17 10-38-4-11-19-16-50-16-44 0-44 0-44 35 0 33 2 35 34 35 19 0 42-7 50-16z"/><path d="M6e2 195V70h90c83 0 90 2 90 20 0 16-8 19-62 22-63 3-63 3-66 36-3 31-2 32 36 32 36 0 39 2 34 25-4 21-10 25-38 25-30 0-34 3-34 25 0 24 2 25 65 25 58 0 65 2 65 20 0 19-7 20-90 20h-90V195z"/><path d="M850 195c0-117 1-125 20-125 17 0 19 8 22 83l3 82 55-82c41-62 61-83 78-83 22 0 22 2 22 125 0 117-1 125-20 125-17 0-19-8-22-82l-3-82-54 82c-42 65-59 82-77 82-24 0-24 0-24-125z"/><path d="M1360 195c0-104 2-125 15-125 12 0 15 13 15 60v60h65 65v-60c0-47 3-60 15-60 13 0 15 21 15 125s-2 125-15 125c-12 0-15-13-15-55v-55h-65-65v55c0 42-3 55-15 55-13 0-15-21-15-125z"/><path d="M1620 195c0-104 2-125 15-125s15 21 15 125-2 125-15 125-15-21-15-125z"/><path d="M1730 195c0-77 4-125 10-125s10 27 10 60v60h35c19 0 35 5 35 10 0 6-16 10-35 10-35 0-35 0-35 45v45h60c33 0 60 4 60 10s-30 10-70 10h-70V195z"/><path d="M1930 310c0-5 18-10 40-10h40V185c0-70 4-115 10-115s10 45 10 115v115h40c22 0 40 5 40 10 0 6-37 10-90 10s-90-4-90-10z"/></g></svg></span><span class="font-weight-bold">Documentation</span>
	</a>
	<div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
		<ul class="navbar-nav mt-2 mt-lg-0">
			
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				
				
				<a class="nav-link active" href="/docs/kubernetes/" ><i class='fas fa-binoculars'></i><span class="active">KUBERNETES DOCUMENTS</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				
				
				<a class="nav-link" href="/docs/ansible/" ><i class='fas fa-user-check'></i><span>Ansible</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				
				
				<a class="nav-link" href="/docs/azure-devops/" ><i class='fas fa-user-check'></i><span>Azure Devops</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				
				
				<a class="nav-link" href="/docs/devops/" ><i class='fas fa-user-check'></i><span>Devops </span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				
				
				<a class="nav-link" href="/docs/gitlab/" ><i class='fas fa-user-check'></i><span>Gitlab</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				
				
				<a class="nav-link" href="/docs/openshift/" ><i class='fas fa-user-check'></i><span>Openshift</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				
				
				<a class="nav-link" href="/docs/terraform/" ><i class='fas fa-user-check'></i><span>Terraform</span></a>
			</li>
			
			
			
		</ul>
	</div>
	<div class="navbar-nav d-none d-lg-block">
<form class="d-flex align-items-center">
  <input type="search"
  class="form-control td-search-input"
  placeholder="&#xf002; Search this site…"
  aria-label="Search this site…"
  autocomplete="off"
  
  data-offline-search-index-json-src="/offline-search-index.d81df5ea3c42d7ddf1c407fed2af5e96.json"
  data-offline-search-base-href="/"
  data-offline-search-max-results="20">
</form>
</div>
</nav>

      <div class="manage-panels">
    <button type="button" class="button-left" id="left-panel-manager" title="Hide sidebar">""</button>
    <button type="button" class="button-right" id="right-panel-manager" title="Hide sidebar">""</button>
</div>
    </header>
    <div class="container-fluid td-outer">
      <div class="td-main autonumbering">
        <div class="row flex-xl-nowrap">
          <aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            
<div id="td-sidebar-menu" class="td-sidebar__inner">
  <div id="content-mobile">
  <form class="td-sidebar__search d-flex align-items-center">
    
<form class="d-flex align-items-center">
  <input type="search"
  class="form-control td-search-input"
  placeholder="&#xf002; Search this site…"
  aria-label="Search this site…"
  autocomplete="off"
  
  data-offline-search-index-json-src="/offline-search-index.d81df5ea3c42d7ddf1c407fed2af5e96.json"
  data-offline-search-base-href="/"
  data-offline-search-max-results="20">
</form>

    <button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type="button" data-toggle="collapse" data-target="#td-section-nav" aria-controls="td-docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    </button>
  </form>
  </div>
  <div id="content-desktop"></div>
  <nav class="collapse td-sidebar-nav foldable-nav" id="td-section-nav">
    <ul class="td-sidebar-nav__section pr-md-3 ul-0">
      <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-docs-li">
  <a href="/docs/" title="DEVOPS Documents hub" class="align-left pl-0 td-sidebar-link td-sidebar-link__section tree-root" id="m-docs"><span class="">Docs</span></a>
  <ul class="ul-1">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-docskubernetes-li">
  <input type="checkbox" id="m-docskubernetes-check" checked/>
  <label for="m-docskubernetes-check"><a href="/docs/kubernetes/" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-docskubernetes"><i class="fas fa-compass"></i><span class="">KUBERNETES DOCUMENTS</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docskubernetespart01-li">
  <input type="checkbox" id="m-docskubernetespart01-check"/>
  <label for="m-docskubernetespart01-check"><a href="/docs/kubernetes/part01/" class="align-left pl-0  active td-sidebar-link td-sidebar-link__page" id="m-docskubernetespart01"><span class="td-sidebar-nav-active-item">Part 1</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docskubernetespart02-li">
  <input type="checkbox" id="m-docskubernetespart02-check"/>
  <label for="m-docskubernetespart02-check"><a href="/docs/kubernetes/part02/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docskubernetespart02"><span class="">Part 2</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docskubernetespart03-li">
  <input type="checkbox" id="m-docskubernetespart03-check"/>
  <label for="m-docskubernetespart03-check"><a href="/docs/kubernetes/part03/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docskubernetespart03"><span class="">Part 3</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docskubernetespart04-li">
  <input type="checkbox" id="m-docskubernetespart04-check"/>
  <label for="m-docskubernetespart04-check"><a href="/docs/kubernetes/part04/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docskubernetespart04"><span class="">Part 4</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docskubernetespart05-li">
  <input type="checkbox" id="m-docskubernetespart05-check"/>
  <label for="m-docskubernetespart05-check"><a href="/docs/kubernetes/part05/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docskubernetespart05"><span class="">Part 5</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docskubernetesdocsmiscellaneouscontainerbasics-li">
  <input type="checkbox" id="m-docskubernetesdocsmiscellaneouscontainerbasics-check"/>
  <label for="m-docskubernetesdocsmiscellaneouscontainerbasics-check"><a href="/docs/kubernetes/docs/miscellaneous/containerbasics/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docskubernetesdocsmiscellaneouscontainerbasics"><span class="">Container Basics</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docskubernetesdocsmiscellaneoushelm-overview-li">
  <input type="checkbox" id="m-docskubernetesdocsmiscellaneoushelm-overview-check"/>
  <label for="m-docskubernetesdocsmiscellaneoushelm-overview-check"><a href="/docs/kubernetes/docs/miscellaneous/helm-overview/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docskubernetesdocsmiscellaneoushelm-overview"><span class="">Helm Overview</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docskubernetesdocsmiscellaneouskubernetes-rbac-li">
  <input type="checkbox" id="m-docskubernetesdocsmiscellaneouskubernetes-rbac-check"/>
  <label for="m-docskubernetesdocsmiscellaneouskubernetes-rbac-check"><a href="/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docskubernetesdocsmiscellaneouskubernetes-rbac"><span class="">Kubernetes RBAC</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docskubernetesdocsmiscellaneouskubernetes-on-centos-li">
  <input type="checkbox" id="m-docskubernetesdocsmiscellaneouskubernetes-on-centos-check"/>
  <label for="m-docskubernetesdocsmiscellaneouskubernetes-on-centos-check"><a href="/docs/kubernetes/docs/miscellaneous/kubernetes-on-centos/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docskubernetesdocsmiscellaneouskubernetes-on-centos"><span class="">Kubernetes-on-Centos</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docskubernetesdocsmiscellaneouskuberneteshardway-li">
  <input type="checkbox" id="m-docskubernetesdocsmiscellaneouskuberneteshardway-check"/>
  <label for="m-docskubernetesdocsmiscellaneouskuberneteshardway-check"><a href="/docs/kubernetes/docs/miscellaneous/kuberneteshardway/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docskubernetesdocsmiscellaneouskuberneteshardway"><span class="">Kubernets Installation From Scatch on rocky 9</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docskubernetesdocsmiscellaneousminio-li">
  <input type="checkbox" id="m-docskubernetesdocsmiscellaneousminio-check"/>
  <label for="m-docskubernetesdocsmiscellaneousminio-check"><a href="/docs/kubernetes/docs/miscellaneous/minio/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docskubernetesdocsmiscellaneousminio"><span class="">The Object Store for AI Data Infrastructure</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsansible-li">
  <input type="checkbox" id="m-docsansible-check"/>
  <label for="m-docsansible-check"><a href="/docs/ansible/" title="Configuration Management Tool" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-docsansible"><i class="fas fa-user-check"></i><span class="">Ansible</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsazure-devops-li">
  <input type="checkbox" id="m-docsazure-devops-check"/>
  <label for="m-docsazure-devops-check"><a href="/docs/azure-devops/" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-docsazure-devops"><i class="fas fa-user-check"></i><span class="">Azure Devops</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsazure-devopsaks-deployment-li">
  <input type="checkbox" id="m-docsazure-devopsaks-deployment-check"/>
  <label for="m-docsazure-devopsaks-deployment-check"><a href="/docs/azure-devops/aks-deployment/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsazure-devopsaks-deployment"><span class="">AKS Deployment</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsazure-devopsazure-container-registry-li">
  <input type="checkbox" id="m-docsazure-devopsazure-container-registry-check"/>
  <label for="m-docsazure-devopsazure-container-registry-check"><a href="/docs/azure-devops/azure-container-registry/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsazure-devopsazure-container-registry"><span class="">Azure Container Registry</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsazure-devopsazure-devopsagent-li">
  <input type="checkbox" id="m-docsazure-devopsazure-devopsagent-check"/>
  <label for="m-docsazure-devopsazure-devopsagent-check"><a href="/docs/azure-devops/azure-devopsagent/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsazure-devopsazure-devopsagent"><span class="">Azure Devops Pipeline Agent</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsazure-devopsazure-devops-pipeline-li">
  <input type="checkbox" id="m-docsazure-devopsazure-devops-pipeline-check"/>
  <label for="m-docsazure-devopsazure-devops-pipeline-check"><a href="/docs/azure-devops/azure-devops-pipeline/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsazure-devopsazure-devops-pipeline"><span class="">Azure Devops Pipeline Basics</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsazure-devopsazure-dns-li">
  <input type="checkbox" id="m-docsazure-devopsazure-dns-check"/>
  <label for="m-docsazure-devopsazure-dns-check"><a href="/docs/azure-devops/azure-dns/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsazure-devopsazure-dns"><span class="">Azure DNS</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsazure-devopscertmanager-li">
  <input type="checkbox" id="m-docsazure-devopscertmanager-check"/>
  <label for="m-docsazure-devopscertmanager-check"><a href="/docs/azure-devops/certmanager/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsazure-devopscertmanager"><span class="">Cert Manager</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsazure-devopsingresscontroller-li">
  <input type="checkbox" id="m-docsazure-devopsingresscontroller-check"/>
  <label for="m-docsazure-devopsingresscontroller-check"><a href="/docs/azure-devops/ingresscontroller/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsazure-devopsingresscontroller"><span class="">IngressController</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsdevops-li">
  <input type="checkbox" id="m-docsdevops-check"/>
  <label for="m-docsdevops-check"><a href="/docs/devops/" title="Devops" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-docsdevops"><i class="fas fa-user-check"></i><span class="">Devops </span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsdevopsdevops-advance-li">
  <input type="checkbox" id="m-docsdevopsdevops-advance-check"/>
  <label for="m-docsdevopsdevops-advance-check"><a href="/docs/devops/devops-advance/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsdevopsdevops-advance"><span class="">Devops for Advance Level</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsdevopsdevopsl1-li">
  <input type="checkbox" id="m-docsdevopsdevopsl1-check"/>
  <label for="m-docsdevopsdevopsl1-check"><a href="/docs/devops/devopsl1/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsdevopsdevopsl1"><span class="">Devops for Begineers</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsdevopselk-stack-li">
  <input type="checkbox" id="m-docsdevopselk-stack-check"/>
  <label for="m-docsdevopselk-stack-check"><a href="/docs/devops/elk-stack/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsdevopselk-stack"><span class="">ELK statck </span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsdevopspostgresql-li">
  <input type="checkbox" id="m-docsdevopspostgresql-check"/>
  <label for="m-docsdevopspostgresql-check"><a href="/docs/devops/postgresql/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsdevopspostgresql"><span class="">Postgres Installation </span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsgitlab-li">
  <input type="checkbox" id="m-docsgitlab-check"/>
  <label for="m-docsgitlab-check"><a href="/docs/gitlab/" title="Project Management Tool" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-docsgitlab"><i class="fas fa-user-check"></i><span class="">Gitlab</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsterraform-li">
  <input type="checkbox" id="m-docsterraform-check"/>
  <label for="m-docsterraform-check"><a href="/docs/terraform/" title="Infrastracture as a Code" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-docsterraform"><i class="fas fa-user-check"></i><span class="">Terraform</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsterraformdiscussions-li">
  <input type="checkbox" id="m-docsterraformdiscussions-check"/>
  <label for="m-docsterraformdiscussions-check"><a href="/docs/terraform/discussions/" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-docsterraformdiscussions"><span class="">Discussions</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsterraformterraform-with-aws-li">
  <input type="checkbox" id="m-docsterraformterraform-with-aws-check"/>
  <label for="m-docsterraformterraform-with-aws-check"><a href="/docs/terraform/terraform-with-aws/" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-docsterraformterraform-with-aws"><span class="">Terraform with AWS</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsterraformterraform-with-azure-li">
  <input type="checkbox" id="m-docsterraformterraform-with-azure-check"/>
  <label for="m-docsterraformterraform-with-azure-check"><a href="/docs/terraform/terraform-with-azure/" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-docsterraformterraform-with-azure"><span class="">Terraform with Azure</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsterraformterraform-with-gcp-li">
  <input type="checkbox" id="m-docsterraformterraform-with-gcp-check"/>
  <label for="m-docsterraformterraform-with-gcp-check"><a href="/docs/terraform/terraform-with-gcp/" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-docsterraformterraform-with-gcp"><span class="">Terraform with Google Cloud</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsopenshift-li">
  <input type="checkbox" id="m-docsopenshift-check"/>
  <label for="m-docsopenshift-check"><a href="/docs/openshift/" title="Redhat Container Platform" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-docsopenshift"><i class="fas fa-user-check"></i><span class="">Openshift</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsopenshiftopenshift-baremetalmd-li">
  <input type="checkbox" id="m-docsopenshiftopenshift-baremetalmd-check"/>
  <label for="m-docsopenshiftopenshift-baremetalmd-check"><a href="/docs/openshift/openshift-baremetal.md/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsopenshiftopenshift-baremetalmd"><span class="">Openshift Baremetal</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsopenshiftocpsetup-li">
  <input type="checkbox" id="m-docsopenshiftocpsetup-check"/>
  <label for="m-docsopenshiftocpsetup-check"><a href="/docs/openshift/ocpsetup/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsopenshiftocpsetup"><span class="">Openshift Installation and Upgradation</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsopenshiftprerequisites-li">
  <input type="checkbox" id="m-docsopenshiftprerequisites-check"/>
  <label for="m-docsopenshiftprerequisites-check"><a href="/docs/openshift/prerequisites./" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsopenshiftprerequisites"><span class="">OpenShift Prerequisites</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsopenshiftopenshifttasks-li">
  <input type="checkbox" id="m-docsopenshiftopenshifttasks-check"/>
  <label for="m-docsopenshiftopenshifttasks-check"><a href="/docs/openshift/openshifttasks/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsopenshiftopenshifttasks"><span class="">OpenShift Tasks</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsopenshifttoc-li">
  <input type="checkbox" id="m-docsopenshifttoc-check"/>
  <label for="m-docsopenshifttoc-check"><a href="/docs/openshift/toc/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsopenshifttoc"><span class="">Openshift TOC</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsopenshiftpart-1-li">
  <input type="checkbox" id="m-docsopenshiftpart-1-check"/>
  <label for="m-docsopenshiftpart-1-check"><a href="/docs/openshift/part-1/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsopenshiftpart-1"><span class="">Part 1</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsopenshiftpart-2-li">
  <input type="checkbox" id="m-docsopenshiftpart-2-check"/>
  <label for="m-docsopenshiftpart-2-check"><a href="/docs/openshift/part-2/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsopenshiftpart-2"><span class="">Part 2</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsopenshiftopenid-azuread-li">
  <input type="checkbox" id="m-docsopenshiftopenid-azuread-check"/>
  <label for="m-docsopenshiftopenid-azuread-check"><a href="/docs/openshift/openid-azuread/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsopenshiftopenid-azuread"><span class="">Use and configure OpenID connect with Azure AD</span></a></label>
  
</li>
  </ul>
</li>
  </ul>
</li>
    </ul>
  </nav>
</div>

          </aside>
          <aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none">
            

    <div class="td-page-meta ml-2 pb-1 pt-2 mb-0">
        <div class="toc-title">Actions</div>
        <a href="/edit/master/content/docs/kubernetes/Part01.md" target="_blank" rel="noopener"><i class="fa fa-edit fa-fw"></i> Contribute to this page</a>
        <a href="/issues/new?issue%5Btitle=%f0%9f%93%83%20docs:%20update%20page%20docs/kubernetes/Part01.md" target="_blank" rel="noopener"><i class="fab fa-gitlab fa-fw"></i> Create a documentation issue</a>
       
    </div>

            
<div class="td-page-meta ml-2 pb-1 pt-2 mb-0 right-menu-toc">

    
        
            <div class="toc-title">Table of content</div>
            <div class="td-toc"><nav id="TableOfContents">
  <ul>
    <li><a href="#topics">Topics</a></li>
    <li><a href="#kubernetes-overview">Kubernetes Overview</a></li>
    <li><a href="#kubernetes-architecture--components">Kubernetes Architecture &amp; Components</a>
      <ul>
        <li><a href="#kubernetes-has-two-type-of-nodes">Kubernetes has two type of nodes</a></li>
        <li><a href="#control-plane">Control Plane</a></li>
        <li><a href="#worker-node">Worker Node</a></li>
        <li><a href="#control-plane-components">Control Plane Components:</a>
          <ul>
            <li><a href="#kube-apiserver">kube-apiserver</a></li>
            <li><a href="#etcd">etcd</a></li>
            <li><a href="#kube-scheduler">kube-scheduler:</a></li>
            <li><a href="#kube-controller-manager">Kube Controller Manager</a>
              <ul>
                <li><a href="#built-in-kubernetes-controllers">built-in Kubernetes controllers.</a></li>
              </ul>
            </li>
          </ul>
        </li>
        <li><a href="#cloud-controller-manager-ccm">Cloud Controller Manager (CCM)</a></li>
        <li><a href="#kubernetes-worker-node-components">Kubernetes Worker Node Components</a>
          <ul>
            <li><a href="#kubelet">Kubelet</a></li>
            <li><a href="#kube-proxy">Kube proxy</a></li>
            <li><a href="#container-runtime">Container Runtime</a></li>
          </ul>
        </li>
        <li><a href="#kubernetes-cluster-addon-components">Kubernetes Cluster Addon Components</a></li>
      </ul>
    </li>
    <li><a href="#virual-machine-setup-for-kubernetes-installation">Virual Machine setup for Kubernetes Installation.</a>
      <ul>
        <li><a href="#prerequisites">Prerequisites</a></li>
        <li><a href="#create-two-vms-using-vagrant-on-virtualbox">Create two VMS using vagrant on virtualbox</a></li>
        <li><a href="#step-1-create-a-folder">Step 1: Create a Folder</a></li>
        <li><a href="#step-2-open-the-folder-in-visual-studio-code">Step 2: Open the Folder in Visual Studio Code</a></li>
        <li><a href="#step-3-open-terminal-in-visual-studio-code">Step 3: Open Terminal in Visual Studio Code</a></li>
        <li><a href="#step-4-clone-the-repository-and-start-vagrant">Step 4: Clone the Repository and Start Vagrant</a></li>
      </ul>
    </li>
    <li><a href="#kubernetes-cluster-setup-documentation">Kubernetes Cluster Setup Documentation</a>
      <ul>
        <li><a href="#documentation-link">Documentation Link:</a></li>
        <li><a href="#installation-of-kubeadm-kubelet-etc-will-be-done-on-master-and-worker-nodes">Installation of kubeadm ,kubelet etc will be done on master and worker nodes.</a>
          <ul>
            <li><a href="#setup-containerd">Setup containerd</a></li>
            <li><a href="#prerequisites-1">Prerequisites</a></li>
          </ul>
        </li>
        <li><a href="#installing-a-container-runtime">Installing a container runtime</a>
          <ul>
            <li><a href="#install-containerd">Install containerd</a></li>
            <li><a href="#update-systemdcgroup-settings">Update SystemdCgroup Settings</a></li>
            <li><a href="#restart-containerd">Restart containerd</a></li>
            <li><a href="#kernel-parameter-configuration">Kernel Parameter Configuration</a></li>
            <li><a href="#installing-kubeadm-kubelet-and-kubectl">Installing kubeadm, kubelet and kubectl</a></li>
            <li><a href="#initialize-cluster-with-kubeadm-only-master-node">Initialize Cluster with kubeadm (Only master node)</a></li>
            <li><a href="#execute-the-below-command-to-run-kubectl-commands-as-you-will-require-kubeconfig-file-to-connect-to-kubernetes-cluster">Execute the below command to run kubectl commands as you will require kubeconfig file to connect to kubernetes cluster</a></li>
            <li><a href="#check-nodes-status">Check nodes status</a></li>
            <li><a href="#install-network-addon-flannel-master-node">Install Network Addon (flannel) (master node)</a></li>
            <li><a href="#connect-worker-node-only-worker-node">Connect Worker Node (Only worker node)</a></li>
            <li><a href="#verification">Verification</a></li>
          </ul>
        </li>
        <li><a href="#kubernetes-cluster-configurations">Kubernetes Cluster Configurations</a></li>
        <li><a href="#kubelet-configurations">Kubelet Configurations</a></li>
        <li><a href="#node-related-commands">Node Related commands</a></li>
        <li><a href="#upgrade-kubeadm-cluster">Upgrade Kubeadm Cluster</a></li>
        <li><a href="#kubens--kubectx">Kubens &amp; Kubectx</a>
          <ul>
            <li><a href="#install-kubens-to-switch-from-one-namespace-to-another">Install Kubens to switch from one namespace to another</a></li>
            <li><a href="#install-kubectx-to-switch-from-one-kubernetes-cluster-to-another">Install kubectx to switch from one Kubernetes cluster to another</a></li>
            <li><a href="#kubernetes-initial-commands-for-cluster-verification">Kubernetes Initial commands for cluster verification</a></li>
          </ul>
        </li>
        <li><a href="#install-kubernetes-cluster-automatically">Install kubernetes Cluster Automatically</a></li>
        <li><a href="#common-kubeadm-commands">Common Kubeadm Commands</a></li>
        <li><a href="#what-is-a-kubeconfig-file">What is a Kubeconfig file?</a></li>
      </ul>
    </li>
  </ul>
</nav></div>
        
    

</div>
          </aside>
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            
  

            <nav aria-label="breadcrumb" class="td-breadcrumbs">
  <ol class="breadcrumb">
  <li class="breadcrumb-item">
    <a href="/docs/">Docs</a>
  </li>
  <li class="breadcrumb-item">
    <a href="/docs/kubernetes/">KUBERNETES DOCUMENTS</a>
  </li>
  <li class="breadcrumb-item active" aria-current="page">
    <a href="/docs/kubernetes/part01/">Part 1</a>
  </li>
  </ol>
</nav>
            
<div class="td-content">
	<h1>Part 1</h1>
	
	<header class="article-meta">
		

  
    


  
    


  

		
	</header>    
	<!-- end-chunk -->
<!-- begin-chunk data-anchor="topics" data-heading="Topics" data-level="2" data-permalink="/docs/kubernetes/part01/" data-title="Part 1" -->
<h2 id="topics">Topics</h2><ul>
<li><a href="#kubernetes-overview">Kubernetes Overview</a></li>
<li><a href="#kubernetes-architecture--components">Kubernetes Architecture</a></li>
<li><a href="#kubernetes-worker-node-components">Kubernetes Components</a></li>
<li><a href="#step-upgrade-kubeadm-cluster">Kubernetes Installation</a></li>
<li><a href="#kubernetes-cluster-configurations">Kubernetes SSL Certificates</a></li>
<li><a href="#kubernetes-cluster-configurations">Kubernetes Static Pods</a></li>
<li><a href="#kubernetes-cluster-configurations">Kubernetes Configuration files</a></li>
<li><a href="#step-upgrade-kubeadm-cluster">Kubernetes Upgrade</a></li>
<li><a href="Day05.md#etcd-backup-and-restore-on-kubernetes-cluster">Etcd backup and restore</a></li>
<li><a href="#node-related-commands">Kubernetes Node related commands</a></li>
<li><a href="https://learn.cisecurity.org/benchmarks" target="_blank" rel="noopener">CIS Benchmark</a></li>
</ul>
<!-- end-chunk -->
<!-- begin-chunk data-anchor="kubernetes-overview" data-heading="Kubernetes Overview" data-level="2" data-permalink="/docs/kubernetes/part01/" data-title="Part 1" -->
<h2 id="kubernetes-overview">Kubernetes Overview</h2><p>Kubernetes or k8s is an open-source orchestration and cluster management for container-based applications maintained by the Cloud Native Computing Foundation.<br>
Kubernetes is an open-source system for automating deployment, scaling, and management of containerized applications.<br>
It groups containers that make up an application into logical units for easy management and discovery</p>
<!-- end-chunk -->
<!-- begin-chunk data-anchor="kubernetes-architecture--components" data-heading="Kubernetes Architecture &amp; Components" data-level="2" data-permalink="/docs/kubernetes/part01/" data-title="Part 1" -->
<h2 id="kubernetes-architecture--components">Kubernetes Architecture &amp; Components</h2><ul>
<li>Managed Kubernetes Cluster (We do not have on control Plane) e.g
<ul>
<li>AKS on Azure Cloud</li>
<li>EKS on AWS cloud</li>
<li>GKE on Google Cloud</li>
</ul>
</li>
<li>Self Managed kubernetes Cluster (Installed on VMs)</li>
</ul>
<!-- end-chunk -->
<!-- begin-chunk data-anchor="kubernetes-has-two-type-of-nodes" data-heading="Kubernetes has two type of nodes" data-level="3" data-permalink="/docs/kubernetes/part01/" data-title="Part 1" -->
<h3 id="kubernetes-has-two-type-of-nodes">Kubernetes has two type of nodes</h3><ul>
<li>Master Nodes (Control Plane)</li>
<li>Worker Nodes</li>
</ul>
<!-- end-chunk -->
<!-- begin-chunk data-anchor="control-plane" data-heading="Control Plane" data-level="3" data-permalink="/docs/kubernetes/part01/" data-title="Part 1" -->
<h3 id="control-plane">Control Plane</h3><p>The control plane is responsible for container orchestration and maintaining the desired state of the cluster. It has the following components.</p>
<ul>
<li>kube-apiserver</li>
<li>etcd</li>
<li>kube-scheduler</li>
<li>kube-controller-manager</li>
<li>cloud-controller-manager</li>
</ul>
<!-- end-chunk -->
<!-- begin-chunk data-anchor="worker-node" data-heading="Worker Node" data-level="3" data-permalink="/docs/kubernetes/part01/" data-title="Part 1" -->
<h3 id="worker-node">Worker Node</h3><p>The Worker nodes are responsible for running containerized applications. The worker Node has the following components.</p>
<ul>
<li>kubelet</li>
<li>kube-proxy</li>
<li>Container runtime</li>
</ul>
<!-- end-chunk -->
<!-- begin-chunk data-anchor="control-plane-components" data-heading="Control Plane Components:" data-level="3" data-permalink="/docs/kubernetes/part01/" data-title="Part 1" -->
<h3 id="control-plane-components">Control Plane Components:</h3><!-- end-chunk -->
<!-- begin-chunk data-anchor="kube-apiserver" data-heading="kube-apiserver" data-level="4" data-permalink="/docs/kubernetes/part01/" data-title="Part 1" -->
<h4 id="kube-apiserver">kube-apiserver</h4><ul>
<li>The kube-api server is the central hub of the Kubernetes cluster that exposes the Kubernetes API.<br></li>
<li>End users, and other cluster components, talk to the cluster via the API server.<br></li>
<li>So when you use kubectl to manage the cluster, at the backend you are actually communicating with the API server through HTTP REST APIs.<br></li>
<li>The communication between the API server and other components in the cluster happens over TLS to prevent unauthorized access to the cluster.<br></li>
<li>It is the only component that communicates with etcd.<br></li>
</ul>
<!-- end-chunk -->
<!-- begin-chunk data-anchor="etcd" data-heading="etcd" data-level="4" data-permalink="/docs/kubernetes/part01/" data-title="Part 1" -->
<h4 id="etcd">etcd</h4><ul>
<li>etcd is an open-source strongly consistent, distributed key-value store.</li>
<li>etcd is designed to run on multiple nodes as a cluster without sacrificing consistency.</li>
<li>etcd stores all configurations, states, and metadata of Kubernetes objects (pods, secrets, daemonsets, deployments, configmaps, statefulsets, etc).</li>
<li>etcd it is the only Statefulset component in the control plane.</li>
<li>Only kube-apiserver can talk to etcd.</li>
</ul>
<!-- end-chunk -->
<!-- begin-chunk data-anchor="kube-scheduler" data-heading="kube-scheduler:" data-level="4" data-permalink="/docs/kubernetes/part01/" data-title="Part 1" -->
<h4 id="kube-scheduler">kube-scheduler:</h4><ul>
<li>The kube-scheduler is responsible for scheduling Kubernetes pods on worker nodes.</li>
<li>It is a controller that listens to pod creation events in the API server.</li>
<li>The scheduler has two phases. Scheduling cycle and the Binding cycle. Together it is called the scheduling context. The scheduling cycle selects a worker node and the binding cycle applies that change to the cluster.</li>
</ul>
<!-- end-chunk -->
<!-- begin-chunk data-anchor="kube-controller-manager" data-heading="Kube Controller Manager" data-level="4" data-permalink="/docs/kubernetes/part01/" data-title="Part 1" -->
<h4 id="kube-controller-manager">Kube Controller Manager</h4><ul>
<li>Controllers are programs that run infinite control loops. Meaning it runs continuously and watches the actual and desired state of objects.</li>
<li>Kube controller manager is a component that manages all the Kubernetes controllers. Kubernetes resources/objects like pods, namespaces, jobs, replicaset are managed by respective controllers.</li>
<li>the Kube scheduler is also a controller managed by the Kube controller manager.</li>
</ul>
<!-- end-chunk -->
<!-- begin-chunk data-anchor="built-in-kubernetes-controllers" data-heading="built-in Kubernetes controllers." data-level="5" data-permalink="/docs/kubernetes/part01/" data-title="Part 1" -->
<h5 id="built-in-kubernetes-controllers">built-in Kubernetes controllers.</h5><ul>
<li>Deployment controller</li>
<li>Replicaset controller</li>
<li>DaemonSet controller</li>
<li>Job Controller (Kubernetes Jobs)</li>
<li>CronJob Controller</li>
<li>endpoints controller</li>
<li>namespace controller</li>
<li>service accounts controller.</li>
<li>Node controller</li>
</ul>
<!-- end-chunk -->
<!-- begin-chunk data-anchor="cloud-controller-manager-ccm" data-heading="Cloud Controller Manager (CCM)" data-level="3" data-permalink="/docs/kubernetes/part01/" data-title="Part 1" -->
<h3 id="cloud-controller-manager-ccm">Cloud Controller Manager (CCM)</h3><ul>
<li>
<p>When kubernetes is deployed in cloud environments, the cloud controller manager acts as a bridge between Cloud Platform APIs and the Kubernetes cluster.</p>
</li>
<li>
<p>Cloud controller integration allows Kubernetes cluster to provision cloud resources like instances (for nodes), Load Balancers (for services), and Storage Volumes (for persistent volumes).<br></p>
<p><span style="color:orange;">3 main controllers that are part of the cloud controller manager.</span></p>
</li>
<li>
<p><strong>Node controller:</strong> This controller updates node-related information by talking to the cloud provider API. For example, node labeling &amp; annotation, getting hostname, CPU &amp; memory availability, nodes health, etc.</p>
</li>
<li>
<p><strong>Route controller:</strong> It is responsible for configuring networking routes on a cloud platform. So that pods in different nodes can talk to each other.</p>
</li>
<li>
<p><strong>Service controller</strong>: It takes care of deploying load balancers for kubernetes services, assigning IP addresses, etc.
<img src="/images/kubernetes-cluster-architecture.svg" alt="Kubernetes cluster architecture"></p>
</li>
</ul>
<!-- end-chunk -->
<!-- begin-chunk data-anchor="kubernetes-worker-node-components" data-heading="Kubernetes Worker Node Components" data-level="3" data-permalink="/docs/kubernetes/part01/" data-title="Part 1" -->
<h3 id="kubernetes-worker-node-components">Kubernetes Worker Node Components</h3><!-- end-chunk -->
<!-- begin-chunk data-anchor="kubelet" data-heading="Kubelet" data-level="4" data-permalink="/docs/kubernetes/part01/" data-title="Part 1" -->
<h4 id="kubelet">Kubelet</h4><ul>
<li>Kubelet is an agent component that runs on every node in the cluster.</li>
<li>It does not run as a container instead runs as a daemon, managed by systemd.</li>
<li>It is responsible for registering worker nodes with the API server.</li>
<li>It then brings the podSpec to the desired state by creating containers.</li>
<li>Creating, modifying, and deleting containers for the pod.</li>
<li>Responsible for handling liveliness, readiness, and startup probes.
Responsible for Mounting volumes by reading pod configuration and creating respective directories on the host for the volume mount.</li>
<li>Kubelet is also a controller that watches for pod changes and utilizes the node’s container runtime to pull images, run containers, etc.</li>
<li>Static pods are controlled by kubelet, not the API servers.</li>
<li>Static pods from podSpecs located at /etc/kubernetes/manifests</li>
</ul>
<p><img src="/images/kubelet-architecture.png" alt="Kubelet"></p>
<!-- end-chunk -->
<!-- begin-chunk data-anchor="kube-proxy" data-heading="Kube proxy" data-level="4" data-permalink="/docs/kubernetes/part01/" data-title="Part 1" -->
<h4 id="kube-proxy">Kube proxy</h4><ul>
<li>Kube-Proxy is a network proxy that runs on each node in a Kubernetes cluster.</li>
<li>It is responsible for maintaining network connectivity between services and pods.</li>
<li>Kube-Proxy does this by translating service definitions into actionable networking rules.</li>
<li>Kube-proxy uses iptables as a default mode.</li>
</ul>
<!-- end-chunk -->
<!-- begin-chunk data-anchor="container-runtime" data-heading="Container Runtime" data-level="4" data-permalink="/docs/kubernetes/part01/" data-title="Part 1" -->
<h4 id="container-runtime">Container Runtime</h4><ul>
<li>
<p>Container runtime runs on all the nodes in the Kubernetes cluster. It is responsible for pulling images from container registries, running containers, allocating and isolating resources for containers, and managing the entire lifecycle of a container on a host.</p>
</li>
<li>
<p>Kubernetes supports multiple container runtimes (CRI-O, Docker Engine, containerd, etc) that are compliant with Container Runtime Interface (CRI). This means, all these container runtimes implement the CRI interface and expose gRPC CRI APIs (runtime and image service endpoints).
<img src="/images/containeruntime.png" alt="Container runtime"></p>
</li>
<li>
<p>When there is a new request for a pod from the API server, the kubelet talks to CRI-O daemon to launch the required containers via Kubernetes Container Runtime Interface.</p>
</li>
<li>
<p>CRI-O checks and pulls the required container image from the configured container registry using containers/image library.</p>
</li>
<li>
<p>CRI-O then generates OCI runtime specification (JSON) for a container.</p>
</li>
<li>
<p>CRI-O then launches an OCI-compatible runtime (runc) to start the container process as per the runtime specification.</p>
</li>
</ul>
<!-- end-chunk -->
<!-- begin-chunk data-anchor="kubernetes-cluster-addon-components" data-heading="Kubernetes Cluster Addon Components" data-level="3" data-permalink="/docs/kubernetes/part01/" data-title="Part 1" -->
<h3 id="kubernetes-cluster-addon-components">Kubernetes Cluster Addon Components</h3><ul>
<li>CNI Plugin (Container Network Interface)</li>
<li>CoreDNS (For DNS server): CoreDNS acts as a DNS server within the Kubernetes cluster. By enabling this addon, you can enable DNS-based service discovery.</li>
<li>Metrics Server (For Resource Metrics): This addon helps you collect performance data and resource usage of Nodes and pods in the cluster.</li>
<li>Web UI (Kubernetes Dashboard): This addon enables the Kubernetes dashboard to manage the object via web UI.</li>
</ul>
<!-- end-chunk -->
<!-- begin-chunk data-anchor="virual-machine-setup-for-kubernetes-installation" data-heading="Virual Machine setup for Kubernetes Installation." data-level="2" data-permalink="/docs/kubernetes/part01/" data-title="Part 1" -->
<h2 id="virual-machine-setup-for-kubernetes-installation">Virual Machine setup for Kubernetes Installation.</h2><!-- end-chunk -->
<!-- begin-chunk data-anchor="prerequisites" data-heading="Prerequisites" data-level="3" data-permalink="/docs/kubernetes/part01/" data-title="Part 1" -->
<h3 id="prerequisites">Prerequisites</h3><ul>
<li>Virtualbox installed on Windows vm.</li>
<li>Internet connectivity has to be there.</li>
<li>Vscode should be installed</li>
<li>Gitbash should also be available on Windows machine</li>
</ul>
<!-- end-chunk -->
<!-- begin-chunk data-anchor="create-two-vms-using-vagrant-on-virtualbox" data-heading="Create two VMS using vagrant on virtualbox" data-level="3" data-permalink="/docs/kubernetes/part01/" data-title="Part 1" -->
<h3 id="create-two-vms-using-vagrant-on-virtualbox">Create two VMS using vagrant on virtualbox</h3><ul>
<li>Create a folder in Windows OS</li>
<li>Open folder in vscode</li>
<li>Open Terminal in vscode and run the below commands</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span> <span style="color:#ae81ff">git clone https://gitlab.com/container-and-kubernetes/kubernetes-2024.git</span>
</span></span><span style="display:flex;"><span> <span style="color:#ae81ff">cd kubernetes-2024/two-vms</span>
</span></span><span style="display:flex;"><span> <span style="color:#ae81ff">vagrant up</span>
</span></span></code></pre></div><p>Follow these steps to create a folder, open it in Visual Studio Code, and set up your Kubernetes environment.</p>
<!-- end-chunk -->
<!-- begin-chunk data-anchor="step-1-create-a-folder" data-heading="Step 1: Create a Folder" data-level="3" data-permalink="/docs/kubernetes/part01/" data-title="Part 1" -->
<h3 id="step-1-create-a-folder">Step 1: Create a Folder</h3><ol>
<li>Open <strong>File Explorer</strong>.</li>
<li>Navigate to the location where you want to create your project folder.</li>
<li>Right-click and select <strong>New</strong> &gt; <strong>Folder</strong>.</li>
<li>Name the folder <code>kubernetes-setup</code>.</li>
</ol>
<!-- end-chunk -->
<!-- begin-chunk data-anchor="step-2-open-the-folder-in-visual-studio-code" data-heading="Step 2: Open the Folder in Visual Studio Code" data-level="3" data-permalink="/docs/kubernetes/part01/" data-title="Part 1" -->
<h3 id="step-2-open-the-folder-in-visual-studio-code">Step 2: Open the Folder in Visual Studio Code</h3><ol>
<li>Open <strong>Visual Studio Code</strong>.</li>
<li>Click on <strong>File</strong> &gt; <strong>Open Folder</strong>.</li>
<li>Browse to the location of your newly created folder, <code>kubernetes-setup</code>, and select it.</li>
</ol>
<!-- end-chunk -->
<!-- begin-chunk data-anchor="step-3-open-terminal-in-visual-studio-code" data-heading="Step 3: Open Terminal in Visual Studio Code" data-level="3" data-permalink="/docs/kubernetes/part01/" data-title="Part 1" -->
<h3 id="step-3-open-terminal-in-visual-studio-code">Step 3: Open Terminal in Visual Studio Code</h3><ol>
<li>In Visual Studio Code, open the integrated terminal by pressing <code>Ctrl + </code> (backtick) or navigating to <strong>Terminal</strong> &gt; <strong>New Terminal</strong>.</li>
</ol>
<!-- end-chunk -->
<!-- begin-chunk data-anchor="step-4-clone-the-repository-and-start-vagrant" data-heading="Step 4: Clone the Repository and Start Vagrant" data-level="3" data-permalink="/docs/kubernetes/part01/" data-title="Part 1" -->
<h3 id="step-4-clone-the-repository-and-start-vagrant">Step 4: Clone the Repository and Start Vagrant</h3><p>Run the following commands in the terminal:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git clone https://gitlab.com/container-and-kubernetes/kubernetes-2024.git
</span></span><span style="display:flex;"><span>cd kubernetes-2024/two-vms
</span></span><span style="display:flex;"><span>vagrant up
</span></span></code></pre></div><ul>
<li>Check your virtualbox and see if you have two vms (kmaster &amp; kworker1) with below ips</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kmaster: <span style="color:#ae81ff">172.16.16.100</span>
</span></span><span style="display:flex;"><span>kworker1: <span style="color:#ae81ff">172.16.16.101</span>
</span></span></code></pre></div><ul>
<li>Try to login to each vms using the command below usinf vscode terminal</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>ssh vagrant@172<span style="color:#ae81ff">.16.16.100</span>
</span></span><span style="display:flex;"><span>ssh vagrant@172<span style="color:#ae81ff">.16.16.101</span>
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="kubernetes-cluster-setup-documentation" data-heading="Kubernetes Cluster Setup Documentation" data-level="2" data-permalink="/docs/kubernetes/part01/" data-title="Part 1" -->
<h2 id="kubernetes-cluster-setup-documentation">Kubernetes Cluster Setup Documentation</h2><!-- end-chunk -->
<!-- begin-chunk data-anchor="documentation-link" data-heading="Documentation Link:" data-level="3" data-permalink="/docs/kubernetes/part01/" data-title="Part 1" -->
<h3 id="documentation-link">Documentation Link:</h3><p><a href="https://kubernetes.io/docs/setup/production-environment/tools/kubeadm/install-kubeadm/" target="_blank" rel="noopener">https://kubernetes.io/docs/setup/production-environment/tools/kubeadm/install-kubeadm/</a></p>
<!-- end-chunk -->
<!-- begin-chunk data-anchor="installation-of-kubeadm-kubelet-etc-will-be-done-on-master-and-worker-nodes" data-heading="Installation of kubeadm ,kubelet etc will be done on master and worker nodes." data-level="3" data-permalink="/docs/kubernetes/part01/" data-title="Part 1" -->
<h3 id="installation-of-kubeadm-kubelet-etc-will-be-done-on-master-and-worker-nodes">Installation of kubeadm ,kubelet etc will be done on master and worker nodes.</h3><!-- end-chunk -->
<!-- begin-chunk data-anchor="setup-containerd" data-heading="Setup containerd" data-level="4" data-permalink="/docs/kubernetes/part01/" data-title="Part 1" -->
<h4 id="setup-containerd">Setup containerd</h4><!-- end-chunk -->
<!-- begin-chunk data-anchor="prerequisites-1" data-heading="Prerequisites" data-level="4" data-permalink="/docs/kubernetes/part01/" data-title="Part 1" -->
<h4 id="prerequisites-1">Prerequisites</h4><ul>
<li>
<p>A compatible Linux host.</p>
</li>
<li>
<p>2 GB or more of RAM per machine (any less will leave little room for your apps).</p>
</li>
<li>
<p>2 CPUs or more.</p>
</li>
<li>
<p>Full network connectivity between all machines in the cluster (public or private network is fine).</p>
</li>
<li>
<p>Unique hostname, MAC address, and product_uuid for every node. See here for more details.</p>
</li>
<li>
<p>Certain ports are open on your machines. See here for more details.</p>
</li>
<li>
<p>Swap configuration. The default behavior of a kubelet was to fail to start if swap memory was detected on a node.</p>
</li>
<li>
<p><input disabled="" type="checkbox"> Verify the MAC address and product_uuid are unique for every node</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>ip link 
</span></span><span style="display:flex;"><span>ip addr show 
</span></span><span style="display:flex;"><span>ifconfig <span style="color:#f92672">-</span>a
</span></span><span style="display:flex;"><span>sudo cat <span style="color:#e6db74">/sys/c</span>lass<span style="color:#e6db74">/dmi/i</span>d<span style="color:#f92672">/</span>product_uuid
</span></span></code></pre></div><ul>
<li>Check <a href="https://kubernetes.io/docs/reference/networking/ports-and-protocols/" target="_blank" rel="noopener">Required Ports</a></li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>nc <span style="color:#ae81ff">127.0.0.1</span> <span style="color:#ae81ff">6443</span>
</span></span></code></pre></div><ul>
<li>Disable swap</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>sudo swapoff <span style="color:#f92672">-</span>a
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>sudo sed <span style="color:#f92672">-</span>i <span style="color:#e6db74">&#39;/ swap / s/^\(.*\)$/#\1/g&#39;</span> <span style="color:#e6db74">/etc/</span>fstab
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="installing-a-container-runtime" data-heading="Installing a container runtime" data-level="3" data-permalink="/docs/kubernetes/part01/" data-title="Part 1" -->
<h3 id="installing-a-container-runtime">Installing a container runtime</h3><ul>
<li>
<p>To run containers in Pods, Kubernetes uses a container runtime.</p>
</li>
<li>
<p>By default, Kubernetes uses the Container Runtime Interface (CRI) to interface with your chosen container runtime.</p>
</li>
<li>
<p>If you don&rsquo;t specify a runtime, kubeadm automatically tries to detect an installed container runtime by scanning through a list of known <strong>endpoints</strong>.</p>
</li>
<li>
<p>If multiple or no <strong>container runtimes</strong> are detected kubeadm will throw an error and will request that you specify which one you want to use.</p>
</li>
<li>
<p>The tables below include the known endpoints for supported operating systems:</p>
</li>
<li>
<p>Runtime	Path to Unix domain socket</p>
<table>
<thead>
<tr>
<th>Container Runtime</th>
<th>Socket</th>
</tr>
</thead>
<tbody>
<tr>
<td>containerd</td>
<td>unix:///var/run/containerd/containerd.sock</td>
</tr>
<tr>
<td>CRI-O</td>
<td>unix:///var/run/crio/crio.sock</td>
</tr>
<tr>
<td>Docker Engine (cri-dockerd)</td>
<td>unix:///var/run/cri-dockerd.sock</td>
</tr>
</tbody>
</table>
</li>
</ul>
<!-- end-chunk -->
<!-- begin-chunk data-anchor="install-containerd" data-heading="Install containerd" data-level="4" data-permalink="/docs/kubernetes/part01/" data-title="Part 1" -->
<h4 id="install-containerd">Install containerd</h4><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>apt update -y
</span></span><span style="display:flex;"><span>apt-get install -y containerd
</span></span><span style="display:flex;"><span>mkdir -p /etc/containerd
</span></span><span style="display:flex;"><span>containerd config default &gt; /etc/containerd/config.toml
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="update-systemdcgroup-settings" data-heading="Update SystemdCgroup Settings" data-level="4" data-permalink="/docs/kubernetes/part01/" data-title="Part 1" -->
<h4 id="update-systemdcgroup-settings">Update SystemdCgroup Settings</h4><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>sed -i <span style="color:#e6db74">&#39;s/SystemdCgroup \= false/SystemdCgroup \= true/g&#39;</span> /etc/containerd/config.toml
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="restart-containerd" data-heading="Restart containerd" data-level="4" data-permalink="/docs/kubernetes/part01/" data-title="Part 1" -->
<h4 id="restart-containerd">Restart containerd</h4><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>systemctl restart containerd
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="kernel-parameter-configuration" data-heading="Kernel Parameter Configuration" data-level="4" data-permalink="/docs/kubernetes/part01/" data-title="Part 1" -->
<h4 id="kernel-parameter-configuration">Kernel Parameter Configuration</h4><ul>
<li>Forwarding IPv4 and letting iptables see bridged traffic</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>cat <span style="color:#f92672">&lt;&lt;</span>EOF <span style="color:#f92672">|</span> sudo tee <span style="color:#e6db74">/etc/mo</span>dules<span style="color:#f92672">-</span>load<span style="color:#f92672">.</span>d<span style="color:#f92672">/</span>k8s<span style="color:#f92672">.</span>conf
</span></span><span style="display:flex;"><span>overlay
</span></span><span style="display:flex;"><span>br_netfilter
</span></span><span style="display:flex;"><span>EOF
</span></span></code></pre></div><ul>
<li>Enable setting at runtime</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>sudo modprobe overlay
</span></span><span style="display:flex;"><span>sudo modprobe br_netfilter
</span></span></code></pre></div><ul>
<li>sysctl params required by setup, params persist across reboots</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>cat <span style="color:#f92672">&lt;&lt;</span>EOF <span style="color:#f92672">|</span> sudo tee <span style="color:#e6db74">/etc/s</span>ysctl<span style="color:#f92672">.</span>d<span style="color:#f92672">/</span>k8s<span style="color:#f92672">.</span>conf
</span></span><span style="display:flex;"><span>net<span style="color:#f92672">.</span>bridge<span style="color:#f92672">.</span>bridge<span style="color:#f92672">-</span>nf<span style="color:#f92672">-</span>call<span style="color:#f92672">-</span>iptables  <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>net<span style="color:#f92672">.</span>bridge<span style="color:#f92672">.</span>bridge<span style="color:#f92672">-</span>nf<span style="color:#f92672">-</span>call<span style="color:#f92672">-</span>ip6tables <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>net<span style="color:#f92672">.</span>ipv4<span style="color:#f92672">.</span>ip_forward                 <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>EOF
</span></span></code></pre></div><ul>
<li>Apply sysctl params without reboot</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>sudo sysctl <span style="color:#f92672">--</span>system
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="installing-kubeadm-kubelet-and-kubectl" data-heading="Installing kubeadm, kubelet and kubectl" data-level="4" data-permalink="/docs/kubernetes/part01/" data-title="Part 1" -->
<h4 id="installing-kubeadm-kubelet-and-kubectl">Installing kubeadm, kubelet and kubectl</h4><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>sudo apt-get update
</span></span><span style="display:flex;"><span><span style="color:#75715e"># apt-transport-https may be a dummy package; if so, you can skip that package</span>
</span></span><span style="display:flex;"><span>sudo apt-get install -y apt-transport-https ca-certificates curl gpg
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>curl -fsSL https://pkgs.k8s.io/core:/stable:/v1.28/deb/Release.key | sudo gpg --dearmor -o /etc/apt/keyrings/kubernetes-apt-keyring.gpg
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># This overwrites any existing configuration in /etc/apt/sources.list.d/kubernetes.list</span>
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#39;deb [signed-by=/etc/apt/keyrings/kubernetes-apt-keyring.gpg] https://pkgs.k8s.io/core:/stable:/v1.28/deb/ /&#39;</span> | sudo tee /etc/apt/sources.list.d/kubernetes.list
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>sudo apt-get update
</span></span><span style="display:flex;"><span>sudo apt-get install -y kubelet kubeadm kubectl
</span></span><span style="display:flex;"><span>sudo apt-mark hold kubelet kubeadm kubectl
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="initialize-cluster-with-kubeadm-only-master-node" data-heading="Initialize Cluster with kubeadm (Only master node)" data-level="4" data-permalink="/docs/kubernetes/part01/" data-title="Part 1" -->
<h4 id="initialize-cluster-with-kubeadm-only-master-node">Initialize Cluster with kubeadm (Only master node)</h4><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kubeadm init --pod-network-cidr<span style="color:#f92672">=</span>10.244.0.0/16  --apiserver-advertise-address<span style="color:#f92672">=</span>172.16.16.100
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="execute-the-below-command-to-run-kubectl-commands-as-you-will-require-kubeconfig-file-to-connect-to-kubernetes-cluster" data-heading="Execute the below command to run kubectl commands as you will require kubeconfig file to connect to kubernetes cluster" data-level="4" data-permalink="/docs/kubernetes/part01/" data-title="Part 1" -->
<h4 id="execute-the-below-command-to-run-kubectl-commands-as-you-will-require-kubeconfig-file-to-connect-to-kubernetes-cluster">Execute the below command to run kubectl commands as you will require kubeconfig file to connect to kubernetes cluster</h4><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>mkdir -p $HOME/.kube
</span></span><span style="display:flex;"><span>sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config
</span></span><span style="display:flex;"><span>sudo chown <span style="color:#66d9ef">$(</span>id -u<span style="color:#66d9ef">)</span>:<span style="color:#66d9ef">$(</span>id -g<span style="color:#66d9ef">)</span> $HOME/.kube/config
</span></span></code></pre></div><p><a href="#what-is-a-kubeconfig-file">Click Here to know more about kubeconfig</a></p>
<!-- end-chunk -->
<!-- begin-chunk data-anchor="check-nodes-status" data-heading="Check nodes status" data-level="4" data-permalink="/docs/kubernetes/part01/" data-title="Part 1" -->
<h4 id="check-nodes-status">Check nodes status</h4><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubectl get nodes
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="install-network-addon-flannel-master-node" data-heading="Install Network Addon (flannel) (master node)" data-level="4" data-permalink="/docs/kubernetes/part01/" data-title="Part 1" -->
<h4 id="install-network-addon-flannel-master-node">Install Network Addon (flannel) (master node)</h4><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kubectl apply -f https://raw.githubusercontent.com/coreos/flannel/master/Documentation/kube-flannel.yml
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="connect-worker-node-only-worker-node" data-heading="Connect Worker Node (Only worker node)" data-level="4" data-permalink="/docs/kubernetes/part01/" data-title="Part 1" -->
<h4 id="connect-worker-node-only-worker-node">Connect Worker Node (Only worker node)</h4><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kubeadm join 172.16.16.100:6443 --token qmw5dj.ljdh8r74ce3y85ad <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>        --discovery-token-ca-cert-hash sha256:83374ec05088fa7efe9c31cce63326ae7037210ab049048ef08f8c961a048ddf
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="verification" data-heading="Verification" data-level="4" data-permalink="/docs/kubernetes/part01/" data-title="Part 1" -->
<h4 id="verification">Verification</h4><ul>
<li>check node status</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kubectl get nodes
</span></span></code></pre></div><ul>
<li>run a pod</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubectl run nginx <span style="color:#f92672">--</span>image<span style="color:#f92672">=</span>nginx
</span></span></code></pre></div><ul>
<li>check running pod</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubectl get pods <span style="color:#f92672">-</span>o wide
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="kubernetes-cluster-configurations" data-heading="Kubernetes Cluster Configurations" data-level="3" data-permalink="/docs/kubernetes/part01/" data-title="Part 1" -->
<h3 id="kubernetes-cluster-configurations">Kubernetes Cluster Configurations</h3><ul>
<li>Static Pod Manifests: /etc/kubernetes/manifests</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span><span style="color:#e6db74">/etc/</span>kubernetes<span style="color:#f92672">/</span>manifests
</span></span><span style="display:flex;"><span>  <span style="color:#960050;background-color:#1e0010">├──</span> etcd<span style="color:#f92672">.</span>yaml
</span></span><span style="display:flex;"><span>  <span style="color:#960050;background-color:#1e0010">├──</span> kube<span style="color:#f92672">-</span>apiserver<span style="color:#f92672">.</span>yaml
</span></span><span style="display:flex;"><span>  <span style="color:#960050;background-color:#1e0010">├──</span> kube<span style="color:#f92672">-</span>controller<span style="color:#f92672">-</span>manager<span style="color:#f92672">.</span>yaml
</span></span><span style="display:flex;"><span>  <span style="color:#960050;background-color:#1e0010">└──</span> kube<span style="color:#f92672">-</span>scheduler<span style="color:#f92672">.</span>yaml
</span></span></code></pre></div><ul>
<li>
<p>TLS Certificates <br>
All the components talk to each other over mTLS. Under the PKI folder, you will find all the TLS certificates and keys
<img src="/images/tls.png" alt=""></p>
</li>
<li>
<p>Kubeconfig Files<br></p>
</li>
<li>
<p>Any components that need to authenticate to the API server need the kubeconfig file.</p>
</li>
<li>
<p>All the cluster Kubeconfig files are present in the /etc/kubernetes folder (.conf files). You will find the following files.<br></p>
<ul>
<li>admin.conf</li>
<li>controller-manager.conf</li>
<li>kubelet.conf</li>
<li>scheduler.conf</li>
</ul>
</li>
<li>
<p>It contains the API server endpoint, cluster CA certificate, cluster client certificate, and other information.<br></p>
</li>
<li>
<p>The admin.conf, file, which is the admin kubeconfig file used by end users to access the API server to manage the clusters.<br></p>
</li>
<li>
<p>The Kubeconfig for the Controller manager <strong>controller-manager.conf</strong>, scheduler, and Kubelet is used for API server authentication and authorization.</p>
</li>
</ul>
<!-- end-chunk -->
<!-- begin-chunk data-anchor="kubelet-configurations" data-heading="Kubelet Configurations" data-level="3" data-permalink="/docs/kubernetes/part01/" data-title="Part 1" -->
<h3 id="kubelet-configurations">Kubelet Configurations</h3><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span>    <span style="color:#f92672">kubelet kubeconfig file</span>: <span style="color:#ae81ff">/etc/kubernetes/kubelet.conf</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">kubelet config file</span>: <span style="color:#ae81ff">/var/lib/kubelet/config.yaml</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ae81ff">EnvironmentFile=-/var/lib/kubelet/kubeadm-flags.env</span>
</span></span></code></pre></div><ul>
<li>The /var/lib/kubelet/config.yaml contains all the kubelet-related configurations. The static pod manifest location is added as part of the staticPodPath parameter.
/var/lib/kubelet/kubeadm-flags.env file contains the container runtime environment Linux socket and the infra container (pause container) image.</li>
<li>CoreDNS Configurations</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubectl get configmap <span style="color:#f92672">--</span>namespace<span style="color:#f92672">=</span>kube<span style="color:#f92672">-</span>system
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="node-related-commands" data-heading="Node Related commands" data-level="3" data-permalink="/docs/kubernetes/part01/" data-title="Part 1" -->
<h3 id="node-related-commands">Node Related commands</h3><ul>
<li>Check all nodes which are the part of kubernetes cluster</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubectl get nodes
</span></span></code></pre></div><ul>
<li>Cordon a node (prevent new pods from being scheduled)</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl cordon  &lt;node-name&gt;
</span></span></code></pre></div><ul>
<li>Uncordon a node (allow new pods to be scheduled):</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubectl uncordon <span style="color:#e6db74">&lt;node-name&gt;</span>
</span></span></code></pre></div><ul>
<li>Drain a node (evacuate all pods, reschedule them elsewhere)</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubectl drain <span style="color:#e6db74">&lt;node-name&gt;</span>
</span></span></code></pre></div><ul>
<li>Sort Nodes by CPU Capacity</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubectl get nodes <span style="color:#f92672">--</span>sort<span style="color:#f92672">-</span>by<span style="color:#f92672">=.</span>status<span style="color:#f92672">.</span>capacity<span style="color:#f92672">.</span>cpu
</span></span></code></pre></div><ul>
<li>Sort by memory</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubectl get nodes <span style="color:#f92672">--</span>sort<span style="color:#f92672">-</span>by<span style="color:#f92672">=.</span>status<span style="color:#f92672">.</span>capacity<span style="color:#f92672">.</span>memory
</span></span></code></pre></div><ul>
<li>How to label a node</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubectl label node <span style="color:#e6db74">&lt;nodename&gt;</span> key<span style="color:#f92672">=</span>value
</span></span></code></pre></div><ul>
<li>check nodes with label</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubectl get nodes <span style="color:#f92672">-</span>l key<span style="color:#f92672">=</span>value
</span></span></code></pre></div><ul>
<li>check the nodes which does not label key=value</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubectl get nodes key<span style="color:#f92672">!=</span>value
</span></span></code></pre></div><ul>
<li>Check detailed information about a node</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubectl get nodes <span style="color:#f92672">-</span>o wide
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="upgrade-kubeadm-cluster" data-heading="Upgrade Kubeadm Cluster" data-level="3" data-permalink="/docs/kubernetes/part01/" data-title="Part 1" -->
<h3 id="upgrade-kubeadm-cluster">Upgrade Kubeadm Cluster</h3><ul>
<li>
<p>Before upgrade kubernetes cluster Do not forgot to study kubernetes release</p>
</li>
<li>
<p>Check the <a href="https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.29.md" target="_blank" rel="noopener">release notes</a> before you upgrade your kubernetes cluster</p>
</li>
<li>
<p>Also drain a node and uncordon after the upgrade is successful</p>
</li>
<li>
<p>Check the upgrade plan using below commands</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kubeadm upgrade plan
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>kubectl -n kube-system get cm kubeadm-config -o yaml
</span></span></code></pre></div><ul>
<li>Check the kubeadm version available</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>apt-cache madison kubeadm
</span></span></code></pre></div><ul>
<li>Unhold the packages to be upgraded</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>apt<span style="color:#f92672">-</span>mark unhold kubelet kubectl kubeadm
</span></span></code></pre></div><ul>
<li>Upgrade the available packages</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span> apt-get update <span style="color:#f92672">&amp;&amp;</span> apt-get install -y kubelet<span style="color:#f92672">=</span>1.25.0-00    kubectl<span style="color:#f92672">=</span>1.25.0-00  kubeadm<span style="color:#f92672">=</span>1.25.0-00 
</span></span></code></pre></div><ul>
<li>Lock again the below packages</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>apt-mark hold kubelet kubectl
</span></span></code></pre></div><ul>
<li>Check new kubeadm version</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kubeadm version
</span></span></code></pre></div><ul>
<li>Upgrade the kubernetes cluster</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kubeadm upgrade apply 1.25.0
</span></span></code></pre></div><ul>
<li>Restart the services</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>systemctl daemon-reload
</span></span><span style="display:flex;"><span>systemctl restart kubelet
</span></span></code></pre></div><ul>
<li>Check the kubernetes version</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubectl version
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="kubens--kubectx" data-heading="Kubens &amp; Kubectx" data-level="3" data-permalink="/docs/kubernetes/part01/" data-title="Part 1" -->
<h3 id="kubens--kubectx">Kubens &amp; Kubectx</h3><ul>
<li>Login to master node and run the command there</li>
</ul>
<!-- end-chunk -->
<!-- begin-chunk data-anchor="install-kubens-to-switch-from-one-namespace-to-another" data-heading="Install Kubens to switch from one namespace to another" data-level="4" data-permalink="/docs/kubernetes/part01/" data-title="Part 1" -->
<h4 id="install-kubens-to-switch-from-one-namespace-to-another">Install Kubens to switch from one namespace to another</h4><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>wget https://raw.githubusercontent.com/ahmetb/kubectx/master/kubens
</span></span><span style="display:flex;"><span>chmod +x kubens
</span></span><span style="display:flex;"><span>cp kubens /bin
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="install-kubectx-to-switch-from-one-kubernetes-cluster-to-another" data-heading="Install kubectx to switch from one Kubernetes cluster to another" data-level="4" data-permalink="/docs/kubernetes/part01/" data-title="Part 1" -->
<h4 id="install-kubectx-to-switch-from-one-kubernetes-cluster-to-another">Install kubectx to switch from one Kubernetes cluster to another</h4><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>wget https://raw.githubusercontent.com/ahmetb/kubectx/master/kubectx
</span></span><span style="display:flex;"><span>chmod +x kubectx
</span></span><span style="display:flex;"><span>cp kubectx /bin
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="kubernetes-initial-commands-for-cluster-verification" data-heading="Kubernetes Initial commands for cluster verification" data-level="4" data-permalink="/docs/kubernetes/part01/" data-title="Part 1" -->
<h4 id="kubernetes-initial-commands-for-cluster-verification">Kubernetes Initial commands for cluster verification</h4><ul>
<li>How to check nodes in cluster</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubectl get nodes
</span></span></code></pre></div><ul>
<li>Cluster api info</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubectl api<span style="color:#f92672">-</span>resources
</span></span></code></pre></div><ul>
<li>Cluster info</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubect cluster<span style="color:#f92672">-</span>info
</span></span></code></pre></div><ul>
<li>Kubernetes nodes information</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubectl describe nodes <span style="color:#e6db74">&lt;nodename&gt;</span>
</span></span></code></pre></div><ul>
<li>Update worker node role as a worker</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl label node &lt;node-name&gt; kubernetes.io/role<span style="color:#f92672">=</span>worker
</span></span></code></pre></div><ul>
<li>Make a test after creating one pod</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubectl run mypod <span style="color:#f92672">--</span>image<span style="color:#f92672">=</span>nginx
</span></span></code></pre></div><ul>
<li>Check newly created pod</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubectl get pods
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="install-kubernetes-cluster-automatically" data-heading="Install kubernetes Cluster Automatically" data-level="3" data-permalink="/docs/kubernetes/part01/" data-title="Part 1" -->
<h3 id="install-kubernetes-cluster-automatically">Install kubernetes Cluster Automatically</h3><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git clone https://gitlab.com/container-and-kubernetes/kubernetes-2024.git
</span></span><span style="display:flex;"><span>cd kubernetes-2024/
</span></span><span style="display:flex;"><span>cd kubernetes-with-vagrant/
</span></span><span style="display:flex;"><span>vagrant up
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="common-kubeadm-commands" data-heading="Common Kubeadm Commands" data-level="3" data-permalink="/docs/kubernetes/part01/" data-title="Part 1" -->
<h3 id="common-kubeadm-commands">Common Kubeadm Commands</h3><ul>
<li>kubeadm init (initialize kubernetes)</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubeadm init <span style="color:#f92672">--</span>pod<span style="color:#f92672">-</span>network<span style="color:#f92672">-</span>cidr<span style="color:#f92672">=</span><span style="color:#ae81ff">192.168.0.0</span><span style="color:#f92672">/</span><span style="color:#ae81ff">16</span>
</span></span></code></pre></div><ul>
<li>kubeadm join (To join a worker node)</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubeadm join <span style="color:#e6db74">&lt;master-node-ip&gt;</span>:<span style="color:#e6db74">&lt;master-node-port&gt;</span> <span style="color:#f92672">--</span>token <span style="color:#e6db74">&lt;token&gt;</span> <span style="color:#f92672">--</span>discovery<span style="color:#f92672">-</span>token<span style="color:#f92672">-</span>ca<span style="color:#f92672">-</span>cert<span style="color:#f92672">-</span>hash <span style="color:#e6db74">&lt;hash&gt;</span>
</span></span></code></pre></div><ul>
<li>kubeadm reset( removing all installed Kubernetes components and returning it to its pre-Kubernetes state. )</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubeadm <span style="color:#66d9ef">reset</span> <span style="color:#f92672">--</span>force
</span></span></code></pre></div><ul>
<li>kubeadm upgrade (check available upgrades)</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubeadm upgrade plan
</span></span></code></pre></div><ul>
<li>kubeadm token (Token management)</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubeadm token create
</span></span></code></pre></div><ul>
<li>Print Token along with command</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubeadm token create <span style="color:#f92672">--</span><span style="color:#66d9ef">print</span><span style="color:#f92672">-</span>join<span style="color:#f92672">-</span>command
</span></span></code></pre></div><ul>
<li>kubeadm token list (Check all token along with expiration date)</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubeadm token list
</span></span></code></pre></div><ul>
<li>kubeadm token delete</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubeadm token delete <span style="color:#e6db74">&lt;token_value&gt;</span>
</span></span></code></pre></div><ul>
<li>kubeadm config migrate</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubeadm config migrate <span style="color:#f92672">--</span>old<span style="color:#f92672">-</span>config kubeadm<span style="color:#f92672">.</span>conf <span style="color:#f92672">--</span><span style="color:#66d9ef">new</span><span style="color:#f92672">-</span>config kubeadm<span style="color:#f92672">.</span>yaml
</span></span></code></pre></div><ul>
<li>kubeadm config (Print default config files)</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubeadm config <span style="color:#66d9ef">print</span> init<span style="color:#f92672">-</span>defaults
</span></span></code></pre></div><ul>
<li>kubeadm config images(List all required images)</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubeadm config images list
</span></span></code></pre></div><ul>
<li>kubeadm certs(Check certificate status)</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubeadm certs check<span style="color:#f92672">-</span>expiration
</span></span><span style="display:flex;"><span>kubeadm certs certificate<span style="color:#f92672">-</span>key
</span></span></code></pre></div><ul>
<li>kubeadm upgrade node(upgrades the kubelet and kube-proxy on a worker node to match the control plane&rsquo;s version.)</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubeadm upgrade node
</span></span></code></pre></div><p><img src="/images/Kubeadm.png" alt="kubeadm Process to bootstrap kubernetes"></p>
<!-- end-chunk -->
<!-- begin-chunk data-anchor="what-is-a-kubeconfig-file" data-heading="What is a Kubeconfig file?" data-level="3" data-permalink="/docs/kubernetes/part01/" data-title="Part 1" -->
<h3 id="what-is-a-kubeconfig-file">What is a Kubeconfig file?</h3><ul>
<li>A Kubeconfig is a YAML file with all the Kubernetes cluster details, certificates, and secret tokens to authenticate the cluster. <br></li>
<li>You might get this config file directly from the cluster administrator or from a cloud platform if you are using a managed Kubernetes cluster.</li>
<li>When you use kubectl, it uses the information in the kubeconfig file to connect to the kubernetes cluster API. The default location of the Kubeconfig file is $HOME/.kube/config</li>
<li>Example Kubeconfig File
<ul>
<li>certificate-authority-data: Cluster CA</li>
<li>server: Cluster endpoint (IP/DNS of the master node)</li>
<li>name: Cluster name</li>
<li>user: name of the user/service account.</li>
<li>token: Secret token of the user/service account.</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>apiVersion: v1
</span></span><span style="display:flex;"><span>clusters:
</span></span><span style="display:flex;"><span><span style="color:#f92672">-</span> cluster:
</span></span><span style="display:flex;"><span>    certificate<span style="color:#f92672">-</span>authority<span style="color:#f92672">-</span>data: <span style="color:#e6db74">&lt;ca-data-here&gt;</span>
</span></span><span style="display:flex;"><span>    server: https:<span style="color:#e6db74">//</span>your<span style="color:#f92672">-</span>k8s<span style="color:#f92672">-</span>cluster<span style="color:#f92672">.</span>com
</span></span><span style="display:flex;"><span>  name: <span style="color:#e6db74">&lt;cluster-name&gt;</span>
</span></span><span style="display:flex;"><span>contexts:
</span></span><span style="display:flex;"><span><span style="color:#f92672">-</span> context:
</span></span><span style="display:flex;"><span>    cluster:  <span style="color:#e6db74">&lt;cluster-name&gt;</span>
</span></span><span style="display:flex;"><span>    user:  <span style="color:#e6db74">&lt;cluster-name-user&gt;</span>
</span></span><span style="display:flex;"><span>  name:  <span style="color:#e6db74">&lt;cluster-name&gt;</span>
</span></span><span style="display:flex;"><span>current<span style="color:#f92672">-</span>context:  <span style="color:#e6db74">&lt;cluster-name&gt;</span>
</span></span><span style="display:flex;"><span>kind: Config
</span></span><span style="display:flex;"><span>preferences: {}
</span></span><span style="display:flex;"><span>users:
</span></span><span style="display:flex;"><span><span style="color:#f92672">-</span> name:  <span style="color:#e6db74">&lt;cluster-name-user&gt;</span>
</span></span><span style="display:flex;"><span>  user:
</span></span><span style="display:flex;"><span>    token: <span style="color:#e6db74">&lt;secret-token-here&gt;</span>
</span></span></code></pre></div><ul>
<li>List all cluster contexts</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubectl config get<span style="color:#f92672">-</span>contexts <span style="color:#f92672">-</span>o<span style="color:#f92672">=</span>name
</span></span></code></pre></div><ul>
<li>Set the current context</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubectl config <span style="color:#66d9ef">use</span><span style="color:#f92672">-</span>context <span style="color:#e6db74">&lt;cluster-name&gt;</span>  
</span></span></code></pre></div><ul>
<li>Using Environment variable (KUBECONFIG)</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>export KUBECONFIG<span style="color:#f92672">=&lt;</span>kubeconfig filename<span style="color:#f92672">&gt;</span>
</span></span></code></pre></div><ul>
<li>Using Kubeconfig File With Kubectl</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubectl get nodes <span style="color:#f92672">--</span>kubeconfig<span style="color:#f92672">=</span><span style="color:#e6db74">&lt;filepath&gt;</span>
</span></span></code></pre></div><ul>
<li>How to merge multiple kubeconfig into one</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>KUBECONFIG<span style="color:#f92672">=</span>config:dev_config:test_config kubectl config view <span style="color:#f92672">--</span>merge <span style="color:#f92672">--</span>flatten <span style="color:#f92672">&gt;</span> config<span style="color:#f92672">.</span><span style="color:#66d9ef">new</span>
</span></span></code></pre></div>
	
	
	
</div>


          </main>
        </div>
      </div>
      
    </div>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
    integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.min.js"
    integrity="sha512-UR25UO94eTnCVwjbXozyeVd6ZqpaAE9naiEUBK/A+QDbfSTQFhPGj5lOR6d8tsgbBk84Ggb5A3EkjsOgPRPcKA=="
    crossorigin="anonymous"></script>





<script src='/js/tabpane-persist.js'></script>




















<script src="/js/main.min.223ab2fcc7d742c1b94772c0276851c497da4343cd2d21534199ced90681e207.js" integrity="sha256-Ijqy/MfXQsG5R3LAJ2hRxJfaQ0PNLSFTQZnO2QaB4gc=" crossorigin="anonymous"></script>



<script src='/js/prism.js'></script>



  </body>
</html>