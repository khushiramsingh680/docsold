
<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.122.0">
<meta name="robots" content="index, follow">

<link rel="shortcut icon" href="/favicons/favicon.ico" >

<title>Part 3 | Documentation</title>
<meta name="description" content="

Topics
Service

CLusterIP
NodePort
LoadBalancer
Headless Service


METALLB
DNS Troubleshooting
Deployment
ReplicaSet
Daemonset
Labels and Selector …&lt;/!--&gt;&lt;/!--&gt;">
<meta property="og:title" content="Part 3" />
<meta property="og:description" content="Topics Service CLusterIP NodePort LoadBalancer Headless Service METALLB DNS Troubleshooting Deployment ReplicaSet Daemonset Labels and Selector Type of Selector Equality based Set based selector Job CronJob Metric Server HPA(pod Autoscaling) Helm Overview ServiceA Service is a method for exposing a network application that is running as one or more Pods in your cluster.
A key aim of Services in Kubernetes is that you don&rsquo;t need to modify your existing application to use an unfamiliar service discovery mechanism." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/docs/kubernetes/part03/" /><meta property="article:section" content="docs" />

<meta property="article:modified_time" content="2024-06-01T18:32:23+05:30" />

<meta itemprop="name" content="Part 3">
<meta itemprop="description" content="Topics Service CLusterIP NodePort LoadBalancer Headless Service METALLB DNS Troubleshooting Deployment ReplicaSet Daemonset Labels and Selector Type of Selector Equality based Set based selector Job CronJob Metric Server HPA(pod Autoscaling) Helm Overview ServiceA Service is a method for exposing a network application that is running as one or more Pods in your cluster.
A key aim of Services in Kubernetes is that you don&rsquo;t need to modify your existing application to use an unfamiliar service discovery mechanism.">
<meta itemprop="dateModified" content="2024-06-01T18:32:23+05:30" />
<meta itemprop="wordCount" content="1640">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Part 3"/>
<meta name="twitter:description" content="Topics Service CLusterIP NodePort LoadBalancer Headless Service METALLB DNS Troubleshooting Deployment ReplicaSet Daemonset Labels and Selector Type of Selector Equality based Set based selector Job CronJob Metric Server HPA(pod Autoscaling) Helm Overview ServiceA Service is a method for exposing a network application that is running as one or more Pods in your cluster.
A key aim of Services in Kubernetes is that you don&rsquo;t need to modify your existing application to use an unfamiliar service discovery mechanism."/>




<link rel="preload" href="/scss/main.min.723d31f72c8542b0efd4dc916a8b429bb3241885d5c0984bf341c1aad66aed50.css" as="style">
<link href="/scss/main.min.723d31f72c8542b0efd4dc916a8b429bb3241885d5c0984bf341c1aad66aed50.css" rel="stylesheet" integrity="">

<script
  src="https://code.jquery.com/jquery-3.6.0.min.js"
  integrity="sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK"
  crossorigin="anonymous"></script>
<script
  src="https://unpkg.com/lunr@2.3.9/lunr.min.js"
  integrity="sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli"
  crossorigin="anonymous"></script>
<link rel="stylesheet" href="/css/prism.css"/>
<script type="text/javascript"  src="/js/highlight-search.js"></script>
<script type="text/javascript"  src="/js/manage-side-panels.js"></script>
  </head>
  <body class="td-page highlightable">
    <header>
      
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
        <a class="navbar-brand" href="/">
		<span class="navbar-logo"><svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="217pt" height="232pt" viewBox="0 0 217 232"><g transform="translate(0.000000,232.000000) scale(0.100000,-0.100000)" fill="#000" stroke="none"><path d="M1017 2250c-397-48-698-367-731-775-9-106-3-113 66-87l55 20 11-71c6-39 10-72 9-73s-58-22-127-47c-104-37-124-48-122-64 7-37 56-150 88-205l34-56 66 25 66 26 65-72c206-226 513-322 808-252 367 88 634 417 635 784 0 43-4 77-10 77-5 0-32-9-60-20s-55-20-59-20c-5 0-12 26-16 59-4 32-20 96-36 142s-30 88-31 92c-2 5 54 29 124 55l128 46-31 55c-17 31-33 58-34 59-2 2-31-6-64-19l-61-22-23 29c-81 104-172 178-292 235-140 68-309 97-458 79zm226-299c90-24 136-46 206-101l52-41 61 20 60 20 26-31c15-17 35-44 44-59l17-28-52-19c-29-11-86-32-128-47l-76-27 24-58c26-66 43-144 43-201 0-22 2-39 5-39 2 0 27 9 55 20s55 20 60 20c17 0 10-63-14-131-127-359-580-484-862-237l-35 31-70-24-71-24-30 35c-37 43-97 164-104 212l-6 34 123 46 124 45-3 64c-2 35-5 66-7 68-2 1-27-5-55-14s-53-15-55-14c-2 2 1 29 7 59 32 179 185 352 361 409 112 36 192 39 3e2 12z"/><path d="M134 321c-77-33-95-169-29-231 19-18 36-23 71-23 40 0 51 4 75 30 50 56 47 153-5 202-26 25-80 35-112 22zm82-62c26-29 26-99 0-128-24-26-47-27-77-2-19 15-24 29-24 64 0 76 58 114 101 66z"/><path d="M1172 320c-27-12-44-52-33-82 4-12 31-32 61-47 30-14 58-34 64-43 26-43-50-76-99-44-15 10-26 12-30 6-10-16 4-29 44-40 62-17 114 13 114 65 0 35-19 53-80 81-54 23-67 46-41 72 15 15 62 16 88 2 23-12 35 3 16 19-20 17-77 23-104 11z"/><path d="M350 195V70h25c23 0 25 4 25 45v45h40c76 0 115 40 103 104-8 42-38 56-120 56h-73V195zm134 69c18-18 18-17 10-38-4-11-19-16-50-16-44 0-44 0-44 35 0 33 2 35 34 35 19 0 42-7 50-16z"/><path d="M6e2 195V70h90c83 0 90 2 90 20 0 16-8 19-62 22-63 3-63 3-66 36-3 31-2 32 36 32 36 0 39 2 34 25-4 21-10 25-38 25-30 0-34 3-34 25 0 24 2 25 65 25 58 0 65 2 65 20 0 19-7 20-90 20h-90V195z"/><path d="M850 195c0-117 1-125 20-125 17 0 19 8 22 83l3 82 55-82c41-62 61-83 78-83 22 0 22 2 22 125 0 117-1 125-20 125-17 0-19-8-22-82l-3-82-54 82c-42 65-59 82-77 82-24 0-24 0-24-125z"/><path d="M1360 195c0-104 2-125 15-125 12 0 15 13 15 60v60h65 65v-60c0-47 3-60 15-60 13 0 15 21 15 125s-2 125-15 125c-12 0-15-13-15-55v-55h-65-65v55c0 42-3 55-15 55-13 0-15-21-15-125z"/><path d="M1620 195c0-104 2-125 15-125s15 21 15 125-2 125-15 125-15-21-15-125z"/><path d="M1730 195c0-77 4-125 10-125s10 27 10 60v60h35c19 0 35 5 35 10 0 6-16 10-35 10-35 0-35 0-35 45v45h60c33 0 60 4 60 10s-30 10-70 10h-70V195z"/><path d="M1930 310c0-5 18-10 40-10h40V185c0-70 4-115 10-115s10 45 10 115v115h40c22 0 40 5 40 10 0 6-37 10-90 10s-90-4-90-10z"/></g></svg></span><span class="font-weight-bold">Documentation</span>
	</a>
	<div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
		<ul class="navbar-nav mt-2 mt-lg-0">
			
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				
				
				<a class="nav-link active" href="/docs/kubernetes/" ><i class='fas fa-binoculars'></i><span class="active">KUBERNETES DOCUMENTS</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				
				
				<a class="nav-link" href="/docs/ansible/" ><i class='fas fa-user-check'></i><span>Ansible</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				
				
				<a class="nav-link" href="/docs/azure-devops/" ><i class='fas fa-user-check'></i><span>Azure Devops</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				
				
				<a class="nav-link" href="/docs/devops/" ><i class='fas fa-user-check'></i><span>Devops </span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				
				
				<a class="nav-link" href="/docs/gitlab/" ><i class='fas fa-user-check'></i><span>Gitlab</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				
				
				<a class="nav-link" href="/docs/openshift/" ><i class='fas fa-user-check'></i><span>Openshift</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				
				
				<a class="nav-link" href="/docs/terraform/" ><i class='fas fa-user-check'></i><span>Terraform</span></a>
			</li>
			
			
			
		</ul>
	</div>
	<div class="navbar-nav d-none d-lg-block">
<form class="d-flex align-items-center">
  <input type="search"
  class="form-control td-search-input"
  placeholder="&#xf002; Search this site…"
  aria-label="Search this site…"
  autocomplete="off"
  
  data-offline-search-index-json-src="/offline-search-index.d81df5ea3c42d7ddf1c407fed2af5e96.json"
  data-offline-search-base-href="/"
  data-offline-search-max-results="20">
</form>
</div>
</nav>

      <div class="manage-panels">
    <button type="button" class="button-left" id="left-panel-manager" title="Hide sidebar">""</button>
    <button type="button" class="button-right" id="right-panel-manager" title="Hide sidebar">""</button>
</div>
    </header>
    <div class="container-fluid td-outer">
      <div class="td-main autonumbering">
        <div class="row flex-xl-nowrap">
          <aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            
<div id="td-sidebar-menu" class="td-sidebar__inner">
  <div id="content-mobile">
  <form class="td-sidebar__search d-flex align-items-center">
    
<form class="d-flex align-items-center">
  <input type="search"
  class="form-control td-search-input"
  placeholder="&#xf002; Search this site…"
  aria-label="Search this site…"
  autocomplete="off"
  
  data-offline-search-index-json-src="/offline-search-index.d81df5ea3c42d7ddf1c407fed2af5e96.json"
  data-offline-search-base-href="/"
  data-offline-search-max-results="20">
</form>

    <button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type="button" data-toggle="collapse" data-target="#td-section-nav" aria-controls="td-docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    </button>
  </form>
  </div>
  <div id="content-desktop"></div>
  <nav class="collapse td-sidebar-nav foldable-nav" id="td-section-nav">
    <ul class="td-sidebar-nav__section pr-md-3 ul-0">
      <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-docs-li">
  <a href="/docs/" title="DEVOPS Documents hub" class="align-left pl-0 td-sidebar-link td-sidebar-link__section tree-root" id="m-docs"><span class="">Docs</span></a>
  <ul class="ul-1">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-docskubernetes-li">
  <input type="checkbox" id="m-docskubernetes-check" checked/>
  <label for="m-docskubernetes-check"><a href="/docs/kubernetes/" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-docskubernetes"><i class="fas fa-compass"></i><span class="">KUBERNETES DOCUMENTS</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docskubernetespart01-li">
  <input type="checkbox" id="m-docskubernetespart01-check"/>
  <label for="m-docskubernetespart01-check"><a href="/docs/kubernetes/part01/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docskubernetespart01"><span class="">Part 1</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docskubernetespart02-li">
  <input type="checkbox" id="m-docskubernetespart02-check"/>
  <label for="m-docskubernetespart02-check"><a href="/docs/kubernetes/part02/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docskubernetespart02"><span class="">Part 2</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docskubernetespart03-li">
  <input type="checkbox" id="m-docskubernetespart03-check"/>
  <label for="m-docskubernetespart03-check"><a href="/docs/kubernetes/part03/" class="align-left pl-0  active td-sidebar-link td-sidebar-link__page" id="m-docskubernetespart03"><span class="td-sidebar-nav-active-item">Part 3</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docskubernetespart04-li">
  <input type="checkbox" id="m-docskubernetespart04-check"/>
  <label for="m-docskubernetespart04-check"><a href="/docs/kubernetes/part04/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docskubernetespart04"><span class="">Part 4</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docskubernetespart05-li">
  <input type="checkbox" id="m-docskubernetespart05-check"/>
  <label for="m-docskubernetespart05-check"><a href="/docs/kubernetes/part05/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docskubernetespart05"><span class="">Part 5</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docskubernetesdocsmiscellaneouscontainerbasics-li">
  <input type="checkbox" id="m-docskubernetesdocsmiscellaneouscontainerbasics-check"/>
  <label for="m-docskubernetesdocsmiscellaneouscontainerbasics-check"><a href="/docs/kubernetes/docs/miscellaneous/containerbasics/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docskubernetesdocsmiscellaneouscontainerbasics"><span class="">Container Basics</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docskubernetesdocsmiscellaneoushelm-overview-li">
  <input type="checkbox" id="m-docskubernetesdocsmiscellaneoushelm-overview-check"/>
  <label for="m-docskubernetesdocsmiscellaneoushelm-overview-check"><a href="/docs/kubernetes/docs/miscellaneous/helm-overview/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docskubernetesdocsmiscellaneoushelm-overview"><span class="">Helm Overview</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docskubernetesdocsmiscellaneouskubernetes-rbac-li">
  <input type="checkbox" id="m-docskubernetesdocsmiscellaneouskubernetes-rbac-check"/>
  <label for="m-docskubernetesdocsmiscellaneouskubernetes-rbac-check"><a href="/docs/kubernetes/docs/miscellaneous/kubernetes-rbac/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docskubernetesdocsmiscellaneouskubernetes-rbac"><span class="">Kubernetes RBAC</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docskubernetesdocsmiscellaneouskubernetes-on-centos-li">
  <input type="checkbox" id="m-docskubernetesdocsmiscellaneouskubernetes-on-centos-check"/>
  <label for="m-docskubernetesdocsmiscellaneouskubernetes-on-centos-check"><a href="/docs/kubernetes/docs/miscellaneous/kubernetes-on-centos/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docskubernetesdocsmiscellaneouskubernetes-on-centos"><span class="">Kubernetes-on-Centos</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docskubernetesdocsmiscellaneouskuberneteshardway-li">
  <input type="checkbox" id="m-docskubernetesdocsmiscellaneouskuberneteshardway-check"/>
  <label for="m-docskubernetesdocsmiscellaneouskuberneteshardway-check"><a href="/docs/kubernetes/docs/miscellaneous/kuberneteshardway/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docskubernetesdocsmiscellaneouskuberneteshardway"><span class="">Kubernets Installation From Scatch on rocky 9</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docskubernetesdocsmiscellaneousminio-li">
  <input type="checkbox" id="m-docskubernetesdocsmiscellaneousminio-check"/>
  <label for="m-docskubernetesdocsmiscellaneousminio-check"><a href="/docs/kubernetes/docs/miscellaneous/minio/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docskubernetesdocsmiscellaneousminio"><span class="">The Object Store for AI Data Infrastructure</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsansible-li">
  <input type="checkbox" id="m-docsansible-check"/>
  <label for="m-docsansible-check"><a href="/docs/ansible/" title="Configuration Management Tool" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-docsansible"><i class="fas fa-user-check"></i><span class="">Ansible</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsazure-devops-li">
  <input type="checkbox" id="m-docsazure-devops-check"/>
  <label for="m-docsazure-devops-check"><a href="/docs/azure-devops/" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-docsazure-devops"><i class="fas fa-user-check"></i><span class="">Azure Devops</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsazure-devopsaks-deployment-li">
  <input type="checkbox" id="m-docsazure-devopsaks-deployment-check"/>
  <label for="m-docsazure-devopsaks-deployment-check"><a href="/docs/azure-devops/aks-deployment/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsazure-devopsaks-deployment"><span class="">AKS Deployment</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsazure-devopsazure-container-registry-li">
  <input type="checkbox" id="m-docsazure-devopsazure-container-registry-check"/>
  <label for="m-docsazure-devopsazure-container-registry-check"><a href="/docs/azure-devops/azure-container-registry/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsazure-devopsazure-container-registry"><span class="">Azure Container Registry</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsazure-devopsazure-devopsagent-li">
  <input type="checkbox" id="m-docsazure-devopsazure-devopsagent-check"/>
  <label for="m-docsazure-devopsazure-devopsagent-check"><a href="/docs/azure-devops/azure-devopsagent/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsazure-devopsazure-devopsagent"><span class="">Azure Devops Pipeline Agent</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsazure-devopsazure-devops-pipeline-li">
  <input type="checkbox" id="m-docsazure-devopsazure-devops-pipeline-check"/>
  <label for="m-docsazure-devopsazure-devops-pipeline-check"><a href="/docs/azure-devops/azure-devops-pipeline/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsazure-devopsazure-devops-pipeline"><span class="">Azure Devops Pipeline Basics</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsazure-devopsazure-dns-li">
  <input type="checkbox" id="m-docsazure-devopsazure-dns-check"/>
  <label for="m-docsazure-devopsazure-dns-check"><a href="/docs/azure-devops/azure-dns/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsazure-devopsazure-dns"><span class="">Azure DNS</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsazure-devopscertmanager-li">
  <input type="checkbox" id="m-docsazure-devopscertmanager-check"/>
  <label for="m-docsazure-devopscertmanager-check"><a href="/docs/azure-devops/certmanager/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsazure-devopscertmanager"><span class="">Cert Manager</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsazure-devopsingresscontroller-li">
  <input type="checkbox" id="m-docsazure-devopsingresscontroller-check"/>
  <label for="m-docsazure-devopsingresscontroller-check"><a href="/docs/azure-devops/ingresscontroller/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsazure-devopsingresscontroller"><span class="">IngressController</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsdevops-li">
  <input type="checkbox" id="m-docsdevops-check"/>
  <label for="m-docsdevops-check"><a href="/docs/devops/" title="Devops" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-docsdevops"><i class="fas fa-user-check"></i><span class="">Devops </span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsdevopsdevops-advance-li">
  <input type="checkbox" id="m-docsdevopsdevops-advance-check"/>
  <label for="m-docsdevopsdevops-advance-check"><a href="/docs/devops/devops-advance/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsdevopsdevops-advance"><span class="">Devops for Advance Level</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsdevopsdevopsl1-li">
  <input type="checkbox" id="m-docsdevopsdevopsl1-check"/>
  <label for="m-docsdevopsdevopsl1-check"><a href="/docs/devops/devopsl1/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsdevopsdevopsl1"><span class="">Devops for Begineers</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsdevopselk-stack-li">
  <input type="checkbox" id="m-docsdevopselk-stack-check"/>
  <label for="m-docsdevopselk-stack-check"><a href="/docs/devops/elk-stack/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsdevopselk-stack"><span class="">ELK statck </span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsdevopspostgresql-li">
  <input type="checkbox" id="m-docsdevopspostgresql-check"/>
  <label for="m-docsdevopspostgresql-check"><a href="/docs/devops/postgresql/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsdevopspostgresql"><span class="">Postgres Installation </span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsgitlab-li">
  <input type="checkbox" id="m-docsgitlab-check"/>
  <label for="m-docsgitlab-check"><a href="/docs/gitlab/" title="Project Management Tool" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-docsgitlab"><i class="fas fa-user-check"></i><span class="">Gitlab</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsterraform-li">
  <input type="checkbox" id="m-docsterraform-check"/>
  <label for="m-docsterraform-check"><a href="/docs/terraform/" title="Infrastracture as a Code" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-docsterraform"><i class="fas fa-user-check"></i><span class="">Terraform</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsterraformdiscussions-li">
  <input type="checkbox" id="m-docsterraformdiscussions-check"/>
  <label for="m-docsterraformdiscussions-check"><a href="/docs/terraform/discussions/" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-docsterraformdiscussions"><span class="">Discussions</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsterraformterraform-with-aws-li">
  <input type="checkbox" id="m-docsterraformterraform-with-aws-check"/>
  <label for="m-docsterraformterraform-with-aws-check"><a href="/docs/terraform/terraform-with-aws/" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-docsterraformterraform-with-aws"><span class="">Terraform with AWS</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsterraformterraform-with-azure-li">
  <input type="checkbox" id="m-docsterraformterraform-with-azure-check"/>
  <label for="m-docsterraformterraform-with-azure-check"><a href="/docs/terraform/terraform-with-azure/" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-docsterraformterraform-with-azure"><span class="">Terraform with Azure</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsterraformterraform-with-gcp-li">
  <input type="checkbox" id="m-docsterraformterraform-with-gcp-check"/>
  <label for="m-docsterraformterraform-with-gcp-check"><a href="/docs/terraform/terraform-with-gcp/" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-docsterraformterraform-with-gcp"><span class="">Terraform with Google Cloud</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsopenshift-li">
  <input type="checkbox" id="m-docsopenshift-check"/>
  <label for="m-docsopenshift-check"><a href="/docs/openshift/" title="Redhat Container Platform" class="align-left pl-0  td-sidebar-link td-sidebar-link__section" id="m-docsopenshift"><i class="fas fa-user-check"></i><span class="">Openshift</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsopenshiftopenshift-baremetalmd-li">
  <input type="checkbox" id="m-docsopenshiftopenshift-baremetalmd-check"/>
  <label for="m-docsopenshiftopenshift-baremetalmd-check"><a href="/docs/openshift/openshift-baremetal.md/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsopenshiftopenshift-baremetalmd"><span class="">Openshift Baremetal</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsopenshiftocpsetup-li">
  <input type="checkbox" id="m-docsopenshiftocpsetup-check"/>
  <label for="m-docsopenshiftocpsetup-check"><a href="/docs/openshift/ocpsetup/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsopenshiftocpsetup"><span class="">Openshift Installation and Upgradation</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsopenshiftprerequisites-li">
  <input type="checkbox" id="m-docsopenshiftprerequisites-check"/>
  <label for="m-docsopenshiftprerequisites-check"><a href="/docs/openshift/prerequisites./" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsopenshiftprerequisites"><span class="">OpenShift Prerequisites</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsopenshiftopenshifttasks-li">
  <input type="checkbox" id="m-docsopenshiftopenshifttasks-check"/>
  <label for="m-docsopenshiftopenshifttasks-check"><a href="/docs/openshift/openshifttasks/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsopenshiftopenshifttasks"><span class="">OpenShift Tasks</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsopenshifttoc-li">
  <input type="checkbox" id="m-docsopenshifttoc-check"/>
  <label for="m-docsopenshifttoc-check"><a href="/docs/openshift/toc/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsopenshifttoc"><span class="">Openshift TOC</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsopenshiftpart-1-li">
  <input type="checkbox" id="m-docsopenshiftpart-1-check"/>
  <label for="m-docsopenshiftpart-1-check"><a href="/docs/openshift/part-1/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsopenshiftpart-1"><span class="">Part 1</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsopenshiftpart-2-li">
  <input type="checkbox" id="m-docsopenshiftpart-2-check"/>
  <label for="m-docsopenshiftpart-2-check"><a href="/docs/openshift/part-2/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsopenshiftpart-2"><span class="">Part 2</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsopenshiftopenid-azuread-li">
  <input type="checkbox" id="m-docsopenshiftopenid-azuread-check"/>
  <label for="m-docsopenshiftopenid-azuread-check"><a href="/docs/openshift/openid-azuread/" class="align-left pl-0  td-sidebar-link td-sidebar-link__page" id="m-docsopenshiftopenid-azuread"><span class="">Use and configure OpenID connect with Azure AD</span></a></label>
  
</li>
  </ul>
</li>
  </ul>
</li>
    </ul>
  </nav>
</div>

          </aside>
          <aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none">
            

    <div class="td-page-meta ml-2 pb-1 pt-2 mb-0">
        <div class="toc-title">Actions</div>
        <a href="/edit/master/content/docs/kubernetes/Part03.md" target="_blank" rel="noopener"><i class="fa fa-edit fa-fw"></i> Contribute to this page</a>
        <a href="/issues/new?issue%5Btitle=%f0%9f%93%83%20docs:%20update%20page%20docs/kubernetes/Part03.md" target="_blank" rel="noopener"><i class="fab fa-gitlab fa-fw"></i> Create a documentation issue</a>
       
    </div>

            
<div class="td-page-meta ml-2 pb-1 pt-2 mb-0 right-menu-toc">

    
        
            <div class="toc-title">Table of content</div>
            <div class="td-toc"><nav id="TableOfContents">
  <ul>
    <li><a href="#topics">Topics</a></li>
    <li><a href="#service">Service</a>
      <ul>
        <li><a href="#what-are-the-types-of-kubernetes-services">What are the types of Kubernetes services?</a>
          <ul>
            <li><a href="#create-a-pod">Create a Pod</a></li>
            <li><a href="#create-a-service-of-typeclusterip">Create a service of Type(ClusterIp)</a></li>
            <li><a href="#create-a-service-of-type-clusterip">Create a service of Type (ClusterIP)</a></li>
            <li><a href="#login-to-a-pod-and-try-to-access-app">Login to a pod and try to access app</a></li>
            <li><a href="#create-a-svc-of-type-nodeport">Create a svc of type nodePort</a></li>
            <li><a href="#access-your-app-from-the-ips-of-the-node">Access your app from the ips of the node</a></li>
            <li><a href="#create-a-type-of-service-loadbalancer">Create a type of service (LoadBalancer)</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#metallb-a-loadbalancer-solution-for-onprem-kubernetes">Metallb A LoadBalancer Solution for OnPrem Kubernetes</a></li>
    <li><a href="#deploying-metallbhttpsmetallbuniversetf">Deploying <a href="https://metallb.universe.tf/">Metallb</a></a>
      <ul>
        <li><a href="#steps">Steps:</a></li>
        <li><a href="#metric-server">Metric Server</a></li>
        <li><a href="#steps-1">Steps</a></li>
      </ul>
    </li>
    <li><a href="#hpa-pod-autoscaling">HPA (Pod Autoscaling)</a>
      <ul>
        <li><a href="#steps-2">Steps</a></li>
        <li><a href="#prerequisites">Prerequisites</a></li>
      </ul>
    </li>
    <li><a href="#deployment">Deployment</a></li>
    <li><a href="#job">job</a>
      <ul>
        <li><a href="#kubernetes-job-example">Kubernetes Job Example</a></li>
      </ul>
    </li>
    <li><a href="#overview">Overview</a></li>
    <li><a href="#example-job-yaml">Example Job YAML</a>
      <ul>
        <li><a href="#job-creation-yaml">Job Creation yaml</a></li>
        <li><a href="#cronjob">cronjob</a></li>
        <li><a href="#kubernetes-cronjob-example">Kubernetes CronJob Example</a></li>
      </ul>
    </li>
    <li><a href="#overview-1">Overview</a></li>
    <li><a href="#example-cronjob-yaml">Example CronJob YAML</a></li>
    <li><a href="#replicaset">Replicaset</a>
      <ul>
        <li><a href="#replicasset-yaml-example">ReplicasSet Yaml example</a></li>
      </ul>
    </li>
    <li><a href="#daemonsethttpskubernetesiodocsconceptsworkloadscontrollersdaemonset"><a href="https://kubernetes.io/docs/concepts/workloads/controllers/daemonset/">Daemonset</a></a>
      <ul>
        <li><a href="#dns-troubleshooting">DNS Troubleshooting:</a></li>
        <li><a href="#dns-for-services-and-pods">DNS for Services and Pods</a></li>
      </ul>
    </li>
  </ul>
</nav></div>
        
    

</div>
          </aside>
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            
  

            <nav aria-label="breadcrumb" class="td-breadcrumbs">
  <ol class="breadcrumb">
  <li class="breadcrumb-item">
    <a href="/docs/">Docs</a>
  </li>
  <li class="breadcrumb-item">
    <a href="/docs/kubernetes/">KUBERNETES DOCUMENTS</a>
  </li>
  <li class="breadcrumb-item active" aria-current="page">
    <a href="/docs/kubernetes/part03/">Part 3</a>
  </li>
  </ol>
</nav>
            
<div class="td-content">
	<h1>Part 3</h1>
	
	<header class="article-meta">
		

  
    


  
    


  

		
	</header>    
	<!-- end-chunk -->
<!-- begin-chunk data-anchor="topics" data-heading="Topics" data-level="2" data-permalink="/docs/kubernetes/part03/" data-title="Part 3" -->
<h2 id="topics">Topics</h2><ul>
<li>Service
<ul>
<li>CLusterIP</li>
<li>NodePort</li>
<li>LoadBalancer</li>
<li>Headless Service</li>
</ul>
</li>
<li><a href="#deploying-metallb">METALLB</a></li>
<li><a href="#dns-troubleshooting">DNS Troubleshooting</a></li>
<li>Deployment</li>
<li>ReplicaSet</li>
<li>Daemonset</li>
<li>Labels and Selector</li>
<li>Type of <a href="https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/" target="_blank" rel="noopener">Selector</a>
<ul>
<li>Equality based</li>
<li>Set based selector</li>
</ul>
</li>
<li>Job</li>
<li>CronJob</li>
<li><a href="#metric-server">Metric Server</a></li>
<li>HPA(pod Autoscaling)</li>
<li><a href="./docs/miscellaneous/Helm.md">Helm Overview</a></li>
</ul>
<!-- end-chunk -->
<!-- begin-chunk data-anchor="service" data-heading="Service" data-level="2" data-permalink="/docs/kubernetes/part03/" data-title="Part 3" -->
<h2 id="service">Service</h2><p>A Service is a method for exposing a network application that is running as one or more Pods in your cluster.</p>
<ul>
<li>A key aim of Services in Kubernetes is that you don&rsquo;t need to modify your existing application to use an unfamiliar service discovery mechanism.</li>
<li>A Kubernetes service is a logical abstraction for a deployed group of pods in a cluster</li>
</ul>
<!-- end-chunk -->
<!-- begin-chunk data-anchor="what-are-the-types-of-kubernetes-services" data-heading="What are the types of Kubernetes services?" data-level="3" data-permalink="/docs/kubernetes/part03/" data-title="Part 3" -->
<h3 id="what-are-the-types-of-kubernetes-services">What are the types of Kubernetes services?</h3><ul>
<li><strong>ClusterIP</strong>: Exposes a service which is only accessible from within the cluster.</li>
<li><strong>NodePort</strong>: Exposes a service via a static port on each node’s IP. NodePorts are in the 30000-32767 range by default</li>
<li><strong>LoadBalancer</strong>: Exposes the service via the cloud provider’s load balancer.</li>
<li><strong>ExternalName</strong> Maps a service to a predefined externalName field by returning a value for the CNAME record.</li>
</ul>
<!-- end-chunk -->
<!-- begin-chunk data-anchor="create-a-pod" data-heading="Create a Pod" data-level="4" data-permalink="/docs/kubernetes/part03/" data-title="Part 3" -->
<h4 id="create-a-pod">Create a Pod</h4><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kubectl run myapp --image<span style="color:#f92672">=</span>nginx
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="create-a-service-of-typeclusterip" data-heading="Create a service of Type(ClusterIp)" data-level="4" data-permalink="/docs/kubernetes/part03/" data-title="Part 3" -->
<h4 id="create-a-service-of-typeclusterip">Create a service of Type(ClusterIp)</h4><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl apply -f - <span style="color:#e6db74">&lt;&lt;EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">apiVersion: v1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">kind: Service
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">metadata:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: myapp-service
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">spec:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  selector:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    run: myapp
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  ports:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    - protocol: TCP
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      port: 80
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      targetPort: 80
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="create-a-service-of-type-clusterip" data-heading="Create a service of Type (ClusterIP)" data-level="4" data-permalink="/docs/kubernetes/part03/" data-title="Part 3" -->
<h4 id="create-a-service-of-type-clusterip">Create a service of Type (ClusterIP)</h4><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubectl expose pod<span style="color:#f92672">/</span>myapp <span style="color:#f92672">--</span>port <span style="color:#ae81ff">80</span> <span style="color:#f92672">--</span>target<span style="color:#f92672">-</span>port<span style="color:#f92672">=</span><span style="color:#ae81ff">80</span> <span style="color:#f92672">--</span>name cip
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="login-to-a-pod-and-try-to-access-app" data-heading="Login to a pod and try to access app" data-level="4" data-permalink="/docs/kubernetes/part03/" data-title="Part 3" -->
<h4 id="login-to-a-pod-and-try-to-access-app">Login to a pod and try to access app</h4><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kubectl exec -it myapp sh
</span></span><span style="display:flex;"><span>curl cip
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="create-a-svc-of-type-nodeport" data-heading="Create a svc of type nodePort" data-level="4" data-permalink="/docs/kubernetes/part03/" data-title="Part 3" -->
<h4 id="create-a-svc-of-type-nodeport">Create a svc of type nodePort</h4><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kubectl expose pod/myapp --port <span style="color:#ae81ff">80</span> --target-port<span style="color:#f92672">=</span><span style="color:#ae81ff">80</span> --name myapp-np --type<span style="color:#f92672">=</span>NodePort
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="access-your-app-from-the-ips-of-the-node" data-heading="Access your app from the ips of the node" data-level="4" data-permalink="/docs/kubernetes/part03/" data-title="Part 3" -->
<h4 id="access-your-app-from-the-ips-of-the-node">Access your app from the ips of the node</h4><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>172.16.16.100:port
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="create-a-type-of-service-loadbalancer" data-heading="Create a type of service (LoadBalancer)" data-level="4" data-permalink="/docs/kubernetes/part03/" data-title="Part 3" -->
<h4 id="create-a-type-of-service-loadbalancer">Create a type of service (LoadBalancer)</h4><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubectl expose pod<span style="color:#f92672">/</span>myapp <span style="color:#f92672">--</span>port<span style="color:#f92672">=</span><span style="color:#ae81ff">80</span> <span style="color:#f92672">--</span>type<span style="color:#f92672">=</span>LoadBalancer <span style="color:#f92672">--</span>name<span style="color:#f92672">=</span>lb
</span></span></code></pre></div><ul>
<li>Check the endpoint
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl get ep
</span></span></code></pre></div></li>
<li>Achieve the blue green</li>
<li>Delete a service</li>
<li>Exchange the service selector</li>
</ul>
<!-- end-chunk -->
<!-- begin-chunk data-anchor="metallb-a-loadbalancer-solution-for-onprem-kubernetes" data-heading="Metallb A LoadBalancer Solution for OnPrem Kubernetes" data-level="2" data-permalink="/docs/kubernetes/part03/" data-title="Part 3" -->
<h2 id="metallb-a-loadbalancer-solution-for-onprem-kubernetes">Metallb A LoadBalancer Solution for OnPrem Kubernetes</h2><!-- end-chunk -->
<!-- begin-chunk data-anchor="deploying-metallbhttpsmetallbuniversetf" data-heading="Deploying <a href=\"https://metallb.universe.tf/\" target=\"_blank\" rel=\"noopener\">Metallb</a>" data-level="2" data-permalink="/docs/kubernetes/part03/" data-title="Part 3" -->
<h2 id="deploying-metallbhttpsmetallbuniversetf">Deploying <a href="https://metallb.universe.tf/" target="_blank" rel="noopener">Metallb</a></h2><!-- end-chunk -->
<!-- begin-chunk data-anchor="steps" data-heading="Steps:" data-level="3" data-permalink="/docs/kubernetes/part03/" data-title="Part 3" -->
<h3 id="steps">Steps:</h3><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>git clone https:<span style="color:#e6db74">//gi</span>tlab<span style="color:#f92672">.</span>com<span style="color:#e6db74">/container-and-kubernetes/</span>kubernetes<span style="color:#f92672">-</span><span style="color:#ae81ff">2024</span><span style="color:#f92672">.</span>git
</span></span><span style="display:flex;"><span>cd kubernetes<span style="color:#f92672">-</span><span style="color:#ae81ff">2024</span><span style="color:#f92672">/</span>
</span></span><span style="display:flex;"><span>cd metallb
</span></span><span style="display:flex;"><span>kubectl apply <span style="color:#f92672">-</span>f  <span style="color:#ae81ff">01</span>_metallb<span style="color:#f92672">.</span>yaml
</span></span><span style="display:flex;"><span>kubectl apply <span style="color:#f92672">-</span>f <span style="color:#ae81ff">02</span>_metallb<span style="color:#f92672">-</span>config<span style="color:#f92672">.</span>yaml
</span></span></code></pre></div><ul>
<li>Make a test after creating a service</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl apply -f 03_test-load-balancer.yaml
</span></span></code></pre></div><ul>
<li>Check the service</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl get svc
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="metric-server" data-heading="Metric Server" data-level="3" data-permalink="/docs/kubernetes/part03/" data-title="Part 3" -->
<h3 id="metric-server">Metric Server</h3><p><a href="https://github.com/kubernetes-sigs/metrics-server" target="_blank" rel="noopener">Metric Server Github Link</a></p>
<!-- end-chunk -->
<!-- begin-chunk data-anchor="steps-1" data-heading="Steps" data-level="3" data-permalink="/docs/kubernetes/part03/" data-title="Part 3" -->
<h3 id="steps-1">Steps</h3><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git clone https://gitlab.com/container-and-kubernetes/kubernetes-2024.git
</span></span><span style="display:flex;"><span>cd kubernetes-2024
</span></span><span style="display:flex;"><span>cd  metricserver
</span></span><span style="display:flex;"><span>kubectl apply -f .
</span></span></code></pre></div><ul>
<li>wait for few mins and check if the metric server pods are up</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubectl top nodes
</span></span><span style="display:flex;"><span>kubectl top pods
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="hpa-pod-autoscaling" data-heading="HPA (Pod Autoscaling)" data-level="2" data-permalink="/docs/kubernetes/part03/" data-title="Part 3" -->
<h2 id="hpa-pod-autoscaling">HPA (Pod Autoscaling)</h2><!-- end-chunk -->
<!-- begin-chunk data-anchor="steps-2" data-heading="Steps" data-level="3" data-permalink="/docs/kubernetes/part03/" data-title="Part 3" -->
<h3 id="steps-2">Steps</h3><!-- end-chunk -->
<!-- begin-chunk data-anchor="prerequisites" data-heading="Prerequisites" data-level="3" data-permalink="/docs/kubernetes/part03/" data-title="Part 3" -->
<h3 id="prerequisites">Prerequisites</h3><ul>
<li>Resources should be defined for a pod</li>
<li>Metric Api has to be available .</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git clone https://gitlab.com/container-and-kubernetes/kubernetes-2024.git
</span></span><span style="display:flex;"><span>cd kubernetes-2024
</span></span><span style="display:flex;"><span>cd  hpa
</span></span><span style="display:flex;"><span>kubectl apply -f deployment.yaml
</span></span><span style="display:flex;"><span>kubectl apply -f service.yaml
</span></span><span style="display:flex;"><span>kubectl apply -f hpa.yaml
</span></span></code></pre></div><ul>
<li>check hpa</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl get hpa
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="deployment" data-heading="Deployment" data-level="2" data-permalink="/docs/kubernetes/part03/" data-title="Part 3" -->
<h2 id="deployment">Deployment</h2><ul>
<li>Create Deployment</li>
<li>Update secret for a deployment</li>
<li>Set resource block for a deployment</li>
<li>Set Environment Variables in Deployment</li>
<li>Perform Rollout</li>
<li>Perform Rollback</li>
<li>Rolled back to another revision</li>
<li>Check the max rs for a deployment</li>
<li>Deployment strategy</li>
<li>Create a deployment</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl create deployment myapp-deployment --image<span style="color:#f92672">=</span>nginx
</span></span></code></pre></div><ul>
<li>Create a Svc for above Deployment</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kubectl expose deployment/myapp-deployment --port <span style="color:#ae81ff">80</span> --type<span style="color:#f92672">=</span>LoadBalancer
</span></span></code></pre></div><ul>
<li>Deployment with Yaml file</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl apply -f - <span style="color:#e6db74">&lt;&lt;EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">apiVersion: apps/v1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">kind: Deployment
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">metadata:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: myapp-deployment
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">spec:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  replicas: 3  # Number of desired replicas
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  selector:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    matchLabels:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      app: myapp
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  template:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    metadata:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      labels:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        app: myapp
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    spec:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      containers:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      - name: nginx-container
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        image: nginx:latest
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        ports:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        - containerPort: 80
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span></code></pre></div><ul>
<li>Perform Rollout</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl set image deployment/myapp-deployment nginx<span style="color:#f92672">=</span>httpd
</span></span></code></pre></div><ul>
<li>Check rollout status</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl rollout status deployment myapp-deployment
</span></span></code></pre></div><ul>
<li>Check the rollout history</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl rollout history deployment myapp-deployment
</span></span></code></pre></div><ul>
<li>Perform Rollback</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubectl rollout undo deployment myapp<span style="color:#f92672">-</span>deployment
</span></span></code></pre></div><ul>
<li>Perform scale up/down</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl scale deployment  myapp-deployment --replicas<span style="color:#f92672">=</span><span style="color:#ae81ff">5</span>
</span></span></code></pre></div><ul>
<li>Set Environment Variables in Deployment</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl set env deployment/myapp-deployment KEY<span style="color:#f92672">=</span>VALUE
</span></span></code></pre></div><ul>
<li>Set Resources</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubectl set resources deployment<span style="color:#f92672">/</span>myapp<span style="color:#f92672">-</span>deployment <span style="color:#f92672">--</span>limits<span style="color:#f92672">=</span>cpu<span style="color:#f92672">=</span><span style="color:#ae81ff">200</span>m,memory<span style="color:#f92672">=</span><span style="color:#ae81ff">512</span>Mi <span style="color:#f92672">--</span>requests<span style="color:#f92672">=</span>cpu<span style="color:#f92672">=</span><span style="color:#ae81ff">100</span>m,memory<span style="color:#f92672">=</span><span style="color:#ae81ff">256</span>Mi
</span></span></code></pre></div><ul>
<li>Update SA for a deployment</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubectl set serviceaccount deployment<span style="color:#f92672">/</span>myapp<span style="color:#f92672">-</span>deployment <span style="color:#66d9ef">my</span><span style="color:#f92672">-</span>service<span style="color:#f92672">-</span>account
</span></span></code></pre></div><ul>
<li>Change the revision history</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">revisionHistoryLimit</span>: <span style="color:#ae81ff">20</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">replicas</span>: <span style="color:#ae81ff">3</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">selector</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">matchLabels</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">app</span>: <span style="color:#ae81ff">your-app</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">template</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">labels</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">app</span>: <span style="color:#ae81ff">your-app</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">containers</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">your-container</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">image</span>: <span style="color:#ae81ff">your-image</span>
</span></span></code></pre></div><ul>
<li>How to check if the change has been accepted</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>kubectl get deployment &lt;deployment-name&gt; -o<span style="color:#f92672">=</span>jsonpath<span style="color:#f92672">=</span><span style="color:#960050;background-color:#1e0010">&#39;</span><span style="color:#f92672">{</span>.spec.revisionHistoryLimit<span style="color:#f92672">}</span>
</span></span></code></pre></div><ul>
<li>How to use record option with rollback depoloyment</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl rollout undo deployment/&lt;deployment-name&gt; --to-revision<span style="color:#f92672">=</span>&lt;revision-number&gt; --record
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="job" data-heading="job" data-level="2" data-permalink="/docs/kubernetes/part03/" data-title="Part 3" -->
<h2 id="job">job</h2><!-- end-chunk -->
<!-- begin-chunk data-anchor="kubernetes-job-example" data-heading="Kubernetes Job Example" data-level="3" data-permalink="/docs/kubernetes/part03/" data-title="Part 3" -->
<h3 id="kubernetes-job-example">Kubernetes Job Example</h3><!-- end-chunk -->
<!-- begin-chunk data-anchor="overview" data-heading="Overview" data-level="2" data-permalink="/docs/kubernetes/part03/" data-title="Part 3" -->
<h2 id="overview">Overview</h2><p>A Kubernetes Job creates one or more Pods and ensures that a specified number of them successfully terminate. As pods successfully complete, the Job tracks the successful completions. When a specified number of successful completions is reached, the Job itself is complete.</p>
<!-- end-chunk -->
<!-- begin-chunk data-anchor="example-job-yaml" data-heading="Example Job YAML" data-level="2" data-permalink="/docs/kubernetes/part03/" data-title="Part 3" -->
<h2 id="example-job-yaml">Example Job YAML</h2><p>Below is an example YAML file for a Kubernetes Job that runs a simple task.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">batch/v1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">Job</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">example-job</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">template</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">containers</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">example</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">image</span>: <span style="color:#ae81ff">busybox</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">command</span>: [<span style="color:#e6db74">&#34;sh&#34;</span>, <span style="color:#e6db74">&#34;-c&#34;</span>, <span style="color:#e6db74">&#34;echo Hello, Kubernetes! &amp;&amp; sleep 30&#34;</span>]
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">restartPolicy</span>: <span style="color:#ae81ff">Never</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">backoffLimit</span>: <span style="color:#ae81ff">4</span>
</span></span></code></pre></div><ul>
<li>Create a job</li>
<li>Create a cronjob</li>
<li>Clean up finished jobs automatically
<ul>
<li>ttlSecondsAfterFinished: 100</li>
</ul>
</li>
<li>check different option in cronjob as job
<ul>
<li>backoffLimit</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>Max pod restart in <span style="color:#66d9ef">case</span> of failure
</span></span></code></pre></div><ul>
<li>completions</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>How many containers of the job are created one after another
</span></span></code></pre></div><ul>
<li>parallelism:</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>it defines how many pods will be created at once 
</span></span></code></pre></div></li>
</ul>
<!-- end-chunk -->
<!-- begin-chunk data-anchor="job-creation-yaml" data-heading="Job Creation yaml" data-level="3" data-permalink="/docs/kubernetes/part03/" data-title="Part 3" -->
<h3 id="job-creation-yaml">Job Creation yaml</h3><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl apply -f - <span style="color:#e6db74">&lt;&lt;EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">apiVersion: batch/v1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">kind: Job
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">metadata:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: pi
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">spec:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  template:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    spec:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      containers:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      - name: pi
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        image: busybox
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        command: [&#34;/bin/echo&#34;, &#34;Hello World&#34;]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      restartPolicy: Never
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  backoffLimit: 4
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="cronjob" data-heading="cronjob" data-level="3" data-permalink="/docs/kubernetes/part03/" data-title="Part 3" -->
<h3 id="cronjob">cronjob</h3><!-- end-chunk -->
<!-- begin-chunk data-anchor="kubernetes-cronjob-example" data-heading="Kubernetes CronJob Example" data-level="3" data-permalink="/docs/kubernetes/part03/" data-title="Part 3" -->
<h3 id="kubernetes-cronjob-example">Kubernetes CronJob Example</h3><!-- end-chunk -->
<!-- begin-chunk data-anchor="overview-1" data-heading="Overview" data-level="2" data-permalink="/docs/kubernetes/part03/" data-title="Part 3" -->
<h2 id="overview-1">Overview</h2><p>A Kubernetes CronJob creates Jobs on a repeating schedule. The CronJob resource is like a Job, but it is run periodically based on a specified schedule.</p>
<!-- end-chunk -->
<!-- begin-chunk data-anchor="example-cronjob-yaml" data-heading="Example CronJob YAML" data-level="2" data-permalink="/docs/kubernetes/part03/" data-title="Part 3" -->
<h2 id="example-cronjob-yaml">Example CronJob YAML</h2><p>Below is an example YAML file for a Kubernetes CronJob that runs a simple task every minute.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">batch/v1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">CronJob</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">example-cronjob</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">schedule</span>: <span style="color:#e6db74">&#34;*/1 * * * *&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">jobTemplate</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">template</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">containers</span>:
</span></span><span style="display:flex;"><span>          - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">example</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">image</span>: <span style="color:#ae81ff">busybox</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">command</span>: [<span style="color:#e6db74">&#34;sh&#34;</span>, <span style="color:#e6db74">&#34;-c&#34;</span>, <span style="color:#e6db74">&#34;echo Hello, Kubernetes! &amp;&amp; sleep 30&#34;</span>]
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">restartPolicy</span>: <span style="color:#ae81ff">OnFailure</span>
</span></span></code></pre></div><ul>
<li>Create a cronjob</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl apply -f - <span style="color:#e6db74">&lt;&lt;EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">apiVersion: batch/v1beta1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">kind: CronJob
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">metadata:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: simple-cronjob
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">spec:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  schedule: &#34;*/1 * * * *&#34;  # Run every minute
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  jobTemplate:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    spec:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      template:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        spec:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          containers:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          - name: simple-cronjob-container
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            image: busy
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span></code></pre></div><ul>
<li>Example 2</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl apply -f - <span style="color:#e6db74">&lt;&lt;EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">apiVersion: batch/v1beta1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">kind: CronJob
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">metadata:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: simple-cronjob
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">spec:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  schedule: &#34;*/1 * * * *&#34;  # Run every minute
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  jobTemplate:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    spec:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      template:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        spec:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          containers:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          - name: simple-cronjob-container
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            image: busybox
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            command: [&#34;echo&#34;, &#34;Hello, Kubernetes!&#34;]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span></code></pre></div><ul>
<li>Example 3</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kubectl apply -f - <span style="color:#e6db74">&lt;&lt;EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">apiVersion: batch/v1beta1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">kind: CronJob
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">metadata:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: parallel-cronjob
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">spec:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  schedule: &#34;0 */6 * * *&#34;  # Run every 6 hours
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  jobTemplate:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    spec:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      completions: 2
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      parallelism: 1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      template:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        spec:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          containers:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          - name: parallel-cronjob-container
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            image: busybox
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            command: [&#34;echo&#34;, &#34;Running parallel cronjob&#34;]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span></code></pre></div><ul>
<li>Example 4</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kubectl apply -f - <span style="color:#e6db74">&lt;&lt;EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">apiVersion: batch/v1beta1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">kind: CronJob
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">metadata:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: cronjob-volume-mounts
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">spec:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  schedule: &#34;*/5 * * * *&#34;  # Run every 5 minutes
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  jobTemplate:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    spec:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      template:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        spec:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          containers:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          - name: cronjob-volume-mounts-container
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            image: busybox
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            command: [&#34;/bin/sh&#34;, &#34;-c&#34;]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            args: [&#34;echo Hello &gt; /data/hello.txt&#34;]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            volumeMounts:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            - name: data-volume
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">              mountPath: /data
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          volumes:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          - name: data-volume
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            emptyDir: {}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span></code></pre></div><ul>
<li>Cronjob/job with imperative way</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl create job myjob --image<span style="color:#f92672">=</span>busybox --command -- echo <span style="color:#e6db74">&#34;Hello, Kubernetes!&#34;</span>
</span></span><span style="display:flex;"><span>kubectl create cronjob mycronjob --image<span style="color:#f92672">=</span>busybox --schedule<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;*/5 * * * *&#34;</span> --command -- echo <span style="color:#e6db74">&#34;Scheduled Job&#34;</span>
</span></span></code></pre></div><ul>
<li>Suspend an active Job:</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubectl patch job<span style="color:#f92672">/</span>myjob <span style="color:#f92672">--</span>type<span style="color:#f92672">=</span>strategic <span style="color:#f92672">--</span>patch <span style="color:#e6db74">&#39;{&#34;spec&#34;:{&#34;suspend&#34;:true}}&#39;</span>
</span></span></code></pre></div><ul>
<li>Resume a suspended Job:</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubectl patch job<span style="color:#f92672">/</span>myjob <span style="color:#f92672">--</span>type<span style="color:#f92672">=</span>strategic <span style="color:#f92672">--</span>patch <span style="color:#e6db74">&#39;{&#34;spec&#34;:{&#34;suspend&#34;:false}}&#39;</span>
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="replicaset" data-heading="Replicaset" data-level="2" data-permalink="/docs/kubernetes/part03/" data-title="Part 3" -->
<h2 id="replicaset">Replicaset</h2><ul>
<li>Create a replicaset</li>
<li>Scale Replicaset</li>
<li>Check the image used for replicaset</li>
<li>Change the image for a rs</li>
<li>Create a service for rs</li>
<li>Forward the port of a rs</li>
<li>Test if the app is opening</li>
</ul>
<!-- end-chunk -->
<!-- begin-chunk data-anchor="replicasset-yaml-example" data-heading="ReplicasSet Yaml example" data-level="3" data-permalink="/docs/kubernetes/part03/" data-title="Part 3" -->
<h3 id="replicasset-yaml-example">ReplicasSet Yaml example</h3><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kubectl apply -f - <span style="color:#e6db74">&lt;&lt;EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">apiVersion: apps/v1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">kind: ReplicaSet
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">metadata:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: my-replicaset
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">spec:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  replicas: 3
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  selector:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    matchLabels:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      app: myapp
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  template:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    metadata:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      labels:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        app: myapp
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    spec:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      containers:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      - name: myapp-container
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        image: nginx
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span></code></pre></div><ul>
<li>View Replicaset</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubectl get replicasets
</span></span><span style="display:flex;"><span>kubectl get rs
</span></span></code></pre></div><ul>
<li>Scale up/down a replicaset</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubectl scale replicaset <span style="color:#66d9ef">my</span><span style="color:#f92672">-</span>replicaset <span style="color:#f92672">--</span>replicas<span style="color:#f92672">=</span><span style="color:#ae81ff">5</span>
</span></span></code></pre></div><ul>
<li>Create a service for Replicaset</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl apply -f - <span style="color:#e6db74">&lt;&lt;EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">apiVersion: v1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">kind: Service
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">metadata:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: my-service
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">spec:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  selector:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    app: myapp
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  ports:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - protocol: TCP
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    port: 80
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    targetPort: 8080
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  type: LoadBalancer
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span></code></pre></div><ul>
<li>configure port forward for replicaset</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl port-forward replicaset/my-replicaset 8080:80
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="daemonsethttpskubernetesiodocsconceptsworkloadscontrollersdaemonset" data-heading="<a href=\"https://kubernetes.io/docs/concepts/workloads/controllers/daemonset/\" target=\"_blank\" rel=\"noopener\">Daemonset</a>" data-level="2" data-permalink="/docs/kubernetes/part03/" data-title="Part 3" -->
<h2 id="daemonsethttpskubernetesiodocsconceptsworkloadscontrollersdaemonset"><a href="https://kubernetes.io/docs/concepts/workloads/controllers/daemonset/" target="_blank" rel="noopener">Daemonset</a></h2><p>A DaemonSet ensures that all (or some) Nodes run a copy of a Pod. As nodes are added to the cluster, Pods are added to them. As nodes are removed from the cluster, those Pods are garbage collected. Deleting a DaemonSet will clean up the Pods it created.</p>
<ul>
<li>Some typical uses of a DaemonSet are:
<ul>
<li>running a cluster storage daemon on every node</li>
<li>running a logs collection daemon on every node</li>
<li>running a node monitoring daemon on every node</li>
</ul>
</li>
<li>Create a daemonset</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kubectl apply -f - <span style="color:#e6db74">&lt;&lt;EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">apiVersion: apps/v1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">kind: DaemonSet
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">metadata:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> name: fluentd-elasticsearch
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> namespace: kube-system
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> labels:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   k8s-app: fluentd-logging
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">spec:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> selector:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   matchLabels:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">     name: fluentd-elasticsearch
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> template:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   metadata:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">     labels:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">       name: fluentd-elasticsearch
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   spec:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">     tolerations:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">     # these tolerations are to have the daemonset runnable on control plane nodes
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">     # remove them if your control plane nodes should not run pods
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">     - key: node-role.kubernetes.io/control-plane
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">       operator: Exists
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">       effect: NoSchedule
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">     - key: node-role.kubernetes.io/master
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">       operator: Exists
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">       effect: NoSchedule
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">     containers:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">     - name: fluentd-elasticsearch
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">       image: quay.io/fluentd_elasticsearch/fluentd:v2.5.2
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">       resources:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">         limits:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">           memory: 200Mi
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">         requests:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">           cpu: 100m
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">           memory: 200Mi
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">       volumeMounts:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">       - name: varlog
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">         mountPath: /var/log
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">     # it may be desirable to set a high priority class to ensure that a DaemonSet Pod
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">     # preempts running Pods
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">     # priorityClassName: important
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">     terminationGracePeriodSeconds: 30
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">     volumes:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">     - name: varlog
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">       hostPath:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">         path: /var/log
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span></code></pre></div><ul>
<li>Check the daemonset</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubectl get ds
</span></span></code></pre></div><ul>
<li>test if the daemonset is as expected.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubectl get pods <span style="color:#f92672">-</span>n kube<span style="color:#f92672">-</span>system <span style="color:#f92672">-</span>o wide <span style="color:#f92672">|</span>grep <span style="color:#f92672">-</span>i fluentd<span style="color:#f92672">-</span>elasticsearch
</span></span></code></pre></div><ul>
<li>check the pod if they are creating on all nodes</li>
</ul>
<!-- end-chunk -->
<!-- begin-chunk data-anchor="dns-troubleshooting" data-heading="DNS Troubleshooting:" data-level="3" data-permalink="/docs/kubernetes/part03/" data-title="Part 3" -->
<h3 id="dns-troubleshooting">DNS Troubleshooting:</h3><p><a href="https://kubernetes.io/docs/tasks/administer-cluster/dns-debugging-resolution/" target="_blank" rel="noopener"> Follow this for DNS Troubleshooting</a></p>
<ul>
<li>Create a simple Pod to use as a test environment
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kubectl apply -f - <span style="color:#e6db74">&lt;&lt;EOF
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">apiVersion: v1
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">kind: Pod
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">metadata:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  name: dnsutils
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  namespace: default
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">spec:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  containers:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  - name: dnsutils
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    image: registry.k8s.io/e2e-test-images/jessie-dnsutils:1.3
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    command:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      - sleep
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      - &#34;infinity&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    imagePullPolicy: IfNotPresent
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  restartPolicy: Always
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span></code></pre></div></li>
<li>Run nslookup for kuberntes cluster</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubectl exec <span style="color:#f92672">-</span>i <span style="color:#f92672">-</span>t dnsutils <span style="color:#f92672">--</span> nslookup kubernetes<span style="color:#f92672">.</span>default
</span></span></code></pre></div><ul>
<li>Check the local DNS configuration first</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubectl exec <span style="color:#f92672">-</span>ti dnsutils <span style="color:#f92672">--</span> cat <span style="color:#e6db74">/etc/</span>resolv<span style="color:#f92672">.</span>conf
</span></span></code></pre></div><ul>
<li>if you get some error  Check if the DNS pod is running</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubectl get pods <span style="color:#f92672">--</span>namespace<span style="color:#f92672">=</span>kube<span style="color:#f92672">-</span>system <span style="color:#f92672">-</span>l k8s<span style="color:#f92672">-</span>app<span style="color:#f92672">=</span>kube<span style="color:#f92672">-</span>dns
</span></span></code></pre></div><ul>
<li>Check for errors in the DNS pod</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span> kubectl logs <span style="color:#f92672">--</span>namespace<span style="color:#f92672">=</span>kube<span style="color:#f92672">-</span>system <span style="color:#f92672">-</span>l k8s<span style="color:#f92672">-</span>app<span style="color:#f92672">=</span>kube<span style="color:#f92672">-</span>dns
</span></span></code></pre></div><ul>
<li>Is DNS service up?</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubectl get svc <span style="color:#f92672">--</span>namespace<span style="color:#f92672">=</span>kube<span style="color:#f92672">-</span>system
</span></span></code></pre></div><ul>
<li>Are DNS endpoints exposed?</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-t" data-lang="t"><span style="display:flex;"><span>kubectl get endpoints kube<span style="color:#f92672">-</span>dns <span style="color:#f92672">--</span>namespace<span style="color:#f92672">=</span>kube<span style="color:#f92672">-</span>system
</span></span></code></pre></div><!-- end-chunk -->
<!-- begin-chunk data-anchor="dns-for-services-and-pods" data-heading="DNS for Services and Pods" data-level="3" data-permalink="/docs/kubernetes/part03/" data-title="Part 3" -->
<h3 id="dns-for-services-and-pods">DNS for Services and Pods</h3><ul>
<li>Kubernetes creates DNS records for Services and Pods.</li>
<li>You can contact Services with consistent DNS names instead of IP addresses.</li>
<li>Services defined in the cluster are assigned DNS names.</li>
<li>By default, a client Pod&rsquo;s DNS search list includes the Pod&rsquo;s own namespace and the cluster&rsquo;s default domain.</li>
</ul>

	
	
	
</div>


          </main>
        </div>
      </div>
      
    </div>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
    integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.min.js"
    integrity="sha512-UR25UO94eTnCVwjbXozyeVd6ZqpaAE9naiEUBK/A+QDbfSTQFhPGj5lOR6d8tsgbBk84Ggb5A3EkjsOgPRPcKA=="
    crossorigin="anonymous"></script>





<script src='/js/tabpane-persist.js'></script>




















<script src="/js/main.min.223ab2fcc7d742c1b94772c0276851c497da4343cd2d21534199ced90681e207.js" integrity="sha256-Ijqy/MfXQsG5R3LAJ2hRxJfaQ0PNLSFTQZnO2QaB4gc=" crossorigin="anonymous"></script>



<script src='/js/prism.js'></script>



  </body>
</html>